import{aS as A,P as S,az as H,ab as I,a7 as y,M as O,ag as M,J as U,A as N}from"./3iSoGi4ic-DV-GuiCp.js";import{M as R}from"./3iSoGi4ic-Fx-BY70c.js";import{M as z}from"./3iSoGi4ic-CdSqfJMx.js";import{M as F}from"./3iSoGi4ic-BwSG5_YJ.js";import{b as W,m as h,c as b,a as x,z as T,f as g,i as v,h as s,p as n,B as l,C as j,D as o,E as i,t as r,R as C,l as J,F as L,A as q}from"./3iSoGi4ic-D0mTJ0Mu.js";import"./3iSoGi4ic-B1GPmOGN.js";import"./3iSoGi4ic-D98_HDRS.js";import"./3iSoGi4ic-Dv7rS4og.js";const G={class:"_spacer",style:{"--MI_SPACER-w":"800px"}},K={class:"_gaps_m"},Q={class:"_gaps_m"},X={class:"_gaps_s"},ue=W({__name:"invites",setup(Y){const{model:u,def:$}=A({items:[{label:"Tutte",value:"all"},{label:"Inutilizzato",value:"unused"},{label:"Utilizzato",value:"used"},{label:"Scaduto",value:"expired"}],initialValue:"all"}),{model:m,def:D}=A({items:[{label:`${"Data di creazione"} (${"Aumenta"})`,value:"+createdAt"},{label:`${"Data di creazione"} (${"Diminuisce"})`,value:"-createdAt"},{label:`${"Usato alle"} (${"Aumenta"})`,value:"+usedAt"},{label:`${"Usato alle"} (${"Diminuisce"})`,value:"-usedAt"}],initialValue:"+createdAt"}),f=h(new S("admin/invite/list",{limit:10,computedParams:b(()=>({type:u.value,sort:m.value})),offsetMode:!0})),_=x(""),p=x(!0),V=x(1);async function E(){const c={expiresAt:p.value?null:_.value,count:V.value},t=await U("admin/invite/create",c);N({type:"success",title:"Inviti generati",text:t.map(d=>d.code).join(`
`)}),t.forEach(d=>f.prepend(d))}function P(c){f.removeItem(c)}const w=b(()=>[]),B=b(()=>[]);return H(()=>({title:"Invita",icon:"ti ti-user-plus"})),(c,t)=>{const d=T("PageWithHeader");return v(),g(d,{actions:w.value,tabs:B.value},{default:s(()=>[n("div",G,[n("div",K,[l(R,{expanded:!1},{icon:s(()=>[...t[5]||(t[5]=[n("i",{class:"ti ti-plus"},null,-1)])]),label:s(()=>[o(i("Genera codice di invito"),1)]),default:s(()=>[n("div",Q,[l(I,{modelValue:p.value,"onUpdate:modelValue":t[0]||(t[0]=a=>p.value=a)},{label:s(()=>[o(i("Senza scadenza"),1)]),_:1},8,["modelValue"]),p.value?j("",!0):(v(),g(y,{key:0,modelValue:_.value,"onUpdate:modelValue":t[1]||(t[1]=a=>_.value=a),type:"datetime-local"},{label:s(()=>[o(i("Scadenza"),1)]),_:1},8,["modelValue"])),l(y,{modelValue:V.value,"onUpdate:modelValue":t[2]||(t[2]=a=>V.value=a),type:"number",min:1},{label:s(()=>[o(i("Conteggio inviti"),1)]),_:1},8,["modelValue"]),l(O,{primary:"",rounded:"",onClick:E},{default:s(()=>[o(i("Crea"),1)]),_:1})])]),_:1}),n("div",{class:"xm94E"},[l(M,{modelValue:r(u),"onUpdate:modelValue":t[3]||(t[3]=a=>C(u)?u.value=a:null),items:r($),class:"xeiHl"},{label:s(()=>[o(i("Stato"),1)]),_:1},8,["modelValue","items","class"]),l(M,{modelValue:r(m),"onUpdate:modelValue":t[4]||(t[4]=a=>C(m)?m.value=a:null),items:r(D),class:"xeiHl"},{label:s(()=>[o(i("Ordina per"),1)]),_:1},8,["modelValue","items","class"])],2),l(z,{paginator:r(f)},{default:s(({items:a})=>[n("div",X,[(v(!0),J(L,null,q(a,k=>(v(),g(F,{key:k.id,invite:k,onDeleted:P,moderator:""},null,8,["invite"]))),128))])]),_:1},8,["paginator"])])])]),_:1},8,["actions","tabs"])}}});export{ue as default};

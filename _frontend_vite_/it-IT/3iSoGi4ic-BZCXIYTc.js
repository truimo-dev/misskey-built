import{aW as F,b7 as L,x as H,aF as re,b as Y,J as R,U as ee,aH as de,l as ue,ai as ve,aS as pe,ag as me,az as fe}from"./3iSoGi4ic-DV-GuiCp.js";import{b as M,u as P,e as E,l as g,i as u,c as U,g as ye,x as ne,D as b,E as T,t as x,a as f,z as C,k as te,f as $,C as S,j as I,v as se,p as e,B as r,T as j,h as y,F as ae,A as oe,m as ce,o as _e,R as ge,Z as he,n as be,H as ke}from"./3iSoGi4ic-D0mTJ0Mu.js";import{i as Z,u as q,C as O,c as X,a as K}from"./3iSoGi4ic-CqmhgU-Q.js";import{M as xe}from"./3iSoGi4ic-Cv8Ag6ce.js";import{a as G}from"./3iSoGi4ic-BPp9MNgd.js";import{M as $e}from"./3iSoGi4ic-Cj3FgKaq.js";import{_ as W}from"./3iSoGi4ic-Dy0PONm0.js";import{_ as Me}from"./3iSoGi4ic-8TpncZSx.js";import{_ as we}from"./3iSoGi4ic-atZAPWr2.js";import{M as D}from"./3iSoGi4ic-DtDbNQ4_.js";import"./3iSoGi4ic-B1GPmOGN.js";import"./3iSoGi4ic-D98_HDRS.js";import"./3iSoGi4ic-CS6W3O_2.js";const le=M({__name:"overview.pie",props:{data:{}},setup(h){Z();const t=h,l=P("chartEl"),{handler:m}=q({position:"middle"});let p=null;return E(()=>{l.value!=null&&(p=new O(l.value,{type:"doughnut",data:{labels:t.data.map(s=>s.name),datasets:[{backgroundColor:t.data.map(s=>s.color??"#000"),borderColor:getComputedStyle(window.document.documentElement).getPropertyValue("--MI_THEME-panel"),borderWidth:2,hoverOffset:0,data:t.data.map(s=>s.value)}]},options:{layout:{padding:{left:16,right:16,top:16,bottom:16}},onClick:s=>{if(s.native==null)return;const v=p.getElementsAtEventForMode(s.native,"nearest",{intersect:!0},!1)[0];v&&t.data[v.index].onClick!=null&&t.data[v.index].onClick()},plugins:{legend:{display:!1},tooltip:{enabled:!1,mode:"index",animation:{duration:0},external:m}}}}))}),(s,v)=>(u(),g("canvas",{ref_key:"chartEl",ref:l},null,512))}}),z=M({__name:"MkNumberDiff",props:{value:{}},setup(h){const t=h,l=U(()=>t.value>0),m=U(()=>t.value<0),p=U(()=>t.value===0);return(s,v)=>(u(),g("span",{class:ye(["ceaaebcd",{xbVOO:l.value,xl16J:m.value,xoSsf:p.value}])},[ne(s.$slots,"before"),b(T(l.value?"+":"")+T(x(F)(h.value)),1),ne(s.$slots,"after")],2))}});const Ce={key:0,class:"pies"},Ae={class:"pie deliver _panel"},De={class:"pie inbox _panel"},Se={key:1,class:"items"},Pe={class:"item _panel sub"},Re={class:"body"},Ee={key:0,class:"value"},Te={class:"item _panel pub"},Ie={class:"body"},Fe={key:0,class:"value"},Le=M({__name:"overview.federation",setup(h){const t=f(null),l=f(null),m=f(null),p=f(null),s=f(null),v=f(null),o=f(!0);return q(),E(async()=>{const d=await L("charts/federation",{limit:2,span:"day"});m.value=d.pubActive[0],p.value=d.pubActive[0]-d.pubActive[1],s.value=d.subActive[0],v.value=d.subActive[0]-d.subActive[1],L("federation/stats",{limit:10}).then(n=>{t.value=[...n.topSubInstances.map(i=>({name:i.host,color:i.themeColor,value:i.followersCount,onClick:()=>{H(`/instance-info/${i.host}`)}})),{name:"(other)",color:"#80808080",value:n.otherFollowersCount}],l.value=[...n.topPubInstances.map(i=>({name:i.host,color:i.themeColor,value:i.followingCount,onClick:()=>{H(`/instance-info/${i.host}`)}})),{name:"(other)",color:"#80808080",value:n.otherFollowingCount}]}),o.value=!1}),(d,n)=>{const i=C("MkLoading"),k=te("tooltip");return u(),g("div",null,[o.value?(u(),$(i,{key:0})):S("",!0),I(e("div",{class:"xbuql"},[t.value&&l.value?(u(),g("div",Ce,[e("div",Ae,[n[0]||(n[0]=e("div",{class:"title"},"Sub",-1)),r(le,{data:t.value,class:"chart"},null,8,["data"]),n[1]||(n[1]=e("div",{class:"subTitle"},"Top 10",-1))]),e("div",De,[n[2]||(n[2]=e("div",{class:"title"},"Pub",-1)),r(le,{data:l.value,class:"chart"},null,8,["data"]),n[3]||(n[3]=e("div",{class:"subTitle"},"Top 10",-1))])])):S("",!0),o.value?S("",!0):(u(),g("div",Se,[e("div",Pe,[n[5]||(n[5]=e("div",{class:"icon"},[e("i",{class:"ti ti-world-download"})],-1)),e("div",Re,[s.value!=null?(u(),g("div",Ee,[b(T(x(F)(s.value))+" ",1),v.value!=null?I((u(),$(z,{key:0,class:"diff",value:v.value},null,8,["value"])),[[k,"Giornaliero"]]):S("",!0)])):S("",!0),n[4]||(n[4]=e("div",{class:"label"},"Sub",-1))])]),e("div",Te,[n[7]||(n[7]=e("div",{class:"icon"},[e("i",{class:"ti ti-world-upload"})],-1)),e("div",Ie,[m.value!=null?(u(),g("div",Fe,[b(T(x(F)(m.value))+" ",1),p.value!=null?I((u(),$(z,{key:0,class:"diff",value:p.value},null,8,["value"])),[[k,"Giornaliero"]]):S("",!0)])):S("",!0),n[6]||(n[6]=e("div",{class:"label"},"Pub",-1))])])]))],2),[[se,!o.value]])])}}});const qe=M({__name:"overview.instances",setup(h){const t=f([]),l=f(!0);return re(async()=>{const p=await R("federation/instances",{sort:"+latestRequestReceivedAt",limit:6});t.value=p,l.value=!1},1e3*60,{immediate:!0,afterMounted:!0}),(p,s)=>{const v=C("MkLoading"),o=C("MkA"),d=te("tooltip");return u(),g("div",null,[r(j,{name:x(Y).s.animation?"_transition_zoom":"",mode:"out-in"},{default:y(()=>[l.value?(u(),$(v,{key:0})):(u(),g("div",{key:1,class:"xrc0r"},[(u(!0),g(ae,null,oe(t.value,(n,i)=>I((u(),$(o,{key:n.id,to:`/instance-info/${n.host}`,class:"xtsrO"},{default:y(()=>[r(xe,{instance:n},null,8,["instance"])]),_:2},1032,["to","class"])),[[d,`${n.name}
${n.host}
${n.softwareName} ${n.softwareVersion}`,void 0,{mfm:!0,noDelay:!0}]])),128))],2))]),_:1},8,["name"])])}}});const B=M({__name:"overview.queue.chart",props:{type:{}},setup(h,{expose:t}){Z();const l=h,m=P("chartEl"),{handler:p}=q();let s=null;function v(i){if(!(s==null||s.data.labels==null)){for(const k of i)s.data.labels.push(""),s.data.datasets[0].data.push(k),s.data.datasets[0].data.length>100&&(s.data.labels.shift(),s.data.datasets[0].data.shift());s.update()}}function o(i){s==null||s.data.labels==null||(s.data.labels.push(""),s.data.datasets[0].data.push(i),s.data.datasets[0].data.length>100&&(s.data.labels.shift(),s.data.datasets[0].data.shift()),s.update())}const d=l.type==="process"?"Process":l.type==="active"?"Active":l.type==="delayed"?"Delayed":l.type==="waiting"?"Waiting":"?",n=l.type==="process"?"#00E396":l.type==="active"?"#00BCD4":l.type==="delayed"?"#E53935":l.type==="waiting"?"#FFB300":"?";return E(()=>{if(m.value==null)return;const i=ee.s.darkMode?"rgba(255, 255, 255, 0.2)":"rgba(0, 0, 0, 0.2)";s=new O(m.value,{type:"line",data:{labels:[],datasets:[{label:d,pointRadius:0,tension:.3,borderWidth:2,borderJoinStyle:"round",borderColor:n,backgroundColor:G(n,.2),fill:!0,data:[]}]},options:{aspectRatio:2.5,layout:{padding:{left:0,right:0,top:0,bottom:0}},scales:{x:{grid:{display:!1},ticks:{display:!1,maxTicksLimit:10}},y:{min:0,grid:{}}},interaction:{intersect:!1},plugins:{legend:{display:!1},tooltip:{enabled:!1,mode:"index",animation:{duration:0},external:p}}},plugins:[X(i)]})}),t({setData:v,pushData:o}),(i,k)=>(u(),g("canvas",{ref_key:"chartEl",ref:m},null,512))}}),We={class:"_table status"},Ue={class:"_row"},Oe={class:"_cell",style:{"text-align":"center"}},Ne={class:"_cell",style:{"text-align":"center"}},Ve={class:"_cell",style:{"text-align":"center"}},Je={class:"_cell",style:{"text-align":"center"}},Be={class:"charts"},He={class:"chart"},Xe={class:"chart"},ze={class:"chart"},Ye={class:"chart"},ie=M({__name:"overview.queue",props:{domain:{}},setup(h){const t=ce(de().useChannel("queueStats")),l=f(0),m=f(0),p=f(0),s=f(0),v=P("chartProcess"),o=P("chartActive"),d=P("chartDelayed"),n=P("chartWaiting"),i=h;function k(a){l.value=a[i.domain].activeSincePrevTick,m.value=a[i.domain].active,p.value=a[i.domain].delayed,s.value=a[i.domain].waiting,v.value?.pushData(a[i.domain].activeSincePrevTick),o.value?.pushData(a[i.domain].active),d.value?.pushData(a[i.domain].delayed),n.value?.pushData(a[i.domain].waiting)}function _(a){const c=[],w=[],A=[],V=[];for(const J of[...a].reverse())c.push(J[i.domain].activeSincePrevTick),w.push(J[i.domain].active),A.push(J[i.domain].delayed),V.push(J[i.domain].waiting);v.value?.setData(c),o.value?.setData(w),d.value?.setData(A),n.value?.setData(V)}return E(()=>{t.on("stats",k),t.on("statsLog",_),t.send("requestLog",{id:ue(),length:100})}),_e(()=>{t.off("stats",k),t.off("statsLog",_),t.dispose()}),(a,c)=>(u(),g("div",{class:"xt8IS"},[e("div",We,[e("div",Ue,[e("div",Oe,[c[0]||(c[0]=e("div",{class:"_label"},"Process",-1)),b(T(x(F)(l.value)),1)]),e("div",Ne,[c[1]||(c[1]=e("div",{class:"_label"},"Active",-1)),b(T(x(F)(m.value)),1)]),e("div",Ve,[c[2]||(c[2]=e("div",{class:"_label"},"Waiting",-1)),b(T(x(F)(s.value)),1)]),e("div",Je,[c[3]||(c[3]=e("div",{class:"_label"},"Delayed",-1)),b(T(x(F)(p.value)),1)])])]),e("div",Be,[e("div",He,[c[4]||(c[4]=e("div",{class:"title"},"Process",-1)),r(B,{ref_key:"chartProcess",ref:v,type:"process"},null,512)]),e("div",Xe,[c[5]||(c[5]=e("div",{class:"title"},"Active",-1)),r(B,{ref_key:"chartActive",ref:o,type:"active"},null,512)]),e("div",ze,[c[6]||(c[6]=e("div",{class:"title"},"Delayed",-1)),r(B,{ref_key:"chartDelayed",ref:d,type:"delayed"},null,512)]),e("div",Ye,[c[7]||(c[7]=e("div",{class:"title"},"Waiting",-1)),r(B,{ref_key:"chartWaiting",ref:n,type:"waiting"},null,512)])])],2))}});const je={class:"charts _panel"},Ze={class:"chart"},Qe={class:"chart"},Q=50,Ke=M({__name:"overview.ap-requests",setup(h){Z();const t=P("chartEl"),l=P("chartEl2"),m=f(!0),{handler:p}=q(),{handler:s}=q();return E(async()=>{if(t.value==null||l.value==null)return;const v=new Date,o=c=>{const w=v.getFullYear(),A=v.getMonth(),V=v.getDate();return new Date(w,A,V-c)},d=c=>c.map((w,A)=>({x:o(A).getTime(),y:w})),n=c=>c.map((w,A)=>({x:o(A).getTime(),y:-w})),i=await R("charts/ap-request",{limit:Q,span:"day"}),k=ee.s.darkMode?"rgba(255, 255, 255, 0.2)":"rgba(0, 0, 0, 0.2)",_="#87e000",a="#ff4400";Math.max(...i.deliverSucceeded),Math.max(...i.deliverFailed),new O(t.value,{type:"line",data:{datasets:[{parsing:!1,label:"Out: Succ",data:d(i.deliverSucceeded).slice().reverse(),tension:.3,pointRadius:0,borderWidth:2,borderColor:_,borderJoinStyle:"round",borderRadius:4,backgroundColor:G(_,.35),fill:!0,clip:8},{parsing:!1,label:"Out: Fail",data:n(i.deliverFailed).slice().reverse(),tension:.3,pointRadius:0,borderWidth:2,borderColor:a,borderJoinStyle:"round",borderRadius:4,backgroundColor:G(a,.35),fill:!0,clip:8}]},options:{aspectRatio:2.5,layout:{padding:{left:0,right:8,top:0,bottom:0}},scales:{x:{type:"time",stacked:!0,offset:!1,time:{unit:"day"},grid:{display:!0},ticks:{display:!0,maxRotation:0,autoSkipPadding:16},min:o(Q).getTime()},y:{position:"left",suggestedMax:10,grid:{display:!0},ticks:{display:!0,callback:(c,w,A)=>c<0?-c:c}}},interaction:{intersect:!1,mode:"index"},elements:{point:{hoverRadius:5,hoverBorderWidth:2}},plugins:{legend:{display:!1},tooltip:{enabled:!1,mode:"index",animation:{duration:0},external:p,callbacks:{label:c=>`${c.dataset.label}: ${Math.abs(c.parsed.y)}`}},gradient:K}},plugins:[X(k)]}),new O(l.value,{type:"bar",data:{datasets:[{parsing:!1,label:"In",data:d(i.inboxReceived).slice().reverse(),tension:.3,pointRadius:0,borderWidth:0,borderJoinStyle:"round",borderRadius:4,backgroundColor:"#0cc2d6",barPercentage:.8,categoryPercentage:.9,fill:!0,clip:8}]},options:{aspectRatio:5,layout:{padding:{left:0,right:8,top:0,bottom:0}},scales:{x:{type:"time",offset:!1,time:{unit:"day",displayFormats:{day:"M/d",month:"Y/M"}},grid:{display:!1},ticks:{display:!1,maxRotation:0,autoSkipPadding:16},min:o(Q).getTime()},y:{position:"left",suggestedMax:10,grid:{display:!0}}},interaction:{intersect:!1,mode:"index"},elements:{point:{hoverRadius:5,hoverBorderWidth:2}},plugins:{legend:{display:!1},tooltip:{enabled:!1,mode:"index",animation:{duration:0},external:s},gradient:K}},plugins:[X(k)]}),m.value=!1}),(v,o)=>{const d=C("MkLoading");return u(),g("div",null,[m.value?(u(),$(d,{key:0})):S("",!0),I(e("div",{class:"xhQNu"},[e("div",je,[e("div",Ze,[e("canvas",{ref_key:"chartEl2",ref:l},null,512)]),e("div",Qe,[e("canvas",{ref_key:"chartEl",ref:t},null,512)])])],2),[[se,!m.value]])])}}});const Ge={key:1,class:"users"},et=M({__name:"overview.users",setup(h){const t=f(null),l=f(!0);return re(async()=>{const p=await R("admin/show-users",{limit:5,sort:"+createdAt",origin:"local"});t.value=p,l.value=!1},1e3*60,{immediate:!0,afterMounted:!0}),(p,s)=>{const v=C("MkLoading"),o=C("MkA");return u(),g("div",{class:"xjY2W"},[r(j,{name:x(Y).s.animation?"_transition_zoom":"",mode:"out-in"},{default:y(()=>[l.value?(u(),$(v,{key:0})):(u(),g("div",Ge,[(u(!0),g(ae,null,oe(t.value,(d,n)=>(u(),$(o,{key:d.id,to:`/admin/user/${d.id}`,class:"user"},{default:y(()=>[r($e,{user:d},null,8,["user"])]),_:2},1032,["to"]))),128))]))]),_:1},8,["name"])],2)}}});const tt=7,st=M({__name:"overview.active-users",setup(h){Z();const t=P("chartEl"),l=new Date;let m=null;const p=f(!0),{handler:s}=q();async function v(){if(m&&m.destroy(),t.value==null)return;const o=a=>{const c=l.getFullYear(),w=l.getMonth(),A=l.getDate();return new Date(c,w,A-a)},d=a=>a.map((c,w)=>({x:o(w).getTime(),y:c})),n=await R("charts/active-users",{limit:tt,span:"day"}),i=ee.s.darkMode?"rgba(255, 255, 255, 0.2)":"rgba(0, 0, 0, 0.2)",k="#3498db",_="#2ecc71";Math.max(...n.read),m=new O(t.value,{type:"bar",data:{datasets:[{parsing:!1,label:"Read",data:d(n.read).slice().reverse(),pointRadius:0,borderWidth:0,borderJoinStyle:"round",borderRadius:4,backgroundColor:k,barPercentage:.7,categoryPercentage:.5,fill:!0},{parsing:!1,label:"Write",data:d(n.write).slice().reverse(),pointRadius:0,borderWidth:0,borderJoinStyle:"round",borderRadius:4,backgroundColor:_,barPercentage:.7,categoryPercentage:.5,fill:!0}]},options:{aspectRatio:2.5,layout:{padding:{left:0,right:8,top:0,bottom:0}},scales:{x:{type:"time",offset:!0,time:{unit:"day",displayFormats:{day:"M/d",month:"Y/M"}},grid:{display:!1},ticks:{display:!0,maxRotation:0,autoSkipPadding:8}},y:{position:"left",suggestedMax:10,grid:{display:!0},ticks:{display:!0}}},interaction:{intersect:!1,mode:"index"},plugins:{legend:{display:!1},tooltip:{enabled:!1,mode:"index",animation:{duration:0},external:s},gradient:K}},plugins:[X(i)]}),p.value=!1}return E(async()=>{v()}),(o,d)=>{const n=C("MkLoading");return u(),g("div",null,[p.value?(u(),$(n,{key:0})):S("",!0),I(e("div",{class:"xDzK2 _panel"},[e("canvas",{ref_key:"chartEl",ref:t},null,512)],2),[[se,!p.value]])])}}});const at={class:"item _panel users"},ot={class:"body"},nt={class:"value"},lt={class:"item _panel notes"},it={class:"body"},rt={class:"value"},dt={class:"item _panel instances"},ut={class:"body"},ct={class:"value"},vt={class:"item _panel emojis"},pt={class:"body"},mt={class:"value"},ft={class:"item _panel online"},yt={class:"body"},_t={class:"value"},gt=M({__name:"overview.stats",setup(h){const t=f(null),l=f(null),m=f(null),p=f(0),s=f(!0);return E(async()=>{const[v,o]=await Promise.all([R("stats",{}),L("get-online-users-count").then(d=>d.count)]);t.value=v,p.value=o,L("charts/users",{limit:2,span:"day"}).then(d=>{l.value=v.originalUsersCount-d.local.total[1]}),L("charts/notes",{limit:2,span:"day"}).then(d=>{m.value=v.originalNotesCount-d.local.total[1]}),s.value=!1}),(v,o)=>{const d=C("MkLoading"),n=C("MkError"),i=te("tooltip");return u(),g("div",null,[r(j,{name:x(Y).s.animation?"_transition_zoom":"",mode:"out-in"},{default:y(()=>[s.value?(u(),$(d,{key:0})):t.value!=null?(u(),g("div",{key:1,class:"xgRm5"},[e("div",at,[o[1]||(o[1]=e("div",{class:"icon"},[e("i",{class:"ti ti-users"})],-1)),e("div",ot,[e("div",nt,[r(W,{value:t.value.originalUsersCount,style:{"margin-right":"0.5em"}},null,8,["value"]),l.value!=null?I((u(),$(z,{key:0,class:"diff",value:l.value},null,8,["value"])),[[i,"Giornaliero"]]):S("",!0)]),o[0]||(o[0]=e("div",{class:"label"},"Users",-1))])]),e("div",lt,[o[3]||(o[3]=e("div",{class:"icon"},[e("i",{class:"ti ti-pencil"})],-1)),e("div",it,[e("div",rt,[r(W,{value:t.value.originalNotesCount,style:{"margin-right":"0.5em"}},null,8,["value"]),m.value!=null?I((u(),$(z,{key:0,class:"diff",value:m.value},null,8,["value"])),[[i,"Giornaliero"]]):S("",!0)]),o[2]||(o[2]=e("div",{class:"label"},"Notes",-1))])]),e("div",dt,[o[5]||(o[5]=e("div",{class:"icon"},[e("i",{class:"ti ti-planet"})],-1)),e("div",ut,[e("div",ct,[r(W,{value:t.value.instances,style:{"margin-right":"0.5em"}},null,8,["value"])]),o[4]||(o[4]=e("div",{class:"label"},"Instances",-1))])]),e("div",vt,[o[7]||(o[7]=e("div",{class:"icon"},[e("i",{class:"ti ti-icons"})],-1)),e("div",pt,[e("div",mt,[r(W,{value:x(ve).length,style:{"margin-right":"0.5em"}},null,8,["value"])]),o[6]||(o[6]=e("div",{class:"label"},"Custom emojis",-1))])]),e("div",ft,[o[9]||(o[9]=e("div",{class:"icon"},[e("i",{class:"ti ti-access-point"})],-1)),e("div",yt,[e("div",_t,[r(W,{value:p.value,style:{"margin-right":"0.5em"}},null,8,["value"])]),o[8]||(o[8]=e("div",{class:"label"},"Online",-1))])])],2)):(u(),$(n,{key:2}))]),_:1},8,["name"])])}}});const ht=M({__name:"overview.retention",setup(h){return(t,l)=>(u(),g("div",{class:"_panel xif9Y"},[r(Me)],2))}});const bt=M({__name:"overview.moderators",setup(h){const t=f(null),l=f(!0);return E(async()=>{t.value=await R("admin/show-users",{sort:"+lastActiveDate",state:"adminOrModerator",limit:30}),l.value=!1}),(m,p)=>{const s=C("MkLoading"),v=C("MkAvatar"),o=C("MkA");return u(),g("div",null,[r(j,{name:x(Y).s.animation?"_transition_zoom":"",mode:"out-in"},{default:y(()=>[l.value?(u(),$(s,{key:0})):(u(),g("div",{key:1,class:"xeUJu _panel"},[(u(!0),g(ae,null,oe(t.value,d=>(u(),$(o,{key:d.id,class:"user",to:`/admin/user/${d.id}`},{default:y(()=>[r(v,{user:d,class:"avatar",indicator:""},null,8,["user"])]),_:2},1032,["to"]))),128))],2))]),_:1},8,["name"])])}}});const kt=M({__name:"overview.heatmap",setup(h){const{model:t,def:l}=pe({items:[{label:"Active users",value:"active-users"},{label:"Notes",value:"notes"},{label:"AP Requests: inboxReceived",value:"ap-requests-inbox-received"},{label:"AP Requests: deliverSucceeded",value:"ap-requests-deliver-succeeded"},{label:"AP Requests: deliverFailed",value:"ap-requests-deliver-failed"}],initialValue:"active-users"});return(m,p)=>(u(),g("div",{class:"_panel xEFxI"},[r(me,{modelValue:x(t),"onUpdate:modelValue":p[0]||(p[0]=s=>ge(t)?t.value=s:null),items:x(l),style:{margin:"0 0 12px 0"},small:""},null,8,["modelValue","items"]),r(we,{src:x(t)},null,8,["src"])],2))}});const xt={class:"_spacer",style:{"--MI_SPACER-w":"1000px"}},Wt=M({__name:"overview",setup(h){const t=P("rootEl"),l=f(null),m=f(null),p=f(null),s=f(null),v=f(null),o=f(null),d=f(null),n=f(null),i=he(null),k=ce(de().useChannel("queueStats"));return E(async()=>{L("charts/federation",{limit:2,span:"day"}).then(_=>{s.value=_.pubActive[0],v.value=_.pubActive[0]-_.pubActive[1],o.value=_.subActive[0],d.value=_.subActive[0]-_.subActive[1]}),L("federation/stats",{limit:10}).then(_=>{m.value=[..._.topSubInstances.map(a=>({name:a.host,color:a.themeColor,value:a.followersCount,onClick:()=>{H(`/instance-info/${a.host}`)}})),{name:"(other)",color:"#80808080",value:_.otherFollowersCount}],p.value=[..._.topPubInstances.map(a=>({name:a.host,color:a.themeColor,value:a.followingCount,onClick:()=>{H(`/instance-info/${a.host}`)}})),{name:"(other)",color:"#80808080",value:_.otherFollowingCount}]}),R("admin/server-info").then(_=>{l.value=_}),R("admin/show-users",{limit:5,sort:"+createdAt"}).then(_=>{n.value=_}),R("federation/instances",{sort:"+latestRequestReceivedAt",limit:25}).then(_=>{i.value=_}),be(()=>{k.send("requestLog",{id:ue(),length:100})})}),ke(()=>{k.dispose()}),U(()=>[]),U(()=>[]),fe(()=>({title:"Pannello di controllo",icon:"ti ti-dashboard"})),(_,a)=>(u(),g("div",xt,[e("div",{ref_key:"rootEl",ref:t,class:"xDT5c"},[r(D,{class:"item"},{header:y(()=>[...a[0]||(a[0]=[b("Stats",-1)])]),default:y(()=>[r(gt)]),_:1}),r(D,{class:"item"},{header:y(()=>[...a[1]||(a[1]=[b("Active users",-1)])]),default:y(()=>[r(st)]),_:1}),r(D,{class:"item"},{header:y(()=>[...a[2]||(a[2]=[b("Heatmap",-1)])]),default:y(()=>[r(kt)]),_:1}),r(D,{class:"item"},{header:y(()=>[...a[3]||(a[3]=[b("Retention rate",-1)])]),default:y(()=>[r(ht)]),_:1}),r(D,{class:"item"},{header:y(()=>[...a[4]||(a[4]=[b("Moderators",-1)])]),default:y(()=>[r(bt)]),_:1}),r(D,{class:"item"},{header:y(()=>[...a[5]||(a[5]=[b("Federation",-1)])]),default:y(()=>[r(Le)]),_:1}),r(D,{class:"item"},{header:y(()=>[...a[6]||(a[6]=[b("Instances",-1)])]),default:y(()=>[r(qe)]),_:1}),r(D,{class:"item"},{header:y(()=>[...a[7]||(a[7]=[b("Ap requests",-1)])]),default:y(()=>[r(Ke)]),_:1}),r(D,{class:"item"},{header:y(()=>[...a[8]||(a[8]=[b("New users",-1)])]),default:y(()=>[r(et)]),_:1}),r(D,{class:"item"},{header:y(()=>[...a[9]||(a[9]=[b("Deliver queue",-1)])]),default:y(()=>[r(ie,{domain:"deliver"})]),_:1}),r(D,{class:"item"},{header:y(()=>[...a[10]||(a[10]=[b("Inbox queue",-1)])]),default:y(()=>[r(ie,{domain:"inbox"})]),_:1})],2)]))}});export{Wt as default};

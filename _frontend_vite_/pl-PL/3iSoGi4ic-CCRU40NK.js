const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["https://fastly.jsdelivr.net/gh/truimo-dev/misskey-built@latest/_frontend_vite_/scripts/3iSoGi4ic-9FulSFXc.js","https://fastly.jsdelivr.net/gh/truimo-dev/misskey-built@latest/_frontend_vite_/scripts/3iSoGi4ic-C0O4p9AH.js","https://fastly.jsdelivr.net/gh/truimo-dev/misskey-built@latest/_frontend_vite_/scripts/3iSoGi4ic-DV-GuiCp.js","https://fastly.jsdelivr.net/gh/truimo-dev/misskey-built@latest/_frontend_vite_/scripts/3iSoGi4ic-D0mTJ0Mu.js","https://fastly.jsdelivr.net/gh/truimo-dev/misskey-built@latest/_frontend_vite_/scripts/3iSoGi4ic-B1GPmOGN.js","https://fastly.jsdelivr.net/gh/truimo-dev/misskey-built@latest/_frontend_vite_/scripts/3iSoGi4ic-Dty8GuTz.js","https://fastly.jsdelivr.net/gh/truimo-dev/misskey-built@latest/_frontend_vite_/scripts/3iSoGi4ic-D98_HDRS.js","https://fastly.jsdelivr.net/gh/truimo-dev/misskey-built@latest/_frontend_vite_/assets/3iSoGi4ic-DZU1WGtr.css","https://fastly.jsdelivr.net/gh/truimo-dev/misskey-built@latest/_frontend_vite_/assets/3iSoGi4ic-9GwroBN9.css","https://fastly.jsdelivr.net/gh/truimo-dev/misskey-built@latest/_frontend_vite_/scripts/3iSoGi4ic-Ddz4upM5.js","https://fastly.jsdelivr.net/gh/truimo-dev/misskey-built@latest/_frontend_vite_/scripts/3iSoGi4ic-ke9ZaMpT.js","https://fastly.jsdelivr.net/gh/truimo-dev/misskey-built@latest/_frontend_vite_/scripts/3iSoGi4ic-nJzNoieu.js","https://fastly.jsdelivr.net/gh/truimo-dev/misskey-built@latest/_frontend_vite_/scripts/3iSoGi4ic-s4jzJ6kJ.js","https://fastly.jsdelivr.net/gh/truimo-dev/misskey-built@latest/_frontend_vite_/scripts/3iSoGi4ic-KYydmxIu.js","https://fastly.jsdelivr.net/gh/truimo-dev/misskey-built@latest/_frontend_vite_/scripts/3iSoGi4ic-qfX4D5dB.js","https://fastly.jsdelivr.net/gh/truimo-dev/misskey-built@latest/_frontend_vite_/scripts/3iSoGi4ic-BDF7xMl0.js","https://fastly.jsdelivr.net/gh/truimo-dev/misskey-built@latest/_frontend_vite_/assets/3iSoGi4ic-8Z3zIVAA.css","https://fastly.jsdelivr.net/gh/truimo-dev/misskey-built@latest/_frontend_vite_/assets/3iSoGi4ic-BMNL0SP4.css"])))=>i.map(i=>d[i]);
import{az as ot,b as N,M as m,$ as c,cE as nt,J as rt,by as ut,h as U,bz as dt,c as ct,ay as W,L as S,C as H,e as z,A as O,d2 as pt,d as vt,_ as mt}from"./3iSoGi4ic-DV-GuiCp.js";import{b as ft,a as M,w as _t,Z as kt,M as yt,o as ht,c as j,z as f,k as gt,f as n,i,h as o,p as a,B as r,T as F,t as k,l as _,C as y,j as h,E as p,D as g}from"./3iSoGi4ic-D0mTJ0Mu.js";import{J as xt}from"./3iSoGi4ic-nJzNoieu.js";import{u as C}from"./3iSoGi4ic-B1GPmOGN.js";import{M as Mt,r as Ct}from"./3iSoGi4ic-BgYi9BfU.js";import{c as At,a as bt}from"./3iSoGi4ic-CCt4ZT5M.js";import{M as $t}from"./3iSoGi4ic-Fx-BY70c.js";import"./3iSoGi4ic-D98_HDRS.js";import"./3iSoGi4ic-C0O4p9AH.js";import"./3iSoGi4ic-Ddz4upM5.js";import"./3iSoGi4ic-ke9ZaMpT.js";import"./3iSoGi4ic-BDF7xMl0.js";import"./3iSoGi4ic-DUrJvqB4.js";const wt={class:"_spacer",style:{"--MI_SPACER-w":"700px"}},Lt={class:"main _panel"},Tt={class:"actions _panel"},It={class:"items"},Et={class:"items"},Pt={key:0,style:{"margin-left":"6px"}},St={key:0,style:{"margin-left":"6px"}},zt={class:"_panel main"},Dt={class:"title"},Rt={class:"summary"},Bt={class:"info"},Vt={class:"date"},Nt={key:0},Ut=ft({__name:"flash",props:{id:{}},setup(J){const D=J,t=M(null),R=M(null);function B(){t.value=null,rt("flash/show",{flashId:D.id}).then(s=>{t.value=s}).catch(s=>{R.value=s})}function K(s){if(!t.value)return;const e=[];e.push({text:"Udostępnij z wpisem",icon:"ti ti-pencil",action:G}),ut()&&e.push({text:"Udostępnij",icon:"ti ti-share",action:q}),U(e,s.currentTarget??s.target)}function Z(){t.value&&dt(`${C}/play/${t.value.id}`)}function q(){t.value&&navigator.share({title:t.value.title,text:t.value.summary,url:`${C}/play/${t.value.id}`})}function G(){t.value&&ct({initialText:`${t.value.title}
${C}/play/${t.value.id}`,instant:!0})}function Q(){t.value&&(W(),S("flash/like",{flashId:t.value.id}).then(()=>{t.value.isLiked=!0,t.value.likedCount++}))}async function X(){!t.value||(W(),(await H({type:"warning",text:"Na pewno chcesz usunąć polubienie?"})).canceled)||S("flash/unlike",{flashId:t.value.id}).then(()=>{t.value.isLiked=!1,t.value.likedCount--})}_t(()=>D.id,B,{immediate:!0});const L=M(!1),x=kt(null),T=M(),I=M([]);function Y(){L.value=!0,et()}function tt(s){if(s==null)return!0;try{return pt(s,"1.0.0")<0}catch{return!1}}async function et(){if(x.value&&x.value.abort(),!t.value)return;const s=xt(t.value.script),e=tt(s),{Interpreter:u,Parser:A,values:b}=e?await z(()=>import("./3iSoGi4ic-9FulSFXc.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11]),import.meta.url):await z(()=>import("./3iSoGi4ic-s4jzJ6kJ.js"),__vite__mapDeps([12,11,1,2,3,4,5,6,7,8,9,10,13]),import.meta.url),P=new A;I.value=[];const $=new u({...At({storageKey:"flash:"+t.value.id}),...Ct(I.value,d=>{T.value=d.value}),THIS_ID:b.STR(t.value.id),THIS_URL:b.STR(`${C}/play/${t.value.id}`)},{in:bt,out:d=>{},log:(d,v)=>{}});x.value=$;let w;try{w=P.parse(t.value.script)}catch{O({type:"error",text:"Syntax error :("});return}try{await $.exec(w)}catch(d){O({type:"error",title:"AiScript Error",text:d.message})}}async function at(){if(!t.value)return;const s=`${C}/play/${t.value.id}`,{dispose:e}=await vt(z(()=>import("./3iSoGi4ic-qfX4D5dB.js"),__vite__mapDeps([14,2,3,4,5,6,7,8,15,16,17]),import.meta.url).then(u=>u.default),{user:t.value.user,initialComment:`Play: ${s}
-----
`},{closed:()=>e()})}function st(s){if(!t.value)return;const e=[...c&&c.id!==t.value.userId?[{icon:"ti ti-exclamation-circle",text:"Zgłoś",action:at},...c.isModerator||c.isAdmin?[{type:"divider"},{icon:"ti ti-trash",text:"Usuń",danger:!0,action:()=>H({type:"warning",text:"Na pewno usunąć?"}).then(({canceled:u})=>{u||!t.value||S("flash/delete",{flashId:t.value.id})})}]:[]]:[]];U(e,s.currentTarget??s.target)}function E(){x.value&&x.value.abort(),L.value=!1}yt(()=>{E()}),ht(()=>{E()});const it=j(()=>[]),lt=j(()=>[]);return ot(()=>({title:t.value?t.value.title:"Play",...t.value?{avatar:t.value.user,path:`/play/${t.value.id}`,share:{title:t.value.title,text:t.value.summary}}:{}})),(s,e)=>{const u=f("Mfm"),A=f("MkTime"),b=f("MkA"),P=f("MkAd"),$=f("MkError"),w=f("MkLoading"),d=f("PageWithHeader"),v=gt("tooltip");return i(),n(d,{actions:it.value,tabs:lt.value},{default:o(()=>[a("div",wt,[r(F,{name:k(N).s.animation?"fade":"",mode:"out-in"},{default:o(()=>[t.value?(i(),_("div",{key:t.value.id},[r(F,{name:k(N).s.animation?"zoom":"",mode:"out-in"},{default:o(()=>[L.value?(i(),_("div",{key:0,class:"xB7iU"},[a("div",Lt,[T.value?(i(),n(Mt,{key:0,component:T.value,components:I.value},null,8,["component","components"])):y("",!0)]),a("div",Tt,[a("div",It,[h((i(),n(m,{class:"button",rounded:"",onClick:E},{default:o(()=>[...e[3]||(e[3]=[a("i",{class:"ti ti-reload"},null,-1)])]),_:1})),[[v,"Odśwież"]])]),a("div",Et,[t.value.isLiked?h((i(),n(m,{key:0,asLike:"",class:"button",rounded:"",primary:"",onClick:e[0]||(e[0]=V=>X())},{default:o(()=>[e[4]||(e[4]=a("i",{class:"ti ti-heart"},null,-1)),t.value?.likedCount&&t.value.likedCount>0?(i(),_("span",Pt,p(t.value.likedCount),1)):y("",!0)]),_:1})),[[v,"Usuń polubienie"]]):h((i(),n(m,{key:1,asLike:"",class:"button",rounded:"",onClick:e[1]||(e[1]=V=>Q())},{default:o(()=>[e[5]||(e[5]=a("i",{class:"ti ti-heart"},null,-1)),t.value?.likedCount&&t.value.likedCount>0?(i(),_("span",St,p(t.value.likedCount),1)):y("",!0)]),_:1})),[[v,"Polub"]]),h((i(),n(m,{class:"button",rounded:"",onClick:Z},{default:o(()=>[...e[6]||(e[6]=[a("i",{class:"ti ti-link ti-fw"},null,-1)])]),_:1})),[[v,"Skopiuj odnośnik"]]),h((i(),n(m,{class:"button",rounded:"",onClick:K},{default:o(()=>[...e[7]||(e[7]=[a("i",{class:"ti ti-share ti-fw"},null,-1)])]),_:1})),[[v,"Udostępnij"]]),k(c)&&k(c).id!==t.value.user.id?(i(),n(m,{key:2,class:"button",rounded:"",onMousedown:st},{default:o(()=>[...e[8]||(e[8]=[a("i",{class:"ti ti-dots ti-fw"},null,-1)])]),_:1})):y("",!0)])])],2)):(i(),_("div",{key:1,class:"xz1sd"},[a("div",zt,[a("div",Dt,p(t.value.title),1),a("div",Rt,[r(u,{text:t.value.summary},null,8,["text"])]),r(m,{class:"start",gradate:"",rounded:"",large:"",onClick:Y},{default:o(()=>[...e[9]||(e[9]=[g("Play",-1)])]),_:1}),a("div",Bt,[h((i(),_("span",null,[e[10]||(e[10]=a("i",{class:"ti ti-heart"},null,-1)),g(" "+p(t.value.likedCount),1)])),[[v,"Liczba polubień"]])])])],2))]),_:1},8,["name"]),r($t,{defaultOpen:!1,"max-height":280,class:"_margin"},{icon:o(()=>[...e[11]||(e[11]=[a("i",{class:"ti ti-code"},null,-1)])]),label:o(()=>[g(p("Zobacz źródło"),1)]),default:o(()=>[r(nt,{code:t.value.script,lang:"is",class:"_monospace"},null,8,["code"])]),_:1}),a("div",{class:"xzMoj"},[r(u,{text:`By @${t.value.user.username}`},null,8,["text"]),a("div",Vt,[t.value.createdAt!=t.value.updatedAt?(i(),_("div",Nt,[e[12]||(e[12]=a("i",{class:"ti ti-clock"},null,-1)),g(" "+p("Zaktualizowano")+": ",1),r(A,{time:t.value.updatedAt,mode:"detail"},null,8,["time"])])):y("",!0),a("div",null,[e[13]||(e[13]=a("i",{class:"ti ti-clock"},null,-1)),g(" "+p("Utworzono")+": ",1),r(A,{time:t.value.createdAt,mode:"detail"},null,8,["time"])])])],2),k(c)&&k(c).id===t.value.userId?(i(),n(b,{key:0,to:`/play/${t.value.id}/edit`,style:{color:"var(--MI_THEME-accent)"}},{default:o(()=>[g(p("Edit this Play"),1)]),_:1},8,["to"])):y("",!0),r(P,{preferForms:["horizontal","horizontal-big"]})])):R.value?(i(),n($,{key:1,onRetry:e[2]||(e[2]=V=>B())})):(i(),n(w,{key:2}))]),_:1},8,["name"])])]),_:1},8,["actions","tabs"])}}});const ae=mt(Ut,[["__scopeId","data-v-a1b93984"]]);export{ae as default};

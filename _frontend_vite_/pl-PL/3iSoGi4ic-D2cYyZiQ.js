import{c9 as D,e as T,ak as j,a7 as P,aN as F,_ as K}from"./3iSoGi4ic-DV-GuiCp.js";import{b as U,u as Q,a as m,c as W,w as E,z as $,l as r,i as o,f as H,C as k,h as b,p as c,F as w,A as S,E as _,g as p,B as G,D as J,n as X}from"./3iSoGi4ic-D0mTJ0Mu.js";let L=t=>t??"",A=!1;async function Y(t=!1){if(!D.includes("ja")&&!t||A)return;const{toHiragana:u}=await T(async()=>{const{toHiragana:l}=await import("./3iSoGi4ic-BDIxtKsv.js");return{toHiragana:l}},[],import.meta.url);L=u,A=!0}function M(t){return[...new Intl.Segmenter(D,{granularity:"grapheme"}).segment(t)].map(({segment:l})=>l.normalize("NFKC")).join("").toLowerCase().trim()}const Z=[45,727,4467,5760,7032,8208,8209,8210,8211,8212,8213,8259,8315,8722,9644,9472,9473,10134,12540,12641,65112,65123,65293,65392,65808,65937],q=Z.map(t=>`\\u{${t.toString(16).padStart(4,"0")}}`),ee=new RegExp(`[${q.join("")}]`,"ug");function te(t){return t.replace(ee,"-")}function B(t){return te(L(M(t),{convertLongVowelMark:!1}))}function C(t,u){return!!(t===u||t.includes(u)||M(t).includes(M(u))||B(t).includes(B(u)))}const ne={class:"group"},ae={key:0,class:"title"},se={class:"items"},oe=["href","target"],re={key:0,class:"icon"},le={class:"text"},ie=["disabled","onClick"],ce={key:0,class:"icon"},ue={class:"text"},de={key:0,class:"icon"},fe={class:"text"},pe={key:0,class:"icon"},he={class:"text"},ge={style:{opacity:"0.7","font-size":"90%","word-break":"break-word"}},_e={style:{"word-break":"break-word"}},ve=U({__name:"MkSuperMenu",props:{def:{},grid:{type:Boolean},searchIndex:{}},setup(t){const u=t;Y();const l=j(),v=Q("rootEl"),h=m(""),x=m(""),d=m(null),g=m([]),V=W(()=>u.searchIndex&&new Map(u.searchIndex.map(a=>[a.id,a])));E(h,a=>{x.value=a}),E(x,a=>{if(g.value=[],d.value=null,a==="")return;const s=V.value;if(s!=null){const f=e=>{let i=e.path,I=e.icon;const R=[];for(let y=s.get(e.parentId??"");y!=null;y=s.get(y.parentId??""))i??=y.path,I??=y.icon,R.push(y.label);g.value.push({id:e.id,path:i??"/",label:e.label,parentLabels:R.toReversed(),icon:I,isRoot:e.parentId==null})};let n=Array.from(s.values());for(const e of n)C(e.label,a)&&(f(e),n=n.filter(i=>i.id!==e.id));for(const e of n)e.keywords.some(i=>C(i,a))&&(f(e),n=n.filter(i=>i.id!==e.id));for(const e of n)e.texts.some(i=>C(i,a))&&(f(e),n=n.filter(i=>i.id!==e.id))}});function z(a){d.value=null,x.value=a.target.value}function N(a){if(!a.isComposing){if(a.key==="Enter"&&d.value!=null)a.preventDefault(),l.pushByPath(g.value[d.value].path+"#"+g.value[d.value].id);else if(a.key==="ArrowDown"){a.preventDefault();const s=d.value??-1;d.value=s+1>=g.value.length?0:s+1}else if(a.key==="ArrowUp"){a.preventDefault();const s=d.value??0;d.value=s-1<0?g.value.length-1:s-1}(a.key==="ArrowDown"||a.key==="ArrowUp")&&X(()=>{if(!v.value)return;const s=v.value.querySelector(".searchResultItem.selected");if(s!=null){const f=F(s);if(!f)return;f.scrollTo({top:s.offsetTop-f.clientHeight/2+s.clientHeight/2,behavior:"instant"})}})}}return(a,s)=>{const f=$("MkA");return o(),r("div",{ref_key:"rootEl",ref:v,class:p(["rrevdjwu",{grid:t.grid}])},[t.searchIndex&&t.searchIndex.length>0?(o(),H(P,{key:0,modelValue:h.value,"onUpdate:modelValue":s[0]||(s[0]=n=>h.value=n),placeholder:"Szukaj",type:"search",style:{"margin-bottom":"16px"},onInputPassive:z,onKeydown:N},{prefix:b(()=>[...s[1]||(s[1]=[c("i",{class:"ti ti-search"},null,-1)])]),_:1},8,["modelValue","placeholder"])):k("",!0),x.value==""?(o(!0),r(w,{key:1},S(t.def,n=>(o(),r("div",ne,[n.title?(o(),r("div",ae,_(n.title),1)):k("",!0),c("div",se,[(o(!0),r(w,null,S(n.items,(e,i)=>(o(),r(w,null,[e.type==="a"?(o(),r("a",{key:0,href:e.href,target:e.target,class:p(["_button item",{danger:e.danger,active:e.active}])},[e.icon?(o(),r("span",re,[c("i",{class:p([e.icon,"ti-fw"])},null,2)])):k("",!0),c("span",le,_(e.text),1)],10,oe)):e.type==="button"?(o(),r("button",{key:1,class:p(["_button item",{danger:e.danger,active:e.active}]),disabled:e.active,onClick:I=>e.action(I)},[e.icon?(o(),r("span",ce,[c("i",{class:p([e.icon,"ti-fw"])},null,2)])):k("",!0),c("span",ue,_(e.text),1)],10,ie)):(o(),H(f,{key:2,to:e.to,class:p(["_button item",{danger:e.danger,active:e.active}])},{default:b(()=>[e.icon?(o(),r("span",de,[c("i",{class:p([e.icon,"ti-fw"])},null,2)])):k("",!0),c("span",fe,_(e.text),1)]),_:2},1032,["to","class"]))],64))),256))])]))),256)):(o(!0),r(w,{key:2},S(g.value,(n,e)=>(o(),r("div",null,[G(f,{to:n.path+"#"+n.id,class:p(["_button searchResultItem",{selected:d.value!==null&&d.value===e}])},{default:b(()=>[n.icon?(o(),r("span",pe,[c("i",{class:p([n.icon,"ti-fw"])},null,2)])):k("",!0),c("span",he,[n.isRoot?(o(),r(w,{key:0},[J(_(n.label),1)],64)):(o(),r(w,{key:1},[c("span",ge,_(n.parentLabels.join(" > ")),1),s[2]||(s[2]=c("br",null,null,-1)),c("span",_e,_(n.label),1)],64))])]),_:2},1032,["to","class"])]))),256))],2)}}}),Ie=K(ve,[["__scopeId","data-v-f9f43cb0"]]);function me(t){const u=new Map(t.map(l=>[l.id,l]));for(const l of t)if(l.inlining)for(const v of l.inlining){const h=u.get(v);h?(h.parentId=l.id,h.path=l.path):console.log("[Settings Search Index] Failed to inline",v)}return t}export{Ie as M,me as g};

const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["https://fastly.jsdelivr.net/gh/truimo-dev/misskey-built@latest/_frontend_vite_/scripts/3iSoGi4ic-DV-GuiCp.js","https://fastly.jsdelivr.net/gh/truimo-dev/misskey-built@latest/_frontend_vite_/scripts/3iSoGi4ic-D0mTJ0Mu.js","https://fastly.jsdelivr.net/gh/truimo-dev/misskey-built@latest/_frontend_vite_/scripts/3iSoGi4ic-B1GPmOGN.js","https://fastly.jsdelivr.net/gh/truimo-dev/misskey-built@latest/_frontend_vite_/scripts/3iSoGi4ic-Dty8GuTz.js","https://fastly.jsdelivr.net/gh/truimo-dev/misskey-built@latest/_frontend_vite_/scripts/3iSoGi4ic-D98_HDRS.js","https://fastly.jsdelivr.net/gh/truimo-dev/misskey-built@latest/_frontend_vite_/assets/3iSoGi4ic-DZU1WGtr.css","https://fastly.jsdelivr.net/gh/truimo-dev/misskey-built@latest/_frontend_vite_/assets/3iSoGi4ic-9GwroBN9.css"])))=>i.map(i=>d[i]);
import{aq as J,ar as P,e as W,_ as K}from"./3iSoGi4ic-DV-GuiCp.js";import{b as Q,u as F,c as a,a as k,w as I,e as Y,o as Z,H as ee,k as te,l as f,i as p,g as S,p as s,j as ne,x as y,C as ae,s as _,F as oe,A as se,d as U}from"./3iSoGi4ic-D0mTJ0Mu.js";const ie={class:"label"},le={class:"track"},ue={key:0,class:"ticks"},re={class:"caption"},de=Q({__name:"MkRange",props:{modelValue:{},disabled:{type:Boolean},min:{},max:{},step:{default:1},textConverter:{type:Function,default:u=>(Math.round(u*1e3)/1e3).toString()},showTicks:{type:Boolean},easing:{type:Boolean,default:!1},continuousUpdate:{type:Boolean}},emits:["update:modelValue","dragEnded","thumbDoubleClicked"],setup(u,{emit:X}){const e=u,w=X,l=F("containerEl"),d=F("thumbEl");a(()=>Math.abs(e.max)/(e.max+Math.abs(Math.min(0,e.min))));const V=a(()=>Math.abs(Math.min(0,e.min))/(e.max+Math.abs(Math.min(0,e.min)))),A=a(()=>Math.max(0,(r.value-V.value)*100)+"%"),N=a(()=>Math.max(0,(V.value-r.value)*100)+"%"),O=a(()=>Math.abs(Math.min(0,e.min))/(e.max+Math.abs(Math.min(0,e.min)))*100+"%"),$=a(()=>Math.min(V.value,r.value)*100+"%"),D=t=>(t-e.min)/(e.max-e.min),c=k(D(e.modelValue)),r=a(()=>{if(e.step){const t=e.step/(e.max-e.min);return t*Math.round(c.value/t)}else return c.value}),i=a(()=>Number.isInteger(e.step)?Math.round(r.value*(e.max-e.min)+e.min):r.value*(e.max-e.min)+e.min),L=()=>d.value==null?0:d.value.offsetWidth,C=k(0),R=()=>{l.value==null?C.value=0:C.value=(l.value.offsetWidth-L())*r.value};I([r,l],R),I(()=>e.modelValue,t=>{const n=D(t);c.value!==n&&(c.value=n)});let b;Y(()=>{b=new ResizeObserver((t,n)=>{R()}),l.value&&b.observe(l.value)}),Z(()=>{b&&b.disconnect()});const T=a(()=>e.step?(e.max-e.min)/e.step:0),v=k(!1),g=k(!1);ee(()=>{v.value=!1,g.value=!1});function z(){if(J)return;g.value=!0;const{dispose:t}=P(U(()=>W(()=>import("./3iSoGi4ic-DV-GuiCp.js").then(n=>n.dE),__vite__mapDeps([0,1,2,3,4,5,6]),import.meta.url)),{showing:a(()=>g.value&&!v.value),text:a(()=>e.textConverter(i.value)),anchorElement:d.value??void 0},{closed:()=>t()});d.value.addEventListener("mouseleave",()=>{g.value=!1},{once:!0,passive:!0})}let m=null;function B(t){if(e.disabled)return;t.preventDefault(),v.value=!0;const{dispose:n}=P(U(()=>W(()=>import("./3iSoGi4ic-DV-GuiCp.js").then(o=>o.dE),__vite__mapDeps([0,1,2,3,4,5,6]),import.meta.url)),{showing:v,text:a(()=>e.textConverter(i.value)),anchorElement:d.value??void 0},{closed:()=>n()}),h=window.document.createElement("style");h.appendChild(window.document.createTextNode("* { cursor: grabbing !important; } body * { pointer-events: none !important; }")),window.document.head.appendChild(h);const E=L(),M=o=>{o.preventDefault();let j=i.value;const q=l.value.getBoundingClientRect(),G=("touches"in o&&o.touches.length>0?o.touches[0].clientX:"clientX"in o?o.clientX:0)-(q.left+E/2);c.value=Math.min(1,Math.max(0,G/(l.value.offsetWidth-E))),e.continuousUpdate&&j!==i.value&&w("update:modelValue",i.value)};let H=i.value;const x=()=>{window.document.head.removeChild(h),v.value=!1,window.removeEventListener("mousemove",M),window.removeEventListener("touchmove",M),window.removeEventListener("mouseup",x),window.removeEventListener("touchend",x),H!==i.value&&(w("update:modelValue",i.value),w("dragEnded",i.value))};if(window.addEventListener("mousemove",M),window.addEventListener("touchmove",M),window.addEventListener("mouseup",x,{once:!0}),window.addEventListener("touchend",x,{once:!0}),m==null){m=Date.now();return}else{const o=Date.now();if(o-m<300){m=null,w("thumbDoubleClicked");return}else m=o}}return(t,n)=>{const h=te("adaptive-border");return p(),f("div",{class:S(["timctyfi",{disabled:u.disabled,easing:u.easing}])},[s("div",ie,[y(t.$slots,"label",{},void 0,!0)]),ne((p(),f("div",{class:S(["body",{disabled:u.disabled}])},[y(t.$slots,"prefix",{},void 0,!0),s("div",{ref_key:"containerEl",ref:l,class:"container"},[s("div",le,[s("div",{class:"highlight right",style:_({width:A.value,left:O.value})},[...n[0]||(n[0]=[s("div",{class:"shine right"},null,-1)])],4),s("div",{class:"highlight left",style:_({width:N.value,left:$.value})},[...n[1]||(n[1]=[s("div",{class:"shine left"},null,-1)])],4)]),T.value&&u.showTicks?(p(),f("div",ue,[(p(!0),f(oe,null,se(T.value+1,E=>(p(),f("div",{class:"tick",style:_({left:(E-1)/T.value*100+"%"})},null,4))),256))])):ae("",!0),s("div",{ref_key:"thumbEl",ref:d,class:"thumb",style:_({left:C.value+"px"}),onMouseenterPassive:z,onMousedown:B,onTouchstart:B},[...n[2]||(n[2]=[s("div",{class:"thumbInner"},null,-1)])],36)],512),y(t.$slots,"suffix",{},void 0,!0)],2)),[[h]]),s("div",re,[y(t.$slots,"caption",{},void 0,!0)])],2)}}}),he=K(de,[["__scopeId","data-v-6374d458"]]);export{he as M};

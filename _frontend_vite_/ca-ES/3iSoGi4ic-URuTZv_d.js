import{a7 as W,M as $,bl as X,bm as J,J as G,A as Y,aV as O,bn as K,bo as ee,bp as te,b7 as U,aN as se,i as I,bq as ne,br as oe,az as le}from"./3iSoGi4ic-DV-GuiCp.js";import{v as ae,h as ie,c as re}from"./3iSoGi4ic-B1GPmOGN.js";import{b as h,a as f,z as w,k as ue,f as y,i as t,h as c,p as e,g as B,l as r,E as i,t as _,C as m,q as ce,B as d,D as x,j as T,a0 as de,u as P,e as me,aa as j,F as z,A as E,s as pe,c as N}from"./3iSoGi4ic-D0mTJ0Mu.js";import{M as ve}from"./3iSoGi4ic-DlHFSG-Y.js";import{M as xe}from"./3iSoGi4ic-CXH-8M55.js";import{m as F}from"./3iSoGi4ic-PRfq4AnS.js";import{M as Q}from"./3iSoGi4ic-TyGCseq8.js";import"./3iSoGi4ic-D98_HDRS.js";import"./3iSoGi4ic-Fx-BY70c.js";import"./3iSoGi4ic-Dz5OvLqt.js";import"./3iSoGi4ic-CZYXc2mx.js";import"./3iSoGi4ic-DaTARTeS.js";import"./3iSoGi4ic-wEnKwRDb.js";import"./3iSoGi4ic-DR2vO6TF.js";import"./3iSoGi4ic-C4MHiTai.js";import"./3iSoGi4ic-DienmJ9d.js";import"./3iSoGi4ic-Dy0PONm0.js";import"./3iSoGi4ic-CqmhgU-Q.js";const ye={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",style:{"z-index":"1",position:"relative"},viewBox:"0 0 854 300"},fe={style:{padding:"16px 32px 32px 32px"}},ge={style:{"text-align":"center"},class:"_gaps_s"},ke={class:"_button _help"},_e={class:"_button _help"},be={key:1,class:"_gaps_m"},Me={style:{"text-align":"center"},class:"_gaps_s"},he={key:2,class:"_gaps_m"},we={style:{"text-align":"center"},class:"_gaps_s"},Se={style:{"font-size":"120%"}},Ce={key:3,class:"_gaps_m"},$e={style:{"text-align":"center"},class:"_gaps_s"},Ie={class:"_buttonsCenter"},Le=h({__name:"welcome.setup",setup(s){const u=f(""),p=f(""),a=f(""),v=f(!1),b=f(!1),o=f(0);let k;function g(){if(v.value)return;v.value=!0;const A=J();G("admin/accounts/create",{username:u.value,password:p.value,setupPassword:a.value===""?null:a.value}).then(n=>{k=n.token,b.value=!0}).catch(n=>{v.value=!1;let S="S'ha produït un error",C=n.message+`
`+n.id;n.code==="ACCESS_DENIED"?(S="Operació no permesa ",C="Operació no permesa "):n.code==="INCORRECT_INITIAL_PASSWORD"&&(S="Operació no permesa ",C="Contrasenya incorrecta."),Y({type:"error",title:S,text:C})}).finally(()=>{A()})}function L(){o.value++}function q(){o.value++}function D(){O(k)}return(A,n)=>{const S=w("MkEllipsis"),C=w("MkLoading"),H=w("PageWithAnimBg"),V=ue("tooltip");return t(),y(H,null,{default:c(()=>[e("div",{class:"xIoJ6"},[e("div",{class:"xBUew _panel"},[(t(),r("svg",ye,[...n[5]||(n[5]=[e("defs",null,[e("linearGradient",{id:"linear",x1:"0%",y1:"0%",x2:"100%",y2:"0%"},[e("stop",{offset:"0%","stop-color":"#86b300"}),e("stop",{offset:"100%","stop-color":"#4ab300"})])],-1),e("g",{transform:"translate(427, 150) scale(1, 1) translate(-427, -150)"},[e("path",{d:"",fill:"url(#linear)",opacity:"0.4"},[e("animate",{attributeName:"d",dur:"20s",repeatCount:"indefinite",keyTimes:"0;0.333;0.667;1",calcmod:"spline",keySplines:"0.2 0 0.2 1;0.2 0 0.2 1;0.2 0 0.2 1",begin:"0s",values:"M0 0L 0 220Q 213.5 260 427 230T 854 255L 854 0 Z;M0 0L 0 245Q 213.5 260 427 240T 854 230L 854 0 Z;M0 0L 0 265Q 213.5 235 427 265T 854 230L 854 0 Z;M0 0L 0 220Q 213.5 260 427 230T 854 255L 854 0 Z"})]),e("path",{d:"",fill:"url(#linear)",opacity:"0.4"},[e("animate",{attributeName:"d",dur:"20s",repeatCount:"indefinite",keyTimes:"0;0.333;0.667;1",calcmod:"spline",keySplines:"0.2 0 0.2 1;0.2 0 0.2 1;0.2 0 0.2 1",begin:"-10s",values:"M0 0L 0 235Q 213.5 280 427 250T 854 260L 854 0 Z;M0 0L 0 250Q 213.5 220 427 220T 854 240L 854 0 Z;M0 0L 0 245Q 213.5 225 427 250T 854 265L 854 0 Z;M0 0L 0 235Q 213.5 280 427 250T 854 260L 854 0 Z"})])],-1)])])),e("div",{class:"xk16l"},[n[6]||(n[6]=e("div",null,"Welcome to Misskey!",-1)),e("div",{class:"xngsm"},"v"+i(_(ae)),3)],2),e("div",fe,[b.value?o.value===0?(t(),r("div",be,[e("div",Me,[e("div",null,[e("b",null,i("Compte d'administrador creat."),1)])]),d($,{gradate:"",large:"",rounded:"","data-cy-next":"",style:{margin:"0 auto"},onClick:n[4]||(n[4]=M=>o.value++)},{default:c(()=>[x(i("Següent"),1)]),_:1})])):o.value===1?(t(),r("div",he,[e("div",we,[e("div",Se,[e("b",null,i("Configuració del servidor"),1)]),e("div",null,i("Aquest assistent t'ajuda a fer una configuració òptima del servidor."),1),e("div",null,i("Els canvis que facis ara poden modificar-se més tard."),1)]),(t(),y(de,null,{default:c(()=>[d(ve,{token:_(k),onFinished:L},null,8,["token"])]),fallback:c(()=>[d(C)]),_:1})),d($,{rounded:"",style:{margin:"0 auto"},onClick:q},{default:c(()=>[x(i("Saltar la configuració "),1)]),_:1})])):o.value===2?(t(),r("div",Ce,[e("div",$e,[e("div",null,[e("b",null,i("Configuració finalitzada "),1)]),e("div",null,i("Gràcies per la teva ajuda. Ara que ja està tot llest, pots començar a fer servir el servidor immediatament."),1),e("div",null,i("La configuració avançada del servidor també poden fer-se des del \"Tauler de control\"."),1)]),e("div",{class:"_gaps_s xyjaX"},[e("div",null,[e("b",null,i("Una donació, si us plau"),1)]),e("div",null,[x(i("Misskey és un programari gratuït fet per voluntaris."),1),n[12]||(n[12]=e("br",null,null,-1)),x(i("Si ho desitges, agrairíem molt la teva donació per poder seguir desenvolupant el projecte."),1),n[13]||(n[13]=e("br",null,null,-1)),x(i("També hi ha privilegis especials per als donants!"),1)]),d(X,{target:"_blank",url:"https://misskey-hub.net/docs/donate/",style:{margin:"0 auto"}},{default:c(()=>[x(i("Saber-ne més "),1)]),_:1})],2),e("div",Ie,[d($,{gradate:"",large:"",rounded:"","data-cy-next":"",style:{margin:"0 auto"},onClick:D},{default:c(()=>[x(i("Comença"),1)]),_:1})])])):m("",!0):(t(),r("form",{key:0,class:"_gaps_m",onSubmit:n[3]||(n[3]=ce(M=>g(),["prevent"]))},[e("div",ge,[e("div",null,[e("b",null,i("La instal·lació de Misskey ha finalitzat!"),1)]),e("div",null,i("Primer crea un compte d'administrador."),1)]),d(W,{modelValue:a.value,"onUpdate:modelValue":n[0]||(n[0]=M=>a.value=M),type:"password","data-cy-admin-initial-password":""},{label:c(()=>[x(i("Contrasenya inicial per fer la primera configuració ")+" ",1),T((t(),r("div",ke,[...n[7]||(n[7]=[e("i",{class:"ti ti-help-circle"},null,-1)])])),[[V,"Fes servir la contrasenya que has fet servir al fitxer de configuració, si tu mateix has instal·lat Misskey.\nSi fas servir una empresa d'allotjament de Misskey, fes servir la contrasenya que t'han donat.\nSi no has posat cap contrasenya deixar l'espai en blanc.","dialog"]])]),prefix:c(()=>[...n[8]||(n[8]=[e("i",{class:"ti ti-lock"},null,-1)])]),_:1},8,["modelValue"]),d(W,{modelValue:u.value,"onUpdate:modelValue":n[1]||(n[1]=M=>u.value=M),pattern:"^[a-zA-Z0-9_]{1,20}$",spellcheck:!1,required:"","data-cy-admin-username":""},{label:c(()=>[x(i("Nom d'usuari")+" ",1),T((t(),r("div",_e,[...n[9]||(n[9]=[e("i",{class:"ti ti-help-circle"},null,-1)])])),[[V,"Un nom que identifiqui el teu compte d'altres en aquest servidor. Pots fer servir lletres (a~z, A~Z), números (0~9) i guions baixos (_). Els noms d'usuari no es poden canviar després.","dialog"]])]),prefix:c(()=>[...n[10]||(n[10]=[x("@",-1)])]),suffix:c(()=>[x("@"+i(_(ie)),1)]),_:1},8,["modelValue"]),d(W,{modelValue:p.value,"onUpdate:modelValue":n[2]||(n[2]=M=>p.value=M),type:"password","data-cy-admin-password":""},{label:c(()=>[x(i("Contrasenya"),1)]),prefix:c(()=>[...n[11]||(n[11]=[e("i",{class:"ti ti-lock"},null,-1)])]),_:1},8,["modelValue"]),e("div",null,[d($,{gradate:"",large:"",rounded:"",disabled:v.value,"data-cy-admin-ok":"",style:{margin:"0 auto"},type:"submit"},{default:c(()=>[x(i(v.value?"S'està processant...":"Següent"),1),v.value?(t(),y(S,{key:0})):m("",!0)]),_:1},8,["disabled"])])],32))])],2)],2)]),_:1})}}});const We={key:0},R=h({__name:"welcome.timeline.note",props:{note:{}},setup(s){const u=P("noteTextEl"),p=f(!1),a=f(!1);function v(){u.value&&u.value.scrollHeight>200&&(p.value=!0)}return me(()=>{v()}),j(()=>{v()}),(b,o)=>{const k=w("Mfm"),g=w("MkA");return t(),r("div",{key:s.note.id,class:"xaHLM"},[e("div",{class:"_panel _gaps_s xBHTS"},[s.note.cw!=null?(t(),r("div",{key:0,class:"xsFmt"},[e("div",null,[d(k,{text:s.note.cw,author:s.note.user},null,8,["text","author"])]),d(K,{modelValue:a.value,"onUpdate:modelValue":o[0]||(o[0]=L=>a.value=L),text:s.note.text,renote:s.note.renote,files:s.note.files,poll:s.note.poll,style:{margin:"4px 0"}},null,8,["modelValue","text","renote","files","poll"]),a.value?(t(),r("div",We,[s.note.replyId?(t(),y(g,{key:0,class:"reply",to:`/notes/${s.note.replyId}`},{default:c(()=>[...o[1]||(o[1]=[e("i",{class:"ti ti-arrow-back-up"},null,-1)])]),_:1},8,["to"])):m("",!0),s.note.text?(t(),y(k,{key:1,text:s.note.text,author:s.note.user},null,8,["text","author"])):m("",!0),s.note.renoteId?(t(),y(g,{key:2,class:"rp",to:`/notes/${s.note.renoteId}`},{default:c(()=>[...o[2]||(o[2]=[x("RN: ...",-1)])]),_:1},8,["to"])):m("",!0)])):m("",!0)],2)):(t(),r("div",{key:1,ref_key:"noteTextEl",ref:u,class:B(["xoIiV",{xAbcB:p.value}])},[s.note.replyId?(t(),y(g,{key:0,class:"reply",to:`/notes/${s.note.replyId}`},{default:c(()=>[...o[3]||(o[3]=[e("i",{class:"ti ti-arrow-back-up"},null,-1)])]),_:1},8,["to"])):m("",!0),s.note.text?(t(),y(k,{key:1,text:s.note.text,author:s.note.user},null,8,["text","author"])):m("",!0),s.note.renoteId?(t(),y(g,{key:2,class:"rp",to:`/notes/${s.note.renoteId}`},{default:c(()=>[...o[4]||(o[4]=[x("RN: ...",-1)])]),_:1},8,["to"])):m("",!0)],2)),s.note.files&&s.note.files.length>0&&(s.note.cw==null||a.value)?(t(),r("div",{key:2,class:"xsFmt"},[d(ee,{mediaList:s.note.files.slice(0,4)},null,8,["mediaList"])],2)):m("",!0),s.note.reactionCount>0?(t(),r("div",{key:3,class:"xzQqW"},[d(te,{noteId:s.note.id,reactions:s.note.reactions,reactionEmojis:s.note.reactionEmojis,myReaction:s.note.myReaction,maxNumber:16},null,8,["noteId","reactions","reactionEmojis","myReaction"])],2)):m("",!0)],2)],2)}}});const Be=h({__name:"welcome.timeline",setup(s){const u=f([]),p=f(!1),a=f(null),v=P("notesMainContainerEl");U("notes/featured").then(o=>{u.value=o});function b(){a.value!=="loop"&&(a.value="loop")}return j(()=>{if(!v.value)return;const o=se(v.value),k=o?o.clientHeight:window.innerHeight;v.value.offsetHeight>k&&(a.value===null&&(a.value="intro"),p.value=!0)}),(o,k)=>(t(),r("div",{class:"xfFQW _gaps"},[e("div",{ref_key:"notesMainContainerEl",ref:v,class:B(["_gaps",["xAb7L",{xy2kn:a.value==="intro",xjZpJ:a.value==="loop"}]]),onAnimationend:b},[(t(!0),r(z,null,E(u.value,g=>(t(),y(R,{key:`${g.id}_1`,class:"xciKj",note:g},null,8,["class","note"]))),128))],34),p.value?(t(),r("div",{key:0,class:B(["_gaps",["x3mvU",{xy2kn:a.value==="intro",xjZpJ:a.value==="loop"}]])},[(t(!0),r(z,null,E(u.value,g=>(t(),y(R,{key:`${g.id}_2`,class:"xciKj",note:g},null,8,["class","note"]))),128))],2)):m("",!0)],2))}});const Z=h({__name:"MkFeaturedPhotos",setup(s){return(u,p)=>_(I)?(t(),r("div",{key:0,class:"xrjGt",style:pe({backgroundImage:`url(${_(I).backgroundImageUrl})`})},null,6)):m("",!0)}});const ze=["src"],Ee=["src"],Ae={class:"_monospace"},Ve=h({__name:"welcome.entrance.classic",setup(s){const u=f();function p(a){return a.iconUrl?ne(a.iconUrl,"preview"):""}return U("federation/instances",{sort:"+pubSub",limit:20,blocked:!1}).then(a=>{u.value=a}),(a,v)=>{const b=w("MkA");return _(I)?(t(),r("div",{key:0,class:"xx2aY"},[d(Z,{class:"xr3n4"},null,8,["class"]),d(Be,{class:"x2xnZ"},null,8,["class"]),e("div",{class:"xsVYM"},null,2),e("div",{class:"xlyNR"},null,2),e("div",{class:"x7xX8"},[e("div",{class:"xwfiq"},"Powered by",2),e("img",{src:_(F),class:"xCU4S"},null,10,ze)],2),e("div",{class:"xBo2b"},[d(Q)],2),u.value&&u.value.length>0?(t(),r("div",{key:0,class:"xkMvt"},[d(xe,{duration:40},{default:c(()=>[(t(!0),r(z,null,E(u.value,o=>(t(),y(b,{key:o.id,class:"xhheg",to:`/instance-info/${o.host}`,behavior:"window"},{default:c(()=>[o.iconUrl?(t(),r("img",{key:0,class:"xc8dk",src:p(o),alt:""},null,10,Ee)):m("",!0),e("span",Ae,i(o.host),1)]),_:2},1032,["class","to"]))),128))]),_:1})],2)):m("",!0)],2)):m("",!0)}}});const Te=["src"],Ne=h({__name:"welcome.entrance.simple",setup(s){return(u,p)=>_(I)?(t(),r("div",{key:0,class:"xzIGI"},[d(Z,{class:"x5Qk7"},null,8,["class"]),e("div",{class:"xmiBg"},[e("div",{class:"xsLEg"},"Powered by",2),e("img",{src:_(F),class:"x5A63"},null,10,Te)],2),e("div",{class:"xlJ4D"},[d(Q)],2)],2)):m("",!0)}});const Re={key:0},lt=h({__name:"welcome",setup(s){const u=f(null);return oe(!0).then(p=>{u.value=p}),N(()=>[]),N(()=>[]),le(()=>({title:re,icon:null})),(p,a)=>u.value?(t(),r("div",Re,[u.value.requireSetup?(t(),y(Le,{key:0})):(u.value.clientOptions.entrancePageStyle??"classic")==="classic"?(t(),y(Ve,{key:1})):(t(),y(Ne,{key:2}))])):m("",!0)}});export{lt as default};

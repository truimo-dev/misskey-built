const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["https://fastly.jsdelivr.net/gh/truimo-dev/misskey-built@latest/_frontend_vite_/scripts/3iSoGi4ic-q5Amx_Og.js","https://fastly.jsdelivr.net/gh/truimo-dev/misskey-built@latest/_frontend_vite_/scripts/3iSoGi4ic-DV-GuiCp.js","https://fastly.jsdelivr.net/gh/truimo-dev/misskey-built@latest/_frontend_vite_/scripts/3iSoGi4ic-D0mTJ0Mu.js","https://fastly.jsdelivr.net/gh/truimo-dev/misskey-built@latest/_frontend_vite_/scripts/3iSoGi4ic-B1GPmOGN.js","https://fastly.jsdelivr.net/gh/truimo-dev/misskey-built@latest/_frontend_vite_/scripts/3iSoGi4ic-Dty8GuTz.js","https://fastly.jsdelivr.net/gh/truimo-dev/misskey-built@latest/_frontend_vite_/scripts/3iSoGi4ic-D98_HDRS.js","https://fastly.jsdelivr.net/gh/truimo-dev/misskey-built@latest/_frontend_vite_/assets/3iSoGi4ic-DZU1WGtr.css","https://fastly.jsdelivr.net/gh/truimo-dev/misskey-built@latest/_frontend_vite_/assets/3iSoGi4ic-9GwroBN9.css","https://fastly.jsdelivr.net/gh/truimo-dev/misskey-built@latest/_frontend_vite_/scripts/3iSoGi4ic-DkSECkZ7.js"])))=>i.map(i=>d[i]);
import{b as ne,a as b,l as f,i as r,C as F,p as o,E as m,t as p,q as B,g as _,c as ue,B as V,w as te,m as xe,e as Ge,L as qe,H as Le,z as de,k as He,f as S,h as C,F as z,D as G,j as ge,A as Y,G as Fe,v as Ve}from"./3iSoGi4ic-D0mTJ0Mu.js";import{t as ce,u as j,J as N,b8 as U,b as I,A as W,bj as Te,s as fe,d as Je,e as Xe,bz as _e,r as ve,k as ae,bc as Ie,bd as je,$ as ke,cg as Ke,P as he,di as Ye,aP as Q,U as Qe,aH as Ze,M as H,aa as ye,h as De,L as le,db as et}from"./3iSoGi4ic-DV-GuiCp.js";import{g as Me}from"./3iSoGi4ic-DkSECkZ7.js";const tt={key:0,class:"ti ti-cloud",style:{"margin-right":"4px"}},Ce=ne({__name:"MkDrive.navFolder",props:{folder:{},parentFolder:{}},emits:["upload"],setup(u,{emit:q}){const n=u,w=q,l=b(!1);function M(s){if(!s.dataTransfer)return;if(n.folder==null&&n.parentFolder==null&&(s.dataTransfer.dropEffect="none"),s.dataTransfer.items[0].kind==="file"||ce(s,["driveFiles","driveFolders"]))switch(s.dataTransfer.effectAllowed){case"all":case"uninitialized":case"copy":case"copyLink":case"copyMove":s.dataTransfer.dropEffect="copy";break;case"linkMove":case"move":s.dataTransfer.dropEffect="move";break;default:s.dataTransfer.dropEffect="none";break}else s.dataTransfer.dropEffect="none";return!1}function h(){(n.folder||n.parentFolder)&&(l.value=!0)}function E(){(n.folder||n.parentFolder)&&(l.value=!1)}function $(s){if(l.value=!1,!!s.dataTransfer){if(s.dataTransfer.files.length>0){w("upload",Array.from(s.dataTransfer.files),n.folder);return}{const v=j(s,"driveFiles");v!=null&&N("drive/files/move-bulk",{fileIds:v.map(y=>y.id),folderId:n.folder?n.folder.id:null}).then(()=>{U.emit("driveFilesUpdated",v.map(y=>({...y,folderId:n.folder?n.folder.id:null,folder:n.folder??null})))})}{const v=j(s,"driveFolders");if(v!=null){const y=v[0];if(n.folder&&y.id===n.folder.id)return;N("drive/folders/update",{folderId:y.id,parentId:n.folder?n.folder.id:null}).then(()=>{U.emit("driveFoldersUpdated",[y].map(O=>({...O,parentId:n.folder?n.folder.id:null,parent:n.folder??null})))})}}}}return(s,v)=>(r(),f("div",{class:_(["x6IYC",{xl6k4:l.value}]),onDragover:B(M,["prevent","stop"]),onDragenter:h,onDragleave:E,onDrop:B($,["stop"])},[u.folder==null?(r(),f("i",tt)):F("",!0),o("span",null,m(u.folder==null?"Drive":u.folder.name),1)],34))}});const lt=["title"],at=ne({__name:"MkDrive.folder",props:{folder:{},isSelected:{type:Boolean,default:!1},selectMode:{type:Boolean,default:!1}},emits:["chosen","unchose","upload","dragstart","dragend"],setup(u,{emit:q}){const n=u,w=q,l=b(!1),M=b(!1),h=b(!1),E=ue(()=>n.folder.name);function $(){n.isSelected?w("unchose",n.folder):w("chosen",n.folder)}function s(){l.value=!0}function v(){l.value=!1}function y(i){if(!i.dataTransfer)return;if(h.value){i.dataTransfer.dropEffect="none";return}if(i.dataTransfer.items[0].kind==="file"||ce(i,["driveFiles","driveFolders"]))switch(i.dataTransfer.effectAllowed){case"all":case"uninitialized":case"copy":case"copyLink":case"copyMove":i.dataTransfer.dropEffect="copy";break;case"linkMove":case"move":i.dataTransfer.dropEffect="move";break;default:i.dataTransfer.dropEffect="none";break}else i.dataTransfer.dropEffect="none"}function O(){h.value||(M.value=!0)}function k(){M.value=!1}function D(i){if(M.value=!1,!!i.dataTransfer){if(i.dataTransfer.files.length>0){w("upload",Array.from(i.dataTransfer.files),n.folder);return}{const x=j(i,"driveFiles");x!=null&&N("drive/files/move-bulk",{fileIds:x.map(P=>P.id),folderId:n.folder.id}).then(()=>{U.emit("driveFilesUpdated",x.map(P=>({...P,folderId:n.folder.id,folder:n.folder})))})}{const x=j(i,"driveFolders");if(x!=null){const P=x[0];if(P.id===n.folder.id)return;N("drive/folders/update",{folderId:P.id,parentId:n.folder.id}).then(()=>{U.emit("driveFoldersUpdated",[P].map(L=>({...L,parentId:n.folder.id,parent:n.folder})))}).catch(L=>{switch(L.code){case"RECURSIVE_NESTING":Te("driveFolderCircularReference"),W({type:"error",title:"Operasi tersebut tidak dapat diselesaikan.",text:"Folder tujuan adalah subfolder dari folder yang ingin kamu pindahkan."});break;default:W({type:"error",text:"Terjadi kesalahan"})}})}}}}function T(i){i.dataTransfer&&(i.dataTransfer.effectAllowed="move",fe(i,"driveFolders",[n.folder]),h.value=!0,w("dragstart"))}function se(){h.value=!1,w("dragend")}function re(){ae({title:"Ubah nama folder",placeholder:"Masukkan nama folder yang baru",default:n.folder.name}).then(({canceled:i,result:x})=>{i||N("drive/folders/update",{folderId:n.folder.id,name:x}).then(()=>{U.emit("driveFoldersUpdated",[{...n.folder,name:x}])})})}function J(){Ie(null).then(i=>{i[0]&&i[0].id===n.folder.id||N("drive/folders/update",{folderId:n.folder.id,parentId:i[0]?i[0].id:null}).then(()=>{U.emit("driveFoldersUpdated",[{...n.folder,parentId:i[0]?i[0].id:null,parent:i[0]??null}])})})}function ie(){N("drive/folders/delete",{folderId:n.folder.id}).then(()=>{I.s.uploadFolder===n.folder.id&&I.commit("uploadFolder",null),U.emit("driveFoldersDeleted",[n.folder])}).catch(i=>{switch(i.id){case"b0fc8a17-963c-405d-bfbc-859a487295e1":W({type:"error",title:"Tidak dapat menghapus",text:"Karena folder ini tidak kosong, maka tidak dapat dihapus."});break;default:W({type:"error",text:"Tidak dapat menghapus"})}})}function Z(i){let x;x=[{text:"Buka di jendela",icon:"ti ti-app-window",action:async()=>{const{dispose:P}=await Je(Xe(()=>import("./3iSoGi4ic-q5Amx_Og.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8]),import.meta.url).then(L=>L.default),{initialFolder:n.folder},{closed:()=>P()})}},{type:"divider"},{text:"Ubah nama",icon:"ti ti-forms",action:re},{text:"Pindah",icon:"ti ti ti-folder-symlink",action:J},{type:"divider"},{text:"Hapus",icon:"ti ti-trash",danger:!0,action:ie}],I.s.devMode&&(x=x.concat([{type:"divider"},{icon:"ti ti-hash",text:"Salin Folder",action:()=>{_e(n.folder.id)}}])),ve(x,i)}return(i,x)=>(r(),f("div",{class:_(["xBP0P",{xKolP:M.value}]),draggable:"true",title:E.value,onContextmenu:B(Z,["stop"]),onMouseover:s,onMouseout:v,onDragover:B(y,["prevent","stop"]),onDragenter:B(O,["prevent"]),onDragleave:k,onDrop:B(D,["prevent","stop"]),onDragstart:T,onDragend:se},[(r(),f("svg",{class:"x4eEB",viewBox:"0 0 200 150",preserveAspectRatio:"none"},[...x[0]||(x[0]=[o("path",{d:"M190,25C195.523,25 200,29.477 200,35C200,58.415 200,116.585 200,140C200,145.523 195.523,150 190,150C155.86,150 44.14,150 10,150C4.477,150 0,145.523 0,140C0,112.727 0,37.273 0,10C0,4.477 4.477,0 10,-0C26.642,0 59.332,0 70.858,0C73.51,-0 76.054,1.054 77.929,2.929C82.74,7.74 92.26,17.26 97.071,22.071C98.946,23.946 101.49,25 104.142,25C118.808,25 168.535,25 190,25Z",style:{fill:"var(--MI_THEME-accentedBg)"}},null,-1)])],2)),o("div",{class:"xvx9J"},m(u.folder.name),3),p(I).s.uploadFolder==u.folder.id?(r(),f("div",{key:0,class:"xidPB"},m("Lokasi unggah folder bawaan"),3)):F("",!0),u.selectMode?(r(),f("button",{key:1,class:"_button xfo6W",onClick:B($,["prevent","stop"])},[o("div",{class:_(["xbBJE",{xvqWC:u.isSelected,"ti ti-check":u.isSelected}])},null,2)],2)):F("",!0)],42,lt))}});const be="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3c!DOCTYPE%20svg%20PUBLIC%20'-//W3C//DTD%20SVG%201.1//EN'%20'http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd'%3e%3csvg%20version='1.1'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%20x='0px'%20y='0px'%20width='96px'%20height='96px'%20viewBox='0%200%2096%2096'%20enable-background='new%200%200%2096%2096'%20xml:space='preserve'%3e%3cpolygon%20fill='%230B8AEA'%20points='0,45.255%2045.254,0%2084.854,0%200,84.854%20'/%3e%3c/svg%3e",nt="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3c!DOCTYPE%20svg%20PUBLIC%20'-//W3C//DTD%20SVG%201.1//EN'%20'http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd'%3e%3csvg%20version='1.1'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%20x='0px'%20y='0px'%20width='96px'%20height='96px'%20viewBox='0%200%2096%2096'%20enable-background='new%200%200%2096%2096'%20xml:space='preserve'%3e%3cpolygon%20fill='%23ea2412'%20points='0,45.255%2045.254,0%2084.854,0%200,84.854%20'/%3e%3c/svg%3e",st=["title"],rt={style:{"pointer-events":"none"}},it={key:0,style:{opacity:"0.5"}},we=ne({__name:"MkDrive.file",props:{file:{},folder:{},isSelected:{type:Boolean,default:!1}},emits:["dragstart","dragend"],setup(u,{emit:q}){const n=u,w=q,l=b(!1),M=ue(()=>`${n.file.name}
${n.file.type} ${je(n.file.size)}`);function h(s){ve(Me(n.file,n.folder),s)}function E(s){s.dataTransfer&&(s.dataTransfer.effectAllowed="move",fe(s,"driveFiles",[n.file])),l.value=!0,w("dragstart",s)}function $(){l.value=!1,w("dragend")}return(s,v)=>(r(),f("div",{class:_(["xuxtX",{xBsJM:u.isSelected}]),draggable:"true",title:M.value,onContextmenu:B(h,["stop"]),onDragstart:E,onDragend:$},[o("div",rt,[p(ke)?.avatarId==u.file.id?(r(),f("div",{key:0,class:"xCswe"},[o("img",{class:"xAXBW",src:be},null,2),o("p",{class:"xB0wN"},m("Avatar"),3)],2)):F("",!0),p(ke)?.bannerId==u.file.id?(r(),f("div",{key:1,class:"xCswe"},[o("img",{class:"xAXBW",src:be},null,2),o("p",{class:"xB0wN"},m("Banner"),3)],2)):F("",!0),u.file.isSensitive?(r(),f("div",{key:2,class:"xCswe xEghq"},[o("img",{class:"xAXBW",src:nt},null,2),o("p",{class:"xB0wN"},m("Konten sensitif"),3)],2)):F("",!0),V(Ke,{class:"xDq9N",file:u.file,fit:"contain"},null,8,["class","file"]),o("p",{class:"xoq1D"},[o("span",null,m(u.file.name.lastIndexOf(".")!=-1?u.file.name.substring(0,u.file.name.lastIndexOf(".")):u.file.name),1),u.file.name.lastIndexOf(".")!=-1?(r(),f("span",it,m(u.file.name.substring(u.file.name.lastIndexOf("."))),1)):F("",!0)],2)])],42,st))}});const ot={key:0},dt=["innerHTML"],ut={key:0},ct={key:1},ft={key:2},Ft=ne({__name:"MkDrive",props:{initialFolder:{default:null},type:{},multiple:{type:Boolean,default:!1},select:{default:null}},emits:["changeSelectedFiles","changeSelectedFolders","cd"],setup(u,{emit:q}){const n=u,w=q,l=b(null),M=b([]),h=b(!1),E=b(!1),$=b(!1),s=b([]),v=b([]),y=b(!1);te(s,()=>{w("changeSelectedFiles",s.value)},{deep:!0}),te([v,y],()=>{w("changeSelectedFolders",y.value?[null,...v.value]:v.value)});const O=b(!0),k=b("+createdAt"),D=xe(new he("drive/files",{limit:30,canFetchDetection:"limit",params:()=>({folderId:l.value?l.value.id:null,type:n.type,sort:k.value})})),T=xe(new he("drive/folders",{limit:30,canFetchDetection:"limit",params:()=>({folderId:l.value?l.value.id:null})})),se=Ye(D.items,"month"),re=ue(()=>["+createdAt","-createdAt"].includes(k.value));te(l,()=>w("cd",l.value)),te(k,()=>{J()});async function J(){O.value=!0,await Promise.all([T.init(),D.init()]),O.value=!1}function ie(t){t.folderId===(l.value?.id??null)&&D.prepend(t)}function Z(t,e){$.value&&(s.value.some(d=>d.id===t.id)||s.value.push(t),e.dataTransfer&&(e.dataTransfer.effectAllowed="move",fe(e,"driveFiles",s.value))),E.value=!0}function i(t){if(!t.dataTransfer)return;if(E.value){t.dataTransfer.dropEffect="none";return}if(t.dataTransfer.items[0].kind==="file"||ce(t,["driveFiles","driveFolders"]))switch(t.dataTransfer.effectAllowed){case"all":case"uninitialized":case"copy":case"copyLink":case"copyMove":t.dataTransfer.dropEffect="copy";break;case"linkMove":case"move":t.dataTransfer.dropEffect="move";break;default:t.dataTransfer.dropEffect="none";break}else t.dataTransfer.dropEffect="none";return!1}function x(){E.value||(h.value=!0)}function P(){h.value=!1}function L(t){if(h.value=!1,!!t.dataTransfer){if(t.dataTransfer.files.length>0){ye(Array.from(t.dataTransfer.files),{folderId:l.value?.id??null});return}{const e=j(t,"driveFiles");e!=null&&N("drive/files/move-bulk",{fileIds:e.map(d=>d.id),folderId:l.value?l.value.id:null}).then(()=>{U.emit("driveFilesUpdated",e.map(d=>({...d,folderId:l.value?l.value.id:null,folder:l.value})))})}{const e=j(t,"driveFolders");if(e!=null){const d=e[0];if(l.value&&d.id===l.value.id||T.items.value.some(g=>g.id===d.id))return!1;N("drive/folders/update",{folderId:d.id,parentId:l.value?l.value.id:null}).then(()=>{U.emit("driveFoldersUpdated",[d].map(g=>({...g,parentId:l.value?l.value.id:null,parent:l.value})))}).catch(g=>{switch(g.code){case"RECURSIVE_NESTING":Te("driveFolderCircularReference"),W({type:"error",title:"Operasi tersebut tidak dapat diselesaikan.",text:"Folder tujuan adalah subfolder dari folder yang ingin kamu pindahkan."});break;default:W({type:"error",text:"Terjadi kesalahan"})}})}}}}function oe(t,e){ye(t,{folderId:e?.id??null})}async function Ee(){const{canceled:t,result:e}=await ae({title:"Unggah dari URL",type:"url",placeholder:"URL berkas yang ingin kamu unggah"});t||!e||(await le("drive/files/upload-from-url",{url:e,folderId:l.value?l.value.id:void 0}),W({title:"Pengunggahan telah diminta",text:"Membutuhkan beberapa waktu hingga pengunggahan selesai"}))}async function $e(){const{canceled:t,result:e}=await ae({title:"Buat folder",placeholder:"Nama folder"});if(t||e==null)return;const d=await le("drive/folders/create",{name:e,parentId:l.value?l.value.id:void 0});T.prepend(d)}async function Ae(t){const{canceled:e,result:d}=await ae({title:"Ubah nama folder",placeholder:"Masukkan nama folder yang baru",default:t.name});if(e)return;const g=await le("drive/folders/update",{folderId:t.id,name:d});U.emit("driveFoldersUpdated",[g])}function Se(t){N("drive/folders/delete",{folderId:t.id}).then(()=>{K(t.parentId),U.emit("driveFoldersDeleted",[t])}).catch(e=>{switch(e.id){case"b0fc8a17-963c-405d-bfbc-859a487295e1":W({type:"error",title:"Tidak dapat menghapus",text:"Karena folder ini tidak kosong, maka tidak dapat dihapus."});break;default:W({type:"error",text:"Tidak dapat menghapus"})}})}function pe(t,e){if(t.shiftKey&&($.value=!0),n.select==="file"||$.value){const d=s.value.some(g=>g.id===e.id);if($.value){d?s.value=s.value.filter(g=>g.id!==e.id):s.value.push(e);return}n.multiple?d?s.value=s.value.filter(g=>g.id!==e.id):s.value.push(e):d||(s.value=[e])}else De(Me(e,l.value),t.currentTarget??t.target??void 0)}function Be(t){const e=v.value.some(d=>d.id===t.id);n.multiple?e?v.value=v.value.filter(d=>d.id!==t.id):v.value.push(t):e||(v.value=[t])}function Ue(t){v.value=v.value.filter(e=>e.id!==t.id)}function K(t){if(t)typeof t=="object"&&(t=t.id);else{Ne();return}O.value=!0,N("drive/folders/show",{folderId:t}).then(e=>{l.value=e,M.value=[];const d=g=>{M.value.unshift(g),g.parent&&d(g.parent)};e.parent&&d(e.parent),J()})}async function Pe(){if(s.value.length===0)return;const t=await Ie(l.value?l.value.id:null);await le("drive/files/move-bulk",{fileIds:s.value.map(e=>e.id),folderId:t[0]?t[0].id:null}),U.emit("driveFilesUpdated",s.value.map(e=>({...e,folderId:t[0]?t[0].id:null,folder:t[0]??null})))}function Ne(){l.value!=null&&(l.value=null,M.value=[],J())}function me(){const t=[];return t.push({text:"Tambahkan berkas",type:"label"},{text:"Unggah",icon:"ti ti-upload",action:()=>{et({multiple:!0,folderId:l.value?.id})}},{text:"Dari URL",icon:"ti ti-link",action:()=>{Ee()}},{type:"divider"},{text:l.value?l.value.name:"Drive",type:"label"}),t.push({type:"parent",text:"Urutkan",icon:"ti ti-arrows-sort",children:[{text:`${"Bergabung pada"} (${"Urutkan menurun"})`,icon:"ti ti-sort-descending-letters",action:()=>{k.value="+createdAt"},active:k.value==="+createdAt"},{text:`${"Bergabung pada"} (${"Urutkan naik"})`,icon:"ti ti-sort-ascending-letters",action:()=>{k.value="-createdAt"},active:k.value==="-createdAt"},{text:`${"Ukuran"} (${"Urutkan menurun"})`,icon:"ti ti-sort-descending-letters",action:()=>{k.value="+size"},active:k.value==="+size"},{text:`${"Ukuran"} (${"Urutkan naik"})`,icon:"ti ti-sort-ascending-letters",action:()=>{k.value="-size"},active:k.value==="-size"},{text:`${"Nama"} (${"Urutkan menurun"})`,icon:"ti ti-sort-descending-letters",action:()=>{k.value="+name"},active:k.value==="+name"},{text:`${"Nama"} (${"Urutkan naik"})`,icon:"ti ti-sort-ascending-letters",action:()=>{k.value="-name"},active:k.value==="-name"}]}),l.value&&t.push({text:"Ubah nama folder",icon:"ti ti-forms",action:()=>{l.value&&Ae(l.value)}},{text:"Hapus folder",icon:"ti ti-trash",action:()=>{Se(l.value)}}),t.push({text:"Buat folder",icon:"ti ti-folder-plus",action:()=>{$e()}},{type:"divider"},{type:"switch",text:"Sunting",icon:"ti ti-pointer",ref:$}),t}function Oe(t){De(me(),t.currentTarget??t.target??void 0)}function Re(t){ve(me(),t)}Q("driveFileCreated",t=>{t.folderId===(l.value?.id??null)&&D.prepend(t)}),Q("driveFilesUpdated",t=>{for(const e of t)D.items.value.some(d=>d.id===e.id)?e.folderId===(l.value?.id??null)?D.updateItem(e.id,()=>e):D.removeItem(e.id):e.folderId===(l.value?.id??null)&&D.prepend(e)}),Q("driveFilesDeleted",t=>{for(const e of t)D.removeItem(e.id)}),Q("driveFoldersUpdated",t=>{for(const e of t)T.items.value.some(d=>d.id===e.id)?e.parentId===(l.value?.id??null)?T.updateItem(e.id,()=>e):T.removeItem(e.id):e.parentId===(l.value?.id??null)&&T.prepend(e)}),Q("driveFoldersDeleted",t=>{for(const e of t)T.removeItem(e.id)});let ee=null;return Ge(()=>{Qe.s.realtimeMode&&(ee=Ze().useChannel("drive"),ee.on("fileCreated",ie)),n.initialFolder?K(n.initialFolder):J()}),qe(()=>{}),Le(()=>{ee?.dispose()}),(t,e)=>{const d=de("MkTip"),g=de("MkStickyContainer"),We=de("MkLoading"),ze=He("anim");return r(),S(g,{style:{background:"var(--MI_THEME-bg)"}},{header:C(()=>[o("nav",{class:"x3Qrn"},[o("div",{class:"xbiH2",onContextmenu:B(()=>{},["prevent","stop"])},[V(Ce,{class:_(["xDuE7",{xxjia:l.value==null}]),parentFolder:l.value,onClick:e[0]||(e[0]=c=>K(null)),onUpload:oe},null,8,["class","parentFolder"]),(r(!0),f(z,null,Y(M.value,c=>(r(),f(z,null,[o("span",{class:"xDuE7 xDRDK"},[...e[12]||(e[12]=[o("i",{class:"ti ti-chevron-right"},null,-1)])],2),V(Ce,{folder:c,parentFolder:l.value,class:"xDuE7",onClick:A=>K(c),onUpload:oe},null,8,["folder","parentFolder","class","onClick"])],64))),256)),l.value!=null?(r(),f("span",{key:0,class:"xDuE7 xDRDK"},[...e[13]||(e[13]=[o("i",{class:"ti ti-chevron-right"},null,-1)])],2)):F("",!0),l.value!=null?(r(),f("span",{key:1,class:"xDuE7 xxjia"},m(l.value.name),3)):F("",!0)],34),o("button",{class:"_button x7suJ",onClick:Oe},[...e[14]||(e[14]=[o("i",{class:"ti ti-dots"},null,-1)])],2)],2)]),footer:C(()=>[$.value?(r(),f("div",{key:0,class:"xx6NR"},[V(H,{primary:"",rounded:"",onClick:e[11]||(e[11]=c=>Pe())},{default:C(()=>[e[20]||(e[20]=o("i",{class:"ti ti-folder-symlink"},null,-1)),G(" "+m("Pindah")+"...",1)]),_:1})],2)):F("",!0)]),default:C(()=>[o("div",null,[u.select==="folder"?(r(),f("div",ot,[l.value==null?(r(),f(z,{key:0},[y.value?(r(),S(H,{key:1,onClick:e[2]||(e[2]=c=>y.value=!1)},{default:C(()=>[e[16]||(e[16]=o("i",{class:"ti ti-checkbox"},null,-1)),G(" "+m("Deselect folder"),1)]),_:1})):(r(),S(H,{key:0,onClick:e[1]||(e[1]=c=>y.value=!0)},{default:C(()=>[e[15]||(e[15]=o("i",{class:"ti ti-square"},null,-1)),G(" "+m("Pilih folder"),1)]),_:1}))],64)):(r(),f(z,{key:1},[v.value.some(c=>c.id===l.value.id)?(r(),S(H,{key:1,onClick:e[4]||(e[4]=c=>v.value=v.value.filter(A=>A.id!==l.value.id))},{default:C(()=>[e[18]||(e[18]=o("i",{class:"ti ti-checkbox"},null,-1)),G(" "+m("Deselect folder"),1)]),_:1})):(r(),S(H,{key:0,onClick:e[3]||(e[3]=c=>v.value.push(l.value))},{default:C(()=>[e[17]||(e[17]=o("i",{class:"ti ti-square"},null,-1)),G(" "+m("Pilih folder"),1)]),_:1}))],64))])):F("",!0),o("div",{ref:"main",class:_(["xtnSW",{x4FSG:O.value}]),onDragover:B(i,["prevent","stop"]),onDragenter:x,onDragleave:P,onDrop:B(L,["prevent","stop"]),onContextmenu:B(Re,["stop"])},[o("div",{class:"xCWCC"},[V(d,{k:"drive"},{default:C(()=>[o("div",{innerHTML:"In Drive, a list of files you've uploaded in the past will be displayed. <br>  \nYou can reuse these files when attaching them to notes, or you can upload files in advance to post later. <br>  \n<b>Be careful when deleting a file, as it will not be available in all places where it was used (such as notes, pages, avatars, banners, etc.).</b> <br>  \nYou can also create folders to organize your files."},null,8,dt)]),_:1})],2),o("div",{class:"xeQ0G"},[(r(!0),f(z,null,Y(p(T).items.value,(c,A)=>ge((r(),S(at,{key:c.id,class:"",folder:c,selectMode:u.select==="folder",isSelected:v.value.some(R=>R.id===c.id),onChosen:Be,onUnchose:Ue,onClick:R=>K(c),onUpload:oe,onDragstart:e[5]||(e[5]=R=>E.value=!0),onDragend:e[6]||(e[6]=R=>E.value=!1)},null,8,["class","folder","selectMode","isSelected","onClick"])),[[ze,A]])),128))],2),p(T).canFetchOlder.value?(r(),S(H,{key:0,primary:"",rounded:"",onClick:e[7]||(e[7]=c=>p(T).fetchOlder())},{default:C(()=>[G(m("Selebihnya"),1)]),_:1})):F("",!0),re.value?(r(!0),f(z,{key:1},Y(p(se),(c,A)=>(r(),S(g,{key:`${c.date.getFullYear()}/${c.date.getMonth()+1}`},{header:C(()=>[o("div",{class:"xt72a"},[o("span",null,[e[19]||(e[19]=o("i",{class:"ti ti-chevron-down"},null,-1)),G(" "+m(c.date.getFullYear())+"/"+m(c.date.getMonth()+1),1)])],2)]),default:C(()=>[V(Fe,{tag:"div",enterActiveClass:p(I).s.animation?"xqlMx":"",leaveActiveClass:p(I).s.animation?"x5LU6":"",enterFromClass:p(I).s.animation?"xrSHc":"",leaveToClass:p(I).s.animation?"xxgEM":"",moveClass:p(I).s.animation?"xd7OV":"",class:"xCJma"},{default:C(()=>[(r(!0),f(z,null,Y(c.items,R=>(r(),S(we,{key:R.id,class:"",file:R,folder:l.value,isSelected:s.value.some(X=>X.id===R.id),onClick:X=>pe(X,R),onDragstart:X=>Z(R,X),onDragend:e[8]||(e[8]=X=>E.value=!1)},null,8,["class","file","folder","isSelected","onClick","onDragstart"]))),128))]),_:2},1032,["enterActiveClass","leaveActiveClass","enterFromClass","leaveToClass","moveClass","class"])]),_:2},1024))),128)):(r(),S(Fe,{key:2,tag:"div",enterActiveClass:p(I).s.animation?"xqlMx":"",leaveActiveClass:p(I).s.animation?"x5LU6":"",enterFromClass:p(I).s.animation?"xrSHc":"",leaveToClass:p(I).s.animation?"xxgEM":"",moveClass:p(I).s.animation?"xd7OV":"",class:"xCJma"},{default:C(()=>[(r(!0),f(z,null,Y(p(D).items.value,c=>(r(),S(we,{key:c.id,class:"",file:c,folder:l.value,isSelected:s.value.some(A=>A.id===c.id),onClick:A=>pe(A,c),onDragstart:A=>Z(c,A),onDragend:e[9]||(e[9]=A=>E.value=!1)},null,8,["class","file","folder","isSelected","onClick","onDragstart"]))),128))]),_:1},8,["enterActiveClass","leaveActiveClass","enterFromClass","leaveToClass","moveClass","class"])),ge(V(H,{class:"xrvRd",primary:"",rounded:"",onClick:e[10]||(e[10]=c=>p(D).fetchOlder())},{default:C(()=>[G(m("Selebihnya"),1)]),_:1},8,["class"]),[[Ve,p(D).canFetchOlder.value]]),p(D).items.value.length==0&&p(T).items.value.length==0&&!O.value?(r(),f("div",{key:3,class:"x1tUE"},[h.value?(r(),f("div",ut,m("Drop files here to upload"),1)):F("",!0),!h.value&&l.value==null?(r(),f("div",ct,[o("strong",null,m("Drive kosong"),1)])):F("",!0),!h.value&&l.value!=null?(r(),f("div",ft,m("Folder kosong"),1)):F("",!0)],2)):F("",!0)],34),O.value?(r(),S(We,{key:1})):F("",!0),h.value?(r(),f("div",{key:2,class:"xDDAz"},null,2)):F("",!0)])]),_:1})}}});export{Ft as M};

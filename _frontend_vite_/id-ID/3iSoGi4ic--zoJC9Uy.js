import{b as w,N as h,a as p,u as M,w as x,l as q,i as g,p as n,f as N,C as T,x as k,g as D,j as R,B as $,S as j,h as F,D as I,E as L,n as E}from"./3iSoGi4ic-D0mTJ0Mu.js";import{b4 as X,M as G}from"./3iSoGi4ic-DV-GuiCp.js";import K from"./3iSoGi4ic-DAn693fE.js";const O=["disabled","required","readonly"],W=w({__name:"MkCodeEditor",props:{modelValue:{},lang:{default:"js"},required:{type:Boolean},readonly:{type:Boolean},disabled:{type:Boolean},debounce:{type:Boolean},manualSave:{type:Boolean}},emits:["change","keydown","enter","update:modelValue"],setup(s,{emit:B}){const d=s,u=B,{modelValue:f}=h(d),t=p(f.value??""),i=p(!1),r=p(!1),l=M("inputEl"),b=()=>l.value?.focus(),S=o=>{t.value=o.target?.value??t.value,r.value=!0,u("change",o)},C=o=>{if(!(o.isComposing||o.key==="Process"||o.keyCode===229)){if(u("keydown",o),o.code==="Enter"){const e=l.value?.selectionStart??0,a=l.value?.selectionEnd??t.value.length;if(e===a){const m=t.value.slice(0,e).split(`
`),c=m[m.length-1].match(/^\s+/),y=c?c[0].length:0;o.preventDefault(),t.value=t.value.slice(0,e)+`
`+(c?c[0]:"")+t.value.slice(e),E(()=>{l.value?.setSelectionRange(e+1+y,e+1+y)})}u("enter")}if(o.key==="Tab"){const e=l.value?.selectionStart??0,a=l.value?.selectionEnd??t.value.length;t.value=t.value.slice(0,e)+"	"+t.value.slice(a),E(()=>{l.value?.setSelectionRange(e+1,e+1)}),o.preventDefault()}}},v=()=>{r.value=!1,u("update:modelValue",t.value)},V=X(1e3,v);return x(f,o=>{t.value=o??""}),x(t,o=>{d.manualSave||(d.debounce?V():v())}),(o,e)=>(g(),q("div",null,[n("div",{class:"x8qNy",onClick:b},[k(o.$slots,"label")],2),n("div",{class:D(["xmqOk",{xf6IB:i.value}])},[n("div",{class:"xuFXM"},[R(n("textarea",{ref_key:"inputEl",ref:l,"onUpdate:modelValue":e[0]||(e[0]=a=>t.value=a),class:"xuT74",disabled:s.disabled,required:s.required,readonly:s.readonly,autocomplete:"off",wrap:"off",spellcheck:"false",onFocus:e[1]||(e[1]=a=>i.value=!0),onBlur:e[2]||(e[2]=a=>i.value=!1),onKeydown:e[3]||(e[3]=a=>C(a)),onInput:S},null,42,O),[[j,t.value]]),$(K,{class:"xp0yt",codeEditor:!0,code:t.value,lang:s.lang},null,8,["class","code","lang"])],2)],2),n("div",{class:"xuGYc"},[k(o.$slots,"caption")],2),s.manualSave&&r.value?(g(),N(G,{key:0,primary:"",class:"xBjVn",onClick:v},{default:F(()=>[e[4]||(e[4]=n("i",{class:"ti ti-device-floppy"},null,-1)),I(" "+L("Simpan"),1)]),_:1},8,["class"])):T("",!0)]))}});export{W as M};

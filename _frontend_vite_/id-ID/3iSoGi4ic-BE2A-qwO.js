function it(e,t,n,r,o){for(t=t.split?t.split("."):t,r=0;r<t.length;r++)e=e?e[t[r]]:o;return e===o?n:e}var Ht="function",Gt="string",W="undefined",Kt="boolean",Te="object",Qt="array",Zt="number",Yt="symbol",en="null",xt="any",jt="*",ue="__",tn="form",nn="input",rn="button",an="select",Me=typeof process!==W?process:{};Me.env&&Me.env.NODE_ENV;var H=typeof document!==W;Me.versions!=null&&Me.versions.node!=null;typeof Deno!==W&&Deno.core;H&&window.name==="nodejs"||typeof navigator!==W&&typeof navigator.userAgent!==W&&(navigator.userAgent.includes("Node.js")||navigator.userAgent.includes("jsdom"));function Nt(e,t){return t.charAt(0)[e]()+t.slice(1)}var on=Nt.bind(null,"toUpperCase"),un=Nt.bind(null,"toLowerCase");function cn(e){return At(e)?on(en):typeof e===Te?pn(e):Object.prototype.toString.call(e).slice(8,-1)}function ze(e,t){t===void 0&&(t=!0);var n=cn(e);return t?un(n):n}function Oe(e,t){return typeof t===e}var G=Oe.bind(null,Ht),de=Oe.bind(null,Gt),le=Oe.bind(null,W),sn=Oe.bind(null,Kt);Oe.bind(null,Yt);function At(e){return e===null}function ln(e){return ze(e)===Zt&&!isNaN(e)}function fn(e){return ze(e)===Qt}function J(e){if(!dn(e))return!1;for(var t=e;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function dn(e){return e&&(typeof e===Te||e!==null)}function pn(e){return G(e.constructor)?e.constructor.name:null}function mn(e){return e instanceof Error||de(e.message)&&e.constructor&&ln(e.constructor.stackTraceLimit)}function kt(e,t){if(typeof t!="object"||At(t))return!1;if(t instanceof e)return!0;var n=ze(new e(""));if(mn(t))for(;t;){if(ze(t)===n)return!0;t=Object.getPrototypeOf(t)}return!1}kt.bind(null,TypeError);kt.bind(null,SyntaxError);function De(e,t){var n=e instanceof Element||e instanceof HTMLDocument;return n&&t?gn(e,t):n}function gn(e,t){return t===void 0&&(t=""),e&&e.nodeName===t.toUpperCase()}function Ce(e){var t=[].slice.call(arguments,1);return function(){return e.apply(void 0,[].slice.call(arguments).concat(t))}}Ce(De,tn);Ce(De,rn);Ce(De,nn);Ce(De,an);function at(e){try{return decodeURIComponent(e.replace(/\+/g," "))}catch{return null}}function vn(){if(H){var e=navigator,t=e.languages;return e.userLanguage||(t&&t.length?t[0]:e.language)}}function hn(){try{return Intl.DateTimeFormat().resolvedOptions().timeZone}catch{}}function yn(e){return(function(t){for(var n,r=Object.create(null),o=/([^&=]+)=?([^&]*)/g;n=o.exec(t);){var u=at(n[1]),c=at(n[2]);if(u)if(u.substring(u.length-2)==="[]"){var s=r[u=u.substring(0,u.length-2)]||(r[u]=[]);r[u]=Array.isArray(s)?s:[],r[u].push(c)}else r[u]=c===""||c}for(var w in r){var v=w.split("[");v.length>1&&(bn(r,v.map(function(z){return z.replace(/[?[\]\\ ]/g,"")}),r[w]),delete r[w])}return r})((function(t){return H&&window.location.search.substring(1)})())}function bn(e,t,n){for(var r=t.length-1,o=0;o<r;++o){var u=t[o];if(u==="__proto__"||u==="constructor")break;u in e||(e[u]={}),e=e[u]}e[t[r]]=n}function Le(){for(var e="",t=0,n=4294967295*Math.random()|0;t++<36;){var r="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx"[t-1],o=15&n;e+=r=="-"||r=="4"?r:(r=="x"?o:3&o|8).toString(16),n=t%8==0?4294967295*Math.random()|0:n>>4}return e}var ie="global",ve=ue+ie+ue,he=typeof self===Te&&self.self===self&&self||typeof global===Te&&global[ie]===global&&global||void 0;function ce(e){return he[ve][e]}function se(e,t){return he[ve][e]=t}function be(e){delete he[ve][e]}function Ie(e,t,n){var r;try{if(Qe(e)){var o=window[e];r=o[t].bind(o)}}catch{}return r||n}he[ve]||(he[ve]={});var je={};function Qe(e){if(typeof je[e]!==W)return je[e];try{var t=window[e];t.setItem(W,W),t.removeItem(W)}catch{return je[e]=!1}return je[e]=!0}function g(){return g=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},g.apply(null,arguments)}var te="function",Q="undefined",Pe="reducer",_t="@@redux/",We=_t+"INIT",In=_t+Math.random().toString(36),ot=(function(){return typeof Symbol===te&&Symbol.observable||"@@observable"})(),Ne=" != "+te;function $t(e,t,n){var r;if(typeof t===te&&typeof n===Q&&(n=t,t=void 0),typeof n!==Q){if(typeof n!==te)throw new Error("enhancer"+Ne);return n($t)(e,t)}if(typeof e!==te)throw new Error(Pe+Ne);var o=e,u=t,c=[],s=c,w=!1;function v(){s===c&&(s=c.slice())}function z(){return u}function p(h){if(typeof h!==te)throw new Error("Listener"+Ne);var $=!0;return v(),s.push(h),function(){if($){$=!1,v();var S=s.indexOf(h);s.splice(S,1)}}}function E(h){if(!J(h))throw new Error("Act != obj");if(typeof h.type===Q)throw new Error("ActType "+Q);if(w)throw new Error("Dispatch in "+Pe);try{w=!0,u=o(u,h)}finally{w=!1}for(var $=c=s,S=0;S<$.length;S++)(0,$[S])();return h}return E({type:We}),(r={dispatch:E,subscribe:p,getState:z,replaceReducer:function(h){if(typeof h!==te)throw new Error("next "+Pe+Ne);o=h,E({type:We})}})[ot]=function(){var h,$=p;return(h={subscribe:function(S){if(typeof S!="object")throw new TypeError("Observer != obj");function I(){S.next&&S.next(z())}return I(),{unsubscribe:$(I)}}})[ot]=function(){return this},h},r}function wn(e,t){var n=t&&t.type;return"action "+(n&&n.toString()||"?")+Pe+" "+e+" returns "+Q}function ye(){var e=[].slice.call(arguments);return e.length===0?function(t){return t}:e.length===1?e[0]:e.reduce(function(t,n){return function(){return t(n.apply(void 0,[].slice.call(arguments)))}})}function Sn(){var e=arguments;return function(t){return function(n,r,o){var u,c=t(n,r,o),s=c.dispatch,w={getState:c.getState,dispatch:function(v){return s(v)}};return u=[].slice.call(e).map(function(v){return v(w)}),g({},c,{dispatch:s=ye.apply(void 0,u)(c.dispatch)})}}}var ne=ue+"anon_id",ae=ue+"user_id",pe=ue+"user_traits",He="analytics",ee="userId",fe="anonymousId",$e=["bootstrap","params","campaign","initializeStart","initialize","initializeEnd","ready","resetStart","reset","resetEnd","pageStart","page","pageEnd","pageAborted","trackStart","track","trackEnd","trackAborted","identifyStart","identify","identifyEnd","identifyAborted","userIdChanged","registerPlugins","enablePlugin","disablePlugin","online","offline","setItemStart","setItem","setItemEnd","setItemAborted","removeItemStart","removeItem","removeItemEnd","removeItemAborted"],Ge=["name","EVENTS","config","loaded"],m=$e.reduce(function(e,t){return e[t]=t,e},{registerPluginType:function(e){return"registerPlugin:"+e},pluginReadyType:function(e){return"ready:"+e}}),ut=/^utm_/,ct=/^an_prop_/,st=/^an_trait_/;function Pn(e){var t=e.storage.setItem;return function(n){return function(r){return function(o){if(o.type===m.bootstrap){var u=o.params,c=o.user,s=o.persistedUser,w=o.initialUser,v=s.userId===c.userId;s.anonymousId!==c.anonymousId&&t(ne,c.anonymousId),v||t(ae,c.userId),w.traits&&t(pe,g({},v&&s.traits?s.traits:{},w.traits));var z=Object.keys(o.params);if(z.length){var p=u.an_uid,E=u.an_event,h=z.reduce(function($,S){if(S.match(ut)||S.match(/^(d|g)clid/)){var I=S.replace(ut,"");$.campaign[I==="campaign"?"name":I]=u[S]}return S.match(ct)&&($.props[S.replace(ct,"")]=u[S]),S.match(st)&&($.traits[S.replace(st,"")]=u[S]),$},{campaign:{},props:{},traits:{}});n.dispatch(g({type:m.params,raw:u},h,p?{userId:p}:{})),p&&setTimeout(function(){return e.identify(p,h.traits)},0),E&&setTimeout(function(){return e.track(E,h.props)},0),Object.keys(h.campaign).length&&n.dispatch({type:m.campaign,campaign:h.campaign})}}return r(o)}}}}function En(e){return function(t,n){if(t===void 0&&(t={}),n===void 0&&(n={}),n.type===m.setItemEnd){if(n.key===ne)return g({},t,{anonymousId:n.value});if(n.key===ae)return g({},t,{userId:n.value})}switch(n.type){case m.identify:return Object.assign({},t,{userId:n.userId,traits:g({},t.traits,n.traits)});case m.reset:return[ae,ne,pe].forEach(function(r){e.removeItem(r)}),Object.assign({},t,{userId:null,anonymousId:null,traits:{}});default:return t}}}function lt(e){return{userId:e.getItem(ae),anonymousId:e.getItem(ne),traits:e.getItem(pe)}}var Ke=function(e){return ue+"TEMP"+ue+e};function On(e){var t=e.storage,n=t.setItem,r=t.removeItem,o=t.getItem;return function(u){return function(c){return function(s){var w=s.userId,v=s.traits,z=s.options;if(s.type===m.reset&&([ae,pe,ne].forEach(function(h){r(h)}),[ee,fe,"traits"].forEach(function(h){be(Ke(h))})),s.type===m.identify){o(ne)||n(ne,Le());var p=o(ae),E=o(pe)||{};p&&p!==w&&u.dispatch({type:m.userIdChanged,old:{userId:p,traits:E},new:{userId:w,traits:v},options:z}),w&&n(ae,w),v&&n(pe,g({},E,v))}return c(s)}}}}var Se={};function ft(e,t){Se[e]&&G(Se[e])&&(Se[e](t),delete Se[e])}function Tt(e,t,n){return new Promise(function(r,o){return t()?r(e):n<1?o(g({},e,{queue:!0})):new Promise(function(u){return setTimeout(u,10)}).then(function(u){return Tt(e,t,n-10).then(r,o)})})}function xn(e){return{abort:e}}function Mt(e,t,n){var r={},o=t(),u=e.getState(),c=u.plugins,s=u.queue,w=u.user;if(!u.context.offline&&s&&s.actions&&s.actions.length){var v=s.actions.reduce(function(p,E,h){return c[E.plugin].loaded?(p.process.push(E),p.processIndex.push(h)):(p.requeue.push(E),p.requeueIndex.push(h)),p},{processIndex:[],process:[],requeue:[],requeueIndex:[]});if(v.processIndex&&v.processIndex.length){v.processIndex.forEach(function(p){var E=s.actions[p],h=E.plugin,$=E.payload.type,S=o[h][$];if(S&&G(S)){var I,N=(function(d,l){return d===void 0&&(d={}),l===void 0&&(l={}),[ee,fe].reduce(function(M,O){return d.hasOwnProperty(O)&&l[O]&&l[O]!==d[O]&&(M[O]=l[O]),M},d)})(E.payload,w),T=r[N.meta.rid];if(!T&&(I=S({payload:N,config:c[h].config,instance:n,abort:xn}))&&J(I)&&I.abort)return void(r[N.meta.rid]=!0);if(!T){var _=$+":"+h;e.dispatch(g({},N,{type:_,_:{called:_,from:"queueDrain"}}))}}});var z=s.actions.filter(function(p,E){return!~v.processIndex.indexOf(E)});s.actions=z}}}var Be=function(e){var t=e.data,n=e.action,r=e.instance,o=e.state,u=e.allPlugins,c=e.allMatches,s=e.store,w=e.EVENTS;try{var v=o.plugins,z=o.context,p=n.type,E=p.match(me),h=t.exact.map(function(I){return I.pluginName});E&&(h=c.during.map(function(I){return I.pluginName}));var $=(function(I,N){return function(T,_,d){var l=_.config,M=_.name,O=M+"."+T.type;d&&(O=d.event);var A=T.type.match(me)?(function(C,D,F,L,X){return function(q,y){var R=L?L.name:C,B=y&&Ee(y)?y:F;if(L&&(!(B=y&&Ee(y)?y:[C]).includes(C)||B.length!==1))throw new Error("Method "+D+" can only abort "+C+" plugin. "+JSON.stringify(B)+" input valid");return g({},X,{abort:{reason:q,plugins:B,caller:D,_:R}})}})(M,O,N,d,T):(function(C,D){return function(){throw new Error(C.type+" action not cancellable. Remove abort in "+D)}})(T,O);return{payload:jn(T),instance:I,config:l||{},abort:A}}})(r,h),S=t.exact.reduce(function(I,N){var T=N.pluginName,_=N.methodName,d=!1;return _.match(/^initialize/)||_.match(/^reset/)||(d=!v[T].loaded),z.offline&&_.match(/^(page|track|identify)/)&&(d=!0),I[""+T]=d,I},{});return Promise.resolve(t.exact.reduce(function(I,N,T){var _=N.pluginName;return Promise.resolve(I).then(function(d){function l(){return Promise.resolve(d)}var M=(function(){if(t.namespaced&&t.namespaced[_])return Promise.resolve(t.namespaced[_].reduce(function(O,A,C){return Promise.resolve(O).then(function(D){return A.method&&G(A.method)?((function(q,y){var R=yt(q);if(R&&R.name===y){var B=yt(R.method);throw new Error([y+" plugin is calling method "+q,"Plugins cant call self","Use "+R.method+" "+(B?"or "+B.method:"")+" in "+y+" plugin insteadof "+q].join(`
`))}})(A.methodName,A.pluginName),Promise.resolve(A.method({payload:D,instance:r,abort:(F=D,L=_,X=A.pluginName,function(q,y){return g({},F,{abort:{reason:q,plugins:y||[L],caller:p,from:X||L}})}),config:mt(A.pluginName,v,u),plugins:v})).then(function(q){var y=J(q)?q:{};return Promise.resolve(g({},D,y))})):D;var F,L,X})},Promise.resolve(n))).then(function(O){d[_]=O});d[_]=n})();return M&&M.then?M.then(l):l()})},Promise.resolve({}))).then(function(I){return Promise.resolve(t.exact.reduce(function(N,T,_){try{var d=t.exact.length===_+1,l=T.pluginName,M=u[l];return Promise.resolve(N).then(function(O){var A=I[l]?I[l]:{};if(E&&(A=O),Fe(A,l))return Je({data:A,method:p,instance:r,pluginName:l,store:s}),Promise.resolve(O);if(Fe(O,l))return d&&Je({data:O,method:p,instance:r,store:s}),Promise.resolve(O);if(S.hasOwnProperty(l)&&S[l]===!0)return s.dispatch({type:"queue",plugin:l,payload:A,_:{called:"queue",from:"queueMechanism"}}),Promise.resolve(O);var C=$(I[l],u[l]);return Promise.resolve(M[p]({abort:C.abort,payload:A,instance:r,config:mt(l,v,u),plugins:v})).then(function(D){var F=J(D)?D:{},L=g({},O,F),X=I[l];if(Fe(X,l))Je({data:X,method:p,instance:r,pluginName:l,store:s});else{var q=p+":"+l;(q.match(/:/g)||[]).length<2&&!p.match(dt)&&!p.match(pt)&&r.dispatch(g({},E?L:A,{type:q,_:{called:q,from:"submethod"}}))}return Promise.resolve(L)})})}catch(O){return Promise.reject(O)}},Promise.resolve(n))).then(function(N){if(!(p.match(me)||p.match(/^registerPlugin/)||p.match(pt)||p.match(dt)||p.match(/^params/)||p.match(/^userIdChanged/))){if(w.plugins.includes(p),N._&&N._.originalAction===p)return N;var T=g({},N,{_:{originalAction:N.type,called:N.type,from:"engineEnd"}});zt(N,t.exact.length)&&!p.match(/End$/)&&(T=g({},T,{type:N.type+"Aborted"})),s.dispatch(T)}return N})})}catch(I){return Promise.reject(I)}},me=/Start$/,dt=/^bootstrap/,pt=/^ready/;function Je(e){var t=e.pluginName,n=e.method+"Aborted"+(t?":"+t:"");e.store.dispatch(g({},e.data,{type:n,_:{called:n,from:"abort"}}))}function mt(e,t,n){var r=t[e]||n[e];return r&&r.config?r.config:{}}function gt(e,t){return t.reduce(function(n,r){return r[e]?n.concat({methodName:e,pluginName:r.name,method:r[e]}):n},[])}function vt(e,t){var n=e.replace(me,""),r=t?":"+t:"";return[""+e+r,""+n+r,n+"End"+r]}function Fe(e,t){var n=e.abort;return!!n&&(n===!0||ht(n,t)||n&&ht(n.plugins,t))}function zt(e,t){var n=e.abort;if(!n)return!1;if(n===!0||de(n))return!0;var r=n.plugins;return Ee(n)&&n.length===t||Ee(r)&&r.length===t}function Ee(e){return Array.isArray(e)}function ht(e,t){return!(!e||!Ee(e))&&e.includes(t)}function yt(e){var t=e.match(/(.*):(.*)/);return!!t&&{method:t[1],name:t[2]}}function jn(e){return Object.keys(e).reduce(function(t,n){return n==="type"||(t[n]=J(e[n])?Object.assign({},e[n]):e[n]),t},{})}function Nn(e,t,n){var r={};return function(o){return function(u){return function(c){try{var s,w=function(d){return s?d:u(p)},v=c.type,z=c.plugins,p=c;if(c.abort)return Promise.resolve(u(c));if(v===m.enablePlugin&&o.dispatch({type:m.initializeStart,plugins:z,disabled:[],fromEnable:!0,meta:c.meta}),v===m.disablePlugin&&setTimeout(function(){return ft(c.meta.rid,{payload:c})},0),v===m.initializeEnd){var E=t(),h=Object.keys(E),$=h.filter(function(d){return z.includes(d)}).map(function(d){return E[d]}),S=[],I=[],N=c.disabled,T=$.map(function(d){var l=d.loaded,M=d.name,O=d.config;return Tt(d,function(){return l({config:O})},1e4).then(function(A){return r[M]||(o.dispatch({type:m.pluginReadyType(M),name:M,events:Object.keys(d).filter(function(C){return!Ge.includes(C)})}),r[M]=!0),S=S.concat(M),d}).catch(function(A){if(A instanceof Error)throw new Error(A);return I=I.concat(A.name),A})});Promise.all(T).then(function(d){var l={plugins:S,failed:I,disabled:N};setTimeout(function(){h.length===T.length+N.length&&o.dispatch(g({},{type:m.ready},l))},0)})}var _=(function(){if(v!==m.bootstrap)return/^ready:([^:]*)$/.test(v)&&setTimeout(function(){return Mt(o,t,e)},0),Promise.resolve((function(d,l,M,O,A){try{var C=G(l)?l():l,D=d.type,F=D.replace(me,"");if(d._&&d._.called)return Promise.resolve(d);var L=M.getState(),X=(R=C,(B=L.plugins)===void 0&&(B={}),(we=d.options)===void 0&&(we={}),Object.keys(R).filter(function(i){var a=we.plugins||{};return sn(a[i])?a[i]:a.all!==!1&&(!B[i]||B[i].enabled!==!1)}).map(function(i){return R[i]}));D===m.initializeStart&&d.fromEnable&&(X=Object.keys(L.plugins).filter(function(i){var a=L.plugins[i];return d.plugins.includes(i)&&!a.initialized}).map(function(i){return C[i]}));var q=X.map(function(i){return i.name}),y=(function(i,a){var f=vt(i).map(function(b){return gt(b,a)});return a.reduce(function(b,x){var P=x.name,V=vt(i,P).map(function(K){return gt(K,a)}),k=V[0],U=V[1],j=V[2];return k.length&&(b.beforeNS[P]=k),U.length&&(b.duringNS[P]=U),j.length&&(b.afterNS[P]=j),b},{before:f[0],beforeNS:{},during:f[1],duringNS:{},after:f[2],afterNS:{}})})(D,X);return Promise.resolve(Be({action:d,data:{exact:y.before,namespaced:y.beforeNS},state:L,allPlugins:C,allMatches:y,instance:M,store:O,EVENTS:A})).then(function(i){function a(){var x=(function(){if(D.match(me))return Promise.resolve(Be({action:g({},f,{type:F+"End"}),data:{exact:y.after,namespaced:y.afterNS},state:L,allPlugins:C,allMatches:y,instance:M,store:O,EVENTS:A})).then(function(P){P.meta&&P.meta.hasCallback&&ft(P.meta.rid,{payload:P})})})();return x&&x.then?x.then(function(){return i}):i}if(zt(i,q.length))return i;var f,b=(function(){if(D!==F)return Promise.resolve(Be({action:g({},i,{type:F}),data:{exact:y.during,namespaced:y.duringNS},state:L,allPlugins:C,allMatches:y,instance:M,store:O,EVENTS:A})).then(function(x){f=x});f=i})();return b&&b.then?b.then(a):a()})}catch(i){return Promise.reject(i)}var R,B,we})(c,t,e,o,n)).then(function(d){var l=u(d);return s=1,l})})();return Promise.resolve(_&&_.then?_.then(w):w(_))}catch(d){return Promise.reject(d)}}}}}function An(e){return function(t){return function(n){return function(r){var o=r.type,u=r.key,c=r.value,s=r.options;if(o===m.setItem||o===m.removeItem){if(r.abort)return n(r);o===m.setItem?e.setItem(u,c,s):e.removeItem(u,s)}return n(r)}}}}var kn=function(){var e=this;this.before=[],this.after=[],this.addMiddleware=function(t,n){e[n]=e[n].concat(t)},this.removeMiddleware=function(t,n){var r=e[n].findIndex(function(o){return o===t});r!==-1&&(e[n]=[].concat(e[n].slice(0,r),e[n].slice(r+1)))},this.dynamicMiddlewares=function(t){return function(n){return function(r){return function(o){var u={getState:n.getState,dispatch:function(s){return n.dispatch(s)}},c=e[t].map(function(s){return s(u)});return ye.apply(void 0,c)(r)(o)}}}}};function _n(e){return function(t,n){t===void 0&&(t={});var r={};if(n.type==="initialize:aborted")return t;if(/^registerPlugin:([^:]*)$/.test(n.type)){var o=bt(n.type,"registerPlugin"),u=e()[o];if(!u||!o)return t;var c=n.enabled,s=u.config;return r[o]={enabled:c,initialized:!!c&&!u.initialize,loaded:!!c&&!!u.loaded({config:s}),config:s},g({},t,r)}if(/^initialize:([^:]*)$/.test(n.type)){var w=bt(n.type,m.initialize),v=e()[w];return v&&w?(r[w]=g({},t[w],{initialized:!0,loaded:!!v.loaded({config:v.config})}),g({},t,r)):t}if(/^ready:([^:]*)$/.test(n.type))return r[n.name]=g({},t[n.name],{loaded:!0}),g({},t,r);switch(n.type){case m.disablePlugin:return g({},t,It(n.plugins,!1,t));case m.enablePlugin:return g({},t,It(n.plugins,!0,t));default:return t}}}function bt(e,t){return e.substring(t.length+1,e.length)}function It(e,t,n){return e.reduce(function(r,o){return r[o]=g({},n[o],{enabled:t}),r},n)}function Dt(e){try{return JSON.parse(JSON.stringify(e))}catch{}return e}var $n={last:{},history:[]};function Tn(e,t){e===void 0&&(e=$n);var n=t.options,r=t.meta;if(t.type===m.track){var o=Dt(g({event:t.event,properties:t.properties},Object.keys(n).length&&{options:n},{meta:r}));return g({},e,{last:o,history:e.history.concat(o)})}return e}var Mn={actions:[]};function zn(e,t){e===void 0&&(e=Mn);var n=t.payload;switch(t.type){case"queue":var r;return r=n&&n.type&&n.type===m.identify?[t].concat(e.actions):e.actions.concat(t),g({},e,{actions:r});case"dequeue":return[];default:return e}}var Ct=/#.*$/;function Dn(e){var t=/(http[s]?:\/\/)?([^\/\s]+\/)(.*)/g.exec(e);return"/"+(t&&t[3]?t[3].split("?")[0].replace(Ct,""):"")}var Lt,Ut,qt,Vt,Cn=function(e){if(e===void 0&&(e={}),!H)return e;var t=document,n=t.title,r=t.referrer,o=window,u=o.location,c=o.innerWidth,s=o.innerHeight,w=u.hash,v=u.search,z=(function(E){var h=(function(){if(H){for(var $,S=document.getElementsByTagName("link"),I=0;$=S[I];I++)if($.getAttribute("rel")==="canonical")return $.getAttribute("href")}})();return h?h.match(/\?/)?h:h+E:window.location.href.replace(Ct,"")})(v),p={title:n,url:z,path:Dn(z),hash:w,search:v,width:c,height:s};return r&&r!==""&&(p.referrer=r),g({},p,e)},Ln={last:{},history:[]};function Un(e,t){e===void 0&&(e=Ln);var n=t.options;if(t.type===m.page){var r=Dt(g({properties:t.properties,meta:t.meta},Object.keys(n).length&&{options:n}));return g({},e,{last:r,history:e.history.concat(r)})}return e}Lt=(function(){if(!H)return!1;var e=navigator.appVersion;return~e.indexOf("Win")?"Windows":~e.indexOf("Mac")?"MacOS":~e.indexOf("X11")?"UNIX":~e.indexOf("Linux")?"Linux":"Unknown OS"})(),Ut=H?document.referrer:null,qt=vn(),Vt=hn();var wt={initialized:!1,sessionId:Le(),app:null,version:null,debug:!1,offline:!!H&&!navigator.onLine,os:{name:Lt},userAgent:H?navigator.userAgent:"node",library:{name:He,version:"0.13.1"},timezone:Vt,locale:qt,campaign:{},referrer:Ut};function qn(e,t){e===void 0&&(e=wt);var n=e.initialized,r=t.campaign;switch(t.type){case m.campaign:return g({},e,{campaign:r});case m.offline:return g({},e,{offline:!0});case m.online:return g({},e,{offline:!1});default:return n?e:g({},wt,e,{initialized:!0})}}var Vn=["plugins","reducers","storage"];function Rn(e,t,n){if(H){var r=window[(n?"add":"remove")+"EventListener"];e.split(" ").forEach(function(o){r(o,t)})}}function Bn(e){var t=Rn.bind(null,"online offline",function(n){return Promise.resolve(!navigator.onLine).then(e)});return t(!0),function(n){return t(!1)}}function Rt(){return se(He,[]),function(e){return function(t,n,r){var o=e(t,n,r),u=o.dispatch;return Object.assign(o,{dispatch:function(c){return he[ve][He].push(c.action||c),u(c)}})}}}function St(e){return function(){return ye(ye.apply(null,arguments),Rt())}}function Xe(e){return e?fn(e)?e:[e]:[]}function Pt(e,t,n){e===void 0&&(e={});var r,o,u=Le();return t&&(Se[u]=(r=t,o=(function(c){for(var s,w=c||Array.prototype.slice.call(arguments),v=0;v<w.length;v++)if(G(w[v])){s=w[v];break}return s})(n),function(c){o&&o(c),r(c)})),g({},e,{rid:u,ts:new Date().getTime()},t?{hasCallback:!0}:{})}function Jn(e){e===void 0&&(e={});var t=e.reducers||{},n=e.initialUser||{},r=(e.plugins||[]).reduce(function(i,a){if(G(a))return i.middlewares=i.middlewares.concat(a),i;if(a.NAMESPACE&&(a.name=a.NAMESPACE),!a.name)throw new Error("https://lytics.dev/errors/1");a.config||(a.config={});var f=a.EVENTS?Object.keys(a.EVENTS).map(function(P){return a.EVENTS[P]}):[];i.pluginEnabled[a.name]=!(a.enabled===!1||a.config.enabled===!1),delete a.enabled,a.methods&&(i.methods[a.name]=Object.keys(a.methods).reduce(function(P,V){var k;return P[V]=(k=a.methods[V],function(){for(var U=Array.prototype.slice.call(arguments),j=new Array(k.length),K=0;K<U.length;K++)j[K]=U[K];return j[j.length]=l,k.apply({instance:l},j)}),P},{}),delete a.methods);var b=Object.keys(a).concat(f),x=new Set(i.events.concat(b));if(i.events=Array.from(x),i.pluginsArray=i.pluginsArray.concat(a),i.plugins[a.name])throw new Error(a.name+"AlreadyLoaded");return i.plugins[a.name]=a,i.plugins[a.name].loaded||(i.plugins[a.name].loaded=function(){return!0}),i},{plugins:{},pluginEnabled:{},methods:{},pluginsArray:[],middlewares:[],events:[]}),o=e.storage?e.storage:{getItem:ce,setItem:se,removeItem:be},u=(function(i){return function(a,f,b){return f.getState("user")[a]||(b&&J(b)&&b[a]?b[a]:lt(i)[a]||ce(Ke(a))||null)}})(o),c=r.plugins,s=r.events.filter(function(i){return!Ge.includes(i)}).sort(),w=new Set(s.concat($e).filter(function(i){return!Ge.includes(i)})),v=Array.from(w).sort(),z=function(){return c},p=new kn,E=p.addMiddleware,h=p.removeMiddleware,$=p.dynamicMiddlewares,S=function(){throw new Error("Abort disabled inListener")},I=yn(),N=lt(o),T=g({},N,n,I.an_uid?{userId:I.an_uid}:{},I.an_aid?{anonymousId:I.an_aid}:{});T.anonymousId||(T.anonymousId=Le());var _=g({enable:function(i,a){return new Promise(function(f){y.dispatch({type:m.enablePlugin,plugins:Xe(i),_:{originalAction:m.enablePlugin}},f,[a])})},disable:function(i,a){return new Promise(function(f){y.dispatch({type:m.disablePlugin,plugins:Xe(i),_:{originalAction:m.disablePlugin}},f,[a])})}},r.methods),d=!1,l={identify:function(i,a,f,b){try{var x=de(i)?i:null,P=J(i)?i:a,V=f||{},k=l.user();se(Ke(ee),x);var U=x||P.userId||u(ee,l,P);return Promise.resolve(new Promise(function(j){y.dispatch(g({type:m.identifyStart,userId:U,traits:P||{},options:V,anonymousId:k.anonymousId},k.id&&k.id!==x&&{previousId:k.id}),j,[a,f,b])}))}catch(j){return Promise.reject(j)}},track:function(i,a,f,b){try{var x=J(i)?i.event:i;if(!x||!de(x))throw new Error("EventMissing");var P=J(i)?i:a||{},V=J(f)?f:{};return Promise.resolve(new Promise(function(k){y.dispatch({type:m.trackStart,event:x,properties:P,options:V,userId:u(ee,l,a),anonymousId:u(fe,l,a)},k,[a,f,b])}))}catch(k){return Promise.reject(k)}},page:function(i,a,f){try{var b=J(i)?i:{},x=J(a)?a:{};return Promise.resolve(new Promise(function(P){y.dispatch({type:m.pageStart,properties:Cn(b),options:x,userId:u(ee,l,b),anonymousId:u(fe,l,b)},P,[i,a,f])}))}catch(P){return Promise.reject(P)}},user:function(i){if(i===ee||i==="id")return u(ee,l);if(i===fe||i==="anonId")return u(fe,l);var a=l.getState("user");return i?it(a,i):a},reset:function(i){return new Promise(function(a){y.dispatch({type:m.resetStart},a,i)})},ready:function(i){return d&&i({plugins:_,instance:l}),l.on(m.ready,function(a){i&&i(a),d=!0})},on:function(i,a){if(!i||!G(a))return!1;if(i===m.bootstrap)throw new Error(".on disabled for "+i);var f=/Start$|Start:/;if(i==="*"){var b=function(k){return function(U){return function(j){return j.type.match(f)&&a({payload:j,instance:l,plugins:c}),U(j)}}},x=function(k){return function(U){return function(j){return j.type.match(f)||a({payload:j,instance:l,plugins:c}),U(j)}}};return E(b,Ae),E(x,ke),function(){h(b,Ae),h(x,ke)}}var P=i.match(f)?Ae:ke,V=function(k){return function(U){return function(j){return j.type===i&&a({payload:j,instance:l,plugins:c,abort:S}),U(j)}}};return E(V,P),function(){return h(V,P)}},once:function(i,a){if(!i||!G(a))return!1;if(i===m.bootstrap)throw new Error(".once disabled for "+i);var f=l.on(i,function(b){a({payload:b.payload,instance:l,plugins:c,abort:S}),f()});return f},getState:function(i){var a=y.getState();return i?it(a,i):Object.assign({},a)},dispatch:function(i){var a=de(i)?{type:i}:i;if($e.includes(a.type))throw new Error("reserved action "+a.type);var f=g({},a,{_:g({originalAction:a.type},i._||{})});y.dispatch(f)},enablePlugin:_.enable,disablePlugin:_.disable,plugins:_,storage:{getItem:o.getItem,setItem:function(i,a,f){y.dispatch({type:m.setItemStart,key:i,value:a,options:f})},removeItem:function(i,a){y.dispatch({type:m.removeItemStart,key:i,options:a})}},setAnonymousId:function(i,a){l.storage.setItem(ne,i,a)},events:{core:$e,plugins:s}},M=r.middlewares.concat([function(i){return function(a){return function(f){return f.meta||(f.meta=Pt()),a(f)}}},$(Ae),Nn(l,z,{all:v,plugins:s}),An(o),Pn(l),On(l),$(ke)]),O={context:qn,user:En(o),page:Un,track:Tn,plugins:_n(z),queue:zn},A=ye,C=ye;if(H&&e.debug){var D=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__;D&&(A=D({trace:!0,traceLimit:25})),C=function(){return arguments.length===0?Rt():J(typeof arguments[0])?St():St().apply(null,arguments)}}var F,L=(function(i){return Object.keys(i).reduce(function(a,f){return Vn.includes(f)||(a[f]=i[f]),a},{})})(e),X=r.pluginsArray.reduce(function(i,a){var f=a.name,b=a.config,x=a.loaded,P=r.pluginEnabled[f];return i[f]={enabled:P,initialized:!!P&&!a.initialize,loaded:!!x({config:b}),config:b},i},{}),q={context:L,user:T,plugins:X},y=$t((function(i){for(var a=Object.keys(i),f={},b=0;b<a.length;b++){var x=a[b];typeof i[x]===te&&(f[x]=i[x])}var P,V=Object.keys(f);try{(function(k){Object.keys(k).forEach(function(U){var j=k[U];if(typeof j(void 0,{type:We})===Q||typeof j(void 0,{type:In})===Q)throw new Error(Pe+" "+U+" "+Q)})})(f)}catch(k){P=k}return function(k,U){if(k===void 0&&(k={}),P)throw P;for(var j=!1,K={},Ve=0;Ve<V.length;Ve++){var xe=V[Ve],rt=k[xe],Re=(0,f[xe])(rt,U);if(typeof Re===Q){var Wt=wn(xe,U);throw new Error(Wt)}K[xe]=Re,j=j||Re!==rt}return j?K:k}})(g({},O,t)),q,C(A(Sn.apply(void 0,M))));y.dispatch=(F=y.dispatch,function(i,a,f){var b=g({},i,{meta:Pt(i.meta,a,Xe(f))});return F.apply(null,[b])});var R=Object.keys(c);y.dispatch({type:m.bootstrap,plugins:R,config:L,params:I,user:T,initialUser:n,persistedUser:N});var B=R.filter(function(i){return r.pluginEnabled[i]}),we=R.filter(function(i){return!r.pluginEnabled[i]});return y.dispatch({type:m.registerPlugins,plugins:R,enabled:r.pluginEnabled}),r.pluginsArray.map(function(i,a){var f=i.bootstrap,b=i.config,x=i.name;f&&G(f)&&f({instance:l,config:b,payload:i}),y.dispatch({type:m.registerPluginType(x),name:x,enabled:r.pluginEnabled[x],plugin:i}),r.pluginsArray.length===a+1&&y.dispatch({type:m.initializeStart,plugins:B,disabled:we})}),Bn(function(i){y.dispatch({type:i?m.offline:m.online})}),(function(i,a,f){setInterval(function(){return Mt(i,a,f)},3e3)})(y,z,l),l}var Ae="before",ke="after",oe="cookie",re=Ft(),Bt=Ue,Fn=Ue;function Jt(e){return re?Ue(e,"",-1):be(e)}function Ft(){if(re!==void 0)return re;var e=oe+oe;try{Ue(e,e),re=document.cookie.indexOf(e)!==-1,Jt(e)}catch{re=!1}return re}function Ue(e,t,n,r,o,u){if(typeof window<"u"){var c=arguments.length>1;return re===!1&&(c?se(e,t):ce(e)),c?document.cookie=e+"="+encodeURIComponent(t)+(n?"; expires="+new Date(+new Date+1e3*n).toUTCString()+(r?"; path="+r:"")+(o?"; domain="+o:"")+(u?"; secure":""):""):decodeURIComponent((("; "+document.cookie).split("; "+e+"=")[1]||"").split(";")[0])}}var Z="localStorage",Xn=Qe.bind(null,Z);Ie(Z,"getItem",ce);Ie(Z,"setItem",se);Ie(Z,"removeItem",be);var Y="sessionStorage",Wn=Qe.bind(null,Y);Ie(Y,"getItem",ce);Ie(Y,"setItem",se);Ie(Y,"removeItem",be);function ge(e){var t=e;try{if((t=JSON.parse(e))==="true")return!0;if(t==="false")return!1;if(J(t))return t;parseFloat(t)===t&&(t=parseFloat(t))}catch{}if(t!==null&&t!=="")return t}var Hn=Xn(),Gn=Wn(),Kn=Ft();function Xt(e,t){if(e){var n=Ze(t),r=!nt(n),o=Ye(n)?ge(localStorage.getItem(e)):void 0;if(r&&!le(o))return o;var u=et(n)?ge(Bt(e)):void 0;if(r&&u)return u;var c=tt(n)?ge(sessionStorage.getItem(e)):void 0;if(r&&c)return c;var s=ce(e);return r?s:{localStorage:o,sessionStorage:c,cookie:u,global:s}}}function Qn(e,t,n){if(e&&!le(t)){var r={},o=Ze(n),u=JSON.stringify(t),c=!nt(o);return Ye(o)&&(r[Z]=_e(Z,t,ge(localStorage.getItem(e))),localStorage.setItem(e,u),c)?r[Z]:et(o)&&(r[oe]=_e(oe,t,ge(Bt(e))),Fn(e,u),c)?r[oe]:tt(o)&&(r[Y]=_e(Y,t,ge(sessionStorage.getItem(e))),sessionStorage.setItem(e,u),c)?r[Y]:(r[ie]=_e(ie,t,ce(e)),se(e,t),c?r[ie]:r)}}function Zn(e,t){if(e){var n=Ze(t),r=Xt(e,jt),o={};return!le(r.localStorage)&&Ye(n)&&(localStorage.removeItem(e),o[Z]=r.localStorage),!le(r.cookie)&&et(n)&&(Jt(e),o[oe]=r.cookie),!le(r.sessionStorage)&&tt(n)&&(sessionStorage.removeItem(e),o[Y]=r.sessionStorage),!le(r.global)&&qe(n,ie)&&(be(e),o[ie]=r.global),o}}function Ze(e){return e?de(e)?e:e.storage:xt}function Ye(e){return Hn&&qe(e,Z)}function et(e){return Kn&&qe(e,oe)}function tt(e){return Gn&&qe(e,Y)}function nt(e){return e===jt||e==="all"}function qe(e,t){return e===xt||e===t||nt(e)}function _e(e,t,n){return{location:e,current:t,previous:n}}var Yn={setItem:Qn,getItem:Xt,removeItem:Zn};function er(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Et(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function Ot(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Et(Object(n),!0).forEach(function(r){er(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Et(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function tr(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t={storage:Yn};return Jn(Ot(Ot({},t),e))}export{tr as Analytics,m as EVENTS,tr as default,tr as init};

import{$ as F,a0 as q,_ as H,ak as O,P as _,az as W,a7 as j,M as L}from"./3iSoGi4ic-DV-GuiCp.js";import{b as E,a as A,w as G,c as B,z as C,l as o,i as t,B as c,C as f,h as l,p as n,D as P,E as d,t as k,s as J,f as y,A as x,F as M,Z as Q,e as Z,m as w}from"./3iSoGi4ic-D0mTJ0Mu.js";import{M as $}from"./3iSoGi4ic-CdSqfJMx.js";import{_ as K}from"./3iSoGi4ic-Dz5OvLqt.js";import{M as X}from"./3iSoGi4ic-DtDbNQ4_.js";import"./3iSoGi4ic-B1GPmOGN.js";import"./3iSoGi4ic-D98_HDRS.js";import"./3iSoGi4ic-Dv7rS4og.js";import"./3iSoGi4ic-CZYXc2mx.js";const Y={style:{position:"relative"}},ee={class:"name"},te={key:0,class:"sensitiveIndicator"},ne={class:"status"},ae={key:0,style:{color:"var(--MI_THEME-warn)"}},se={style:{"margin-left":"4px"}},le={key:0},oe=["title"],ie={key:0},re={key:0,class:"indicator"},ce=E({__name:"MkChannelPreview",props:{channel:{}},setup(e){const h=e,g=()=>q.getItemAsJson(`channelLastReadedAt:${h.channel.id}`)??null,i=A(g());G(()=>h.channel.id,()=>{i.value=g()});const v=()=>{i.value=h.channel.lastNotedAt?Date.parse(h.channel.lastNotedAt):Date.now()},p=B(()=>h.channel.bannerUrl?{backgroundImage:`url(${h.channel.bannerUrl})`}:{backgroundColor:"#4c5e6d"});return(S,u)=>{const R=C("I18n"),N=C("MkTime"),D=C("MkA");return t(),o("div",Y,[c(D,{to:`/channels/${e.channel.id}`,class:"eftoefju _panel",onClick:v},{default:l(()=>[n("div",{class:"banner",style:J(p.value)},[u[4]||(u[4]=n("div",{class:"fade"},null,-1)),n("div",ee,[u[0]||(u[0]=n("i",{class:"ti ti-device-tv"},null,-1)),P(" "+d(e.channel.name),1)]),e.channel.isSensitive?(t(),o("div",te,d("Konten sensitif"),1)):f("",!0),n("div",ne,[n("div",null,[u[1]||(u[1]=n("i",{class:"ti ti-users ti-fw"},null,-1)),c(R,{src:"{n} Partisipan",tag:"span",style:{"margin-left":"4px"}},{n:l(()=>[n("b",null,d(e.channel.usersCount),1)]),_:1},8,["src"])]),n("div",null,[u[2]||(u[2]=n("i",{class:"ti ti-pencil ti-fw"},null,-1)),c(R,{src:"terdapat {n} catatan",tag:"span",style:{"margin-left":"4px"}},{n:l(()=>[n("b",null,d(e.channel.notesCount),1)]),_:1},8,["src"])]),k(F)!=null&&k(F).id===e.channel.userId?(t(),o("div",ae,[u[3]||(u[3]=n("i",{class:"ti ti-user-star ti-fw"},null,-1)),n("span",se,d("You are admin"),1)])):f("",!0)])],4),e.channel.description?(t(),o("article",le,[n("p",{title:e.channel.description},d(e.channel.description.length>85?e.channel.description.slice(0,85)+"â€¦":e.channel.description),9,oe)])):f("",!0),n("footer",null,[e.channel.lastNotedAt?(t(),o("span",ie,[P(d("Diperbarui pada")+": ",1),c(N,{time:e.channel.lastNotedAt},null,8,["time"])])):f("",!0)])]),_:1},8,["to"]),e.channel.lastNotedAt&&(e.channel.isFavorited||e.channel.isFollowing)&&(!i.value||Date.parse(e.channel.lastNotedAt)>i.value)?(t(),o("div",re)):f("",!0)])}}}),b=H(ce,[["__scopeId","data-v-690d069a"]]),ue=E({__name:"MkChannelList",props:{paginator:{},noGap:{type:Boolean},extractor:{type:Function,default:e=>e}},setup(e){return(h,g)=>{const i=C("MkResult");return t(),y($,{paginator:e.paginator},{empty:l(()=>[c(i,{type:"empty"})]),default:l(({items:v})=>[(t(!0),o(M,null,x(v,p=>(t(),y(b,{key:p.id,class:"_margin",channel:e.extractor(p)},null,8,["channel"]))),128))]),_:1},8,["paginator"])}}}),de={class:"_spacer",style:{"--MI_SPACER-w":"1200px"}},me={class:"_gaps"},he={value:"nameAndDescription"},ve={value:"nameOnly"},pe={key:1},ye={key:2},fe={key:3},ge={key:4,class:"_gaps"},Re=E({__name:"channels",props:{query:{},type:{}},setup(e){O();const h=e,g=A(""),i=A("featured"),v=A(""),p=A("nameAndDescription"),S=Q();Z(()=>{v.value=h.query??"",p.value=h.type??"nameAndDescription"});const u=w(new _("channels/featured",{limit:10,noPaging:!0})),R=w(new _("channels/my-favorites",{limit:100,noPaging:!0})),N=w(new _("channels/followed",{limit:10})),D=w(new _("channels/owned",{limit:10}));async function I(){const V=v.value.toString().trim();if(V==null)return;const a=p.value.toString().trim();if(a!=="nameAndDescription"&&a!=="nameOnly"){console.error(`Unrecognized search type: ${a}`);return}S.value=w(new _("channels/search",{limit:10,params:{query:v.value,type:a}})),g.value=V+a}const T=B(()=>[]),U=B(()=>[{key:"search",title:"Penelusuran",icon:"ti ti-search"},{key:"featured",title:"Tren",icon:"ti ti-comet"},{key:"favorites",title:"Favorit",icon:"ti ti-star"},{key:"following",title:"Mengikuti",icon:"ti ti-eye"},{key:"owned",title:"Dimiliki",icon:"ti ti-edit"}]);return W(()=>({title:"Kanal",icon:"ti ti-device-tv"})),(V,a)=>{const z=C("PageWithHeader");return t(),y(z,{tab:i.value,"onUpdate:tab":a[3]||(a[3]=r=>i.value=r),actions:T.value,tabs:U.value,swipable:!0},{default:l(()=>[n("div",de,[i.value==="search"?(t(),o("div",{key:0,class:"xettd"},[n("div",me,[c(j,{modelValue:v.value,"onUpdate:modelValue":a[0]||(a[0]=r=>v.value=r),large:!0,autofocus:!0,type:"search",onEnter:I},{prefix:l(()=>[...a[4]||(a[4]=[n("i",{class:"ti ti-search"},null,-1)])]),_:1},8,["modelValue"]),c(K,{modelValue:p.value,"onUpdate:modelValue":[a[1]||(a[1]=r=>p.value=r),a[2]||(a[2]=r=>I())]},{default:l(()=>[n("option",he,d("Nama dan deskripsi"),1),n("option",ve,d("Hanya nama"),1)]),_:1},8,["modelValue"]),c(L,{large:"",primary:"",gradate:"",rounded:"",onClick:I},{default:l(()=>[P(d("Penelusuran"),1)]),_:1})]),S.value?(t(),y(X,{key:0},{header:l(()=>[P(d("Hasil Penelusuran"),1)]),default:l(()=>[(t(),y(ue,{key:g.value,paginator:S.value},null,8,["paginator"]))]),_:1})):f("",!0)],2)):f("",!0),i.value==="featured"?(t(),o("div",pe,[c($,{paginator:k(u)},{default:l(({items:r})=>[n("div",{class:"xyuS0"},[(t(!0),o(M,null,x(r,m=>(t(),y(b,{key:m.id,channel:m},null,8,["channel"]))),128))],2)]),_:1},8,["paginator"])])):i.value==="favorites"?(t(),o("div",ye,[c($,{paginator:k(R)},{default:l(({items:r})=>[n("div",{class:"xyuS0"},[(t(!0),o(M,null,x(r,m=>(t(),y(b,{key:m.id,channel:m},null,8,["channel"]))),128))],2)]),_:1},8,["paginator"])])):i.value==="following"?(t(),o("div",fe,[c($,{paginator:k(N)},{default:l(({items:r})=>[n("div",{class:"xyuS0"},[(t(!0),o(M,null,x(r,m=>(t(),y(b,{key:m.id,channel:m},null,8,["channel"]))),128))],2)]),_:1},8,["paginator"])])):i.value==="owned"?(t(),o("div",ge,[c(L,{link:"",primary:"",rounded:"",to:"/channels/new"},{default:l(()=>[a[5]||(a[5]=n("i",{class:"ti ti-plus"},null,-1)),P(" "+d("Buat baru"),1)]),_:1}),c($,{paginator:k(D)},{default:l(({items:r})=>[n("div",{class:"xyuS0"},[(t(!0),o(M,null,x(r,m=>(t(),y(b,{key:m.id,channel:m},null,8,["channel"]))),128))],2)]),_:1},8,["paginator"])])):f("",!0)])]),_:1},8,["tab","actions","tabs"])}}});export{Re as default};

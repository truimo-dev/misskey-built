import{az as X,ab as g,bl as Q,a7 as M,L as k,br as x,J as Z}from"./3iSoGi4ic-DV-GuiCp.js";import{M as I}from"./3iSoGi4ic-Fx-BY70c.js";import{u as R,M as S}from"./3iSoGi4ic-DIm8JSX7.js";import{b as $,ab as ee,a as F,c as A,z as U,f as ae,i as b,h as e,p as f,B as a,t as n,D as l,E as o,a2 as V,l as _,C,F as z}from"./3iSoGi4ic-D0mTJ0Mu.js";import"./3iSoGi4ic-B1GPmOGN.js";import"./3iSoGi4ic-D98_HDRS.js";const te={class:"_spacer",style:{"--MI_SPACER-w":"700px","--MI_SPACER-min":"16px","--MI_SPACER-max":"32px"}},ne={class:"_gaps"},le={class:"_panel",style:{padding:"16px"}},se={class:"_panel",style:{padding:"16px"}},oe={class:"_panel",style:{padding:"16px"}},ie={class:"_panel",style:{padding:"16px"}},re={class:"_panel",style:{padding:"16px"}},de={class:"_panel",style:{padding:"16px"}},me={class:"_gaps"},ue={key:0,class:"_modified"},pe={key:0,class:"_modified"},fe={key:0,class:"_modified"},ce={key:0,class:"_modified"},be={key:0,class:"_modified"},_e={key:0,class:"_modified"},Ce={class:"_gaps_m"},ge={key:0,class:"_modified"},ke={class:"_gaps_m"},xe={key:0,class:"_modified"},he={key:0,class:"_modified"},Me={key:0,class:"_modified"},Ve=$({__name:"performance",async setup(Fe){let y,N;const p=([y,N]=ee(()=>Z("admin/meta")),y=await y,N(),y),D=F(p.enableServerMachineStats),E=F(p.enableIdenticonGeneration),L=F(p.enableChartsForRemoteUser),P=F(p.enableStatsForFederatedInstances),B=F(p.enableChartsForFederatedInstances),w=F(p.showRoleBadgesOfRemoteUsers);function O(r){k("admin/update-meta",{enableServerMachineStats:r}).then(()=>{x(!0)})}function H(r){k("admin/update-meta",{enableIdenticonGeneration:r}).then(()=>{x(!0)})}function j(r){k("admin/update-meta",{enableChartsForRemoteUser:r}).then(()=>{x(!0)})}function q(r){k("admin/update-meta",{enableStatsForFederatedInstances:r}).then(()=>{x(!0)})}function J(r){k("admin/update-meta",{enableChartsForFederatedInstances:r}).then(()=>{x(!0)})}function K(r){k("admin/update-meta",{showRoleBadgesOfRemoteUsers:r}).then(()=>{x(!0)})}const d=R({enableFanoutTimeline:p.enableFanoutTimeline,enableFanoutTimelineDbFallback:p.enableFanoutTimelineDbFallback,perLocalUserUserTimelineCacheMax:p.perLocalUserUserTimelineCacheMax,perRemoteUserUserTimelineCacheMax:p.perRemoteUserUserTimelineCacheMax,perUserHomeTimelineCacheMax:p.perUserHomeTimelineCacheMax,perUserListTimelineCacheMax:p.perUserListTimelineCacheMax},async r=>{await k("admin/update-meta",{enableFanoutTimeline:r.enableFanoutTimeline,enableFanoutTimelineDbFallback:r.enableFanoutTimelineDbFallback,perLocalUserUserTimelineCacheMax:r.perLocalUserUserTimelineCacheMax,perRemoteUserUserTimelineCacheMax:r.perRemoteUserUserTimelineCacheMax,perUserHomeTimelineCacheMax:r.perUserHomeTimelineCacheMax,perUserListTimelineCacheMax:r.perUserListTimelineCacheMax}),x(!0)}),h=R({enableReactionsBuffering:p.enableReactionsBuffering},async r=>{await k("admin/update-meta",{enableReactionsBuffering:r.enableReactionsBuffering}),x(!0)}),c=R({enableRemoteNotesCleaning:p.enableRemoteNotesCleaning,remoteNotesCleaningExpiryDaysForEachNotes:p.remoteNotesCleaningExpiryDaysForEachNotes,remoteNotesCleaningMaxProcessingDurationInMinutes:p.remoteNotesCleaningMaxProcessingDurationInMinutes},async r=>{await k("admin/update-meta",{enableRemoteNotesCleaning:r.enableRemoteNotesCleaning,remoteNotesCleaningExpiryDaysForEachNotes:r.remoteNotesCleaningExpiryDaysForEachNotes,remoteNotesCleaningMaxProcessingDurationInMinutes:r.remoteNotesCleaningMaxProcessingDurationInMinutes}),x(!0)}),W=A(()=>[]),Y=A(()=>[]);return X(()=>({title:"Rendimiento",icon:"ti ti-bolt"})),(r,t)=>{const m=U("SearchLabel"),u=U("SearchMarker"),v=U("SearchIcon"),T=U("SearchText"),G=U("PageWithHeader");return b(),ae(G,{actions:W.value,tabs:Y.value},{default:e(()=>[f("div",te,[a(u,{path:"/admin/performance",label:"Rendimiento",keywords:["performance"],icon:"ti ti-bolt",markerId:"iJx36p0GB","data-in-app-search-marker-id":"iJx36p0GB",children:["zA2x88akA","8I81vcY6I","oF8nrtwAS","jCD6EVRMn","znPKELqMe","CALrCrRQS","DLHvYhXNE","3yzCpyvDJ","xaPIxmWDc"]},{default:e(()=>[f("div",ne,[a(u,{markerId:"zA2x88akA","data-in-app-search-marker-id":"zA2x88akA"},{default:e(()=>[f("div",le,[a(g,{modelValue:D.value,"onUpdate:modelValue":t[0]||(t[0]=i=>D.value=i),onChange:O},{label:e(()=>[a(m,null,{default:e(()=>[l(o("Publicar estadísticas de hardware del servidor"),1)]),_:1})]),caption:e(()=>[l(o("Desactivar esto puede aumentar el rendimiento."),1)]),_:1},8,["modelValue"])])]),_:1}),a(u,{markerId:"8I81vcY6I","data-in-app-search-marker-id":"8I81vcY6I"},{default:e(()=>[f("div",se,[a(g,{modelValue:E.value,"onUpdate:modelValue":t[1]||(t[1]=i=>E.value=i),onChange:H},{label:e(()=>[a(m,null,{default:e(()=>[l(o("Activar generación de identicon por usuario"),1)]),_:1})]),caption:e(()=>[l(o("Desactivar esto puede aumentar el rendimiento."),1)]),_:1},8,["modelValue"])])]),_:1}),a(u,{markerId:"oF8nrtwAS","data-in-app-search-marker-id":"oF8nrtwAS"},{default:e(()=>[f("div",oe,[a(g,{modelValue:L.value,"onUpdate:modelValue":t[2]||(t[2]=i=>L.value=i),onChange:j},{label:e(()=>[a(m,null,{default:e(()=>[l(o("Generar gráficas de usuarios remotos."),1)]),_:1})]),caption:e(()=>[l(o("Desactivar esto puede aumentar el rendimiento."),1)]),_:1},8,["modelValue"])])]),_:1}),a(u,{markerId:"jCD6EVRMn","data-in-app-search-marker-id":"jCD6EVRMn"},{default:e(()=>[f("div",ie,[a(g,{modelValue:P.value,"onUpdate:modelValue":t[3]||(t[3]=i=>P.value=i),onChange:q},{label:e(()=>[a(m,null,{default:e(()=>[l(o("Activar las estadísticas de las instancias remotas federadas"),1)]),_:1})]),caption:e(()=>[l(o("Desactivar esto puede aumentar el rendimiento."),1)]),_:1},8,["modelValue"])])]),_:1}),a(u,{markerId:"znPKELqMe","data-in-app-search-marker-id":"znPKELqMe"},{default:e(()=>[f("div",re,[a(g,{modelValue:B.value,"onUpdate:modelValue":t[4]||(t[4]=i=>B.value=i),onChange:J},{label:e(()=>[a(m,null,{default:e(()=>[l(o("Generar gráficos de servidores remotos"),1)]),_:1})]),caption:e(()=>[l(o("Desactivar esto puede aumentar el rendimiento."),1)]),_:1},8,["modelValue"])])]),_:1}),a(u,{markerId:"CALrCrRQS","data-in-app-search-marker-id":"CALrCrRQS"},{default:e(()=>[f("div",de,[a(g,{modelValue:w.value,"onUpdate:modelValue":t[5]||(t[5]=i=>w.value=i),onChange:K},{label:e(()=>[a(m,null,{default:e(()=>[l(o("Mostrar la insignia de rol asignada a los usuarios remotos."),1)]),_:1})]),caption:e(()=>[l(o("Desactivar esto puede aumentar el rendimiento."),1)]),_:1},8,["modelValue"])])]),_:1}),a(u,{markerId:"DLHvYhXNE","data-in-app-search-marker-id":"DLHvYhXNE",children:["ErJqWNlIP","xuRo1YLN3","kNpKjljZK","zs6dg48F4","851csgR0q","bSXPA3b1w"]},{default:e(()=>[a(I,{defaultOpen:!0},V({icon:e(()=>[a(v,null,{default:e(()=>[...t[16]||(t[16]=[f("i",{class:"ti ti-bolt"},null,-1)])]),_:1})]),label:e(()=>[a(m,null,{default:e(()=>[...t[17]||(t[17]=[l("Misskey® Fan-out Timeline Technology™ (FTT)",-1)])]),_:1})]),default:e(()=>[f("div",me,[a(u,{markerId:"ErJqWNlIP","data-in-app-search-marker-id":"ErJqWNlIP"},{default:e(()=>[a(g,{modelValue:n(d).state.enableFanoutTimeline,"onUpdate:modelValue":t[6]||(t[6]=i=>n(d).state.enableFanoutTimeline=i)},{label:e(()=>[a(m,null,{default:e(()=>[l(o("Activar"),1)]),_:1}),n(d).modifiedStates.enableFanoutTimeline?(b(),_("span",ue,o("Modificado"),1)):C("",!0)]),caption:e(()=>[f("div",null,[a(T,null,{default:e(()=>[l(o("Incrementa el rendimiento de forma significativa cuando se obtienen las líneas de tiempo y reduce la carga en la base de datos. A cambio, el uso de la memoria en Redis incrementará. Considera desactivar esta opción en caso de que tu servidor tenga poca memoria o detectes inestabilidad."),1)]),_:1})]),f("div",null,[a(Q,{target:"_blank",url:"https://misskey-hub.net/docs/for-admin/features/ftt/"},{default:e(()=>[l(o("Detalles"),1)]),_:1})])]),_:1},8,["modelValue"])]),_:1}),n(d).state.enableFanoutTimeline?(b(),_(z,{key:0},[a(u,{keywords:["db","database","fallback"],markerId:"xuRo1YLN3","data-in-app-search-marker-id":"xuRo1YLN3"},{default:e(()=>[a(g,{modelValue:n(d).state.enableFanoutTimelineDbFallback,"onUpdate:modelValue":t[7]||(t[7]=i=>n(d).state.enableFanoutTimelineDbFallback=i)},{label:e(()=>[a(m,null,{default:e(()=>[l(o("Cargar desde la base de datos"),1)]),_:1}),n(d).modifiedStates.enableFanoutTimelineDbFallback?(b(),_("span",pe,o("Modificado"),1)):C("",!0)]),caption:e(()=>[a(T,null,{default:e(()=>[l(o("Cuando esta opción está habilitada, la carga de peticiones adicionales de la línea de tiempo se hará desde la base de datos cuando éstas no se encuentren en la caché. Al deshabilitar esta opción se reduce la carga del servidor, pero limita el número de líneas de tiempo que pueden obtenerse."),1)]),_:1})]),_:1},8,["modelValue"])]),_:1}),a(u,{markerId:"kNpKjljZK","data-in-app-search-marker-id":"kNpKjljZK"},{default:e(()=>[a(M,{modelValue:n(d).state.perLocalUserUserTimelineCacheMax,"onUpdate:modelValue":t[8]||(t[8]=i=>n(d).state.perLocalUserUserTimelineCacheMax=i),type:"number"},{label:e(()=>[a(m,null,{default:e(()=>[...t[20]||(t[20]=[l("perLocalUserUserTimelineCacheMax",-1)])]),_:1}),n(d).modifiedStates.perLocalUserUserTimelineCacheMax?(b(),_("span",fe,o("Modificado"),1)):C("",!0)]),_:1},8,["modelValue"])]),_:1}),a(u,{markerId:"zs6dg48F4","data-in-app-search-marker-id":"zs6dg48F4"},{default:e(()=>[a(M,{modelValue:n(d).state.perRemoteUserUserTimelineCacheMax,"onUpdate:modelValue":t[9]||(t[9]=i=>n(d).state.perRemoteUserUserTimelineCacheMax=i),type:"number"},{label:e(()=>[a(m,null,{default:e(()=>[...t[21]||(t[21]=[l("perRemoteUserUserTimelineCacheMax",-1)])]),_:1}),n(d).modifiedStates.perRemoteUserUserTimelineCacheMax?(b(),_("span",ce,o("Modificado"),1)):C("",!0)]),_:1},8,["modelValue"])]),_:1}),a(u,{markerId:"851csgR0q","data-in-app-search-marker-id":"851csgR0q"},{default:e(()=>[a(M,{modelValue:n(d).state.perUserHomeTimelineCacheMax,"onUpdate:modelValue":t[10]||(t[10]=i=>n(d).state.perUserHomeTimelineCacheMax=i),type:"number"},{label:e(()=>[a(m,null,{default:e(()=>[...t[22]||(t[22]=[l("perUserHomeTimelineCacheMax",-1)])]),_:1}),n(d).modifiedStates.perUserHomeTimelineCacheMax?(b(),_("span",be,o("Modificado"),1)):C("",!0)]),_:1},8,["modelValue"])]),_:1}),a(u,{markerId:"bSXPA3b1w","data-in-app-search-marker-id":"bSXPA3b1w"},{default:e(()=>[a(M,{modelValue:n(d).state.perUserListTimelineCacheMax,"onUpdate:modelValue":t[11]||(t[11]=i=>n(d).state.perUserListTimelineCacheMax=i),type:"number"},{label:e(()=>[a(m,null,{default:e(()=>[...t[23]||(t[23]=[l("perUserListTimelineCacheMax",-1)])]),_:1}),n(d).modifiedStates.perUserListTimelineCacheMax?(b(),_("span",_e,o("Modificado"),1)):C("",!0)]),_:1},8,["modelValue"])]),_:1})],64)):C("",!0)])]),_:2},[n(d).savedState.enableFanoutTimeline?{name:"suffix",fn:e(()=>[t[18]||(t[18]=l("Enabled",-1))]),key:"0"}:{name:"suffix",fn:e(()=>[t[19]||(t[19]=l("Disabled",-1))]),key:"1"},n(d).modified.value?{name:"footer",fn:e(()=>[a(S,{form:n(d)},null,8,["form"])]),key:"2"}:void 0]),1024)]),_:1}),a(u,{markerId:"3yzCpyvDJ","data-in-app-search-marker-id":"3yzCpyvDJ",children:["gfME0zhnu"]},{default:e(()=>[a(I,{defaultOpen:!0},V({icon:e(()=>[a(v,null,{default:e(()=>[...t[24]||(t[24]=[f("i",{class:"ti ti-bolt"},null,-1)])]),_:1})]),label:e(()=>[a(m,null,{default:e(()=>[...t[25]||(t[25]=[l("Misskey® Reactions Boost Technology™ (RBT)",-1)])]),_:1})]),default:e(()=>[f("div",Ce,[a(u,{markerId:"gfME0zhnu","data-in-app-search-marker-id":"gfME0zhnu"},{default:e(()=>[a(g,{modelValue:n(h).state.enableReactionsBuffering,"onUpdate:modelValue":t[12]||(t[12]=i=>n(h).state.enableReactionsBuffering=i)},{label:e(()=>[a(m,null,{default:e(()=>[l(o("Activar"),1)]),_:1}),n(h).modifiedStates.enableReactionsBuffering?(b(),_("span",ge,o("Modificado"),1)):C("",!0)]),caption:e(()=>[a(T,null,{default:e(()=>[l(o("Cuando se activa, el rendimiento durante la creación de reacciones mejorará considerablemente, reduciendo la carga de la base de datos. Sin embargo, aumentará el uso de memoria de Redis."),1)]),_:1})]),_:1},8,["modelValue"])]),_:1})])]),_:2},[n(h).savedState.enableReactionsBuffering?{name:"suffix",fn:e(()=>[t[26]||(t[26]=l("Enabled",-1))]),key:"0"}:{name:"suffix",fn:e(()=>[t[27]||(t[27]=l("Disabled",-1))]),key:"1"},n(h).modified.value?{name:"footer",fn:e(()=>[a(S,{form:n(h)},null,8,["form"])]),key:"2"}:void 0]),1024)]),_:1}),a(u,{markerId:"xaPIxmWDc","data-in-app-search-marker-id":"xaPIxmWDc"},{default:e(()=>[a(I,{defaultOpen:!0},V({icon:e(()=>[a(v,null,{default:e(()=>[...t[28]||(t[28]=[f("i",{class:"ti ti-recycle"},null,-1)])]),_:1})]),label:e(()=>[a(m,null,{default:e(()=>[...t[29]||(t[29]=[l("Remote Notes Cleaning (仮)",-1)])]),_:1})]),default:e(()=>[f("div",ke,[a(g,{modelValue:n(c).state.enableRemoteNotesCleaning,"onUpdate:modelValue":t[13]||(t[13]=i=>n(c).state.enableRemoteNotesCleaning=i)},{label:e(()=>[a(m,null,{default:e(()=>[l(o("Activar"),1)]),_:1}),n(c).modifiedStates.enableRemoteNotesCleaning?(b(),_("span",xe,o("Modificado"),1)):C("",!0)]),caption:e(()=>[a(T,null,{default:e(()=>[l(o("Al habilitar esta opción, se limpiarán periódicamente las entradas remotas antiguas que no se consultan, lo que evitará que la base de datos se sature."),1)]),_:1})]),_:1},8,["modelValue"]),n(c).state.enableRemoteNotesCleaning?(b(),_(z,{key:0},[a(M,{modelValue:n(c).state.remoteNotesCleaningExpiryDaysForEachNotes,"onUpdate:modelValue":t[14]||(t[14]=i=>n(c).state.remoteNotesCleaningExpiryDaysForEachNotes=i),type:"number"},{label:e(()=>[a(m,null,{default:e(()=>[l(o("Días mínimos para conservar las notas"),1)]),_:1}),l(" ("+o("Días")+")",1),n(c).modifiedStates.remoteNotesCleaningExpiryDaysForEachNotes?(b(),_("span",he,o("Modificado"),1)):C("",!0)]),suffix:e(()=>[l(o("Días"),1)]),_:1},8,["modelValue"]),a(M,{modelValue:n(c).state.remoteNotesCleaningMaxProcessingDurationInMinutes,"onUpdate:modelValue":t[15]||(t[15]=i=>n(c).state.remoteNotesCleaningMaxProcessingDurationInMinutes=i),type:"number"},{label:e(()=>[a(m,null,{default:e(()=>[l(o("Tiempo máximo de funcionamiento continuo del proceso de limpieza"),1)]),_:1}),l(" ("+o("Minutos")+")",1),n(c).modifiedStates.remoteNotesCleaningMaxProcessingDurationInMinutes?(b(),_("span",Me,o("Modificado"),1)):C("",!0)]),suffix:e(()=>[l(o("Minutos"),1)]),_:1},8,["modelValue"])],64)):C("",!0)])]),_:2},[n(c).savedState.enableRemoteNotesCleaning?{name:"suffix",fn:e(()=>[t[30]||(t[30]=l("Enabled",-1))]),key:"0"}:{name:"suffix",fn:e(()=>[t[31]||(t[31]=l("Disabled",-1))]),key:"1"},n(c).modified.value?{name:"footer",fn:e(()=>[a(S,{form:n(c)},null,8,["form"])]),key:"2"}:void 0]),1024)]),_:1})])]),_:1},8,["label"])])]),_:1},8,["actions","tabs"])}}});export{Ve as default};

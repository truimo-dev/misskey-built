const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["https://fastly.jsdelivr.net/gh/truimo-dev/misskey-built@latest/_frontend_vite_/scripts/3iSoGi4ic-qfX4D5dB.js","https://fastly.jsdelivr.net/gh/truimo-dev/misskey-built@latest/_frontend_vite_/scripts/3iSoGi4ic-DV-GuiCp.js","https://fastly.jsdelivr.net/gh/truimo-dev/misskey-built@latest/_frontend_vite_/scripts/3iSoGi4ic-D0mTJ0Mu.js","https://fastly.jsdelivr.net/gh/truimo-dev/misskey-built@latest/_frontend_vite_/scripts/3iSoGi4ic-B1GPmOGN.js","https://fastly.jsdelivr.net/gh/truimo-dev/misskey-built@latest/_frontend_vite_/scripts/3iSoGi4ic-Dty8GuTz.js","https://fastly.jsdelivr.net/gh/truimo-dev/misskey-built@latest/_frontend_vite_/scripts/3iSoGi4ic-D98_HDRS.js","https://fastly.jsdelivr.net/gh/truimo-dev/misskey-built@latest/_frontend_vite_/assets/3iSoGi4ic-DZU1WGtr.css","https://fastly.jsdelivr.net/gh/truimo-dev/misskey-built@latest/_frontend_vite_/assets/3iSoGi4ic-9GwroBN9.css","https://fastly.jsdelivr.net/gh/truimo-dev/misskey-built@latest/_frontend_vite_/scripts/3iSoGi4ic-BDF7xMl0.js","https://fastly.jsdelivr.net/gh/truimo-dev/misskey-built@latest/_frontend_vite_/assets/3iSoGi4ic-8Z3zIVAA.css","https://fastly.jsdelivr.net/gh/truimo-dev/misskey-built@latest/_frontend_vite_/assets/3iSoGi4ic-BMNL0SP4.css"])))=>i.map(i=>d[i]);
import{ak as et,P as st,az as it,b as ot,M as P,$ as r,by as at,J as lt,bz as nt,c as rt,L as b,C as A,h as ut,d as dt,e as ct,_ as pt}from"./3iSoGi4ic-DV-GuiCp.js";import{b as vt,a as $,m as mt,c as C,w as kt,z as n,k as L,f as p,i,h as u,p as s,B as d,T as _t,t as v,l as a,F as T,A as E,E as h,C as _,D as N,j as m}from"./3iSoGi4ic-D0mTJ0Mu.js";import{u as M}from"./3iSoGi4ic-B1GPmOGN.js";import{M as ft}from"./3iSoGi4ic-CC5SbM-1.js";import{M as yt}from"./3iSoGi4ic-CdSqfJMx.js";import{M as gt}from"./3iSoGi4ic-Dsx90Xmd.js";import"./3iSoGi4ic-D98_HDRS.js";import"./3iSoGi4ic-Dv7rS4og.js";const ht={class:"_spacer",style:{"--MI_SPACER-w":"1000px","--MI_SPACER-min":"16px","--MI_SPACER-max":"32px"}},Mt={class:"_root"},bt={key:0,class:"rkxwuolj"},Ct={class:"files"},wt=["src"],xt={class:"body"},It={class:"title"},Pt={class:"description"},At={class:"info"},$t={class:"actions"},Lt={class:"like"},Tt={key:0,class:"count"},Et={key:0,class:"count"},Nt={class:"other"},Dt={class:"user"},Rt={class:"name"},zt={class:"sdrarzaf"},Bt=vt({__name:"post",props:{postId:{}},setup(D){const R=et(),f=D,t=$(null),w=$(null),z=mt(new st("users/gallery/posts",{limit:6,computedParams:C(()=>({userId:t.value.user.id}))}));function x(){t.value=null,lt("gallery/posts/show",{postId:f.postId}).then(l=>{t.value=l}).catch(l=>{w.value=l})}function B(){t.value&&nt(`${M}/gallery/${t.value.id}`)}function S(){t.value&&navigator.share({title:t.value.title,text:t.value.description??void 0,url:`${M}/gallery/${t.value.id}`})}function W(){t.value&&rt({initialText:`${t.value.title} ${M}/gallery/${t.value.id}`})}function V(){t.value&&b("gallery/posts/like",{postId:f.postId}).then(()=>{t.value.isLiked=!0,t.value.likedCount++})}async function F(){!t.value||(await A({type:"warning",text:"¿Quitar como favorito?"})).canceled||b("gallery/posts/unlike",{postId:f.postId}).then(()=>{t.value.isLiked=!1,t.value.likedCount--})}function U(){R.push("/gallery/:postId/edit",{params:{postId:f.postId}})}async function j(){if(!t.value)return;const l=`${M}/gallery/${t.value.id}`,{dispose:e}=await dt(ct(()=>import("./3iSoGi4ic-qfX4D5dB.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10]),import.meta.url).then(y=>y.default),{user:t.value.user,initialComment:`Post: ${l}
-----
`},{closed:()=>e()})}function H(l){if(!t.value)return;const e=[];r&&r.id!==t.value.userId&&(e.push({icon:"ti ti-exclamation-circle",text:"Reportar",action:j}),(r.isModerator||r.isAdmin)&&e.push({type:"divider"},{icon:"ti ti-trash",text:"Borrar",danger:!0,action:()=>A({type:"warning",text:"¿Desea eliminarlo?"}).then(({canceled:y})=>{y||!t.value||b("gallery/posts/delete",{postId:t.value.id})})})),ut(e,l.currentTarget??l.target)}kt(()=>f.postId,x,{immediate:!0});const G=C(()=>[]),J=C(()=>[]);return it(()=>({title:t.value?t.value.title:"Galería",...t.value?{avatar:t.value.user}:{}})),(l,e)=>{const y=n("Mfm"),O=n("MkTime"),q=n("MkAvatar"),K=n("MkUserName"),Q=n("MkAcct"),X=n("MkAd"),Y=n("MkError"),Z=n("MkLoading"),tt=n("PageWithHeader"),k=L("tooltip"),g=L("click-anime");return i(),p(tt,{actions:G.value,tabs:J.value},{default:u(()=>[s("div",ht,[s("div",Mt,[d(_t,{name:v(ot).s.animation?"fade":"",mode:"out-in"},{default:u(()=>[t.value?(i(),a("div",bt,[s("div",Ct,[(i(!0),a(T,null,E(t.value.files,c=>(i(),a("div",{key:c.id,class:"file"},[s("img",{src:c.url},null,8,wt)]))),128))]),s("div",xt,[s("div",It,h(t.value.title),1),s("div",Pt,[t.value.description!=null?(i(),p(y,{key:0,text:t.value.description},null,8,["text"])):_("",!0)]),s("div",At,[e[3]||(e[3]=s("i",{class:"ti ti-clock"},null,-1)),e[4]||(e[4]=N()),d(O,{time:t.value.createdAt,mode:"detail"},null,8,["time"])]),s("div",$t,[s("div",Lt,[t.value.isLiked?m((i(),p(P,{key:0,class:"button",primary:"",onClick:e[0]||(e[0]=c=>F())},{default:u(()=>[e[5]||(e[5]=s("i",{class:"ti ti-heart-off"},null,-1)),t.value.likedCount>0?(i(),a("span",Tt,h(t.value.likedCount),1)):_("",!0)]),_:1})),[[k,"Quitar me gusta"]]):m((i(),p(P,{key:1,class:"button",onClick:e[1]||(e[1]=c=>V())},{default:u(()=>[e[6]||(e[6]=s("i",{class:"ti ti-heart"},null,-1)),t.value.likedCount>0?(i(),a("span",Et,h(t.value.likedCount),1)):_("",!0)]),_:1})),[[k,"¡Muy bien!"]])]),s("div",Nt,[v(r)&&v(r).id===t.value.user.id?m((i(),a("button",{key:0,class:"_button",onClick:U},[...e[7]||(e[7]=[s("i",{class:"ti ti-pencil ti-fw"},null,-1)])])),[[k,"Editar"],[g]]):_("",!0),m((i(),a("button",{class:"_button",onClick:W},[...e[8]||(e[8]=[s("i",{class:"ti ti-repeat ti-fw"},null,-1)])])),[[k,"Compartir con una nota"],[g]]),m((i(),a("button",{class:"_button",onClick:B},[...e[9]||(e[9]=[s("i",{class:"ti ti-link ti-fw"},null,-1)])])),[[k,"Copiar enlace"],[g]]),v(at)()?m((i(),a("button",{key:1,class:"_button",onClick:S},[...e[10]||(e[10]=[s("i",{class:"ti ti-share ti-fw"},null,-1)])])),[[k,"Compartir"],[g]]):_("",!0),v(r)&&v(r).id!==t.value.user.id?m((i(),a("button",{key:2,class:"_button",onMousedown:H},[...e[11]||(e[11]=[s("i",{class:"ti ti-dots ti-fw"},null,-1)])],32)),[[g]]):_("",!0)])]),s("div",Dt,[d(q,{user:t.value.user,class:"avatar",link:"",preview:""},null,8,["user"]),s("div",Rt,[d(K,{user:t.value.user,style:{display:"block"}},null,8,["user"]),d(Q,{user:t.value.user},null,8,["user"])])])]),d(X,{preferForms:["horizontal","horizontal-big"]}),d(ft,{"max-height":300,foldable:!0,class:"other"},{icon:u(()=>[...e[12]||(e[12]=[s("i",{class:"ti ti-clock"},null,-1)])]),header:u(()=>[N(h("Publicaciones recientes"),1)]),default:u(()=>[d(yt,{paginator:v(z)},{default:u(({items:c})=>[s("div",zt,[(i(!0),a(T,null,E(c,I=>(i(),p(gt,{key:I.id,post:I,class:"post"},null,8,["post"]))),128))])]),_:1},8,["paginator"])]),_:1})])):w.value?(i(),p(Y,{key:1,onRetry:e[2]||(e[2]=c=>x())})):(i(),p(Z,{key:2}))]),_:1},8,["name"])])])]),_:1},8,["actions","tabs"])}}}),Ot=pt(Bt,[["__scopeId","data-v-08ece16b"]]);export{Ot as default};

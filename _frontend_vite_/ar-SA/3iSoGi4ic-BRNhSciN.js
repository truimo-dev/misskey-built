const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["https://fastly.jsdelivr.net/gh/truimo-dev/misskey-built@latest/_frontend_vite_/scripts/3iSoGi4ic-BMkfFCIv.js","https://fastly.jsdelivr.net/gh/truimo-dev/misskey-built@latest/_frontend_vite_/scripts/3iSoGi4ic-DV-GuiCp.js","https://fastly.jsdelivr.net/gh/truimo-dev/misskey-built@latest/_frontend_vite_/scripts/3iSoGi4ic-D0mTJ0Mu.js","https://fastly.jsdelivr.net/gh/truimo-dev/misskey-built@latest/_frontend_vite_/scripts/3iSoGi4ic-B1GPmOGN.js","https://fastly.jsdelivr.net/gh/truimo-dev/misskey-built@latest/_frontend_vite_/scripts/3iSoGi4ic-Dty8GuTz.js","https://fastly.jsdelivr.net/gh/truimo-dev/misskey-built@latest/_frontend_vite_/scripts/3iSoGi4ic-D98_HDRS.js","https://fastly.jsdelivr.net/gh/truimo-dev/misskey-built@latest/_frontend_vite_/assets/3iSoGi4ic-DZU1WGtr.css","https://fastly.jsdelivr.net/gh/truimo-dev/misskey-built@latest/_frontend_vite_/assets/3iSoGi4ic-9GwroBN9.css","https://fastly.jsdelivr.net/gh/truimo-dev/misskey-built@latest/_frontend_vite_/scripts/3iSoGi4ic-Dn35_-KQ.js","https://fastly.jsdelivr.net/gh/truimo-dev/misskey-built@latest/_frontend_vite_/scripts/3iSoGi4ic-CsUWgtg6.js","https://fastly.jsdelivr.net/gh/truimo-dev/misskey-built@latest/_frontend_vite_/assets/3iSoGi4ic-eH3eQdrJ.css","https://fastly.jsdelivr.net/gh/truimo-dev/misskey-built@latest/_frontend_vite_/assets/3iSoGi4ic-B8NUJkDB.css","https://fastly.jsdelivr.net/gh/truimo-dev/misskey-built@latest/_frontend_vite_/scripts/3iSoGi4ic-UCD0eRzT.js","https://fastly.jsdelivr.net/gh/truimo-dev/misskey-built@latest/_frontend_vite_/assets/3iSoGi4ic-ByiXuA1e.css","https://fastly.jsdelivr.net/gh/truimo-dev/misskey-built@latest/_frontend_vite_/scripts/3iSoGi4ic-Fx-BY70c.js","https://fastly.jsdelivr.net/gh/truimo-dev/misskey-built@latest/_frontend_vite_/assets/3iSoGi4ic-Dkg-saem.css","https://fastly.jsdelivr.net/gh/truimo-dev/misskey-built@latest/_frontend_vite_/assets/3iSoGi4ic-CnL_SIE1.css"])))=>i.map(i=>d[i]);
import{Q as A,aA as z,bA as I,av as y,i as x,b9 as Q,az as K,M as D,e as j}from"./3iSoGi4ic-DV-GuiCp.js";import{Q as W}from"./3iSoGi4ic-C_KRNUC8.js";import{h as X,u as Y}from"./3iSoGi4ic-B1GPmOGN.js";import{m as L}from"./3iSoGi4ic-PRfq4AnS.js";import{b as T,c as a,u as G,e as O,a as N,w as J,o as Z,z as q,l,i as o,p as n,j as p,s as ee,B as f,t as r,h as g,D as w,E as M,f as i,C as te,d as se}from"./3iSoGi4ic-D0mTJ0Mu.js";import{M as oe}from"./3iSoGi4ic-DygYQwdU.js";import"./3iSoGi4ic-D98_HDRS.js";const ne=["src"],ae=["src"],re=-3,ie=T({__name:"qr.show",setup(P){const t=A(),d=a(()=>`@${t.username}@${X}`),S=a(()=>z(t,void 0,!0)),s=a(()=>({title:(({name,acct})=>(name+" "+acct))({name:I(t),acct:d.value}),text:"Follow me on the Fediverse!",url:S.value})),u=a(()=>navigator.canShare&&navigator.canShare(s.value)),_=G("qrCodeEl"),B=a(()=>y(x.themeColor??"#86b300")),C=a(()=>B.value.toHsl());function U(){if(u.value)return navigator.share(s.value)}const F=new W({width:600,height:600,margin:42,type:"canvas",data:`${Y}/users/${t.id}`,image:x.iconUrl?Q(x.iconUrl):"/favicon.ico",qrOptions:{typeNumber:0,mode:"Byte",errorCorrectionLevel:"H"},imageOptions:{hideBackgroundDots:!0,imageSize:.3,margin:16,crossOrigin:"anonymous"},dotsOptions:{type:"dots",color:y(`hsl(${C.value.h}, 100, 18)`).toRgbString()},cornersDotOptions:{type:"dot"},cornersSquareOptions:{type:"extra-rounded"},backgroundOptions:{color:y(`hsl(${C.value.h}, 100, 97)`).toRgbString()}});O(()=>{_.value!=null&&F.append(_.value)});const b=window.DeviceMotionEvent&&typeof window.DeviceMotionEvent.requestPermission=="function",h=new Set,E=N(!1);function k(e){const v=e.beta?e.beta<re:!1;E.value=v}J(E,e=>{h.forEach(v=>{v.classList.toggle("_qrShowFlipFliped",e)})});function H(){b&&window.DeviceMotionEvent.requestPermission().then(e=>{e==="granted"&&window.addEventListener("deviceorientation",k)}).catch(console.error)}O(()=>{window.addEventListener("deviceorientation",k)}),Z(()=>{window.removeEventListener("deviceorientation",k)});const m={mounted(e){h.add(e),e.classList.add("_qrShowFlip")},unmounted(e){e.classList.remove("_qrShowFlip"),h.delete(e)}};return(e,v)=>{const R=q("MkAvatar"),V=q("MkUserName"),$=q("MkCondensedLine");return o(),l("div",{class:"x5FaS"},[n("div",{class:"xAMs2"},[p(n("div",{ref_key:"qrCodeEl",ref:_,style:ee({cursor:u.value?"pointer":"default"}),class:"xsjsX",onClick:U},null,6),[[m]]),p((o(),l("div",{class:"x33b5"},[f(R,{class:"xrHYn",user:r(t),indicator:!1},null,8,["class","user"]),n("div",null,[n("div",{class:"xhVeA"},[f($,{minScale:2/3},{default:g(()=>[f(V,{user:r(t),nowrap:!0},null,8,["user"])]),_:1})],2),n("div",null,[f($,{minScale:2/3},{default:g(()=>[w(M(d.value),1)]),_:1})])])],2)),[[m]]),r(b)?p((o(),l("img",{key:0,class:"xy3On",src:r(L),alt:"Misskey Logo",onClick:H},null,10,ne)),[[m]]):p((o(),l("img",{key:1,class:"xy3On",src:r(L),alt:"Misskey Logo"},null,10,ae)),[[m]])],2)],2)}}});const he=T({__name:"qr",setup(P){A();const t=N(!1),d=se(()=>j(()=>import("./3iSoGi4ic-BMkfFCIv.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16]),import.meta.url));return K(()=>({title:"QR Code",icon:"ti ti-qrcode"})),(S,s)=>(o(),l("div",{class:"xiKiK _pageScrollable"},[n("div",{class:"_spacer xtI1k"},[t.value?(o(),i(D,{key:0,class:"xcWq8",rounded:"",onClick:s[0]||(s[0]=u=>t.value=!1)},{default:g(()=>[s[2]||(s[2]=n("i",{class:"ti ti-qrcode"},null,-1)),w(" "+M("المظهر"),1)]),_:1},8,["class"])):(o(),i(D,{key:1,class:"xcWq8",rounded:"",onClick:s[1]||(s[1]=u=>t.value=!0)},{default:g(()=>[s[3]||(s[3]=n("i",{class:"ti ti-scan"},null,-1)),w(" "+M("Scan"),1)]),_:1},8,["class"])),t.value?(o(),i(r(d),{key:2})):(o(),i(ie,{key:3}))],2),t.value?te("",!0):(o(),i(oe,{key:0,accented:"",revered:"",height:200,style:{position:"sticky",bottom:"0","margin-top":"-200px"}}))],2))}});export{he as default};

import{b,a as C,f as k,i as t,h as i,j as B,p as s,s as p,t as o,g as w,v as F,T as H,u as O,e as q,w as N,z as A,l as n,B as m,C as v,a8 as S,x as l,$ as V,n as K}from"./3iSoGi4ic-D0mTJ0Mu.js";import{ae as U,b as d,Z as j,b0 as E,b1 as J,ar as Y}from"./3iSoGi4ic-DV-GuiCp.js";const Q=["id"],Z=["id"],D=b({__name:"MkFolderPage",props:{pageId:{default:0}},emits:["closed"],setup(r,{emit:M}){const c=M,x=U("low"),f=C(!0);function h(){f.value=!1}function y(){c("closed")}return(a,g)=>(t(),k(H,{name:"x",enterActiveClass:o(d).s.animation?"x80l8":"",leaveActiveClass:o(d).s.animation?"xBUZD":"",enterFromClass:o(d).s.animation?"xgE32":"",leaveToClass:o(d).s.animation?"xEr2j":"",duration:300,appear:"",onAfterLeave:y},{default:i(()=>[B(s("div",{class:"xlRaH",style:p({zIndex:o(x)})},[s("div",{class:"xnsXd",style:p({zIndex:o(x)})},null,6),s("div",{class:"xEe73",style:p({zIndex:o(x)})},[s("div",{class:"xqqrH"},[s("button",{class:"xcJLu _button",onClick:h},[...g[0]||(g[0]=[s("i",{class:"ti ti-chevron-left"},null,-1)])],2),s("div",{id:`v-${r.pageId}-header`,class:"x8476"},null,10,Q),s("div",{class:"xeQ6O"},null,2)],2),s("div",{id:`v-${r.pageId}-body`},null,8,Z)],6)],6),[[F,f.value]])]),_:1},8,["enterActiveClass","leaveActiveClass","enterFromClass","leaveToClass"]))}});const G=["aria-expanded"],W={key:0,class:"ti ti-chevron-right icon"},X={key:1,class:"ti ti-chevron-up icon"},ee={key:2,class:"ti ti-chevron-down icon"},te={key:0},se={key:1},ae=["aria-hidden"],oe={key:1},re=b({__name:"MkFolder",props:{defaultOpen:{type:Boolean,default:!1},maxHeight:{default:null},withSpacer:{type:Boolean,default:!0},spacerMin:{default:14},spacerMax:{default:22},canPage:{type:Boolean,default:!0}},emits:["opened","closed"],setup(r,{emit:M}){const c=r,x=M,f=O("rootEl"),h=c.canPage&&j==="smartphone"&&d.s["experimental.enableFolderPageView"],y=C(!1),a=C(h?!1:c.defaultOpen),g=C(a.value);function I(e){if(CSS.supports("interpolate-size","allow-keywords")||!(e instanceof HTMLElement))return;const u=e.getBoundingClientRect().height;e.style.height="0",e.offsetHeight,e.style.height=`${Math.min(u,c.maxHeight??1/0)}px`}function L(e){CSS.supports("interpolate-size","allow-keywords")||e instanceof HTMLElement&&(e.style.height="")}function z(e){if(CSS.supports("interpolate-size","allow-keywords")||!(e instanceof HTMLElement))return;const u=e.getBoundingClientRect().height;e.style.height=`${u}px`,e.offsetHeight,e.style.height="0"}function R(e){CSS.supports("interpolate-size","allow-keywords")||e instanceof HTMLElement&&(e.style.height="")}let _=E.value;E.value+=1e3;async function P(e){if(h&&!a.value){_++;const{dispose:u}=await Y(D,{pageId:_},{closed:()=>{a.value=!1,u()}})}a.value||(g.value=!0),K(()=>{a.value=!a.value})}return q(()=>{const e=getComputedStyle(window.document.documentElement),u=J(f.value?.parentElement)??"transparent",$=e.getPropertyValue("--MI_THEME-panel");y.value=u===$}),N(a,e=>{x(e?"opened":"closed")},{flush:"post"}),(e,u)=>{const $=A("MkCondensedLine"),T=A("MkStickyContainer");return t(),n("div",{ref_key:"rootEl",ref:f,class:"xcMdN",role:"group","aria-expanded":a.value},[m(T,null,{header:i(()=>[s("button",{class:w([["xhYnI",{xzFTt:a.value}],"_button"]),role:"button","data-cy-folder-header":"",onClick:P},[s("div",{class:"xnpCu"},[l(e.$slots,"icon")],2),s("div",{class:"x1BFf"},[s("div",{class:"xplBd"},[m($,{minScale:2/3},{default:i(()=>[l(e.$slots,"label")]),_:3})],2),s("div",{class:"xoc2f"},[l(e.$slots,"caption")],2)],2),s("div",{class:"xtOYU"},[s("span",{class:"x1dxB"},[l(e.$slots,"suffix")],2),o(h)?(t(),n("i",W)):a.value?(t(),n("i",X)):(t(),n("i",ee))],2)],2)]),default:i(()=>[o(h)?(t(),n("div",te,[a.value?(t(),k(S,{key:0,defer:"",to:`#v-${o(_)}-header`},[l(e.$slots,"label")],8,["to"])):v("",!0),a.value?(t(),k(S,{key:1,defer:"",to:`#v-${o(_)}-body`},[m(T,null,{header:i(()=>[e.$slots.header?(t(),n("div",{key:0,class:"xrvJf"},[l(e.$slots,"header")],2)):v("",!0)]),footer:i(()=>[e.$slots.footer?(t(),n("div",{key:0,class:"x4GAF"},[l(e.$slots,"footer")],2)):v("",!0)]),default:i(()=>[r.withSpacer?(t(),n("div",{key:0,class:"_spacer",style:p({"--MI_SPACER-min":c.spacerMin+"px","--MI_SPACER-max":c.spacerMax+"px"})},[l(e.$slots,"default")],4)):(t(),n("div",se,[l(e.$slots,"default")]))]),_:3})],8,["to"])):v("",!0)])):g.value?(t(),n("div",{key:1,class:w(["x5VlO",{x4ya5:y.value}]),style:p({maxHeight:r.maxHeight?`${r.maxHeight}px`:void 0,overflow:r.maxHeight?"auto":void 0}),"aria-hidden":!a.value},[m(H,{enterActiveClass:o(d).s.animation?"xnQws":"",leaveActiveClass:o(d).s.animation?"x2NWq":"",enterFromClass:o(d).s.animation?"xaCkn":"",leaveToClass:o(d).s.animation?"xqkjK":"",onEnter:I,onAfterEnter:L,onLeave:z,onAfterLeave:R},{default:i(()=>[(t(),k(V,null,[B(s("div",null,[m(T,null,{header:i(()=>[e.$slots.header?(t(),n("div",{key:0,class:"xrvJf"},[l(e.$slots,"header")],2)):v("",!0)]),footer:i(()=>[e.$slots.footer?(t(),n("div",{key:0,class:"x4GAF"},[l(e.$slots,"footer")],2)):v("",!0)]),default:i(()=>[r.withSpacer?(t(),n("div",{key:0,class:"_spacer",style:p({"--MI_SPACER-min":c.spacerMin+"px","--MI_SPACER-max":c.spacerMax+"px"})},[l(e.$slots,"default")],4)):(t(),n("div",oe,[l(e.$slots,"default")]))]),_:3})],512),[[F,a.value]])],1024))]),_:3},8,["enterActiveClass","leaveActiveClass","enterFromClass","leaveToClass"])],14,ae)):v("",!0)]),_:3})],10,G)}}});export{re as M};

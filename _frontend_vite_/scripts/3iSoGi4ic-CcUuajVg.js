import{b as w,a as l,z as m,f as n,i as r,h as o,p as s,B as g,C as h,T as b,t as f,l as u,E as B}from"./3iSoGi4ic-D0mTJ0Mu.js";import{b as C,dw as M,d3 as E,c9 as L}from"./3iSoGi4ic-DV-GuiCp.js";import"./3iSoGi4ic-B1GPmOGN.js";import"./3iSoGi4ic-Dty8GuTz.js";import"./3iSoGi4ic-D98_HDRS.js";const R={class:"poamfof"},T={key:0,class:"player"},U=["src"],W={key:1},Y=w({__name:"MkYouTubePlayer",props:{url:{}},setup(v){const y=v,i=new URL(y.url);if(!["http:","https:"].includes(i.protocol))throw new Error("invalid url");const a=l(!0),c=l(null),t=l({url:null,width:null,height:null}),p=()=>{a.value=!0,window.fetch(`/url?url=${encodeURIComponent(i.href)}&lang=${L}`).then(d=>{d.json().then(e=>{e.url!=null&&(c.value=e.title,a.value=!1,t.value=e.player)})})};return p(),(d,e)=>{const _=m("MkLoading"),k=m("MkError");return r(),n(E,{initialWidth:640,initialHeight:402,canResize:!0,closeButton:!0},{header:o(()=>[e[1]||(e[1]=s("i",{class:"icon ti ti-brand-youtube",style:{"margin-right":"0.5em"}},null,-1)),s("span",null,B(c.value??"YouTube"),1)]),default:o(()=>[s("div",R,[g(b,{name:f(C).s.animation?"fade":"",mode:"out-in"},{default:o(()=>[t.value.url&&(t.value.url.startsWith("http://")||t.value.url.startsWith("https://"))?(r(),u("div",T,[a.value?h("",!0):(r(),u("iframe",{key:0,src:f(M)(t.value.url),frameborder:"0",allow:"autoplay; encrypted-media",allowfullscreen:""},null,8,U))])):(r(),u("span",W,"invalid url"))]),_:1},8,["name"]),a.value?(r(),n(_,{key:0})):t.value.url?h("",!0):(r(),n(k,{key:1,onRetry:e[0]||(e[0]=x=>p())}))])]),_:1})}}});export{Y as default};

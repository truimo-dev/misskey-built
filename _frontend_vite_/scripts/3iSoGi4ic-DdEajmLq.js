import{aF as H,$ as u,J as $}from"./3iSoGi4ic-DV-GuiCp.js";import{u as A}from"./3iSoGi4ic-DCTAa4Sx.js";import{M as C}from"./3iSoGi4ic-CC5SbM-1.js";import{i18n as w}from"./3iSoGi4ic-Dty8GuTz.js";import{b as z,a as y,z as d,f as c,i as s,h as r,p as i,g as P,l as p,F as R,A as T,B as I,D as L,E as N,t as V}from"./3iSoGi4ic-D0mTJ0Mu.js";import"./3iSoGi4ic-B1GPmOGN.js";import"./3iSoGi4ic-D98_HDRS.js";const Q=z({__name:"WidgetBirthdayFollowings",props:{widget:{}},emits:["updateProps"],setup(k,{expose:v,emit:F}){const m=w.ts._widgets.birthdayFollowings,b={showHeader:{type:"boolean",default:!0}},l=k,h=F,{widgetProps:x,configure:M}=A(m,b,l,h),o=y([]),a=y(!0);let f="1970-01-01";const _=()=>{if(!u){o.value=[],a.value=!1;return}const t=new Date(f);t.setHours(0,0,0,0);const e=new Date;e.setHours(0,0,0,0),e>t&&(g(),f=e.toISOString())};function g(){if(u==null){o.value=[],a.value=!1;return}const t=new Date;t.setHours(0,0,0,0),a.value=!0,$("users/following",{limit:18,birthday:`${t.getFullYear().toString().padStart(4,"0")}-${(t.getMonth()+1).toString().padStart(2,"0")}-${t.getDate().toString().padStart(2,"0")}`,userId:u.id}).then(e=>{o.value=e,window.setTimeout(()=>{a.value=!1},100)})}return H(_,1e3*60,{immediate:!0,afterMounted:!0}),v({name:m,configure:M,id:l.widget?l.widget.id:null}),(t,e)=>{const S=d("MkLoading"),D=d("MkAvatar"),B=d("MkResult");return s(),c(C,{showHeader:V(x).showHeader,class:"mkw-bdayfollowings"},{icon:r(()=>[...e[1]||(e[1]=[i("i",{class:"ti ti-cake"},null,-1)])]),header:r(()=>[L(N(w.ts._widgets.birthdayFollowings),1)]),func:r(({buttonStyleClass:n})=>[i("button",{class:P(["_button",n]),onClick:e[0]||(e[0]=W=>g())},[...e[2]||(e[2]=[i("i",{class:"ti ti-refresh"},null,-1)])],2)]),default:r(()=>[i("div",{class:"xyxoT"},[a.value?(s(),c(S,{key:0})):o.value.length>0?(s(),p("div",{key:1,class:"xu2fz"},[(s(!0),p(R,null,T(o.value,n=>(s(),c(D,{key:n.id,user:n.followee,link:"",preview:""},null,8,["user"]))),128))],2)):(s(),p("div",{key:2,class:"xeyma"},[I(B,{type:"empty"})],2))],2)]),_:1},8,["showHeader"])}}});export{Q as default};

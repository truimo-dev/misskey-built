import{a as h}from"./3iSoGi4ic-DUrJvqB4.js";import{az as w}from"./3iSoGi4ic-DV-GuiCp.js";import{M as y}from"./3iSoGi4ic-CteuwjJ2.js";import{b as _,z as g,f as C,i as k,h as x,p as r,B as v,t as c}from"./3iSoGi4ic-D0mTJ0Mu.js";import"./3iSoGi4ic-B1GPmOGN.js";import"./3iSoGi4ic-Dty8GuTz.js";import"./3iSoGi4ic-D98_HDRS.js";const z=_({__name:"oauth",setup(B){const i=window.document.querySelector('meta[name="misskey:oauth:transaction-id"]');i&&i.remove();const d=window.document.querySelector('meta[name="misskey:oauth:client-name"]')?.content,u=window.document.querySelector('meta[name="misskey:oauth:client-logo"]')?.content,l=window.document.querySelector('meta[name="misskey:oauth:scope"]')?.content.split(" ").filter(n=>h.includes(n))??[];function s(n,m){const e=window.document.createElement("form");e.action="/oauth/decision",e.method="post",e.acceptCharset="utf-8";const t=window.document.createElement("input");t.type="hidden",t.name="login_token",t.value=n,e.appendChild(t);const o=window.document.createElement("input");if(o.type="hidden",o.name="transaction_id",o.value=i?.content??"",e.appendChild(o),m==="deny"){const a=window.document.createElement("input");a.type="hidden",a.name="cancel",a.value="cancel",e.appendChild(a)}window.document.body.appendChild(e),e.submit()}function p(n){s(n,"accept")}function f(n){s(n,"deny")}return w(()=>({title:"OAuth",icon:"ti ti-apps"})),(n,m)=>{const e=g("PageWithAnimBg");return k(),C(e,null,{default:x(()=>[r("div",{class:"xyE7I"},[r("div",{class:"xg1VG"},[v(y,{ref:"authRoot",name:c(d),icon:c(u),permissions:c(l),waitOnDeny:!0,onAccept:p,onDeny:f},null,8,["name","icon","permissions"])],2)],2)]),_:1})}}});export{z as default};

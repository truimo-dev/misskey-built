const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["https://fastly.jsdelivr.net/gh/truimo-dev/misskey-built@latest/_frontend_vite_/scripts/3iSoGi4ic-DBDsHpqn.js","https://fastly.jsdelivr.net/gh/truimo-dev/misskey-built@latest/_frontend_vite_/scripts/3iSoGi4ic-Dty8GuTz.js","https://fastly.jsdelivr.net/gh/truimo-dev/misskey-built@latest/_frontend_vite_/scripts/3iSoGi4ic-B1GPmOGN.js","https://fastly.jsdelivr.net/gh/truimo-dev/misskey-built@latest/_frontend_vite_/scripts/3iSoGi4ic-D0mTJ0Mu.js","https://fastly.jsdelivr.net/gh/truimo-dev/misskey-built@latest/_frontend_vite_/scripts/3iSoGi4ic-DV-GuiCp.js","https://fastly.jsdelivr.net/gh/truimo-dev/misskey-built@latest/_frontend_vite_/scripts/3iSoGi4ic-D98_HDRS.js","https://fastly.jsdelivr.net/gh/truimo-dev/misskey-built@latest/_frontend_vite_/assets/3iSoGi4ic-DZU1WGtr.css","https://fastly.jsdelivr.net/gh/truimo-dev/misskey-built@latest/_frontend_vite_/assets/3iSoGi4ic-9GwroBN9.css","https://fastly.jsdelivr.net/gh/truimo-dev/misskey-built@latest/_frontend_vite_/scripts/3iSoGi4ic-mUIS9yQt.js","https://fastly.jsdelivr.net/gh/truimo-dev/misskey-built@latest/_frontend_vite_/scripts/3iSoGi4ic-CdSqfJMx.js","https://fastly.jsdelivr.net/gh/truimo-dev/misskey-built@latest/_frontend_vite_/scripts/3iSoGi4ic-Dv7rS4og.js","https://fastly.jsdelivr.net/gh/truimo-dev/misskey-built@latest/_frontend_vite_/assets/3iSoGi4ic-BbG5vB-s.css","https://fastly.jsdelivr.net/gh/truimo-dev/misskey-built@latest/_frontend_vite_/assets/3iSoGi4ic-DnhnJG_2.css","https://fastly.jsdelivr.net/gh/truimo-dev/misskey-built@latest/_frontend_vite_/assets/3iSoGi4ic-26XO5D71.css","https://fastly.jsdelivr.net/gh/truimo-dev/misskey-built@latest/_frontend_vite_/scripts/3iSoGi4ic-BVu9IE5H.js","https://fastly.jsdelivr.net/gh/truimo-dev/misskey-built@latest/_frontend_vite_/scripts/3iSoGi4ic-D3TJKvmz.js","https://fastly.jsdelivr.net/gh/truimo-dev/misskey-built@latest/_frontend_vite_/scripts/3iSoGi4ic-DID2kkuO.js","https://fastly.jsdelivr.net/gh/truimo-dev/misskey-built@latest/_frontend_vite_/assets/3iSoGi4ic-BerxugxZ.css","https://fastly.jsdelivr.net/gh/truimo-dev/misskey-built@latest/_frontend_vite_/assets/3iSoGi4ic-zXlwqD-6.css"])))=>i.map(i=>d[i]);
import{c3 as x,cg as $,c4 as k,bd as z,ab as L,M as U,d6 as W,bk as X,R as O,e as S,C,L as P,_ as J,az as K,J as V}from"./3iSoGi4ic-DV-GuiCp.js";import{_ as Y}from"./3iSoGi4ic-DYnmgoxC.js";import{F as j}from"./3iSoGi4ic-BBsRrkiB.js";import{M as G}from"./3iSoGi4ic-Cj3FgKaq.js";import{i18n as a}from"./3iSoGi4ic-Dty8GuTz.js";import{b as R,a as w,c as T,z as M,f as u,i as n,h as i,l as _,C as f,p as d,B as o,E as r,D as l,t as I,d as E,F as Q,A as Z}from"./3iSoGi4ic-D0mTJ0Mu.js";import"./3iSoGi4ic-B1GPmOGN.js";import"./3iSoGi4ic-D98_HDRS.js";import"./3iSoGi4ic-CS6W3O_2.js";const ee={key:0,class:"_spacer",style:{"--MI_SPACER-w":"600px","--MI_SPACER-min":"16px","--MI_SPACER-max":"32px"}},ie={key:0,class:"cxqhhsmd _gaps_m"},te=["href"],ne={class:"_monospace"},le={class:"_monospace"},ae={class:"_monospace"},se={class:"_monospace"},oe={class:"_monospace"},re={key:1,class:"_gaps_m"},ue={key:2,class:"_gaps_m"},de={key:3,class:"_gaps_m"},fe=R({__name:"admin-file.root",props:{file:{},info:{}},setup(e){const s=e,m=w("overview"),c=w(s.file.isSensitive),v=w("note"),g=E(()=>S(()=>import("./3iSoGi4ic-DBDsHpqn.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13]),import.meta.url)),A=E(()=>S(()=>import("./3iSoGi4ic-BVu9IE5H.js"),__vite__mapDeps([14,15,4,3,2,1,5,6,7,16,17,18,9,10,11,12]),import.meta.url));async function y(){const{canceled:p}=await C({type:"warning",text:a.tsx.removeAreYouSure({x:s.file.name})});p||P("drive/files/delete",{fileId:s.file.id})}async function D(){const{canceled:p}=await C({type:"warning",text:c.value?a.ts.unmarkAsSensitiveConfirm:a.ts.markAsSensitiveConfirm});p||(c.value=!c.value,P("drive/files/update",{fileId:s.file.id,isSensitive:!s.file.isSensitive}))}const q=T(()=>[{text:a.ts.openInNewTab,icon:"ti ti-external-link",handler:()=>{window.open(s.file.url,"_blank","noopener")}}]),N=T(()=>[{key:"overview",title:a.ts.overview,icon:"ti ti-info-circle"},x?{key:"usage",title:a.ts._fileViewer.usage,icon:"ti ti-plus"}:null,x?{key:"ip",title:"IP",icon:"ti ti-password"}:null,{key:"raw",title:"Raw data",icon:"ti ti-code"}].filter(p=>p!=null));return(p,t)=>{const B=M("MkTime"),F=M("MkA"),H=M("PageWithHeader");return n(),u(H,{tab:m.value,"onUpdate:tab":t[1]||(t[1]=b=>m.value=b),actions:q.value,tabs:N.value},{default:i(()=>[e.file?(n(),_("div",ee,[m.value==="overview"?(n(),_("div",ie,[d("a",{class:"thumbnail",href:e.file.url,target:"_blank"},[o($,{class:"thumbnail",file:e.file,fit:"contain"},null,8,["file"])],8,te),d("div",null,[o(k,{copy:e.file.type,oneline:"",style:{margin:"1em 0"}},{key:i(()=>[...t[2]||(t[2]=[l("MIME Type",-1)])]),value:i(()=>[d("span",ne,r(e.file.type),1)]),_:1},8,["copy"]),o(k,{oneline:"",style:{margin:"1em 0"}},{key:i(()=>[...t[3]||(t[3]=[l("Size",-1)])]),value:i(()=>[d("span",le,r(I(z)(e.file.size)),1)]),_:1}),o(k,{copy:e.file.id,oneline:"",style:{margin:"1em 0"}},{key:i(()=>[...t[4]||(t[4]=[l("ID",-1)])]),value:i(()=>[d("span",ae,r(e.file.id),1)]),_:1},8,["copy"]),o(k,{copy:e.file.md5,oneline:"",style:{margin:"1em 0"}},{key:i(()=>[...t[5]||(t[5]=[l("MD5",-1)])]),value:i(()=>[d("span",se,r(e.file.md5),1)]),_:1},8,["copy"]),o(k,{oneline:"",style:{margin:"1em 0"}},{key:i(()=>[l(r(a.ts.createdAt),1)]),value:i(()=>[d("span",oe,[o(B,{time:e.file.createdAt,mode:"detail",style:{display:"block"}},null,8,["time"])])]),_:1})]),e.file.user?(n(),u(F,{key:0,class:"user",to:`/admin/user/${e.file.user.id}`},{default:i(()=>[o(G,{user:e.file.user},null,8,["user"])]),_:1},8,["to"])):f("",!0),d("div",null,[o(L,{modelValue:c.value,"onUpdate:modelValue":D},{default:i(()=>[l(r(a.ts.sensitive),1)]),_:1},8,["modelValue"])]),d("div",null,[o(U,{danger:"",onClick:y},{default:i(()=>[t[6]||(t[6]=d("i",{class:"ti ti-trash"},null,-1)),l(" "+r(a.ts.delete),1)]),_:1})])])):m.value==="usage"&&e.info?(n(),_("div",re,[o(W,{tab:v.value,"onUpdate:tab":t[0]||(t[0]=b=>v.value=b),tabs:[{key:"note",title:"Note"},{key:"chat",title:"Chat"}]},null,8,["tab"]),v.value==="note"?(n(),u(I(g),{key:0,fileId:s.file.id},null,8,["fileId"])):v.value==="chat"?(n(),u(I(A),{key:1,fileId:s.file.id},null,8,["fileId"])):f("",!0)])):m.value==="ip"&&e.info?(n(),_("div",ue,[I(X)?f("",!0):(n(),u(O,{key:0,warn:""},{default:i(()=>[l(r(a.ts.requireAdminForView),1)]),_:1})),e.info.requestIp?(n(),u(k,{key:1,class:"_monospace",copy:e.info.requestIp,oneline:""},{key:i(()=>[...t[7]||(t[7]=[l("IP",-1)])]),value:i(()=>[l(r(e.info.requestIp),1)]),_:1},8,["copy"])):f("",!0),e.info.requestHeaders?(n(),u(j,{key:2},{label:i(()=>[...t[8]||(t[8]=[l("Headers",-1)])]),default:i(()=>[(n(!0),_(Q,null,Z(e.info.requestHeaders,(b,h)=>(n(),u(k,{key:h,class:"_monospace"},{key:i(()=>[l(r(h),1)]),value:i(()=>[l(r(b),1)]),_:2},1024))),128))]),_:1})):f("",!0)])):m.value==="raw"?(n(),_("div",de,[e.info?(n(),u(Y,{key:0,tall:"",value:e.info},null,8,["value"])):f("",!0)])):f("",!0)])):f("",!0)]),_:1},8,["tab","actions","tabs"])}}}),me=J(fe,[["__scopeId","data-v-afb2ba5e"]]),we=R({__name:"admin-file",props:{fileId:{}},setup(e){const s=e;function m(){return Promise.all([V("drive/files/show",{fileId:s.fileId}),V("admin/drive/show-file",{fileId:s.fileId})]).then(v=>({file:v[0],info:v[1]}))}const c=w(null);return K(()=>({title:c.value?`${a.ts.file}: ${c.value.name}`:a.ts.file,icon:"ti ti-file"})),(v,g)=>{const A=M("MkSuspense");return n(),u(A,{p:m,onResolved:g[0]||(g[0]=y=>c.value=y.file)},{default:i(({result:y})=>[y.file!=null&&y.info!=null?(n(),u(me,{key:0,file:y.file,info:y.info},null,8,["file","info"])):f("",!0)]),_:1})}}});export{we as default};

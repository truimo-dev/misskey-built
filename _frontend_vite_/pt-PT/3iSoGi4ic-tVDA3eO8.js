import{ak as A,az as D,a7 as c,ab as p,M as m,L as N,J as E,C as z}from"./3iSoGi4ic-DV-GuiCp.js";import{F}from"./3iSoGi4ic-BBsRrkiB.js";import{b as L,ab as Z,a as r,c as B,l as J,i as T,B as s,p as o,h as t,D as a,E as i}from"./3iSoGi4ic-D0mTJ0Mu.js";import"./3iSoGi4ic-B1GPmOGN.js";import"./3iSoGi4ic-D98_HDRS.js";const W={class:"_gaps_m"},Y={class:"_gaps"},j={class:"_gaps_s"},q={class:"_buttons"},se=L({__name:"webhook.edit",props:{webhookId:{}},async setup(P){let f,I;const Q=A(),w=P,d=([f,I]=Z(()=>E("i/webhooks/show",{webhookId:w.webhookId})),f=await f,I(),f),U=r(d.name),k=r(d.url),V=r(d.secret),v=r(d.active),x=r(d.on.includes("follow")),g=r(d.on.includes("followed")),y=r(d.on.includes("note")),C=r(d.on.includes("reply")),S=r(d.on.includes("renote")),_=r(d.on.includes("reaction")),R=r(d.on.includes("mention"));function $(){const u=[];x.value&&u.push("follow"),g.value&&u.push("followed"),y.value&&u.push("note"),C.value&&u.push("reply"),S.value&&u.push("renote"),_.value&&u.push("reaction"),R.value&&u.push("mention"),N("i/webhooks/update",{name:U.value,url:k.value,secret:V.value,webhookId:w.webhookId,on:u,active:v.value})}async function M(){const{canceled:u}=await z({type:"warning",text:(({x})=>("Deseja excluir \""+x+"\"?"))({x:d.name})});u||(await N("i/webhooks/delete",{webhookId:w.webhookId}),Q.push("/settings/connect"))}async function b(u){await N("i/webhooks/test",{webhookId:w.webhookId,type:u,override:{secret:V.value,url:k.value}})}return B(()=>[]),B(()=>[]),D(()=>({title:"Edit webhook",icon:"ti ti-webhook"})),(u,e)=>(T(),J("div",W,[s(c,{modelValue:U.value,"onUpdate:modelValue":e[0]||(e[0]=l=>U.value=l)},{label:t(()=>[a(i("Nome"),1)]),_:1},8,["modelValue"]),s(c,{modelValue:k.value,"onUpdate:modelValue":e[1]||(e[1]=l=>k.value=l),type:"url"},{label:t(()=>[...e[18]||(e[18]=[a("URL",-1)])]),_:1},8,["modelValue"]),s(c,{modelValue:V.value,"onUpdate:modelValue":e[2]||(e[2]=l=>V.value=l)},{prefix:t(()=>[...e[19]||(e[19]=[o("i",{class:"ti ti-lock"},null,-1)])]),label:t(()=>[a(i("Segredo"),1)]),_:1},8,["modelValue"]),s(F,null,{label:t(()=>[a(i("Gatilho"),1)]),default:t(()=>[o("div",Y,[o("div",j,[o("div",{class:"xuNQe"},[s(p,{modelValue:x.value,"onUpdate:modelValue":e[3]||(e[3]=l=>x.value=l)},{default:t(()=>[a(i("Quando seguindo um usuário"),1)]),_:1},8,["modelValue"]),s(m,{transparent:"",class:"xntPR",disabled:!(v.value&&x.value),onClick:e[4]||(e[4]=l=>b("follow"))},{default:t(()=>[...e[20]||(e[20]=[o("i",{class:"ti ti-send"},null,-1)])]),_:1},8,["class","disabled"])],2),o("div",{class:"xuNQe"},[s(p,{modelValue:g.value,"onUpdate:modelValue":e[5]||(e[5]=l=>g.value=l)},{default:t(()=>[a(i("Quando sendo seguido"),1)]),_:1},8,["modelValue"]),s(m,{transparent:"",class:"xntPR",disabled:!(v.value&&g.value),onClick:e[6]||(e[6]=l=>b("followed"))},{default:t(()=>[...e[21]||(e[21]=[o("i",{class:"ti ti-send"},null,-1)])]),_:1},8,["class","disabled"])],2),o("div",{class:"xuNQe"},[s(p,{modelValue:y.value,"onUpdate:modelValue":e[7]||(e[7]=l=>y.value=l)},{default:t(()=>[a(i("Ao postar uma nota"),1)]),_:1},8,["modelValue"]),s(m,{transparent:"",class:"xntPR",disabled:!(v.value&&y.value),onClick:e[8]||(e[8]=l=>b("note"))},{default:t(()=>[...e[22]||(e[22]=[o("i",{class:"ti ti-send"},null,-1)])]),_:1},8,["class","disabled"])],2),o("div",{class:"xuNQe"},[s(p,{modelValue:C.value,"onUpdate:modelValue":e[9]||(e[9]=l=>C.value=l)},{default:t(()=>[a(i("Quando receber uma resposta"),1)]),_:1},8,["modelValue"]),s(m,{transparent:"",class:"xntPR",disabled:!(v.value&&C.value),onClick:e[10]||(e[10]=l=>b("reply"))},{default:t(()=>[...e[23]||(e[23]=[o("i",{class:"ti ti-send"},null,-1)])]),_:1},8,["class","disabled"])],2),o("div",{class:"xuNQe"},[s(p,{modelValue:S.value,"onUpdate:modelValue":e[11]||(e[11]=l=>S.value=l)},{default:t(()=>[a(i("Quando repostado"),1)]),_:1},8,["modelValue"]),s(m,{transparent:"",class:"xntPR",disabled:!(v.value&&S.value),onClick:e[12]||(e[12]=l=>b("renote"))},{default:t(()=>[...e[24]||(e[24]=[o("i",{class:"ti ti-send"},null,-1)])]),_:1},8,["class","disabled"])],2),o("div",{class:"xuNQe"},[s(p,{modelValue:_.value,"onUpdate:modelValue":e[13]||(e[13]=l=>_.value=l),disabled:!0},{default:t(()=>[a(i("Quando receber uma reação"),1)]),_:1},8,["modelValue"]),s(m,{transparent:"",class:"xntPR",disabled:!(v.value&&_.value),onClick:e[14]||(e[14]=l=>b("reaction"))},{default:t(()=>[...e[25]||(e[25]=[o("i",{class:"ti ti-send"},null,-1)])]),_:1},8,["class","disabled"])],2),o("div",{class:"xuNQe"},[s(p,{modelValue:R.value,"onUpdate:modelValue":e[15]||(e[15]=l=>R.value=l)},{default:t(()=>[a(i("Quando for mencionado"),1)]),_:1},8,["modelValue"]),s(m,{transparent:"",class:"xntPR",disabled:!(v.value&&R.value),onClick:e[16]||(e[16]=l=>b("mention"))},{default:t(()=>[...e[26]||(e[26]=[o("i",{class:"ti ti-send"},null,-1)])]),_:1},8,["class","disabled"])],2)]),o("div",{class:"xCZ2R"},i("Clique no botão à direita do interruptor para enviar um Webhook de teste com dados fictícios."),3)])]),_:1}),s(p,{modelValue:v.value,"onUpdate:modelValue":e[17]||(e[17]=l=>v.value=l)},{default:t(()=>[a(i("Ativado"),1)]),_:1},8,["modelValue"]),o("div",q,[s(m,{primary:"",inline:"",onClick:$},{default:t(()=>[e[27]||(e[27]=o("i",{class:"ti ti-check"},null,-1)),a(" "+i("Salvar"),1)]),_:1}),s(m,{danger:"",inline:"",onClick:M},{default:t(()=>[e[28]||(e[28]=o("i",{class:"ti ti-trash"},null,-1)),a(" "+i("Excluir"),1)]),_:1})])]))}});export{se as default};

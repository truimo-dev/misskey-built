import{Q as W,R as M,M as f,a7 as Q,J as G,cT as h,C as Y,L as $,a3 as ee,b as w,az as le,c4 as H,ab as A,ch as te,A as ae,c7 as ne,cU as se,cV as oe,W as R,cW as ie,cX as ue}from"./3iSoGi4ic-DV-GuiCp.js";import{M as k}from"./3iSoGi4ic-Fx-BY70c.js";import{M as re}from"./3iSoGi4ic-Dn35_-KQ.js";import{b as q,a as L,l as y,i as m,B as t,h as e,p as o,D as a,E as s,t as r,F,A as N,f as T,C as K,w as de,c as z,z as S,R as C}from"./3iSoGi4ic-D0mTJ0Mu.js";import{F as me}from"./3iSoGi4ic-CaDkpGcu.js";import{F as ce}from"./3iSoGi4ic-D8UyQ0ea.js";import{s as pe,e as fe}from"./3iSoGi4ic-BjIDNJrc.js";import{M as _e}from"./3iSoGi4ic-B70zSkp5.js";import{a as ke}from"./3iSoGi4ic-CNyaLqcm.js";import"./3iSoGi4ic-B1GPmOGN.js";import"./3iSoGi4ic-D98_HDRS.js";import"./3iSoGi4ic-CsUWgtg6.js";const ge={class:"_gaps_m"},ve={class:"_gaps_m"},be={class:"_gaps"},we={class:"_gaps_m"},Me=q({__name:"migration",setup(j){const d=W(),_=L(""),g=L(),c=L([""]);async function x(){if(d.movedTo?g.value=await G("users/show",{userId:d.movedTo}):_.value="",d.alsoKnownAs&&d.alsoKnownAs.length>0){const p=await G("users/show",{userIds:d.alsoKnownAs});c.value=p&&p.length>0?p.map(i=>`@${h(i)}`):[""]}else c.value=[""]}async function I(){const p=_.value;(await Y({type:"warning",text:(({account})=>("確定要將這個帳戶遷移至 "+account+" 嗎？一旦遷移就無法撤銷，也就無法以原來的狀態使用這個帳戶。\n另外，請確認在要遷移到的帳戶已經建立了一個別名。"))({account:p})})).canceled||(await $("i/move",{moveToAccount:p}),ee())}function P(){c.value.push("")}async function E(){const p=c.value.map(v=>v.trim()).filter(v=>v!==""),i=await $("i/update",{alsoKnownAs:p});d.alsoKnownAs=i.alsoKnownAs,x()}return x(),(p,i)=>(m(),y("div",ge,[t(k,{defaultOpen:!0},{icon:e(()=>[...i[1]||(i[1]=[o("i",{class:"ti ti-plane-arrival"},null,-1)])]),label:e(()=>[a(s("從其他帳戶遷移到這個帳戶"),1)]),caption:e(()=>[a(s("為另一個帳戶建立別名"),1)]),default:e(()=>[o("div",ve,[t(M,null,{default:e(()=>[a(s("如果你想把追隨者從別的帳戶遷移過來，必須先在這裡建立別名。請務必在執行遷移之前建立別名！請像這樣輸入要遷移的帳戶：@person@instance.com"),1)]),_:1}),o("div",null,[t(f,{disabled:c.value.length>=10,inline:"",style:{"margin-right":"8px"},onClick:P},{default:e(()=>[i[2]||(i[2]=o("i",{class:"ti ti-plus"},null,-1)),a(" "+s("新增"),1)]),_:1},8,["disabled"]),t(f,{inline:"",primary:"",onClick:E},{default:e(()=>[i[3]||(i[3]=o("i",{class:"ti ti-check"},null,-1)),a(" "+s("儲存"),1)]),_:1})]),o("div",be,[(m(!0),y(F,null,N(c.value,(v,B)=>(m(),T(Q,{modelValue:c.value[B],"onUpdate:modelValue":O=>c.value[B]=O},{prefix:e(()=>[...i[4]||(i[4]=[o("i",{class:"ti ti-plane-arrival"},null,-1)])]),label:e(()=>[a(s((({n})=>("要遷移過來的帳戶 #"+n))({n:B+1})),1)]),_:2},1032,["modelValue","onUpdate:modelValue"]))),256))])])]),_:1}),t(k,{defaultOpen:!!r(d).movedTo},{icon:e(()=>[...i[5]||(i[5]=[o("i",{class:"ti ti-plane-departure"},null,-1)])]),label:e(()=>[a(s("將這個帳戶遷移至新的帳戶"),1)]),default:e(()=>[o("div",we,[t(M,null,{default:e(()=>[a(s("遷移至新帳戶。\n　・此帳戶的追隨者將自動追隨新帳戶；\n　・此帳戶的所有追隨者將被取消追隨；\n　・此帳戶不能再發文。\n\n雖然會自動遷移您的追隨者，但必須手動遷移您追隨的帳戶。請在遷移前匯出此帳戶的「追隨中」名單，並在遷移後自行匯入。\n列表名單、靜音名單及封鎖名單也必須如此處理。\n\n（此說明適用於本伺服器，以及運行 Misskey v13.12.0 或更新版本的其他伺服器；如 Mastodon 等使用 ActivityPub 協定的其他軟體或有不同的處理方式。）"),1)]),_:1}),r(d)&&!r(d).movedTo?(m(),y(F,{key:0},[t(M,null,{default:e(()=>[a(s("要遷移帳戶，首先要在目標帳戶中為此帳戶建立一個別名。\n 建立別名後，像這樣輸入目標帳戶：@username@server.example.com"),1)]),_:1}),t(M,{warn:""},{default:e(()=>[a(s("一旦遷移帳戶，就無法取消。"),1)]),_:1}),t(Q,{modelValue:_.value,"onUpdate:modelValue":i[0]||(i[0]=v=>_.value=v)},{prefix:e(()=>[...i[6]||(i[6]=[o("i",{class:"ti ti-plane-departure"},null,-1)])]),label:e(()=>[a(s("要遷移到的帳戶："),1)]),_:1},8,["modelValue"]),t(f,{inline:"",danger:"",disabled:!_.value,onClick:I},{default:e(()=>[i[7]||(i[7]=o("i",{class:"ti ti-check"},null,-1)),a(" "+s("遷移"),1)]),_:1},8,["disabled"])],64)):r(d)?(m(),y(F,{key:1},[t(M,null,{default:e(()=>[a(s("將在完成遷移的 24 小時後取消追隨所有帳號。\n此帳戶的追隨中/追隨者人數將歸零。由於不會解除粉絲對您的追隨，因此他們仍然可以繼續閱覽此帳戶內僅對追隨者公開的貼文。"),1)]),_:1}),t(M,{warn:""},{default:e(()=>[a(s("帳戶已遷移。\n遷移無法撤消。"),1)]),_:1}),o("div",null,s("要遷移到的帳戶："),1),g.value?(m(),T(re,{key:0,user:g.value,class:"_panel _shadow"},null,8,["user"])):K("",!0)],64)):K("",!0)])]),_:1},8,["defaultOpen"])]))}}),ye={class:"_gaps_m"},Ve={class:"_gaps_s"},Ae={class:"_gaps_m"},Ce={class:"_monospace"},Te={class:"_gaps_s"},xe={class:"_gaps_s"},De={class:"_gaps_m"},Fe={class:"_gaps_m"},Ie={class:"_gaps_m"},He=q({__name:"other",setup(j){const d=W();w.model("reportError");const _=w.model("enableCondensedLine"),g=w.model("skipNoteRender"),c=w.model("devMode"),x=w.model("experimental.stackingRouterView"),I=w.model("experimental.enableFolderPageView"),P=w.model("experimental.enableHapticFeedback"),E=w.model("experimental.enableWebTranslatorApi");de(g,()=>{ke()});async function p(){{const{canceled:l}=await Y({type:"warning",text:"將要刪除帳戶。是否確定？"});if(l)return}const U=await te();U.canceled||(await $("i/delete-account",{password:U.result.password,token:U.result.token}),await ae({title:"已開始刪除作業。"}),await ne())}function i(){se()}function v(){oe(),R()}function B(){ie(),R()}function O(){$("chat/read-all",{})}async function J(){await ue(),R()}return z(()=>[]),z(()=>[]),le(()=>({title:"其他",icon:"ti ti-dots"})),(U,l)=>{const D=S("SearchIcon"),V=S("SearchLabel"),X=S("MkTime"),b=S("SearchMarker"),Z=S("SearchText");return m(),T(b,{path:"/settings/other",label:"其他",keywords:["other"],icon:"ti ti-dots",markerId:"F1uK9ssiY","data-in-app-search-marker-id":"F1uK9ssiY",children:["E0ndmaP6Q","nYGwCFcOB","2qI6ruPgi","ihpEnBCat","DGDkl71xx","fz6kQPuuP"]},{default:e(()=>[o("div",ye,[o("div",Ve,[t(b,{keywords:["account","info"],markerId:"E0ndmaP6Q","data-in-app-search-marker-id":"E0ndmaP6Q",children:["i78b6ycEH"]},{default:e(()=>[t(k,null,{icon:e(()=>[t(D,null,{default:e(()=>[...l[7]||(l[7]=[o("i",{class:"ti ti-info-circle"},null,-1)])]),_:1})]),label:e(()=>[t(V,null,{default:e(()=>[a(s("帳戶資訊"),1)]),_:1})]),default:e(()=>[o("div",Ae,[t(H,null,{key:e(()=>[...l[8]||(l[8]=[a("ID",-1)])]),value:e(()=>[o("span",Ce,s(r(d).id),1)]),_:1}),t(H,null,{key:e(()=>[a(s("註冊日期"),1)]),value:e(()=>[t(X,{time:r(d).createdAt,mode:"detail"},null,8,["time"])]),_:1}),t(b,{keywords:["role","policy"],markerId:"i78b6ycEH","data-in-app-search-marker-id":"i78b6ycEH"},{default:e(()=>[t(k,null,{icon:e(()=>[...l[9]||(l[9]=[o("i",{class:"ti ti-badges"},null,-1)])]),label:e(()=>[t(V,null,{default:e(()=>[a(s("政策"),1)]),_:1})]),default:e(()=>[o("div",Te,[(m(!0),y(F,null,N(Object.keys(r(d).policies),u=>(m(),y("div",{key:u},s(u)+" ... "+s(r(d).policies[u]),1))),128))])]),_:1})]),_:1})])]),_:1})]),_:1}),t(b,{keywords:["roles"],markerId:"nYGwCFcOB","data-in-app-search-marker-id":"nYGwCFcOB"},{default:e(()=>[t(k,null,{icon:e(()=>[t(D,null,{default:e(()=>[...l[10]||(l[10]=[o("i",{class:"ti ti-badges"},null,-1)])]),_:1})]),label:e(()=>[t(V,null,{default:e(()=>[a(s("指派給自己的角色"),1)]),_:1})]),default:e(()=>[o("div",xe,[(m(!0),y(F,null,N(r(d).roles,u=>(m(),T(_e,{key:u.id,role:u,forModeration:!1},null,8,["role"]))),128))])]),_:1})]),_:1}),t(b,{keywords:["account","move","migration"],markerId:"2qI6ruPgi","data-in-app-search-marker-id":"2qI6ruPgi"},{default:e(()=>[t(k,null,{icon:e(()=>[t(D,null,{default:e(()=>[...l[11]||(l[11]=[o("i",{class:"ti ti-plane"},null,-1)])]),_:1})]),label:e(()=>[t(V,null,{default:e(()=>[a(s("遷移帳戶"),1)]),_:1})]),default:e(()=>[t(Me)]),_:1})]),_:1}),t(b,{keywords:["account","close","delete"],markerId:"ihpEnBCat","data-in-app-search-marker-id":"ihpEnBCat"},{default:e(()=>[t(k,null,{icon:e(()=>[t(D,null,{default:e(()=>[...l[12]||(l[12]=[o("i",{class:"ti ti-alert-triangle"},null,-1)])]),_:1})]),label:e(()=>[t(V,null,{default:e(()=>[a(s("停用帳戶"),1)]),_:1})]),default:e(()=>[o("div",De,[t(M,{warn:""},{default:e(()=>[a(s("刪除帳戶的處理負荷較大，如果帳戶發佈的內容以及上傳的檔案數量較多，則需要一段時間才能完成。"),1)]),_:1}),t(M,null,{default:e(()=>[a(s("帳戶刪除完成後，將向其電子郵件地址發送通知。"),1)]),_:1}),r(d).isDeleted?(m(),T(f,{key:1,disabled:""},{default:e(()=>[a(s("正在刪除"),1)]),_:1})):(m(),T(f,{key:0,danger:"",onClick:p},{default:e(()=>[t(Z,null,{default:e(()=>[a(s("刪除帳戶請求"),1)]),_:1})]),_:1}))])]),_:1})]),_:1}),t(b,{keywords:["experimental","feature","flags"],markerId:"DGDkl71xx","data-in-app-search-marker-id":"DGDkl71xx"},{default:e(()=>[t(k,null,{icon:e(()=>[t(D,null,{default:e(()=>[...l[13]||(l[13]=[o("i",{class:"ti ti-flask"},null,-1)])]),_:1})]),label:e(()=>[t(V,null,{default:e(()=>[a(s("實驗中的功能"),1)]),_:1})]),default:e(()=>[o("div",Fe,[t(A,{modelValue:r(_),"onUpdate:modelValue":l[0]||(l[0]=u=>C(_)?_.value=u:null)},{label:e(()=>[...l[14]||(l[14]=[a("Enable condensed line",-1)])]),_:1},8,["modelValue"]),t(A,{modelValue:r(g),"onUpdate:modelValue":l[1]||(l[1]=u=>C(g)?g.value=u:null)},{label:e(()=>[...l[15]||(l[15]=[a("Enable note render skipping",-1)])]),_:1},8,["modelValue"]),t(A,{modelValue:r(x),"onUpdate:modelValue":l[2]||(l[2]=u=>C(x)?x.value=u:null)},{label:e(()=>[...l[16]||(l[16]=[a("Enable stacking router view",-1)])]),_:1},8,["modelValue"]),t(A,{modelValue:r(I),"onUpdate:modelValue":l[3]||(l[3]=u=>C(I)?I.value=u:null)},{label:e(()=>[...l[17]||(l[17]=[a("Enable folder page view",-1)])]),_:1},8,["modelValue"]),t(A,{modelValue:r(P),"onUpdate:modelValue":l[4]||(l[4]=u=>C(P)?P.value=u:null)},{label:e(()=>[...l[18]||(l[18]=[a("Enable haptic feedback",-1)])]),_:1},8,["modelValue"]),t(A,{modelValue:r(E),"onUpdate:modelValue":l[5]||(l[5]=u=>C(E)?E.value=u:null)},{label:e(()=>[...l[19]||(l[19]=[a("Enable in-browser translator API",-1)])]),_:1},8,["modelValue"])])]),_:1})]),_:1}),t(b,{keywords:["developer","mode","debug"],markerId:"fz6kQPuuP","data-in-app-search-marker-id":"fz6kQPuuP"},{default:e(()=>[t(k,null,{icon:e(()=>[t(D,null,{default:e(()=>[...l[20]||(l[20]=[o("i",{class:"ti ti-code"},null,-1)])]),_:1})]),label:e(()=>[t(V,null,{default:e(()=>[a(s("開發者"),1)]),_:1})]),default:e(()=>[o("div",Ie,[t(A,{modelValue:r(c),"onUpdate:modelValue":l[6]||(l[6]=u=>C(c)?c.value=u:null)},{label:e(()=>[a(s("開發者模式"),1)]),_:1},8,["modelValue"])])]),_:1})]),_:1})]),l[26]||(l[26]=o("hr",null,null,-1)),t(me,{to:"/registry"},{icon:e(()=>[...l[21]||(l[21]=[o("i",{class:"ti ti-adjustments"},null,-1)])]),default:e(()=>[a(s("登錄表"),1)]),_:1}),l[27]||(l[27]=o("hr",null,null,-1)),t(f,{onClick:v},{default:e(()=>[l[22]||(l[22]=o("i",{class:"ti ti-bulb"},null,-1)),a(" "+s("重新顯示所有「提示與技巧」"),1)]),_:1}),t(f,{onClick:B},{default:e(()=>[l[23]||(l[23]=o("i",{class:"ti ti-bulb-off"},null,-1)),a(" "+s("隱藏所有「提示與技巧」"),1)]),_:1}),l[28]||(l[28]=o("hr",null,null,-1)),r(d).policies.chatAvailability!=="unavailable"?(m(),y(F,{key:0},[t(f,{onClick:O},{default:e(()=>[a(s("將所有訊息標記為已讀"),1)]),_:1}),l[24]||(l[24]=o("hr",null,null,-1))],64)):K("",!0),r(pe)?K("",!0):(m(),T(f,{key:1,onClick:r(fe)},{default:e(()=>[a(s("設定の永続化"),1)]),_:1},8,["onClick"])),t(f,{onClick:J},{default:e(()=>[a(s("強制備份設定"),1)]),_:1}),t(ce,null,{caption:e(()=>[a(s("通常情況下，這會自動進行，但若因某些原因未能順利遷移，您可以手動觸發遷移處理。請注意，當前的設定資訊將會被覆寫。"),1)]),default:e(()=>[t(f,{danger:"",onClick:i},{default:e(()=>[l[25]||(l[25]=o("i",{class:"ti ti-refresh"},null,-1)),a(" "+s("遷移舊設定資訊"),1)]),_:1})]),_:1})])]),_:1},8,["label"])}}});export{He as default};

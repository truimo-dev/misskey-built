import{c as m}from"./3iSoGi4ic-DUrJvqB4.js";import{M as N}from"./3iSoGi4ic-BDwuR9EO.js";import{M as p}from"./3iSoGi4ic-mUIS9yQt.js";import{P as d,L as P,az as T,h as C}from"./3iSoGi4ic-DV-GuiCp.js";import{b as M,a as f,c,m as v,z as w,f as B,i as n,h as A,p as I,l as r,C as z,B as u,t as _}from"./3iSoGi4ic-D0mTJ0Mu.js";import"./3iSoGi4ic-CdSqfJMx.js";import"./3iSoGi4ic-Dv7rS4og.js";import"./3iSoGi4ic-B1GPmOGN.js";import"./3iSoGi4ic-D98_HDRS.js";const R={class:"_spacer",style:{"--MI_SPACER-w":"800px"}},V={key:0},W={key:1},E={key:2},Q=M({__name:"notifications",setup(H){const i=f("all"),t=f(null),g=c(()=>t.value?m.filter(a=>!t.value.includes(a)):null),h=v(new d("notes/mentions",{limit:10})),y=v(new d("notes/mentions",{limit:10,params:{visibility:"specified"}}));function k(a){const o=m.map(s=>({text:{"all":"全部 ","note":"使用者的最新貼文","follow":"追隨中","mention":"提及","reply":"回覆","renote":"轉發","quote":"引用","reaction":"反應","pollEnded":"問卷調查結束","scheduledNotePosted":"預約發佈成功","scheduledNotePostFailed":"預約發佈失敗","receiveFollowRequest":"已收到追隨請求","followRequestAccepted":"追隨請求已接受","roleAssigned":"已授予角色","chatRoomInvitationReceived":"已被邀請加入聊天室","achievementEarned":"獲得成就","exportCompleted":"已完成匯出。","login":"登入","createToken":"建立存取權杖","test":"通知測試","app":"應用程式通知"}[s],active:(t.value&&t.value.includes(s))??!1,action:()=>{t.value=[s]}})),l=t.value!=null?[{icon:"ti ti-x",text:"清除",action:()=>{t.value=null}},{type:"divider"},...o]:o;C(l,a.currentTarget??a.target)}const x=c(()=>[i.value==="all"?{text:"篩選",icon:"ti ti-filter",highlighted:t.value!=null,handler:k}:void 0,i.value==="all"?{text:"全部標示為已讀",icon:"ti ti-check",handler:()=>{P("notifications/mark-all-as-read",{})}}:void 0].filter(a=>a!==void 0)),b=c(()=>[{key:"all",title:"全部",icon:"ti ti-point"},{key:"mentions",title:"提及",icon:"ti ti-at"},{key:"directNotes",title:"指定使用者",icon:"ti ti-mail"}]);return T(()=>({title:"通知",icon:"ti ti-bell"})),(a,o)=>{const l=w("PageWithHeader");return n(),B(l,{tab:i.value,"onUpdate:tab":o[0]||(o[0]=s=>i.value=s),actions:x.value,tabs:b.value,swipable:!0},{default:A(()=>[I("div",R,[i.value==="all"?(n(),r("div",V,[u(N,{class:"xtfIf",excludeTypes:g.value},null,8,["class","excludeTypes"])])):i.value==="mentions"?(n(),r("div",W,[u(p,{paginator:_(h)},null,8,["paginator"])])):i.value==="directNotes"?(n(),r("div",E,[u(p,{paginator:_(y)},null,8,["paginator"])])):z("",!0)])]),_:1},8,["tab","actions","tabs"])}}});export{Q as default};

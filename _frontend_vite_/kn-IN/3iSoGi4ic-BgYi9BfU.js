import{aS as H,M as _,ab as J,a7 as P,ag as q,bb as K,c as Q,l as Z}from"./3iSoGi4ic-DV-GuiCp.js";import{M as ee}from"./3iSoGi4ic-BDF7xMl0.js";import{M as te}from"./3iSoGi4ic-Fx-BY70c.js";import{b as ne,c as D,a as Y,z as $,l as k,i as p,f as h,C as T,t as o,g as N,F as O,A as j,s as A,E as y,h as b,D as x,a2 as B,B as oe}from"./3iSoGi4ic-D0mTJ0Mu.js";import{j as w,F as f,s as F,l as v,f as c,h as le,O as ae,t as C,w as I,x as M,S as X}from"./3iSoGi4ic-nJzNoieu.js";import{l as ie}from"./3iSoGi4ic-DUrJvqB4.js";import{b as E}from"./3iSoGi4ic-CCt4ZT5M.js";const Me=ne({__name:"MkAsUi",props:{component:{},components:{},size:{default:"medium"},align:{default:"left"}},setup(t){const r=t,e=r.component;function n(d){const U=r.components.find(S=>S.value.id===d)?.value;return U||{id:"dummy",type:"root",children:[]}}const a=D(()=>{if(e.type!=="container")return;const U=e.borderWidth??e.borderColor??e.borderStyle?{borderWidth:e.borderWidth??"1px",borderColor:e.borderColor??"var(--MI_THEME-divider)",borderStyle:e.borderStyle??"solid"}:void 0;return{textAlign:e.align,backgroundColor:e.bgColor,color:e.fgColor,padding:e.padding?`${e.padding}px`:0,borderRadius:(e.borderRadius??(e.rounded?8:0))+"px",...U}}),u=Y("default"in e&&typeof e.default=="boolean"?e.default:!1);function l(d){u.value=d,"onChange"in e&&e.onChange&&e.onChange(d)}const{model:i,def:s}=H({items:D(()=>e.type!=="select"?[]:(e.items??[]).map(d=>({value:d.value,label:d.text}))),initialValue:e.type==="select"&&"default"in e&&typeof e.default!="boolean"?e.default??null:null});function g(d){i.value=d,"onChange"in e&&e.onChange&&e.onChange(d)}function V(){const d=e.form;d&&Q({initialText:d.text,initialCw:d.cw,initialVisibility:d.visibility,initialLocalOnly:d.localOnly,instant:!0})}return(d,U)=>{const S=$("MkAsUi",!0),z=$("Mfm");return p(),k("div",null,[o(e).type==="root"?(p(),k("div",{key:0,class:"xgeRX"},[(p(!0),k(O,null,j(o(e).children,m=>(p(),k(O,{key:m},[n(m).hidden?T("",!0):(p(),h(S,{key:0,component:n(m),components:r.components,size:t.size},null,8,["component","components","size"]))],64))),128))],2)):o(e).type==="text"?(p(),k("span",{key:1,class:N({xlF22:o(e).font==="serif",xjk7v:o(e).font==="monospace"}),style:A({fontSize:o(e).size?`${o(e).size*100}%`:void 0,fontWeight:o(e).bold?"bold":void 0,color:o(e).color})},y(o(e).text),7)):o(e).type==="mfm"?(p(),h(z,{key:2,class:N({xlF22:o(e).font==="serif",xjk7v:o(e).font==="monospace"}),style:A({fontSize:o(e).size?`${o(e).size*100}%`:null,fontWeight:o(e).bold?"bold":null,color:o(e).color??null}),text:o(e).text??"",onClickEv:o(e).onClickEv},null,8,["class","style","text","onClickEv"])):o(e).type==="button"?(p(),h(_,{key:3,primary:o(e).primary,rounded:o(e).rounded,disabled:o(e).disabled,small:t.size==="small",inline:"",onClick:o(e).onClick},{default:b(()=>[x(y(o(e).text),1)]),_:1},8,["primary","rounded","disabled","small","onClick"])):o(e).type==="buttons"?(p(),k("div",{key:4,class:"_buttons",style:A({justifyContent:t.align})},[(p(!0),k(O,null,j(o(e).buttons,m=>(p(),h(_,{primary:m.primary,rounded:m.rounded,disabled:m.disabled,inline:"",small:t.size==="small",onClick:m.onClick},{default:b(()=>[x(y(m.text),1)]),_:2},1032,["primary","rounded","disabled","small","onClick"]))),256))],4)):o(e).type==="switch"?(p(),h(J,{key:5,modelValue:u.value,"onUpdate:modelValue":l},B({_:2},[o(e).label?{name:"label",fn:b(()=>[x(y(o(e).label),1)]),key:"0"}:void 0,o(e).caption?{name:"caption",fn:b(()=>[x(y(o(e).caption),1)]),key:"1"}:void 0]),1032,["modelValue"])):o(e).type==="textarea"?(p(),h(ee,{key:6,modelValue:o(e).default??null,"onUpdate:modelValue":o(e).onInput},B({_:2},[o(e).label?{name:"label",fn:b(()=>[x(y(o(e).label),1)]),key:"0"}:void 0,o(e).caption?{name:"caption",fn:b(()=>[x(y(o(e).caption),1)]),key:"1"}:void 0]),1032,["modelValue","onUpdate:modelValue"])):o(e).type==="textInput"?(p(),h(P,{key:7,small:t.size==="small",modelValue:o(e).default??null,"onUpdate:modelValue":o(e).onInput},B({_:2},[o(e).label?{name:"label",fn:b(()=>[x(y(o(e).label),1)]),key:"0"}:void 0,o(e).caption?{name:"caption",fn:b(()=>[x(y(o(e).caption),1)]),key:"1"}:void 0]),1032,["small","modelValue","onUpdate:modelValue"])):o(e).type==="numberInput"?(p(),h(P,{key:8,small:t.size==="small",modelValue:o(e).default??null,type:"number","onUpdate:modelValue":o(e).onInput},B({_:2},[o(e).label?{name:"label",fn:b(()=>[x(y(o(e).label),1)]),key:"0"}:void 0,o(e).caption?{name:"caption",fn:b(()=>[x(y(o(e).caption),1)]),key:"1"}:void 0]),1032,["small","modelValue","onUpdate:modelValue"])):o(e).type==="select"?(p(),h(q,{key:9,small:t.size==="small",modelValue:o(i),items:o(s),"onUpdate:modelValue":g},B({_:2},[o(e).label?{name:"label",fn:b(()=>[x(y(o(e).label),1)]),key:"0"}:void 0,o(e).caption?{name:"caption",fn:b(()=>[x(y(o(e).caption),1)]),key:"1"}:void 0]),1032,["small","modelValue","items"])):o(e).type==="postFormButton"?(p(),h(_,{key:10,primary:o(e).primary,rounded:o(e).rounded,small:t.size==="small",inline:"",onClick:V},{default:b(()=>[x(y(o(e).text),1)]),_:1},8,["primary","rounded","small"])):o(e).type==="postForm"?(p(),k("div",{key:11,class:"xjImb"},[oe(K,{fixed:"",instant:!0,initialText:o(e).form?.text,initialCw:o(e).form?.cw,initialVisibility:o(e).form?.visibility,initialLocalOnly:o(e).form?.localOnly},null,8,["initialText","initialCw","initialVisibility","initialLocalOnly"])],2)):o(e).type==="folder"?(p(),h(te,{key:12,defaultOpen:o(e).opened},{label:b(()=>[x(y(o(e).title),1)]),default:b(()=>[(p(!0),k(O,null,j(o(e).children,m=>(p(),k(O,{key:m},[n(m).hidden?T("",!0):(p(),h(S,{key:0,component:n(m),components:r.components,size:t.size},null,8,["component","components","size"]))],64))),128))]),_:1},8,["defaultOpen"])):o(e).type==="container"?(p(),k("div",{key:13,class:N(["xsYEp",{xlF22:o(e).font==="serif",xjk7v:o(e).font==="monospace"}]),style:A(a.value)},[(p(!0),k(O,null,j(o(e).children,m=>(p(),k(O,{key:m},[n(m).hidden?T("",!0):(p(),h(S,{key:0,component:n(m),components:r.components,size:t.size,align:o(e).align},null,8,["component","components","size","align"]))],64))),128))],6)):T("",!0)])}}});const ue=["left","center","right"],L=["serif","sans-serif","monospace"],se=["hidden","dotted","dashed","solid","double","groove","ridge","inset","outset"];function re(t){v(t);const r=t.value.get("children");return F(r),{children:r.value.map(e=>{v(e);const n=e.value.get("id");return c(n),n.value})}}function ce(t){v(t);const r=t.value.get("children");r&&F(r);const e=t.value.get("align");e&&E(e,ue);const n=t.value.get("bgColor");n&&c(n);const a=t.value.get("fgColor");a&&c(a);const u=t.value.get("font");u&&E(u,L);const l=t.value.get("borderWidth");l&&M(l);const i=t.value.get("borderColor");i&&c(i);const s=t.value.get("borderStyle");s&&E(s,se);const g=t.value.get("borderRadius");g&&M(g);const V=t.value.get("padding");V&&M(V);const d=t.value.get("rounded");d&&C(d);const U=t.value.get("hidden");return U&&C(U),{children:r?r.value.map(S=>{v(S);const z=S.value.get("id");return c(z),z.value}):[],align:e?.value,fgColor:a?.value,bgColor:n?.value,font:u?.value,borderWidth:l?.value,borderColor:i?.value,borderStyle:s?.value,borderRadius:g?.value,padding:V?.value,rounded:d?.value,hidden:U?.value}}function de(t){v(t);const r=t.value.get("text");r&&c(r);const e=t.value.get("size");e&&M(e);const n=t.value.get("bold");n&&C(n);const a=t.value.get("color");a&&c(a);const u=t.value.get("font");return u&&E(u,L),{text:r?.value,size:e?.value,bold:n?.value,color:a?.value,font:u?.value}}function pe(t,r){v(t);const e=t.value.get("text");e&&c(e);const n=t.value.get("size");n&&M(n);const a=t.value.get("bold");a&&C(a);const u=t.value.get("color");u&&c(u);const l=t.value.get("font");l&&E(l,L);const i=t.value.get("onClickEv");return i&&I(i),{text:e?.value,size:n?.value,bold:a?.value,color:u?.value,font:l?.value,onClickEv:async s=>{i&&await r(i,[X(s)])}}}function ve(t,r){v(t);const e=t.value.get("onInput");e&&I(e);const n=t.value.get("default");n&&c(n);const a=t.value.get("label");a&&c(a);const u=t.value.get("caption");return u&&c(u),{onInput:async l=>{e&&await r(e,[w(l)])},default:n?.value,label:a?.value,caption:u?.value}}function me(t,r){v(t);const e=t.value.get("onInput");e&&I(e);const n=t.value.get("default");n&&c(n);const a=t.value.get("label");a&&c(a);const u=t.value.get("caption");return u&&c(u),{onInput:async l=>{e&&await r(e,[w(l)])},default:n?.value,label:a?.value,caption:u?.value}}function fe(t,r){v(t);const e=t.value.get("onInput");e&&I(e);const n=t.value.get("default");n&&M(n);const a=t.value.get("label");a&&c(a);const u=t.value.get("caption");return u&&c(u),{onInput:async l=>{e&&await r(e,[w(l)])},default:n?.value,label:a?.value,caption:u?.value}}function ge(t,r){v(t);const e=t.value.get("text");e&&c(e);const n=t.value.get("onClick");n&&I(n);const a=t.value.get("primary");a&&C(a);const u=t.value.get("rounded");u&&C(u);const l=t.value.get("disabled");return l&&C(l),{text:e?.value,onClick:async()=>{n&&await r(n,[])},primary:a?.value,rounded:u?.value,disabled:l?.value}}function ye(t,r){v(t);const e=t.value.get("buttons");return e&&F(e),{buttons:e?e.value.map(n=>{v(n);const a=n.value.get("text");c(a);const u=n.value.get("onClick");I(u);const l=n.value.get("primary");l&&C(l);const i=n.value.get("rounded");i&&C(i);const s=n.value.get("disabled");return s&&C(s),{text:a.value,onClick:async()=>{await r(u,[])},primary:l?.value,rounded:i?.value,disabled:s?.value}}):[]}}function be(t,r){v(t);const e=t.value.get("onChange");e&&I(e);const n=t.value.get("default");n&&C(n);const a=t.value.get("label");a&&c(a);const u=t.value.get("caption");return u&&c(u),{onChange:async l=>{e&&await r(e,[w(l)])},default:n?.value,label:a?.value,caption:u?.value}}function Ce(t,r){v(t);const e=t.value.get("items");e&&F(e);const n=t.value.get("onChange");n&&I(n);const a=t.value.get("default");a&&c(a);const u=t.value.get("label");u&&c(u);const l=t.value.get("caption");return l&&c(l),{items:e?e.value.map(i=>{v(i);const s=i.value.get("text");c(s);const g=i.value.get("value");return g&&c(g),{text:s.value,value:g?g.value:s.value}}):[],onChange:async i=>{n&&await r(n,[w(i)])},default:a?.value,label:u?.value,caption:l?.value}}function xe(t){v(t);const r=t.value.get("children");r&&F(r);const e=t.value.get("title");e&&c(e);const n=t.value.get("opened");return n&&C(n),{children:r?r.value.map(a=>{v(a);const u=a.value.get("id");return c(u),u.value}):[],title:e?.value??"",opened:n?.value??!0}}function G(t){const r=t.value.get("text");c(r);const e=t.value.get("cw");e&&c(e);const n=t.value.get("visibility");n&&c(n);const a=t.value.get("localOnly");return a&&C(a),{text:r.value,cw:e?.value,visibility:n?.value&&ie.includes(n.value)?n.value:void 0,localOnly:a?.value}}function ke(t,r){v(t);const e=t.value.get("text");e&&c(e);const n=t.value.get("primary");n&&C(n);const a=t.value.get("rounded");a&&C(a);const u=t.value.get("form");return u&&v(u),{text:e?.value,primary:n?.value,rounded:a?.value,form:u?G(u):{text:""}}}function he(t,r){v(t);const e=t.value.get("form");return e&&v(e),{form:e?G(e):{text:""}}}function Be(t,r){const e={};function n(l,i,s,g,V){s&&c(s);const d=s?.value??Z(),U=Y({...g(i,V),type:l,id:d});t.push(U);const S=ae(new Map([["id",X(d)],["update",f(([z],m)=>{v(z);const W=g(z,V);for(const R of z.value.keys())Object.hasOwn(W,R)&&(U.value[R]=W[R])})]]));return e[d]=S,S}const a=n("root",w({children:[]}),w("___root___"),re,()=>{}),u=t[0];return r(u),{"Ui:root":a,"Ui:patch":f(([l,i],s)=>{c(l),F(i)}),"Ui:get":f(([l],i)=>{c(l);const s=e[l.value];return s||le}),"Ui:render":f(([l],i)=>{F(l),u.value.children=l.value.map(s=>{v(s);const g=s.value.get("id");return c(g),g.value})}),"Ui:C:container":f(([l,i],s)=>n("container",l,i,ce,s.topCall)),"Ui:C:text":f(([l,i],s)=>n("text",l,i,de,s.topCall)),"Ui:C:mfm":f(([l,i],s)=>n("mfm",l,i,pe,s.topCall)),"Ui:C:textarea":f(([l,i],s)=>n("textarea",l,i,me,s.topCall)),"Ui:C:textInput":f(([l,i],s)=>n("textInput",l,i,ve,s.topCall)),"Ui:C:numberInput":f(([l,i],s)=>n("numberInput",l,i,fe,s.topCall)),"Ui:C:button":f(([l,i],s)=>n("button",l,i,ge,s.topCall)),"Ui:C:buttons":f(([l,i],s)=>n("buttons",l,i,ye,s.topCall)),"Ui:C:switch":f(([l,i],s)=>n("switch",l,i,be,s.topCall)),"Ui:C:select":f(([l,i],s)=>n("select",l,i,Ce,s.topCall)),"Ui:C:folder":f(([l,i],s)=>n("folder",l,i,xe,s.topCall)),"Ui:C:postFormButton":f(([l,i],s)=>n("postFormButton",l,i,ke,s.topCall)),"Ui:C:postForm":f(([l,i],s)=>n("postForm",l,i,he,s.topCall))}}export{Me as M,Be as r};

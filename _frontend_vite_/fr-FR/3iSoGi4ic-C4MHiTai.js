const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["https://fastly.jsdelivr.net/gh/truimo-dev/misskey-built@latest/_frontend_vite_/scripts/3iSoGi4ic-5XoKMNHt.js","https://fastly.jsdelivr.net/gh/truimo-dev/misskey-built@latest/_frontend_vite_/scripts/3iSoGi4ic-DV-GuiCp.js","https://fastly.jsdelivr.net/gh/truimo-dev/misskey-built@latest/_frontend_vite_/scripts/3iSoGi4ic-D0mTJ0Mu.js","https://fastly.jsdelivr.net/gh/truimo-dev/misskey-built@latest/_frontend_vite_/scripts/3iSoGi4ic-B1GPmOGN.js","https://fastly.jsdelivr.net/gh/truimo-dev/misskey-built@latest/_frontend_vite_/scripts/3iSoGi4ic-Dty8GuTz.js","https://fastly.jsdelivr.net/gh/truimo-dev/misskey-built@latest/_frontend_vite_/scripts/3iSoGi4ic-D98_HDRS.js","https://fastly.jsdelivr.net/gh/truimo-dev/misskey-built@latest/_frontend_vite_/assets/3iSoGi4ic-DZU1WGtr.css","https://fastly.jsdelivr.net/gh/truimo-dev/misskey-built@latest/_frontend_vite_/assets/3iSoGi4ic-9GwroBN9.css"])))=>i.map(i=>d[i]);
import{U as b,e as G}from"./3iSoGi4ic-DV-GuiCp.js";import{b as H,a as m,u as I,c as A,w as g,e as K,o as W,H as N,z as j,l as n,i,C as B,D as S,B as T,p as s,j as Y,S as J}from"./3iSoGi4ic-D0mTJ0Mu.js";const R="data:image/png;base64,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",z={key:0},F={key:1},Z={key:2,style:{background:"#eee",border:"solid 1px #888",padding:"8px",color:"#000","max-width":"320px",display:"flex",gap:"10px","align-items":"center","box-shadow":"2px 2px 6px #0004","border-radius":"4px"}},X={key:0},P={key:1},$=H({__name:"MkCaptcha",props:{provider:{},sitekey:{},secretKey:{},instanceUrl:{},modelValue:{}},emits:["update:modelValue"],setup(U,{expose:x,emit:D}){const e=U,E=D,c=m(!1),r=I("captchaEl"),d=m(void 0),p=m(""),u=m(!1),w=A(()=>{switch(e.provider){case"hcaptcha":return"hcaptcha";case"recaptcha":return"grecaptcha";case"turnstile":return"turnstile";case"mcaptcha":return"mcaptcha";case"testcaptcha":return"testcaptcha"}}),L=!!window[w.value],f=A(()=>{switch(e.provider){case"hcaptcha":return"https://js.hcaptcha.com/1/api.js?render=explicit&recaptchacompat=off";case"recaptcha":return"https://www.recaptcha.net/recaptcha/api.js?render=explicit";case"turnstile":return"https://challenges.cloudflare.com/turnstile/v0/api.js?render=explicit";case"mcaptcha":return null;case"testcaptcha":return null}}),y=A(()=>`script-${e.provider}`),l=A(()=>window[w.value]||{});g(()=>[e.instanceUrl,e.sitekey,e.secretKey],async()=>{c.value&&(o(void 0),C(),await v())}),L||e.provider==="mcaptcha"||e.provider==="testcaptcha"?c.value=!0:f.value!==null&&(window.document.getElementById(y.value)??window.document.head.appendChild(Object.assign(window.document.createElement("script"),{async:!0,id:y.value,src:f.value}))).addEventListener("load",()=>c.value=!0);function k(){if(l.value.reset&&d.value!==void 0)try{l.value.reset(d.value)}catch{}u.value=!1,p.value=""}function M(){if(l.value.remove&&d.value)try{l.value.remove(d.value)}catch{}}async function v(){if(l.value.render&&r.value instanceof Element&&e.sitekey){const t=window.document.createElement("div");r.value.appendChild(t),d.value=l.value.render(t,{sitekey:e.sitekey,theme:b.s.darkMode?"dark":"light",callback:o,"expired-callback":()=>o(void 0),"error-callback":()=>o(void 0)})}else if(e.provider==="mcaptcha"&&e.instanceUrl&&e.sitekey){const{default:t}=await G(async()=>{const{default:a}=await import("./3iSoGi4ic-5XoKMNHt.js").then(h=>h.i);return{default:a}},__vite__mapDeps([0,1,2,3,4,5,6,7]),import.meta.url);new t({siteKey:{instanceUrl:new URL(e.instanceUrl),key:e.sitekey}})}else window.setTimeout(v,1)}function C(){if(e.provider==="mcaptcha"){const t=window.document.getElementById("mcaptcha__widget-container");t&&(t.innerHTML="")}else k(),M(),r.value&&(r.value.innerHTML="")}function o(t){E("update:modelValue",typeof t=="string"?t:null)}function Q(t){t.data.token&&e.instanceUrl&&new URL(t.origin).host===new URL(e.instanceUrl).host&&o(t.data.token)}function q(){u.value=p.value==="ai-chan-kawaii",o(u.value?"testcaptcha-passed":void 0),u.value||(p.value="")}return K(()=>{c.value?(window.addEventListener("message",Q),v()):g(c,v)}),W(()=>{window.removeEventListener("message",Q)}),N(()=>{C()}),x({reset:k}),(t,a)=>{const h=j("MkEllipsis");return i(),n("div",null,[c.value?B("",!0):(i(),n("span",z,[a[1]||(a[1]=S("Loading",-1)),T(h)])),e.provider=="mcaptcha"?(i(),n("div",F,[a[2]||(a[2]=s("div",{id:"mcaptcha__widget-container",class:"m-captcha-style"},null,-1)),s("div",{ref_key:"captchaEl",ref:r},null,512)])):B("",!0),e.provider=="testcaptcha"?(i(),n("div",Z,[a[5]||(a[5]=s("img",{src:R,style:{width:"60px",height:"60px"}},null,-1)),u.value?(i(),n("div",X,[...a[3]||(a[3]=[s("div",{style:{color:"green"}},"Test captcha passed!",-1)])])):(i(),n("div",P,[a[4]||(a[4]=s("div",{style:{"font-size":"13px","margin-bottom":"4px"}},'Type "ai-chan-kawaii" to pass captcha',-1)),Y(s("input",{"onUpdate:modelValue":a[0]||(a[0]=V=>p.value=V),"data-cy-testcaptcha-input":""},null,512),[[J,p.value]]),s("button",{type:"button","data-cy-testcaptcha-submit":"",onClick:q},"Submit")]))])):(i(),n("div",{key:3,ref_key:"captchaEl",ref:r},null,512))])}}});export{$ as _};

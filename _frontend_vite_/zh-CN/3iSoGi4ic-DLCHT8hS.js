const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["https://fastly.jsdelivr.net/gh/truimo-dev/misskey-built@latest/_frontend_vite_/scripts/3iSoGi4ic-BlM04EN-.js","https://fastly.jsdelivr.net/gh/truimo-dev/misskey-built@latest/_frontend_vite_/scripts/3iSoGi4ic-DV-GuiCp.js","https://fastly.jsdelivr.net/gh/truimo-dev/misskey-built@latest/_frontend_vite_/scripts/3iSoGi4ic-D0mTJ0Mu.js","https://fastly.jsdelivr.net/gh/truimo-dev/misskey-built@latest/_frontend_vite_/scripts/3iSoGi4ic-B1GPmOGN.js","https://fastly.jsdelivr.net/gh/truimo-dev/misskey-built@latest/_frontend_vite_/scripts/3iSoGi4ic-Dty8GuTz.js","https://fastly.jsdelivr.net/gh/truimo-dev/misskey-built@latest/_frontend_vite_/scripts/3iSoGi4ic-D98_HDRS.js","https://fastly.jsdelivr.net/gh/truimo-dev/misskey-built@latest/_frontend_vite_/assets/3iSoGi4ic-DZU1WGtr.css","https://fastly.jsdelivr.net/gh/truimo-dev/misskey-built@latest/_frontend_vite_/assets/3iSoGi4ic-9GwroBN9.css","https://fastly.jsdelivr.net/gh/truimo-dev/misskey-built@latest/_frontend_vite_/scripts/3iSoGi4ic-DI0ojuRL.js","https://fastly.jsdelivr.net/gh/truimo-dev/misskey-built@latest/_frontend_vite_/assets/3iSoGi4ic-FwUgc7Nl.css"])))=>i.map(i=>d[i]);
import{_ as W,aS as A,M as D,ag as E,a7 as I,C as O,J as $,ar as P,e as N}from"./3iSoGi4ic-DV-GuiCp.js";import{b as T,N as J,c,l as f,i as m,p as n,D as g,g as z,E as d,t as M,C as L,s as U,a as V,e as X,z as j,f as S,h as _,B as R,R as F,F as H,A as q,d as G}from"./3iSoGi4ic-D0mTJ0Mu.js";const K={key:0},Q={key:1},Y=T({__name:"notification-recipient.item",props:{entity:{}},emits:["edit","delete"],setup(i,{emit:p}){const r=p,k=i,{entity:o}=J(k),v=c(()=>o.value.method),u=c(()=>o.value.user),b=c(()=>o.value.systemWebhook),x=c(()=>{switch(o.value.method){case"email":return"ti-mail";case"webhook":return"ti-webhook";default:return"ti-help"}}),w=c(()=>{switch(o.value.method){case"email":return "邮箱";case"webhook":return "Webhook";default:return"不明"}});function B(){r("edit",o.value.id)}function y(){r("delete",o.value.id)}return(h,e)=>(m(),f("div",{class:"xtIXm _panel _gaps_s"},[n("div",{class:"xA7LO",style:{width:"80px"}},[n("span",{class:z(`ti ${x.value}`)},null,2),g(" "+d(w.value),1)],2),n("div",{class:"xA7LO",style:{flex:"0.5"}},d(M(o).name),3),n("div",{class:"xA7LO",style:{flex:"1"}},[v.value==="email"&&u.value?(m(),f("div",K,d(`${"通知的用户"}: `+(u.value.name?`${u.value.name}(${u.value.username})`:u.value.username)),1)):L("",!0),v.value==="webhook"&&b.value?(m(),f("div",Q,d(`${"使用的 webhook"}: `+b.value.name),1)):L("",!0)],2),n("div",{class:"xd4yB",style:{"margin-left":"auto"}},[n("button",{class:"xBt4f",onClick:e[0]||(e[0]=t=>B())},[...e[2]||(e[2]=[n("span",{class:"ti ti-settings"},null,-1)])],2),n("button",{class:"xBt4f",onClick:e[1]||(e[1]=t=>y())},[...e[3]||(e[3]=[n("span",{class:"ti ti-trash"},null,-1)])],2)],2)],2))}});const Z=T({__name:"MkDivider",props:{marginTopBottom:{},marginLeftRight:{},borderStyle:{},borderWidth:{},borderColor:{}},setup(i){return(p,r)=>(m(),f("div",{class:"default",style:U([i.marginTopBottom?{marginTop:i.marginTopBottom,marginBottom:i.marginTopBottom}:{},i.marginLeftRight?{marginLeft:i.marginLeftRight,marginRight:i.marginLeftRight}:{},i.borderStyle?{borderStyle:i.borderStyle}:{},i.borderWidth?{borderWidth:i.borderWidth}:{},i.borderColor?{borderColor:i.borderColor}:{}])},null,4))}}),ee=W(Z,[["__scopeId","data-v-89967a72"]]),te={class:"_spacer",style:{"--MI_SPACER-w":"900px"}},ie=T({__name:"notification-recipient",setup(i){const p=V([]),{model:r,def:k}=A({items:[{label:"全部",value:null},{label:"邮箱",value:"email"},{label:"Webhook",value:"webhook"}],initialValue:null}),o=V(""),v=c(()=>{const e=r.value,t=o.value.trim().length===0?null:o.value;return p.value.filter(a=>e??t?t&&[a.name,a.systemWebhook?.name,a.user?.name,a.user?.username].filter(C=>C?.includes(t)).length!==0?!0:e?a.method.includes(e):!1:!0)}),u=c(()=>[]),b=c(()=>[]);async function x(){await y("create")}async function w(e){await y("edit",e)}async function B(e){(await O({type:"warning",title:"要删除通知吗？"})).canceled||(await $("admin/abuse-report/notification-recipient/delete",{id:e}),await h())}async function y(e,t){const{needLoad:a}=await new Promise(async l=>{const{dispose:C}=P(G(()=>N(()=>import("./3iSoGi4ic-BlM04EN-.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9]),import.meta.url)),{mode:e,id:t},{submitted:()=>{l({needLoad:!0})},canceled:()=>{l({needLoad:!1})},closed:()=>{C()}})});a&&await h()}async function h(){const e=await $("admin/abuse-report/notification-recipient/list",{method:["email","webhook"]});p.value=e.sort((t,a)=>(t.method+t.id).localeCompare(a.method+a.id))}return X(async()=>{await h()}),(e,t)=>{const a=j("PageWithHeader");return m(),S(a,{actions:u.value,tabs:b.value},{default:_(()=>[n("div",te,[n("div",{class:"xlw8i _gaps_m"},[n("div",{class:"xt2Wo"},[R(D,{primary:"",onClick:x},{default:_(()=>[t[2]||(t[2]=n("span",{class:"ti ti-plus"},null,-1)),g(" "+d("新建举报通知"),1)]),_:1})],2),n("div",{class:"xiJ4J _gaps_s"},[R(E,{modelValue:M(r),"onUpdate:modelValue":t[0]||(t[0]=l=>F(r)?r.value=l:null),items:M(k),style:{flex:"1"}},{label:_(()=>[g(d("通知类型"),1)]),_:1},8,["modelValue","items"]),R(I,{modelValue:o.value,"onUpdate:modelValue":t[1]||(t[1]=l=>o.value=l),type:"search",style:{flex:"1"}},{label:_(()=>[g(d("关键字"),1)]),_:1},8,["modelValue"])],2),R(ee),n("div",{class:"xhIRV _gaps_s"},[(m(!0),f(H,null,q(v.value,l=>(m(),S(Y,{key:l.id,entity:l,onEdit:w,onDelete:B},null,8,["entity"]))),128))],2)],2)])]),_:1},8,["actions","tabs"])}}});const se=Object.freeze(Object.defineProperty({__proto__:null,default:ie},Symbol.toStringTag,{value:"Module"}));export{ee as M,se as n};

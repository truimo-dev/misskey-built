import{az as b,M,k as A,J as c,A as m}from"./3iSoGi4ic-DV-GuiCp.js";import{b as R,a as B,c as y,z as _,f as C,i as n,h as d,p as l,B as h,l as o,F as E,A as w,E as u,D as S}from"./3iSoGi4ic-D0mTJ0Mu.js";import"./3iSoGi4ic-B1GPmOGN.js";import"./3iSoGi4ic-D98_HDRS.js";const T={class:"_spacer",style:{"--MI_SPACER-w":"800px"}},q={class:"_gaps"},H={style:{margin:"8px 0"}},J=R({__name:"relays",setup(I){const p=B([]);async function x(){const{canceled:s,result:e}=await A({title:"添加中继",type:"url",placeholder:"Inbox URL"});s||e==null||c("admin/relays/add",{inbox:e}).then(()=>{i()}).catch(r=>{m({type:"error",text:r.message||r})})}function f(s){c("admin/relays/remove",{inbox:s}).then(()=>{i()}).catch(e=>{m({type:"error",text:e.message||e})})}function i(){c("admin/relays/list").then(s=>{p.value=s})}i();const k=y(()=>[{asFullButton:!0,icon:"ti ti-plus",text:"添加中继",handler:x}]),v=y(()=>[]);return b(()=>({title:"中继",icon:"ti ti-planet"})),(s,e)=>{const r=_("SearchMarker"),g=_("PageWithHeader");return n(),C(g,{actions:k.value,tabs:v.value},{default:d(()=>[l("div",T,[h(r,{path:"/admin/relays",label:"中继",keywords:["relays"],icon:"ti ti-planet",markerId:"AwgsiAv0f","data-in-app-search-marker-id":"AwgsiAv0f"},{default:d(()=>[l("div",q,[(n(!0),o(E,null,w(p.value,a=>(n(),o("div",{key:a.inbox,class:"relaycxt _panel",style:{padding:"16px"}},[l("div",null,u(a.inbox),1),l("div",H,[a.status==="accepted"?(n(),o("i",{key:0,class:"ti ti-check xoRlq",style:{color:"var(--MI_THEME-success)"}},null,2)):a.status==="rejected"?(n(),o("i",{key:1,class:"ti ti-ban xoRlq",style:{color:"var(--MI_THEME-error)"}},null,2)):(n(),o("i",{key:2,class:"ti ti-clock xoRlq"},null,2)),l("span",null,u({"requesting":"待批准","accepted":"已批准","rejected":"已拒绝"}[a.status]),1)]),h(M,{class:"button",inline:"",danger:"",onClick:P=>f(a.inbox)},{default:d(()=>[e[0]||(e[0]=l("i",{class:"ti ti-trash"},null,-1)),S(" "+u("删除"),1)]),_:1},8,["onClick"])]))),128))])]),_:1},8,["label"])])]),_:1},8,["actions","tabs"])}}});export{J as default};

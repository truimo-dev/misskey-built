const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["https://fastly.jsdelivr.net/gh/truimo-dev/misskey-built@latest/_frontend_vite_/scripts/3iSoGi4ic-D6lvPj3q.js","https://fastly.jsdelivr.net/gh/truimo-dev/misskey-built@latest/_frontend_vite_/scripts/3iSoGi4ic-DV-GuiCp.js","https://fastly.jsdelivr.net/gh/truimo-dev/misskey-built@latest/_frontend_vite_/scripts/3iSoGi4ic-D0mTJ0Mu.js","https://fastly.jsdelivr.net/gh/truimo-dev/misskey-built@latest/_frontend_vite_/scripts/3iSoGi4ic-B1GPmOGN.js","https://fastly.jsdelivr.net/gh/truimo-dev/misskey-built@latest/_frontend_vite_/scripts/3iSoGi4ic-Dty8GuTz.js","https://fastly.jsdelivr.net/gh/truimo-dev/misskey-built@latest/_frontend_vite_/scripts/3iSoGi4ic-D98_HDRS.js","https://fastly.jsdelivr.net/gh/truimo-dev/misskey-built@latest/_frontend_vite_/assets/3iSoGi4ic-DZU1WGtr.css","https://fastly.jsdelivr.net/gh/truimo-dev/misskey-built@latest/_frontend_vite_/assets/3iSoGi4ic-9GwroBN9.css"])))=>i.map(i=>d[i]);
import{i as ee,a7 as te,M as V,e as se,L as p,br as c,aS as le,az as ae,ab as P,ag as ie,C as ne,J as oe}from"./3iSoGi4ic-DV-GuiCp.js";import{M as g}from"./3iSoGi4ic-Fx-BY70c.js";import{b as E,a as _,z as y,f as N,i as O,h as e,B as t,p as n,D as a,E as i,t as D,d as re,ab as de,c as ue,R as me}from"./3iSoGi4ic-D0mTJ0Mu.js";import{M as x}from"./3iSoGi4ic-BDF7xMl0.js";import"./3iSoGi4ic-B1GPmOGN.js";import"./3iSoGi4ic-D98_HDRS.js";const pe={class:"_gaps_m"},ce=["textContent"],ve=["onClick"],_e=E({__name:"server-rules",setup(z){const C=re(()=>se(()=>import("./3iSoGi4ic-D6lvPj3q.js").then(k=>k.v),__vite__mapDeps([0,1,2,3,4,5,6,7]),import.meta.url).then(k=>k.default)),f=_(ee.serverRules),d=async()=>{await p("admin/update-meta",{serverRules:f.value}),c(!0)},H=k=>{f.value.splice(k,1)};return(k,o)=>{const U=y("SearchIcon"),I=y("SearchLabel"),w=y("SearchText"),W=y("SearchMarker");return O(),N(W,{markerId:"serverRules",keywords:["rules"]},{default:e(()=>[t(g,null,{icon:e(()=>[t(U,null,{default:e(()=>[...o[4]||(o[4]=[n("i",{class:"ti ti-checkbox"},null,-1)])]),_:1})]),label:e(()=>[t(I,null,{default:e(()=>[a(i("服务器规则"),1)]),_:1})]),default:e(()=>[n("div",pe,[n("div",null,[t(w,null,{default:e(()=>[a(i("在新用户注册前显示服务器的简单规则。推荐显示服务条款的主要内容。"),1)]),_:1})]),t(D(C),{modelValue:f.value,"onUpdate:modelValue":o[0]||(o[0]=u=>f.value=u),class:"_gaps_m",itemKey:(u,b)=>b,animation:150,handle:".x1QGu",onStart:o[1]||(o[1]=u=>u.item.classList.add("active")),onEnd:o[2]||(o[2]=u=>u.item.classList.remove("active"))},{item:e(({element:u,index:b})=>[n("div",{class:"x33gF"},[n("div",{class:"xfnVt"},[n("div",{class:"xF3wW",textContent:i(String(b+1))},null,10,ce),n("span",{class:"x1QGu"},[...o[5]||(o[5]=[n("i",{class:"ti ti-menu"},null,-1)])],2),n("button",{class:"_button x9Bp2",onClick:F=>H(b)},[...o[6]||(o[6]=[n("i",{class:"ti ti-x"},null,-1)])],10,ve)],2),t(te,{modelValue:f.value[b],"onUpdate:modelValue":F=>f.value[b]=F},null,8,["modelValue","onUpdate:modelValue"])],2)]),_:1},8,["modelValue","itemKey","handle"]),n("div",{class:"xk5SH"},[t(V,{rounded:"",onClick:o[3]||(o[3]=u=>f.value.push(""))},{default:e(()=>[o[7]||(o[7]=n("i",{class:"ti ti-plus"},null,-1)),a(" "+i("添加"),1)]),_:1}),t(V,{primary:"",rounded:"",onClick:d},{default:e(()=>[o[8]||(o[8]=n("i",{class:"ti ti-check"},null,-1)),a(" "+i("保存"),1)]),_:1})],2)])]),_:1})]),_:1})}}});const fe={class:"_spacer",style:{"--MI_SPACER-w":"700px","--MI_SPACER-min":"16px","--MI_SPACER-max":"32px"}},be={class:"_gaps_m"},Ve={class:"_gaps"},ke={class:"_gaps"},ge={class:"_gaps"},ye={class:"_gaps"},Se={class:"_gaps"},he={class:"_gaps"},xe={class:"_gaps"},Ce={class:"_gaps"},De=E({__name:"moderation",async setup(z){let C,f;const d=([C,f]=de(()=>oe("admin/meta")),C=await C,f(),C),H=_(!d.disableRegistration),k=_(d.emailRequiredForSignup),{model:o,def:U}=le({items:[{label:"全部公开",value:"all"},{label:"仅公开本地内容，隐藏远程内容",value:"local"},{label:"全部隐藏",value:"none"}],initialValue:d.ugcVisibilityForVisitor}),I=_(d.sensitiveWords.join(`
`)),w=_(d.prohibitedWords.join(`
`)),W=_(d.prohibitedWordsForNameOfUser.join(`
`)),u=_(d.hiddenTags.join(`
`)),b=_(d.preservedUsernames.join(`
`)),F=_(d.blockedHosts.join(`
`)),T=_(d.silencedHosts?.join(`
`)??""),M=_(d.mediaSilencedHosts.join(`
`));async function j(S){if(S){const{canceled:s}=await ne({type:"warning",text:"理解注意事项后再开启。"});if(s)return}H.value=S,p("admin/update-meta",{disableRegistration:!S}).then(()=>{c(!0)})}function B(S){p("admin/update-meta",{emailRequiredForSignup:S}).then(()=>{c(!0)})}function q(S){p("admin/update-meta",{ugcVisibilityForVisitor:S}).then(()=>{c(!0)})}function A(){p("admin/update-meta",{preservedUsernames:b.value.split(`
`)}).then(()=>{c(!0)})}function G(){p("admin/update-meta",{sensitiveWords:I.value.split(`
`)}).then(()=>{c(!0)})}function Y(){p("admin/update-meta",{prohibitedWords:w.value.split(`
`)}).then(()=>{c(!0)})}function L(){p("admin/update-meta",{prohibitedWordsForNameOfUser:W.value.split(`
`)}).then(()=>{c(!0)})}function Q(){p("admin/update-meta",{hiddenTags:u.value.split(`
`)}).then(()=>{c(!0)})}function $(){p("admin/update-meta",{blockedHosts:F.value.split(`
`)||[]}).then(()=>{c(!0)})}function J(){p("admin/update-meta",{silencedHosts:T.value.split(`
`)||[]}).then(()=>{c(!0)})}function X(){p("admin/update-meta",{mediaSilencedHosts:M.value.split(`
`)||[]}).then(()=>{c(!0)})}const K=ue(()=>[]);return ae(()=>({title:"管理",icon:"ti ti-shield"})),(S,s)=>{const v=y("SearchLabel"),R=y("SearchText"),m=y("SearchMarker"),h=y("SearchIcon"),Z=y("PageWithHeader");return O(),N(Z,{tabs:K.value},{default:e(()=>[n("div",fe,[t(m,{path:"/admin/moderation",label:"管理",keywords:["moderation"],icon:"ti ti-shield",inlining:["serverRules"],markerId:"52l4V9NHP","data-in-app-search-marker-id":"52l4V9NHP",children:["8FF1JDiar","4TvP9phlp","cjzWXco6u","7xyFHwqDg","6P1TzwEh1","CYVpdPbBH","nPOrTVt5r","z3d6UTP68","8QvMlybVI","80Dxrtnl4","sYORVrYSk"]},{default:e(()=>[n("div",be,[t(m,{keywords:["open","registration"],markerId:"8FF1JDiar","data-in-app-search-marker-id":"8FF1JDiar"},{default:e(()=>[t(P,{modelValue:H.value,"onUpdate:modelValue":j},{label:e(()=>[t(v,null,{default:e(()=>[a(i("开放注册"),1)]),_:1})]),caption:e(()=>[n("div",null,[t(R,null,{default:e(()=>[a(i("若在一段时间内没有检测到管理活动，为防止垃圾信息，此设定将自动关闭。"),1)]),_:1})]),n("div",null,[s[10]||(s[10]=n("i",{class:"ti ti-alert-triangle",style:{color:"var(--MI_THEME-warn)"}},null,-1)),s[11]||(s[11]=a()),t(R,null,{default:e(()=>[a(i("开放注册有风险。建议仅当能够持续监控服务器，并在出现问题时能够立即响应时才打开它。"),1)]),_:1})])]),_:1},8,["modelValue"])]),_:1}),t(m,{keywords:["email","required","signup"],markerId:"4TvP9phlp","data-in-app-search-marker-id":"4TvP9phlp"},{default:e(()=>[t(P,{modelValue:k.value,"onUpdate:modelValue":s[0]||(s[0]=r=>k.value=r),onChange:B},{label:e(()=>[t(v,null,{default:e(()=>[a(i("注册账户需要电子邮件地址"),1)]),_:1}),a(" ("+i("推荐")+")",1)]),_:1},8,["modelValue"])]),_:1}),t(m,{keywords:["ugc","content","visibility","visitor","guest"],markerId:"cjzWXco6u","data-in-app-search-marker-id":"cjzWXco6u"},{default:e(()=>[t(ie,{modelValue:D(o),"onUpdate:modelValue":[s[1]||(s[1]=r=>me(o)?o.value=r:null),q],items:D(U)},{label:e(()=>[t(v,null,{default:e(()=>[a(i("用户生成内容对非用户的可见性"),1)]),_:1})]),caption:e(()=>[n("div",null,[t(R,null,{default:e(()=>[a(i("对于防止诸如难以管理的不适当的远程内容通过自己的服务器意外地在互联网上公开等问题很有用。"),1)]),_:1})]),n("div",null,[s[12]||(s[12]=n("i",{class:"ti ti-alert-triangle",style:{color:"var(--MI_THEME-warn)"}},null,-1)),s[13]||(s[13]=a()),t(R,null,{default:e(()=>[a(i("包含服务器接收到的远程内容在内，无条件将服务器上的所有内容公开在互联网上存在风险。特别是对去中心化的特性不是很了解的访问者有可能将远程服务器上的内容误认为是在此服务器内生成的，需要特别留意。"),1)]),_:1})])]),_:1},8,["modelValue","items"])]),_:1}),t(_e),t(m,{keywords:["preserved","usernames"],markerId:"7xyFHwqDg","data-in-app-search-marker-id":"7xyFHwqDg"},{default:e(()=>[t(g,null,{icon:e(()=>[t(h,null,{default:e(()=>[...s[14]||(s[14]=[n("i",{class:"ti ti-lock-star"},null,-1)])]),_:1})]),label:e(()=>[t(v,null,{default:e(()=>[a(i("保留的用户名"),1)]),_:1})]),default:e(()=>[n("div",Ve,[t(x,{modelValue:b.value,"onUpdate:modelValue":s[2]||(s[2]=r=>b.value=r)},{caption:e(()=>[a(i("列出需要保留的用户名，使用换行来作为分割。被指定的用户名在建立账户时无法使用，但由管理员所创建的账户不受该限制。此外，现有的账户也不会受到影响。"),1)]),_:1},8,["modelValue"]),t(V,{primary:"",onClick:A},{default:e(()=>[a(i("保存"),1)]),_:1})])]),_:1})]),_:1}),t(m,{keywords:["sensitive","words"],markerId:"6P1TzwEh1","data-in-app-search-marker-id":"6P1TzwEh1"},{default:e(()=>[t(g,null,{icon:e(()=>[t(h,null,{default:e(()=>[...s[15]||(s[15]=[n("i",{class:"ti ti-message-exclamation"},null,-1)])]),_:1})]),label:e(()=>[t(v,null,{default:e(()=>[a(i("敏感词"),1)]),_:1})]),default:e(()=>[n("div",ke,[t(x,{modelValue:I.value,"onUpdate:modelValue":s[3]||(s[3]=r=>I.value=r)},{caption:e(()=>[a(i("包含这些词的帖子将只在首页可见。可用换行来设定多个词。"),1),s[16]||(s[16]=n("br",null,null,-1)),a(i("AND 条件用空格分隔，正则表达式用斜线包裹。"),1)]),_:1},8,["modelValue"]),t(V,{primary:"",onClick:G},{default:e(()=>[a(i("保存"),1)]),_:1})])]),_:1})]),_:1}),t(m,{keywords:["prohibited","words"],markerId:"CYVpdPbBH","data-in-app-search-marker-id":"CYVpdPbBH"},{default:e(()=>[t(g,null,{icon:e(()=>[t(h,null,{default:e(()=>[...s[17]||(s[17]=[n("i",{class:"ti ti-message-x"},null,-1)])]),_:1})]),label:e(()=>[t(v,null,{default:e(()=>[a(i("禁用词"),1)]),_:1})]),default:e(()=>[n("div",ge,[t(x,{modelValue:w.value,"onUpdate:modelValue":s[4]||(s[4]=r=>w.value=r)},{caption:e(()=>[a(i("发布包含设定词汇的帖子时将出错。可用换行设定多个关键字。"),1),s[18]||(s[18]=n("br",null,null,-1)),a(i("AND 条件用空格分隔，正则表达式用斜线包裹。"),1)]),_:1},8,["modelValue"]),t(V,{primary:"",onClick:Y},{default:e(()=>[a(i("保存"),1)]),_:1})])]),_:1})]),_:1}),t(m,{keywords:["prohibited","name","user"],markerId:"nPOrTVt5r","data-in-app-search-marker-id":"nPOrTVt5r"},{default:e(()=>[t(g,null,{icon:e(()=>[t(h,null,{default:e(()=>[...s[19]||(s[19]=[n("i",{class:"ti ti-user-x"},null,-1)])]),_:1})]),label:e(()=>[t(v,null,{default:e(()=>[a(i("用户名中禁止的词"),1)]),_:1})]),default:e(()=>[n("div",ye,[t(x,{modelValue:W.value,"onUpdate:modelValue":s[5]||(s[5]=r=>W.value=r)},{caption:e(()=>[a(i("更改用户名时，如果用户名中包含此列表里的词汇，用户的改名请求将被拒绝。持有管理员权限的用户不受此限制。"),1),s[20]||(s[20]=n("br",null,null,-1)),a(i("AND 条件用空格分隔，正则表达式用斜线包裹。"),1)]),_:1},8,["modelValue"]),t(V,{primary:"",onClick:L},{default:e(()=>[a(i("保存"),1)]),_:1})])]),_:1})]),_:1}),t(m,{keywords:["hidden","tags","hashtags"],markerId:"z3d6UTP68","data-in-app-search-marker-id":"z3d6UTP68"},{default:e(()=>[t(g,null,{icon:e(()=>[t(h,null,{default:e(()=>[...s[21]||(s[21]=[n("i",{class:"ti ti-eye-off"},null,-1)])]),_:1})]),label:e(()=>[t(v,null,{default:e(()=>[a(i("隐藏标签"),1)]),_:1})]),default:e(()=>[n("div",Se,[t(x,{modelValue:u.value,"onUpdate:modelValue":s[6]||(s[6]=r=>u.value=r)},{caption:e(()=>[a(i("设定的标签将不会在时间线上显示。可使用换行来设置多个标签。"),1)]),_:1},8,["modelValue"]),t(V,{primary:"",onClick:Q},{default:e(()=>[a(i("保存"),1)]),_:1})])]),_:1})]),_:1}),t(m,{keywords:["silenced","servers","hosts"],markerId:"8QvMlybVI","data-in-app-search-marker-id":"8QvMlybVI"},{default:e(()=>[t(g,null,{icon:e(()=>[t(h,null,{default:e(()=>[...s[22]||(s[22]=[n("i",{class:"ti ti-eye-off"},null,-1)])]),_:1})]),label:e(()=>[t(v,null,{default:e(()=>[a(i("被静音的服务器"),1)]),_:1})]),default:e(()=>[n("div",he,[t(x,{modelValue:T.value,"onUpdate:modelValue":s[7]||(s[7]=r=>T.value=r)},{caption:e(()=>[a(i("设置要静音的服务器，以换行分隔。被静音的服务器内所有的账户都被视为「静音」状态，且关注操作均需要被批准。被阻止的实例不受影响。"),1)]),_:1},8,["modelValue"]),t(V,{primary:"",onClick:J},{default:e(()=>[a(i("保存"),1)]),_:1})])]),_:1})]),_:1}),t(m,{keywords:["media","silenced","servers","hosts"],markerId:"80Dxrtnl4","data-in-app-search-marker-id":"80Dxrtnl4"},{default:e(()=>[t(g,null,{icon:e(()=>[t(h,null,{default:e(()=>[...s[23]||(s[23]=[n("i",{class:"ti ti-eye-off"},null,-1)])]),_:1})]),label:e(()=>[t(v,null,{default:e(()=>[a(i("已隐藏媒体文件的服务器"),1)]),_:1})]),default:e(()=>[n("div",xe,[t(x,{modelValue:M.value,"onUpdate:modelValue":s[8]||(s[8]=r=>M.value=r)},{caption:e(()=>[a(i("设置要隐藏媒体文件的服务器，以换行分隔。被设置的服务器内所有账号的文件均按照「敏感内容」处理，且将无法使用自定义表情符号。被阻止的实例不受影响。"),1)]),_:1},8,["modelValue"]),t(V,{primary:"",onClick:X},{default:e(()=>[a(i("保存"),1)]),_:1})])]),_:1})]),_:1}),t(m,{keywords:["blocked","servers","hosts"],markerId:"sYORVrYSk","data-in-app-search-marker-id":"sYORVrYSk"},{default:e(()=>[t(g,null,{icon:e(()=>[t(h,null,{default:e(()=>[...s[24]||(s[24]=[n("i",{class:"ti ti-ban"},null,-1)])]),_:1})]),label:e(()=>[t(v,null,{default:e(()=>[a(i("被屏蔽的服务器"),1)]),_:1})]),default:e(()=>[n("div",Ce,[t(x,{modelValue:F.value,"onUpdate:modelValue":s[9]||(s[9]=r=>F.value=r)},{caption:e(()=>[a(i("设定要屏蔽的服务器，以换行分隔。被屏蔽的服务器将无法与本服务器进行交换通讯。子域名也同样会被屏蔽。"),1)]),_:1},8,["modelValue"]),t(V,{primary:"",onClick:$},{default:e(()=>[a(i("保存"),1)]),_:1})])]),_:1})]),_:1})])]),_:1},8,["label"])])]),_:1},8,["tabs"])}}});export{De as default};

const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["https://fastly.jsdelivr.net/gh/truimo-dev/misskey-built@latest/_frontend_vite_/scripts/3iSoGi4ic-6Vs9uj6N.js","https://fastly.jsdelivr.net/gh/truimo-dev/misskey-built@latest/_frontend_vite_/scripts/3iSoGi4ic-Dty8GuTz.js","https://fastly.jsdelivr.net/gh/truimo-dev/misskey-built@latest/_frontend_vite_/scripts/3iSoGi4ic-B1GPmOGN.js","https://fastly.jsdelivr.net/gh/truimo-dev/misskey-built@latest/_frontend_vite_/scripts/3iSoGi4ic-D0mTJ0Mu.js"])))=>i.map(i=>d[i]);
import{ak as H,i,J as j,A as S,h as L,d7 as J,az as Q,R as x,e as F,p as $,a as G,_ as K}from"./3iSoGi4ic-DV-GuiCp.js";import{M as X,g as Y}from"./3iSoGi4ic-D2cYyZiQ.js";import{l as Z,a as ee,b as te}from"./3iSoGi4ic-_4H1QviN.js";import{b as ae,ab as ie,a as u,c as l,e as ne,L as oe,o as se,w as re,z as C,l as w,i as c,C as d,p as h,B as m,t as W,f as b,h as o,D as s,E as r,g as le,y as ce}from"./3iSoGi4ic-D0mTJ0Mu.js";import"./3iSoGi4ic-B1GPmOGN.js";import"./3iSoGi4ic-D98_HDRS.js";const ue={key:0,class:"nav"},de={class:"_spacer",style:{"--MI_SPACER-w":"700px","--MI_SPACER-min":"16px"}},me={class:"lxpfedzu _gaps"},ve={class:"banner"},pe=["src"],fe={class:"_gaps_s"},_e={key:1,class:"main _pageContainer",style:{height:"100%"}},R=600,xe=ae({__name:"index",async setup(he){let g,I;const B=([g,I]=ie(()=>F(async()=>{const{searchIndexes:a}=await import("./3iSoGi4ic-6Vs9uj6N.js");return{searchIndexes:a}},__vite__mapDeps([0,1,2,3]),import.meta.url).then(({searchIndexes:a})=>Y(a))),g=await g,I(),g),k=a=>a==null||a==="",p=H(),N={title:"控制面板",icon:"ti ti-settings",hideHeader:!0};ce("shouldOmitHeaderTitle",!1);const y=u(N),A=u(null),n=u(!1);u(null);const v=u(null);u({});const P=l(()=>k(i.maintainerName)||k(i.maintainerEmail)),U=l(()=>!i.disableRegistration&&!i.enableHcaptcha&&!i.enableRecaptcha&&!i.enableTurnstile&&!i.enableMcaptcha),z=l(()=>!i.enableEmail),D=l(()=>k(i.inquiryUrl)),E=u(!1),t=l(()=>p.currentRef.value.child);j("admin/abuse-user-reports",{state:"unresolved",limit:1}).then(a=>{a.length>0&&(E.value=!0)});const M=new ResizeObserver((a,f)=>{a.length!==0&&(n.value=a[0].borderBoxSize[0].inlineSize<R)}),V=l(()=>[{title:"快捷操作",items:[{type:"button",icon:"ti ti-search",text:"查询",action:O},...i.disableRegistration?[{type:"button",icon:"ti ti-user-plus",text:"生成邀请码",action:q}]:[]]},{title:"管理",items:[{icon:"ti ti-dashboard",text:"管理面板",to:"/admin/overview",active:t.value?.route.name==="overview"},{icon:"ti ti-users",text:"用户",to:"/admin/users",active:t.value?.route.name==="users"},{icon:"ti ti-user-plus",text:"邀请",to:"/admin/invites",active:t.value?.route.name==="invites"},{icon:"ti ti-badges",text:"角色",to:"/admin/roles",active:t.value?.route.name==="roles"},{icon:"ti ti-icons",text:"自定义表情符号",to:"/admin/emojis",active:t.value?.route.name==="emojis"},{icon:"ti ti-icons",text:"自定义表情符号"+"(beta)",to:"/admin/emojis2",active:t.value?.route.name==="emojis2"},{icon:"ti ti-sparkles",text:"头像挂件",to:"/admin/avatar-decorations",active:t.value?.route.name==="avatarDecorations"},{icon:"ti ti-whirl",text:"联合",to:"/admin/federation",active:t.value?.route.name==="federation"},{icon:"ti ti-clock-play",text:"联合作业",to:"/admin/federation-job-queue",active:t.value?.route.name==="federationJobQueue"},{icon:"ti ti-clock-play",text:"作业队列",to:"/admin/job-queue",active:t.value?.route.name==="jobQueue"},{icon:"ti ti-cloud",text:"文件",to:"/admin/files",active:t.value?.route.name==="files"},{icon:"ti ti-speakerphone",text:"公告",to:"/admin/announcements",active:t.value?.route.name==="announcements"},{icon:"ti ti-ad",text:"广告",to:"/admin/ads",active:t.value?.route.name==="ads"},{icon:"ti ti-exclamation-circle",text:"举报",to:"/admin/abuses",active:t.value?.route.name==="abuses"},{icon:"ti ti-list-search",text:"管理日志",to:"/admin/modlog",active:t.value?.route.name==="modlog"}]},{title:"设置",items:[{icon:"ti ti-settings",text:"常规设置",to:"/admin/settings",active:t.value?.route.name==="settings"},{icon:"ti ti-paint",text:"品牌",to:"/admin/branding",active:t.value?.route.name==="branding"},{icon:"ti ti-shield",text:"管理",to:"/admin/moderation",active:t.value?.route.name==="moderation"},{icon:"ti ti-mail",text:"邮件服务器",to:"/admin/email-settings",active:t.value?.route.name==="email-settings"},{icon:"ti ti-cloud",text:"对象存储",to:"/admin/object-storage",active:t.value?.route.name==="object-storage"},{icon:"ti ti-lock",text:"安全",to:"/admin/security",active:t.value?.route.name==="security"},{icon:"ti ti-planet",text:"中继",to:"/admin/relays",active:t.value?.route.name==="relays"},{icon:"ti ti-link",text:"外部服务",to:"/admin/external-services",active:t.value?.route.name==="external-services"},{icon:"ti ti-webhook",text:"Webhook",to:"/admin/system-webhook",active:t.value?.route.name==="system-webhook"},{icon:"ti ti-bolt",text:"性能",to:"/admin/performance",active:t.value?.route.name==="performance"}]},{title:"关于",items:[{icon:"ti ti-database",text:"数据库",to:"/admin/database",active:t.value?.route.name==="database"}]}]);ne(()=>{v.value!=null&&(M.observe(v.value),n.value=v.value.offsetWidth<R),t.value?.route.name==null&&!n.value&&p.replace("/admin/overview")}),oe(()=>{v.value!=null&&(n.value=v.value.offsetWidth<R),t.value?.route.name==null&&!n.value&&p.replace("/admin/overview")}),se(()=>{M.disconnect()}),re(p.currentRef,a=>{a.route.path==="/admin"&&a.child?.route.name==null&&!n.value&&p.replace("/admin/overview")}),$(a=>{const f=a();f==null?A.value=null:(A.value=f,y.value.needWideArea=f.needWideArea??void 0)}),G(y);function q(){j("admin/invite/create").then(a=>{S({type:"info",text:a[0].code})}).catch(a=>{S({type:"error",text:a})})}function O(a){L([{text:"用户",icon:"ti ti-user",action:()=>{Z()}},{text:`${"用户"} (${"邮箱"})`,icon:"ti ti-user",action:()=>{ee()}},{text:"文件",icon:"ti ti-cloud",action:()=>{te()}},{text:"查询",icon:"ti ti-world-search",action:()=>{J()}}],a.currentTarget??a.target)}return l(()=>[]),l(()=>[]),Q(()=>y.value),(a,f)=>{const _=C("MkA"),T=C("NestedRouterView");return c(),w("div",{ref_key:"el",ref:v,class:le(["hiyeyicy",{wide:!n.value}])},[!n.value||t.value?.route.name==null?(c(),w("div",ue,[h("div",de,[h("div",me,[h("div",ve,[h("img",{src:W(i).iconUrl||"/favicon.ico",alt:"",class:"icon"},null,8,pe)]),h("div",fe,[E.value?(c(),b(x,{key:0,warn:""},{default:o(()=>[s(r("有未解决的报告")+" ",1),m(_,{to:"/admin/abuses",class:"_link"},{default:o(()=>[s(r("检查"),1)]),_:1})]),_:1})):d("",!0),P.value?(c(),b(x,{key:1,warn:""},{default:o(()=>[s(r("尚未设置管理员信息。")+" ",1),m(_,{to:"/admin/settings",class:"_link"},{default:o(()=>[s(r("设置"),1)]),_:1})]),_:1})):d("",!0),D.value?(c(),b(x,{key:2,warn:""},{default:o(()=>[s(r("尚未设置联络地址。")+" ",1),m(_,{to:"/admin/settings",class:"_link"},{default:o(()=>[s(r("设置"),1)]),_:1})]),_:1})):d("",!0),U.value?(c(),b(x,{key:3,warn:""},{default:o(()=>[s(r("尚未设置 Bot 防御。")+" ",1),m(_,{to:"/admin/security",class:"_link"},{default:o(()=>[s(r("设置"),1)]),_:1})]),_:1})):d("",!0),z.value?(c(),b(x,{key:4,warn:""},{default:o(()=>[s(r("电子邮件服务器未设置。")+" ",1),m(_,{to:"/admin/email-settings",class:"_link"},{default:o(()=>[s(r("设置"),1)]),_:1})]),_:1})):d("",!0)]),m(X,{def:V.value,searchIndex:W(B),grid:n.value},null,8,["def","searchIndex","grid"])])])])):d("",!0),n.value&&t.value?.route.name==null?d("",!0):(c(),w("div",_e,[m(T)]))],2)}}}),Ae=K(xe,[["__scopeId","data-v-242b6ead"]]);export{Ae as default};

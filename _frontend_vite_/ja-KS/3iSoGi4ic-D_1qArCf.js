import{Q as W,R as M,M as f,a7 as Q,J as G,cT as h,C as Y,L as $,a3 as ee,b as w,az as le,c4 as H,ab as A,ch as te,A as ae,c7 as ne,cU as se,cV as oe,W as R,cW as ie,cX as ue}from"./3iSoGi4ic-DV-GuiCp.js";import{M as k}from"./3iSoGi4ic-Fx-BY70c.js";import{M as re}from"./3iSoGi4ic-Dn35_-KQ.js";import{b as q,a as L,l as y,i as m,B as t,h as e,p as o,D as a,E as s,t as r,F,A as N,f as T,C as K,w as de,c as z,z as S,R as C}from"./3iSoGi4ic-D0mTJ0Mu.js";import{F as me}from"./3iSoGi4ic-CaDkpGcu.js";import{F as ce}from"./3iSoGi4ic-D8UyQ0ea.js";import{s as pe,e as fe}from"./3iSoGi4ic-BjIDNJrc.js";import{M as _e}from"./3iSoGi4ic-B70zSkp5.js";import{a as ke}from"./3iSoGi4ic-CNyaLqcm.js";import"./3iSoGi4ic-B1GPmOGN.js";import"./3iSoGi4ic-D98_HDRS.js";import"./3iSoGi4ic-CsUWgtg6.js";const ge={class:"_gaps_m"},ve={class:"_gaps_m"},be={class:"_gaps"},we={class:"_gaps_m"},Me=q({__name:"migration",setup(j){const d=W(),_=L(""),g=L(),c=L([""]);async function x(){if(d.movedTo?g.value=await G("users/show",{userId:d.movedTo}):_.value="",d.alsoKnownAs&&d.alsoKnownAs.length>0){const p=await G("users/show",{userIds:d.alsoKnownAs});c.value=p&&p.length>0?p.map(i=>`@${h(i)}`):[""]}else c.value=[""]}async function I(){const p=_.value;(await Y({type:"warning",text:(({account})=>("ほんまにこのアカウントを "+account+" に引っ越すんか？一回引っ越してもうたら取り消されへんし、二度とこのアカウントを元に戻されへんくなるで。\nそれと、引っ越し先のアカウントでエイリアスが作れたかちゃ～んと確認しーや？"))({account:p})})).canceled||(await $("i/move",{moveToAccount:p}),ee())}function P(){c.value.push("")}async function E(){const p=c.value.map(v=>v.trim()).filter(v=>v!==""),i=await $("i/update",{alsoKnownAs:p});d.alsoKnownAs=i.alsoKnownAs,x()}return x(),(p,i)=>(m(),y("div",ge,[t(k,{defaultOpen:!0},{icon:e(()=>[...i[1]||(i[1]=[o("i",{class:"ti ti-plane-arrival"},null,-1)])]),label:e(()=>[a(s("別のアカウントからこのアカウントに引っ越す"),1)]),caption:e(()=>[a(s("別のアカウントへエイリアスを作る"),1)]),default:e(()=>[o("div",ve,[t(M,null,{default:e(()=>[a(s("別のアカウントからこのアカウントにフォロワーを引っ越ししたいんなら、ここでエイリアスを作っとかなアカンで。\n引っ越す前のアカウントをこんな感じに入力してや: @username@server.example.com\n入力欄空っぽやったら消しとくで（おすすめはせえへん）。"),1)]),_:1}),o("div",null,[t(f,{disabled:c.value.length>=10,inline:"",style:{"margin-right":"8px"},onClick:P},{default:e(()=>[i[2]||(i[2]=o("i",{class:"ti ti-plus"},null,-1)),a(" "+s("増やす"),1)]),_:1},8,["disabled"]),t(f,{inline:"",primary:"",onClick:E},{default:e(()=>[i[3]||(i[3]=o("i",{class:"ti ti-check"},null,-1)),a(" "+s("とっとく"),1)]),_:1})]),o("div",be,[(m(!0),y(F,null,N(c.value,(v,B)=>(m(),T(Q,{modelValue:c.value[B],"onUpdate:modelValue":O=>c.value[B]=O},{prefix:e(()=>[...i[4]||(i[4]=[o("i",{class:"ti ti-plane-arrival"},null,-1)])]),label:e(()=>[a(s((({n})=>("引っ越しする前のアカウント #"+n))({n:B+1})),1)]),_:2},1032,["modelValue","onUpdate:modelValue"]))),256))])])]),_:1}),t(k,{defaultOpen:!!r(d).movedTo},{icon:e(()=>[...i[5]||(i[5]=[o("i",{class:"ti ti-plane-departure"},null,-1)])]),label:e(()=>[a(s("このアカウントをさらのアカウントに引っ越すで"),1)]),default:e(()=>[o("div",we,[t(M,null,{default:e(()=>[a(s("おニューのアカウントに移行すんで。\n　・フォロワーがおニューの方を勝手にフォローすんで。\n　・このアカウントからのフォローはまるまる全部解除されんで。\n　・このアカウントでノート作れへんようになるで。\n\nフォロワーの移行は勝手にこっちでやっとくけど、フォローの移行は自分でしてや。移行前にこのアカウントでフォローエクスポートして、移行したあとすぐにおニューのところでインポートしてくれな。\nリストとかミュート、あとブロックもおんなじや。自分で移行してな。\n\n（この説明はこのサーバー、つまりMisskey v13.12.0から後の仕様や。Mastodonとか他のActivityPubソフトやとちょっと挙動が違うこともあんで。）"),1)]),_:1}),r(d)&&!r(d).movedTo?(m(),y(F,{key:0},[t(M,null,{default:e(()=>[a(s("アカウントの引っ越しには、まず引っ越し先のアカウントで自分のアカウントに対しエイリアスを作ってな。\nエイリアス作ったら、引っ越し先のアカウントをこんな感じに入れてや: @username@server.example.com"),1)]),_:1}),t(M,{warn:""},{default:e(()=>[a(s("アカウント引っ越したらもう戻せへん。"),1)]),_:1}),t(Q,{modelValue:_.value,"onUpdate:modelValue":i[0]||(i[0]=v=>_.value=v)},{prefix:e(()=>[...i[6]||(i[6]=[o("i",{class:"ti ti-plane-departure"},null,-1)])]),label:e(()=>[a(s("引っ越し先のアカウント:"),1)]),_:1},8,["modelValue"]),t(f,{inline:"",danger:"",disabled:!_.value,onClick:I},{default:e(()=>[i[7]||(i[7]=o("i",{class:"ti ti-check"},null,-1)),a(" "+s("引っ越す"),1)]),_:1},8,["disabled"])],64)):r(d)?(m(),y(F,{key:1},[t(M,null,{default:e(()=>[a(s("このアカウントからのフォロー解除は移行操作から丸一日経ったら実行されんで。\nこのアカウントのフォロー・フォロワー数はどっちも0や。フォローの解除はされへんから、あんたのフォロワーはこのアカウントのフォロワー向けの投稿をこの後も見れるで。"),1)]),_:1}),t(M,{warn:""},{default:e(()=>[a(s("\nアカウントはもう引っ越し済みや。\nこれはもう戻せへん。"),1)]),_:1}),o("div",null,s("引っ越し先のアカウント:"),1),g.value?(m(),T(re,{key:0,user:g.value,class:"_panel _shadow"},null,8,["user"])):K("",!0)],64)):K("",!0)])]),_:1},8,["defaultOpen"])]))}}),ye={class:"_gaps_m"},Ve={class:"_gaps_s"},Ae={class:"_gaps_m"},Ce={class:"_monospace"},Te={class:"_gaps_s"},xe={class:"_gaps_s"},De={class:"_gaps_m"},Fe={class:"_gaps_m"},Ie={class:"_gaps_m"},He=q({__name:"other",setup(j){const d=W();w.model("reportError");const _=w.model("enableCondensedLine"),g=w.model("skipNoteRender"),c=w.model("devMode"),x=w.model("experimental.stackingRouterView"),I=w.model("experimental.enableFolderPageView"),P=w.model("experimental.enableHapticFeedback"),E=w.model("experimental.enableWebTranslatorApi");de(g,()=>{ke()});async function p(){{const{canceled:l}=await Y({type:"warning",text:"アカウントを消すで？ええんか？"});if(l)return}const U=await te();U.canceled||(await $("i/delete-account",{password:U.result.password,token:U.result.token}),await ae({title:"削除処理が始まったで。"}),await ne())}function i(){se()}function v(){oe(),R()}function B(){ie(),R()}function O(){$("chat/read-all",{})}async function J(){await ue(),R()}return z(()=>[]),z(()=>[]),le(()=>({title:"その他",icon:"ti ti-dots"})),(U,l)=>{const D=S("SearchIcon"),V=S("SearchLabel"),X=S("MkTime"),b=S("SearchMarker"),Z=S("SearchText");return m(),T(b,{path:"/settings/other",label:"その他",keywords:["other"],icon:"ti ti-dots",markerId:"F1uK9ssiY","data-in-app-search-marker-id":"F1uK9ssiY",children:["E0ndmaP6Q","nYGwCFcOB","2qI6ruPgi","ihpEnBCat","DGDkl71xx","fz6kQPuuP"]},{default:e(()=>[o("div",ye,[o("div",Ve,[t(b,{keywords:["account","info"],markerId:"E0ndmaP6Q","data-in-app-search-marker-id":"E0ndmaP6Q",children:["i78b6ycEH"]},{default:e(()=>[t(k,null,{icon:e(()=>[t(D,null,{default:e(()=>[...l[7]||(l[7]=[o("i",{class:"ti ti-info-circle"},null,-1)])]),_:1})]),label:e(()=>[t(V,null,{default:e(()=>[a(s("アカウント情報"),1)]),_:1})]),default:e(()=>[o("div",Ae,[t(H,null,{key:e(()=>[...l[8]||(l[8]=[a("ID",-1)])]),value:e(()=>[o("span",Ce,s(r(d).id),1)]),_:1}),t(H,null,{key:e(()=>[a(s("始めた日"),1)]),value:e(()=>[t(X,{time:r(d).createdAt,mode:"detail"},null,8,["time"])]),_:1}),t(b,{keywords:["role","policy"],markerId:"i78b6ycEH","data-in-app-search-marker-id":"i78b6ycEH"},{default:e(()=>[t(k,null,{icon:e(()=>[...l[9]||(l[9]=[o("i",{class:"ti ti-badges"},null,-1)])]),label:e(()=>[t(V,null,{default:e(()=>[a(s("ポリシー"),1)]),_:1})]),default:e(()=>[o("div",Te,[(m(!0),y(F,null,N(Object.keys(r(d).policies),u=>(m(),y("div",{key:u},s(u)+" ... "+s(r(d).policies[u]),1))),128))])]),_:1})]),_:1})])]),_:1})]),_:1}),t(b,{keywords:["roles"],markerId:"nYGwCFcOB","data-in-app-search-marker-id":"nYGwCFcOB"},{default:e(()=>[t(k,null,{icon:e(()=>[t(D,null,{default:e(()=>[...l[10]||(l[10]=[o("i",{class:"ti ti-badges"},null,-1)])]),_:1})]),label:e(()=>[t(V,null,{default:e(()=>[a(s("自分に割り当てられたロール"),1)]),_:1})]),default:e(()=>[o("div",xe,[(m(!0),y(F,null,N(r(d).roles,u=>(m(),T(_e,{key:u.id,role:u,forModeration:!1},null,8,["role"]))),128))])]),_:1})]),_:1}),t(b,{keywords:["account","move","migration"],markerId:"2qI6ruPgi","data-in-app-search-marker-id":"2qI6ruPgi"},{default:e(()=>[t(k,null,{icon:e(()=>[t(D,null,{default:e(()=>[...l[11]||(l[11]=[o("i",{class:"ti ti-plane"},null,-1)])]),_:1})]),label:e(()=>[t(V,null,{default:e(()=>[a(s("アカウントのお引っ越し"),1)]),_:1})]),default:e(()=>[t(Me)]),_:1})]),_:1}),t(b,{keywords:["account","close","delete"],markerId:"ihpEnBCat","data-in-app-search-marker-id":"ihpEnBCat"},{default:e(()=>[t(k,null,{icon:e(()=>[t(D,null,{default:e(()=>[...l[12]||(l[12]=[o("i",{class:"ti ti-alert-triangle"},null,-1)])]),_:1})]),label:e(()=>[t(V,null,{default:e(()=>[a(s("アカウントを閉鎖する"),1)]),_:1})]),default:e(()=>[o("div",De,[t(M,{warn:""},{default:e(()=>[a(s("アカウント消すんはサーバーに負荷かかるんやって。やから、作ったコンテンツとか上げたファイルの数が多いと消し終わるまでに時間がかかるかもしれんわ。"),1)]),_:1}),t(M,null,{default:e(()=>[a(s("アカウントの消し終わるときは、登録してたメアドに通知するで。"),1)]),_:1}),r(d).isDeleted?(m(),T(f,{key:1,disabled:""},{default:e(()=>[a(s("今消しよるで"),1)]),_:1})):(m(),T(f,{key:0,danger:"",onClick:p},{default:e(()=>[t(Z,null,{default:e(()=>[a(s("アカウント削除頼む"),1)]),_:1})]),_:1}))])]),_:1})]),_:1}),t(b,{keywords:["experimental","feature","flags"],markerId:"DGDkl71xx","data-in-app-search-marker-id":"DGDkl71xx"},{default:e(()=>[t(k,null,{icon:e(()=>[t(D,null,{default:e(()=>[...l[13]||(l[13]=[o("i",{class:"ti ti-flask"},null,-1)])]),_:1})]),label:e(()=>[t(V,null,{default:e(()=>[a(s("おためし機能やで"),1)]),_:1})]),default:e(()=>[o("div",Fe,[t(A,{modelValue:r(_),"onUpdate:modelValue":l[0]||(l[0]=u=>C(_)?_.value=u:null)},{label:e(()=>[...l[14]||(l[14]=[a("Enable condensed line",-1)])]),_:1},8,["modelValue"]),t(A,{modelValue:r(g),"onUpdate:modelValue":l[1]||(l[1]=u=>C(g)?g.value=u:null)},{label:e(()=>[...l[15]||(l[15]=[a("Enable note render skipping",-1)])]),_:1},8,["modelValue"]),t(A,{modelValue:r(x),"onUpdate:modelValue":l[2]||(l[2]=u=>C(x)?x.value=u:null)},{label:e(()=>[...l[16]||(l[16]=[a("Enable stacking router view",-1)])]),_:1},8,["modelValue"]),t(A,{modelValue:r(I),"onUpdate:modelValue":l[3]||(l[3]=u=>C(I)?I.value=u:null)},{label:e(()=>[...l[17]||(l[17]=[a("Enable folder page view",-1)])]),_:1},8,["modelValue"]),t(A,{modelValue:r(P),"onUpdate:modelValue":l[4]||(l[4]=u=>C(P)?P.value=u:null)},{label:e(()=>[...l[18]||(l[18]=[a("Enable haptic feedback",-1)])]),_:1},8,["modelValue"]),t(A,{modelValue:r(E),"onUpdate:modelValue":l[5]||(l[5]=u=>C(E)?E.value=u:null)},{label:e(()=>[...l[19]||(l[19]=[a("Enable in-browser translator API",-1)])]),_:1},8,["modelValue"])])]),_:1})]),_:1}),t(b,{keywords:["developer","mode","debug"],markerId:"fz6kQPuuP","data-in-app-search-marker-id":"fz6kQPuuP"},{default:e(()=>[t(k,null,{icon:e(()=>[t(D,null,{default:e(()=>[...l[20]||(l[20]=[o("i",{class:"ti ti-code"},null,-1)])]),_:1})]),label:e(()=>[t(V,null,{default:e(()=>[a(s("開発者やで"),1)]),_:1})]),default:e(()=>[o("div",Ie,[t(A,{modelValue:r(c),"onUpdate:modelValue":l[6]||(l[6]=u=>C(c)?c.value=u:null)},{label:e(()=>[a(s("開発者モード"),1)]),_:1},8,["modelValue"])])]),_:1})]),_:1})]),l[26]||(l[26]=o("hr",null,null,-1)),t(me,{to:"/registry"},{icon:e(()=>[...l[21]||(l[21]=[o("i",{class:"ti ti-adjustments"},null,-1)])]),default:e(()=>[a(s("レジストリ"),1)]),_:1}),l[27]||(l[27]=o("hr",null,null,-1)),t(f,{onClick:v},{default:e(()=>[l[22]||(l[22]=o("i",{class:"ti ti-bulb"},null,-1)),a(" "+s("全部の「ヒントとコツ」をもっかい見して"),1)]),_:1}),t(f,{onClick:B},{default:e(()=>[l[23]||(l[23]=o("i",{class:"ti ti-bulb-off"},null,-1)),a(" "+s("「ヒントとコツ」は全部表示せんでええ"),1)]),_:1}),l[28]||(l[28]=o("hr",null,null,-1)),r(d).policies.chatAvailability!=="unavailable"?(m(),y(F,{key:0},[t(f,{onClick:O},{default:e(()=>[a(s("メッセージを全部読んだことにしとく"),1)]),_:1}),l[24]||(l[24]=o("hr",null,null,-1))],64)):K("",!0),r(pe)?K("",!0):(m(),T(f,{key:1,onClick:r(fe)},{default:e(()=>[a(s("設定の永続化"),1)]),_:1},8,["onClick"])),t(f,{onClick:J},{default:e(()=>[a(s("設定の強制バックアップ"),1)]),_:1}),t(ce,null,{caption:e(()=>[a(s("通常これは自動で行われるはずなんやけど、なんかの理由で上手く移行できへんかったときは手動で移行処理をポチっとできるで。今の設定情報は上書きされるで。"),1)]),default:e(()=>[t(f,{danger:"",onClick:i},{default:e(()=>[l[25]||(l[25]=o("i",{class:"ti ti-refresh"},null,-1)),a(" "+s("旧設定情報をお引っ越し"),1)]),_:1})]),_:1})])]),_:1},8,["label"])}}});export{He as default};

import{b as F,a as M,c as p,w as Y,z as u,f as _,i as t,h as x,p as o,B as l,T as z,t as c,l as s,C as r,D as d,E as m}from"./3iSoGi4ic-D0mTJ0Mu.js";import{az as H,b as v,$ as f,M as P,J as g,C as K,a6 as N}from"./3iSoGi4ic-DV-GuiCp.js";import"./3iSoGi4ic-B1GPmOGN.js";import"./3iSoGi4ic-D98_HDRS.js";const V={class:"_spacer",style:{"--MI_SPACER-w":"800px"}},W={key:0,style:{"margin-right":"0.5em"}},D={style:{"margin-right":"0.5em"}},G={key:0,class:"ti ti-info-circle"},O={key:1,class:"ti ti-alert-triangle",style:{color:"var(--MI_THEME-warn)"}},S={key:2,class:"ti ti-circle-x",style:{color:"var(--MI_THEME-error)"}},U={key:3,class:"ti ti-check",style:{color:"var(--MI_THEME-success)"}},q=["src"],J={style:{"margin-top":"8px",opacity:"0.7","font-size":"85%"}},j={key:1,style:{opacity:"0.7","font-size":"85%"}},se=F({__name:"announcement",props:{announcementId:{}},setup(T){const y=T,e=M(null),k=M(null),E=p(()=>y.announcementId);function h(){e.value=null,g("announcements/show",{announcementId:y.announcementId}).then(async a=>{e.value=a}).catch(a=>{k.value=a})}async function I(a){a.needConfirmationToRead&&(await K({type:"question",title:"ì½ìŒìœ¼ë¡œ í‘œì‹œí•©ë‹ˆê¹Œ?",text:(({title})=>("ã€ˆ"+title+"ã€‰ì˜ ë‚´ìš©ì„ ì½ìŒìœ¼ë¡œ í‘œì‹œí•©ë‹ˆë‹¤."))({title:a.title})})).canceled||(a.isRead=!0,await g("i/read-announcement",{announcementId:a.id}),f&&N({unreadAnnouncements:f.unreadAnnouncements.filter(n=>n.id!==a.id)}))}Y(()=>E.value,h,{immediate:!0});const w=p(()=>[]),L=p(()=>[]);return H(()=>({title:e.value?e.value.title:"ê³µì§€ì‚¬í•­",icon:"ti ti-speakerphone"})),(a,n)=>{const C=u("Mfm"),A=u("MkTime"),R=u("MkError"),$=u("MkLoading"),b=u("PageWithHeader");return t(),_(b,{actions:w.value,tabs:L.value},{default:x(()=>[o("div",V,[l(z,{enterActiveClass:c(v).s.animation?"x3Rex":"",leaveActiveClass:c(v).s.animation?"xeF4l":"",enterFromClass:c(v).s.animation?"x2ieY":"",leaveToClass:c(v).s.animation?"xnxIL":"",mode:"out-in"},{default:x(()=>[e.value?(t(),s("div",{key:e.value.id,class:"_panel xxG8y"},[e.value.forYou?(t(),s("div",{key:0,class:"x70iK"},[n[2]||(n[2]=o("i",{class:"ti ti-pin"},null,-1)),d(" "+m("ë‚˜ì—ê²Œ"),1)],2)):r("",!0),o("div",{class:"xlK47"},[c(f)&&!e.value.silence&&!e.value.isRead?(t(),s("span",W,"ðŸ†•")):r("",!0),o("span",D,[e.value.icon==="info"?(t(),s("i",G)):e.value.icon==="warning"?(t(),s("i",O)):e.value.icon==="error"?(t(),s("i",S)):e.value.icon==="success"?(t(),s("i",U)):r("",!0)]),l(C,{text:e.value.title,class:"_selectable"},null,8,["text"])],2),o("div",{class:"xmWOi"},[l(C,{text:e.value.text,class:"_selectable"},null,8,["text"]),e.value.imageUrl?(t(),s("img",{key:0,src:e.value.imageUrl},null,8,q)):r("",!0),o("div",J,[d(m("ìƒì„±ëœ ë‚ ì§œ")+": ",1),l(A,{time:e.value.createdAt,mode:"detail"},null,8,["time"])]),e.value.updatedAt?(t(),s("div",j,[d(m("ìˆ˜ì •í•œ ë‚ ì§œ")+": ",1),l(A,{time:e.value.updatedAt,mode:"detail"},null,8,["time"])])):r("",!0)],2),c(f)&&!e.value.silence&&!e.value.isRead?(t(),s("div",{key:1,class:"xug2d"},[l(P,{primary:"",onClick:n[0]||(n[0]=B=>I(e.value))},{default:x(()=>[n[3]||(n[3]=o("i",{class:"ti ti-check"},null,-1)),d(" "+m("ì•Œê² ì–´ìš”"),1)]),_:1})],2)):r("",!0)],2)):k.value?(t(),_(R,{key:1,onRetry:n[1]||(n[1]=B=>h())})):(t(),_($,{key:2}))]),_:1},8,["enterActiveClass","leaveActiveClass","enterFromClass","leaveToClass"])])]),_:1},8,["actions","tabs"])}}});export{se as default};

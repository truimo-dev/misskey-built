import{b as G,a as Z,w as ee,l as g,i as c,p as e,c as p,z as Y,k as ue,f as k,h as l,q as x,j as y,B as o,g as ce,t as V,E as n,R as me,D as u,C as A,az as H,F as L,A as X}from"./3iSoGi4ic-D0mTJ0Mu.js";import{j as ve,cn as he,co as fe,cv as pe,cr as ge,cs as _e,ct as q,i as z,cw as ke,b as T,cm as J,cl as P,az as xe,U as B,ab as K,R as Te,C as Me,r as ye,bz as be,cu as Ee,cx as De,cy as Ie,ck as we,cz as $e,_ as He}from"./3iSoGi4ic-DV-GuiCp.js";import{i as Be}from"./3iSoGi4ic-B1GPmOGN.js";import{F as b}from"./3iSoGi4ic-BBsRrkiB.js";import{F}from"./3iSoGi4ic-CaDkpGcu.js";import{M as Q}from"./3iSoGi4ic-Fx-BY70c.js";import"./3iSoGi4ic-D98_HDRS.js";const Ce={viewBox:"0 0 200 150"},Re={"fill-rule":"evenodd"},Se=["fill"],Ve=["fill"],Ae=["fill"],Le=["fill"],Xe=["fill"],qe=["fill"],ze=["fill"],Fe=["fill"],Ne=["fill"],Ue=["fill"],je=["fill"],Oe=["stroke"],We=["stroke"],Ye=["stroke"],Je=["fill"],Pe=["fill"],Ke=["fill"],Qe=["fill"],C=G({__name:"MkThemePreview",props:{theme:{}},setup(O){const E=O,i=Z({bg:"var(--MI_THEME-bg)",panel:"var(--MI_THEME-panel)",fg:"var(--MI_THEME-fg)",mention:"var(--MI_THEME-mention)",hashtag:"var(--MI_THEME-hashtag)",link:"var(--MI_THEME-link)",divider:"var(--MI_THEME-divider)",accent:"var(--MI_THEME-accent)",accentedBg:"var(--MI_THEME-accentedBg)",navBg:"var(--MI_THEME-navBg)",pageHeaderBg:"var(--MI_THEME-pageHeaderBg)",success:"var(--MI_THEME-success)",warn:"var(--MI_THEME-warn)",error:"var(--MI_THEME-error)"});return ee(()=>E.theme,v=>{if(v==null)return;const h=ve(v);if(h.base!=null){const f=[he,fe].find(R=>R.id===h.base);f&&(h.props=Object.assign({},f.props,h.props))}const m=pe(h);i.value={bg:m.bg??"var(--MI_THEME-bg)",panel:m.panel??"var(--MI_THEME-panel)",fg:m.fg??"var(--MI_THEME-fg)",mention:m.mention??"var(--MI_THEME-mention)",hashtag:m.hashtag??"var(--MI_THEME-hashtag)",link:m.link??"var(--MI_THEME-link)",divider:m.divider??"var(--MI_THEME-divider)",accent:m.accent??"var(--MI_THEME-accent)",accentedBg:m.accentedBg??"var(--MI_THEME-accentedBg)",navBg:m.navBg??"var(--MI_THEME-navBg)",pageHeaderBg:m.pageHeaderBg??"var(--MI_THEME-pageHeaderBg)",success:m.success??"var(--MI_THEME-success)",warn:m.warn??"var(--MI_THEME-warn)",error:m.error??"var(--MI_THEME-error)"}},{immediate:!0}),(v,h)=>(c(),g("svg",Ce,[e("g",Re,[e("rect",{width:"200",height:"150",fill:i.value.bg},null,8,Se),e("rect",{width:"64",height:"150",fill:i.value.navBg},null,8,Ve),e("rect",{x:"64",width:"136",height:"41",fill:i.value.pageHeaderBg},null,8,Ae),e("path",{transform:"scale(.26458)",d:"m439.77 247.19c-43.673 0-78.832 35.157-78.832 78.83v249.98h407.06v-328.81z",fill:i.value.panel},null,8,Le)]),e("circle",{cx:"32",cy:"83",r:"21",fill:i.value.accentedBg},null,8,Xe),e("g",null,[e("rect",{x:"120",y:"88",width:"40",height:"6",ry:"3",fill:i.value.fg},null,8,qe),e("rect",{x:"170",y:"88",width:"20",height:"6",ry:"3",fill:i.value.mention},null,8,ze),e("rect",{x:"120",y:"108",width:"20",height:"6",ry:"3",fill:i.value.hashtag},null,8,Fe),e("rect",{x:"150",y:"108",width:"40",height:"6",ry:"3",fill:i.value.fg},null,8,Ne),e("rect",{x:"120",y:"128",width:"40",height:"6",ry:"3",fill:i.value.fg},null,8,Ue),e("rect",{x:"170",y:"128",width:"20",height:"6",ry:"3",fill:i.value.link},null,8,je)]),e("path",{d:"m65.498 40.892h137.7",stroke:i.value.divider,"stroke-width":"0.75"},null,8,Oe),e("g",{transform:"matrix(.60823 0 0 .60823 25.45 75.755)",fill:"none",stroke:i.value.accent,"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2"},[...h[0]||(h[0]=[e("path",{d:"m0 0h24v24h-24z",fill:"none",stroke:"none"},null,-1),e("path",{d:"m5 12h-2l9-9 9 9h-2"},null,-1),e("path",{d:"m5 12v7a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2v-7"},null,-1),e("path",{d:"m9 21v-6a2 2 0 0 1 2-2h2a2 2 0 0 1 2 2v6"},null,-1)])],8,We),e("g",{transform:"matrix(.61621 0 0 .61621 25.354 117.92)",fill:"none",stroke:i.value.fg,"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2"},[...h[1]||(h[1]=[e("path",{d:"m0 0h24v24h-24z",fill:"none",stroke:"none"},null,-1),e("path",{d:"m10 5a2 2 0 1 1 4 0 7 7 0 0 1 4 6v3a4 4 0 0 0 2 3h-16a4 4 0 0 0 2-3v-3a7 7 0 0 1 4-6"},null,-1),e("path",{d:"m9 17v1a3 3 0 0 0 6 0v-1"},null,-1)])],8,Ye),e("circle",{cx:"32",cy:"32",r:"16",fill:i.value.accent},null,8,Je),e("circle",{cx:"140",cy:"20",r:"6",fill:i.value.success},null,8,Pe),e("circle",{cx:"160",cy:"20",r:"6",fill:i.value.warn},null,8,Ke),e("circle",{cx:"180",cy:"20",r:"6",fill:i.value.error},null,8,Qe)]))}}),Ge={class:"rfqxtzch _panel"},Ze={class:"toggle"},et={class:"toggleWrapper"},tt={class:"before"},at={class:"after"},lt={class:"sync"},st={key:1,class:"_gaps"},nt={class:"_gaps_m"},it=["id","value"],rt=["for"],ot=["id","value"],dt=["for","onDragstart","onContextmenu"],ut=["id","value"],ct=["for","onDragstart","onContextmenu"],mt={class:"_gaps_m"},vt=["id","value"],ht=["for"],ft=["id","value"],pt=["for","onDragstart","onContextmenu"],gt=["id","value"],_t=["for","onDragstart","onContextmenu"],kt={class:"_formLinksGrid"},xt=G({__name:"theme",setup(O){const E=ge(),i=_e(),v=p(()=>z.defaultDarkTheme?q.parse(z.defaultDarkTheme):null),h=p(()=>E.value.filter(s=>s.base==="dark"||s.kind==="dark")),m=p(()=>i.value.filter(s=>s.base==="dark"||s.kind==="dark")),f=p(()=>z.defaultLightTheme?q.parse(z.defaultLightTheme):null),R=p(()=>E.value.filter(s=>s.base==="light"||s.kind==="light")),te=p(()=>i.value.filter(s=>s.base==="light"||s.kind==="light")),W=p(()=>ke([v.value,f.value,...i.value,...E.value].filter(s=>s!=null),s=>s.id)),N=T.r.darkTheme,ae=p(()=>N.value?.name??J.name),D=p({get(){return N.value?N.value.id:J.id},set(s){const t=W.value.find(_=>_.id===s);t&&T.commit("darkTheme",t)}}),U=T.r.lightTheme,le=p(()=>U.value?.name??P.name),I=p({get(){return U.value?U.value.id:P.id},set(s){const t=W.value.find(_=>_.id===s);t&&T.commit("lightTheme",t)}}),M=T.model("syncDeviceDarkMode"),se=E.value.length;ee(M,()=>{M.value&&B.set("darkMode",$e())});async function ne(){const s=!B.r.darkMode.value;if(M.value){const{canceled:t}=await Me({type:"question",text:(({x})=>("'"+x+"'가 켜져 있습니다. 동기화를 끄고 수동으로 모드를 변경하겠습니까?"))({x:"디바이스의 다크 모드 설정과 동기화"})});if(t)return;M.value=!1,B.set("darkMode",s)}else B.set("darkMode",s)}const j=Z(T.isSyncEnabled("themes"));function ie(s){s?T.enableSync("themes").then(t=>{t!=null&&t.enabled&&(j.value=!0)}):(T.disableSync("themes"),j.value=!1)}function w(s,t){ye([{type:"label",text:s.name},{icon:"ti ti-clipboard",text:"테마 코드 복사",action:()=>{be(q.stringify(s,null,"	"))}},{icon:"ti ti-trash",text:"삭제",danger:!0,action:()=>{Ee(s)}}],t)}function $(s,t){s.dataTransfer&&(s.dataTransfer.effectAllowed="copy",De(s,q.stringify(t,null,"	")))}function re(s){if(s.dataTransfer)return s.dataTransfer.types[0]==="text/plain"?s.dataTransfer.dropEffect="copy":s.dataTransfer.dropEffect="none",!1}async function oe(s){if(!s.dataTransfer)return;const t=Ie(s);if(t!=null)try{await we(t)}catch{}}return p(()=>[]),p(()=>[]),xe(()=>({title:"테마",icon:"ti ti-palette"})),(s,t)=>{const _=Y("SearchLabel"),S=Y("SearchMarker"),de=ue("adaptive-border");return c(),k(S,{path:"/settings/theme",label:"테마",keywords:["theme"],icon:"ti ti-palette",markerId:"flXd1LC7r","data-in-app-search-marker-id":"flXd1LC7r",children:["c0mJCuWAe","kbIyyw8Of","cQtBi7Wd8","A5JxKoNjX"]},{default:l(()=>[e("div",{class:"_gaps_m",onDragover:x(re,["prevent","stop"]),onDrop:x(oe,["prevent","stop"])},[y((c(),g("div",Ge,[e("div",Ze,[e("div",et,[e("div",{class:ce(["toggle",V(B).r.darkMode.value?"checked":null]),onClick:t[0]||(t[0]=a=>ne())},[e("span",tt,n("라이트"),1),e("span",at,n("다크"),1),t[12]||(t[12]=e("span",{class:"toggle__handler"},[e("span",{class:"crater crater--1"}),e("span",{class:"crater crater--2"}),e("span",{class:"crater crater--3"})],-1)),t[13]||(t[13]=e("span",{class:"star star--1"},null,-1)),t[14]||(t[14]=e("span",{class:"star star--2"},null,-1)),t[15]||(t[15]=e("span",{class:"star star--3"},null,-1)),t[16]||(t[16]=e("span",{class:"star star--4"},null,-1)),t[17]||(t[17]=e("span",{class:"star star--5"},null,-1)),t[18]||(t[18]=e("span",{class:"star star--6"},null,-1))],2)])]),e("div",lt,[o(S,{keywords:["sync","device","dark","light","mode"],markerId:"c0mJCuWAe","data-in-app-search-marker-id":"c0mJCuWAe"},{default:l(()=>[o(K,{modelValue:V(M),"onUpdate:modelValue":t[1]||(t[1]=a=>me(M)?M.value=a:null)},{label:l(()=>[o(_,null,{default:l(()=>[u(n("디바이스의 다크 모드 설정과 동기화"),1)]),_:1})]),_:1},8,["modelValue"])]),_:1})])])),[[de]]),V(Be)?(c(),k(Te,{key:0,warn:""},{default:l(()=>[u(n("세이프 모드가 활성화돼있는 동안에는 기본 테마가 사용됩니다. 세이프 모드를 끄면 원래대로 돌아옵니다."),1)]),_:1})):(c(),g("div",st,[V(B).r.darkMode.value?(c(),k(S,{key:1,keywords:["dark","theme"],markerId:"cQtBi7Wd8","data-in-app-search-marker-id":"cQtBi7Wd8"},{default:l(()=>[o(Q,{defaultOpen:!0,"max-height":500},{icon:l(()=>[...t[20]||(t[20]=[e("i",{class:"ti ti-moon"},null,-1)])]),label:l(()=>[o(_,null,{default:l(()=>[u(n("다크 모드에서 사용할 테마"),1)]),_:1})]),caption:l(()=>[u(n(ae.value),1)]),default:l(()=>[e("div",mt,[v.value!=null?(c(),k(b,{key:0,first:""},{label:l(()=>[u(n("서버 테마"),1)]),default:l(()=>[e("div",{class:"xyMea"},[e("div",{class:"x8D9A"},[y(e("input",{id:`themeRadio_${v.value.id}`,"onUpdate:modelValue":t[7]||(t[7]=a=>D.value=a),type:"radio",name:"darkTheme",class:"xqEeT",value:v.value.id},null,10,vt),[[H,D.value]]),e("label",{for:`themeRadio_${v.value.id}`,class:"xvelt _button",draggable:"true",onDragstart:t[8]||(t[8]=a=>$(a,v.value)),onContextmenu:t[9]||(t[9]=x(a=>w(v.value,a),["prevent","stop"]))},[o(C,{theme:v.value,class:"xmrdv"},null,8,["theme","class"]),e("div",{class:"xrY5X"},n(v.value.name),3)],42,ht)],2)],2)]),_:1})):A("",!0),h.value.length>0?(c(),k(b,{key:1,first:v.value==null},{label:l(()=>[u(n("설치된 테마"),1)]),default:l(()=>[e("div",{class:"xyMea"},[(c(!0),g(L,null,X(h.value,a=>(c(),g("div",{class:"x8D9A"},[y(e("input",{id:`themeRadio_${a.id}`,"onUpdate:modelValue":t[10]||(t[10]=r=>D.value=r),type:"radio",name:"darkTheme",class:"xqEeT",value:a.id},null,10,ft),[[H,D.value]]),e("label",{for:`themeRadio_${a.id}`,class:"xvelt _button",draggable:"true",onDragstart:r=>$(r,a),onContextmenu:x(r=>w(a,r),["prevent","stop"])},[o(C,{theme:a,class:"xmrdv"},null,8,["theme","class"]),e("div",{class:"xrY5X"},n(a.name),3)],42,pt)],2))),256))],2)]),_:1},8,["first"])):A("",!0),o(b,{first:h.value.length===0&&v.value==null},{label:l(()=>[u(n("표준 테마"),1)]),default:l(()=>[e("div",{class:"xyMea"},[(c(!0),g(L,null,X(m.value,a=>(c(),g("div",{class:"x8D9A"},[y(e("input",{id:`themeRadio_${a.id}`,"onUpdate:modelValue":t[11]||(t[11]=r=>D.value=r),type:"radio",name:"darkTheme",class:"xqEeT",value:a.id},null,10,gt),[[H,D.value]]),e("label",{for:`themeRadio_${a.id}`,class:"xvelt _button",draggable:"true",onDragstart:r=>$(r,a),onContextmenu:x(r=>w(a,r),["prevent","stop"])},[o(C,{theme:a,class:"xmrdv"},null,8,["theme","class"]),e("div",{class:"xrY5X"},n(a.name),3)],42,_t)],2))),256))],2)]),_:1},8,["first"])])]),_:1})]),_:1})):(c(),k(S,{key:0,keywords:["light","theme"],markerId:"kbIyyw8Of","data-in-app-search-marker-id":"kbIyyw8Of"},{default:l(()=>[o(Q,{defaultOpen:!0,"max-height":500},{icon:l(()=>[...t[19]||(t[19]=[e("i",{class:"ti ti-sun"},null,-1)])]),label:l(()=>[o(_,null,{default:l(()=>[u(n("라이트 모드에서 사용할 테마"),1)]),_:1})]),caption:l(()=>[u(n(le.value),1)]),default:l(()=>[e("div",nt,[f.value!=null?(c(),k(b,{key:0,first:""},{label:l(()=>[u(n("서버 테마"),1)]),default:l(()=>[e("div",{class:"xyMea"},[e("div",{class:"x8D9A"},[y(e("input",{id:`themeRadio_${f.value.id}`,"onUpdate:modelValue":t[2]||(t[2]=a=>I.value=a),type:"radio",name:"lightTheme",class:"xqEeT",value:f.value.id},null,10,it),[[H,I.value]]),e("label",{for:`themeRadio_${f.value.id}`,class:"xvelt _button",draggable:"true",onDragstart:t[3]||(t[3]=a=>$(a,f.value)),onContextmenu:t[4]||(t[4]=x(a=>w(f.value,a),["prevent","stop"]))},[o(C,{theme:f.value,class:"xmrdv"},null,8,["theme","class"]),e("div",{class:"xrY5X"},n(f.value.name),3)],42,rt)],2)],2)]),_:1})):A("",!0),R.value.length>0?(c(),k(b,{key:1,first:f.value==null},{label:l(()=>[u(n("설치된 테마"),1)]),default:l(()=>[e("div",{class:"xyMea"},[(c(!0),g(L,null,X(R.value,a=>(c(),g("div",{class:"x8D9A"},[y(e("input",{id:`themeRadio_${a.id}`,"onUpdate:modelValue":t[5]||(t[5]=r=>I.value=r),type:"radio",name:"lightTheme",class:"xqEeT",value:a.id},null,10,ot),[[H,I.value]]),e("label",{for:`themeRadio_${a.id}`,class:"xvelt _button",draggable:"true",onDragstart:r=>$(r,a),onContextmenu:x(r=>w(a,r),["prevent","stop"])},[o(C,{theme:a,class:"xmrdv"},null,8,["theme","class"]),e("div",{class:"xrY5X"},n(a.name),3)],42,dt)],2))),256))],2)]),_:1},8,["first"])):A("",!0),o(b,{first:R.value.length===0&&f.value==null},{label:l(()=>[u(n("표준 테마"),1)]),default:l(()=>[e("div",{class:"xyMea"},[(c(!0),g(L,null,X(te.value,a=>(c(),g("div",{class:"x8D9A"},[y(e("input",{id:`themeRadio_${a.id}`,"onUpdate:modelValue":t[6]||(t[6]=r=>I.value=r),type:"radio",name:"lightTheme",class:"xqEeT",value:a.id},null,10,ut),[[H,I.value]]),e("label",{for:`themeRadio_${a.id}`,class:"xvelt _button",draggable:"true",onDragstart:r=>$(r,a),onContextmenu:x(r=>w(a,r),["prevent","stop"])},[o(C,{theme:a,class:"xmrdv"},null,8,["theme","class"]),e("div",{class:"xrY5X"},n(a.name),3)],42,ct)],2))),256))],2)]),_:1},8,["first"])])]),_:1})]),_:1}))])),o(S,{keywords:["sync","themes","devices"],markerId:"A5JxKoNjX","data-in-app-search-marker-id":"A5JxKoNjX"},{default:l(()=>[o(K,{modelValue:j.value,"onUpdate:modelValue":ie},{label:l(()=>[t[21]||(t[21]=e("i",{class:"ti ti-cloud-cog"},null,-1)),t[22]||(t[22]=u()),o(_,null,{default:l(()=>[u(n("기기 간 설치한 테마 동기화"),1)]),_:1})]),_:1},8,["modelValue"])]),_:1}),o(b,null,{default:l(()=>[e("div",kt,[o(F,{to:"/settings/theme/manage"},{icon:l(()=>[...t[23]||(t[23]=[e("i",{class:"ti ti-tool"},null,-1)])]),suffix:l(()=>[u(n(V(se)),1)]),default:l(()=>[u(n("테마 관리"),1)]),_:1}),o(F,{to:"https://assets.misskey.io/theme/list",external:""},{icon:l(()=>[...t[24]||(t[24]=[e("i",{class:"ti ti-world"},null,-1)])]),default:l(()=>[u(n("테마 둘러보기"),1)]),_:1}),o(F,{to:"/settings/theme/install"},{icon:l(()=>[...t[25]||(t[25]=[e("i",{class:"ti ti-download"},null,-1)])]),default:l(()=>[u(n("테마 설치"),1)]),_:1}),o(F,{to:"/theme-editor"},{icon:l(()=>[...t[26]||(t[26]=[e("i",{class:"ti ti-paint"},null,-1)])]),default:l(()=>[u(n("테마 만들기"),1)]),_:1})])]),_:1})],32)]),_:1},8,["label"])}}});const $t=He(xt,[["__scopeId","data-v-0340e4d7"]]);export{$t as default};

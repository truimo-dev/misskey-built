const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["https://fastly.jsdelivr.net/gh/truimo-dev/misskey-built@latest/_frontend_vite_/scripts/3iSoGi4ic-DUMB4COq.js","https://fastly.jsdelivr.net/gh/truimo-dev/misskey-built@latest/_frontend_vite_/scripts/3iSoGi4ic-D0mTJ0Mu.js","https://fastly.jsdelivr.net/gh/truimo-dev/misskey-built@latest/_frontend_vite_/scripts/3iSoGi4ic-B1GPmOGN.js","https://fastly.jsdelivr.net/gh/truimo-dev/misskey-built@latest/_frontend_vite_/scripts/3iSoGi4ic-DV-GuiCp.js","https://fastly.jsdelivr.net/gh/truimo-dev/misskey-built@latest/_frontend_vite_/scripts/3iSoGi4ic-Dty8GuTz.js","https://fastly.jsdelivr.net/gh/truimo-dev/misskey-built@latest/_frontend_vite_/scripts/3iSoGi4ic-D98_HDRS.js","https://fastly.jsdelivr.net/gh/truimo-dev/misskey-built@latest/_frontend_vite_/assets/3iSoGi4ic-DZU1WGtr.css","https://fastly.jsdelivr.net/gh/truimo-dev/misskey-built@latest/_frontend_vite_/assets/3iSoGi4ic-9GwroBN9.css","https://fastly.jsdelivr.net/gh/truimo-dev/misskey-built@latest/_frontend_vite_/scripts/3iSoGi4ic-Fx-BY70c.js","https://fastly.jsdelivr.net/gh/truimo-dev/misskey-built@latest/_frontend_vite_/assets/3iSoGi4ic-Dkg-saem.css","https://fastly.jsdelivr.net/gh/truimo-dev/misskey-built@latest/_frontend_vite_/scripts/3iSoGi4ic-DbFLP2ql.js","https://fastly.jsdelivr.net/gh/truimo-dev/misskey-built@latest/_frontend_vite_/assets/3iSoGi4ic-Box48UwB.css"])))=>i.map(i=>d[i]);
import{Q as G,R as x,M as h,bl as J,ab as z,ch as P,L as y,d as W,e as Q,a6 as U,A as H,C as B,W as X,k as D,b2 as Y,P as Z,az as ee,J as te,_ as ae}from"./3iSoGi4ic-DV-GuiCp.js";import{s as N,c as se,b as re}from"./3iSoGi4ic-DR2vO6TF.js";import{F as S}from"./3iSoGi4ic-BBsRrkiB.js";import{M as O}from"./3iSoGi4ic-Fx-BY70c.js";import{b as $,c as K,z as m,f as g,i as o,h as e,B as a,l as _,C as v,t as d,D as r,E as s,p as u,F,A as V,m as ne,k as ie,j as oe}from"./3iSoGi4ic-D0mTJ0Mu.js";import{F as le}from"./3iSoGi4ic-D8UyQ0ea.js";import{M as ce}from"./3iSoGi4ic-CdSqfJMx.js";import{M as de}from"./3iSoGi4ic-4oa2bN0A.js";import"./3iSoGi4ic-B1GPmOGN.js";import"./3iSoGi4ic-D98_HDRS.js";import"./3iSoGi4ic-Dv7rS4og.js";const ue={key:0,class:"_gaps_s"},fe={key:0,class:"ti ti-check",style:{color:"var(--MI_THEME-success)"}},pe={key:0,class:"_gaps_s"},_e=["textContent"],ke={key:1,class:"_gaps_s"},me={class:"_gaps_s"},we={class:"_buttons"},ye=$({__name:"2fa",props:{first:{type:Boolean,default:!1}},setup(R){const c=G(),I=K(()=>c.usePasswordLessLogin??!1);async function L(){const n=await P();if(n.canceled)return;const i=await y("i/2fa/register",{password:n.result.password,token:n.result.token}),{dispose:l}=await W(Q(()=>import("./3iSoGi4ic-DUMB4COq.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11]),import.meta.url).then(T=>T.default),{twoFactorData:i},{closed:()=>l()})}async function w(){const n=await P();n.canceled||y("i/2fa/unregister",{password:n.result.password,token:n.result.token}).then(i=>{U({twoFactorEnabled:!1})}).catch(i=>{H({type:"error",text:i})})}function f(){B({type:"question",title:"인증 앱 재설정",text:"기존에 등록되어 있던 인증 키는 사용하지 못하게 됩니다.",okText:"재설정",cancelText:"취소"}).then(({canceled:n})=>{n||L()})}async function C(n){if((await B({type:"question",title:"보안 키를 삭제",text:(({name})=>(name+" 앱을 삭제하시겠습니까?"))({name:n.name})})).canceled)return;const l=await P();l.canceled||(await y("i/2fa/remove-key",{password:l.result.password,token:l.result.token,credentialId:n.id}),X())}async function k(n){const i=await D({title:"이름 변경",default:n.name,type:"text",minLength:1,maxLength:30});i.canceled||await y("i/2fa/update-key",{name:i.result,credentialId:n.id})}async function p(){const n=await P();if(n.canceled)return;const i=se({publicKey:await y("i/2fa/register-key",{password:n.result.password,token:n.result.token})}),l=await D({title:"보안 키 또는 패스키 등록",text:"키 이름 입력",type:"text",minLength:1,maxLength:30});if(l.canceled)return;const T=await Y(re(i),null,()=>{},"브라우저의 지시에 따라 보안 키 또는 패스키를 등록하여 주십시오");!T||(await P()).canceled||await y("i/2fa/key-done",{password:n.result.password,token:n.result.token,name:l.result,credential:T.toJSON()})}async function E(n){await y("i/2fa/password-less",{value:n})}return(n,i)=>{const l=m("SearchLabel"),T=m("SearchText"),M=m("SearchMarker"),A=m("MkTime"),j=m("I18n");return o(),g(M,{markerId:"2fa",keywords:["2fa"],children:["qCXM0HtJ7","3g1RePuD9","pFRud5u8k"]},{default:e(()=>[a(S,{first:R.first},{label:e(()=>[a(l,null,{default:e(()=>[r(s("2단계 인증"),1)]),_:1})]),default:e(()=>[d(c)?(o(),_("div",ue,[d(c).twoFactorEnabled&&d(c).twoFactorBackupCodesStock==="partial"?(o(),g(x,{key:0,warn:""},{default:e(()=>[r(s("백업 코드가 사용되었습니다.인증 앱을 사용할 수 없게 된 경우, 조속히 인증 앱을 다시 설정해 주십시오."),1)]),_:1})):v("",!0),d(c).twoFactorEnabled&&d(c).twoFactorBackupCodesStock==="none"?(o(),g(x,{key:1,warn:""},{default:e(()=>[r(s("백업 코드가 모두 사용되었습니다.인증 앱을 사용할 수 없는 경우 더 이상 계정에 액세스하는 것이 불가능합니다.인증 앱을 다시 등록해 주세요."),1)]),_:1})):v("",!0),a(M,{keywords:["totp","app"],markerId:"qCXM0HtJ7","data-in-app-search-marker-id":"qCXM0HtJ7"},{default:e(()=>[a(O,{defaultOpen:!0},{icon:e(()=>[...i[1]||(i[1]=[u("i",{class:"ti ti-shield-lock"},null,-1)])]),label:e(()=>[a(l,null,{default:e(()=>[r(s("인증 앱"),1)]),_:1})]),caption:e(()=>[a(T,null,{default:e(()=>[r(s("인증 앱을 사용하여 일회성 비밀번호 입력"),1)]),_:1})]),suffix:e(()=>[d(c).twoFactorEnabled?(o(),_("i",fe)):v("",!0)]),default:e(()=>[d(c).twoFactorEnabled?(o(),_("div",pe,[u("div",{textContent:s("이미 설정이 완료되었습니다.")},null,8,_e),d(c).securityKeysList.length>0?(o(),_(F,{key:0},[a(h,{onClick:f},{default:e(()=>[r(s("인증 앱 재설정"),1)]),_:1}),a(x,null,{default:e(()=>[r(s("보안 키가 등록되어 있는 경우 인증 앱을 해제할 수 없습니다."),1)]),_:1})],64)):(o(),g(h,{key:1,danger:"",onClick:w},{default:e(()=>[r(s("등록 해제"),1)]),_:1}))])):d(c).twoFactorEnabled?v("",!0):(o(),_("div",ke,[a(h,{primary:"",gradate:"",onClick:L},{default:e(()=>[r(s("인증 앱 설정 시작"),1)]),_:1}),a(J,{url:"https://misskey-hub.net/docs/for-users/stepped-guides/how-to-enable-2fa/",target:"_blank"},{default:e(()=>[i[2]||(i[2]=u("i",{class:"ti ti-help-circle"},null,-1)),r(" "+s("자세히"),1)]),_:1})]))]),_:1})]),_:1}),a(M,{keywords:["security","key","passkey"],markerId:"3g1RePuD9","data-in-app-search-marker-id":"3g1RePuD9"},{default:e(()=>[a(O,null,{icon:e(()=>[...i[3]||(i[3]=[u("i",{class:"ti ti-key"},null,-1)])]),label:e(()=>[a(l,null,{default:e(()=>[r(s("보안 키 또는 패스키"),1)]),_:1})]),default:e(()=>[u("div",me,[a(x,null,{default:e(()=>[r(s("FIDO2를 지원하는 하드웨어 보안 키 혹은 디바이스의 지문인식이나 화면잠금 PIN을 이용해서 로그인하도록 설정할 수 있습니다."),1)]),_:1}),d(N)()?d(N)()&&!d(c).twoFactorEnabled?(o(),g(x,{key:1,warn:""},{default:e(()=>[r(s("보안 키 또는 패스키를 등록하려면 인증 앱을 등록하십시오."),1)]),_:1})):(o(),_(F,{key:2},[a(h,{primary:"",onClick:p},{default:e(()=>[r(s("보안 키 또는 패스키 등록"),1)]),_:1}),(o(!0),_(F,null,V(d(c).securityKeysList,b=>(o(),g(O,{key:b.id},{label:e(()=>[r(s(b.name),1)]),suffix:e(()=>[a(j,{src:"마지막 사용: {t}"},{t:e(()=>[a(A,{time:b.lastUsed},null,8,["time"])]),_:2},1032,["src"])]),default:e(()=>[u("div",we,[a(h,{onClick:q=>k(b)},{default:e(()=>[i[4]||(i[4]=u("i",{class:"ti ti-forms"},null,-1)),r(" "+s("이름 변경"),1)]),_:1},8,["onClick"]),a(h,{danger:"",onClick:q=>C(b)},{default:e(()=>[i[5]||(i[5]=u("i",{class:"ti ti-trash"},null,-1)),r(" "+s("등록 해제"),1)]),_:1},8,["onClick"])])]),_:2},1024))),128))],64)):(o(),g(x,{key:0,warn:""},{default:e(()=>[r(s("이 브라우저는 보안 키를 지원하지 않습니다."),1)]),_:1}))])]),_:1})]),_:1}),a(M,{keywords:["password","less","key","passkey","login","signin"],markerId:"pFRud5u8k","data-in-app-search-marker-id":"pFRud5u8k"},{default:e(()=>[a(z,{disabled:!d(c).twoFactorEnabled||d(c).securityKeysList.length===0,modelValue:I.value,"onUpdate:modelValue":i[0]||(i[0]=b=>E(b))},{label:e(()=>[a(l,null,{default:e(()=>[r(s("비밀번호 없이 로그인"),1)]),_:1})]),caption:e(()=>[a(T,null,{default:e(()=>[r(s("비밀번호 없이 보안 키 또는 패스키만 사용해서 로그인합니다."),1)]),_:1})]),_:1},8,["disabled","modelValue"])]),_:1})])):v("",!0)]),_:1},8,["first"])]),_:1})}}}),ge={class:"_gaps_m"},he={key:0,class:"ti ti-check icon succ"},Te={key:1,class:"ti ti-circle-x icon fail"},be={class:"ip _monospace"},Pe=$({__name:"security",setup(R){const c=ne(new Z("i/signin-history",{limit:5}));async function I(){const{canceled:w,result:f}=await D({title:"새 비밀번호",type:"password",autocomplete:"new-password"});if(w||f==null)return;const{canceled:C,result:k}=await D({title:"새 비밀번호(재입력)",type:"password",autocomplete:"new-password"});if(C||k==null)return;if(f!==k){H({type:"error",text:"입력이 일치하지 않습니다."});return}const p=await P();p.canceled||y("i/change-password",{currentPassword:p.result.password,token:p.result.token,newPassword:f})}async function L(){const w=await P();w.canceled||te("i/regenerate-token",{password:w.result.password,token:w.result.token})}return K(()=>[]),K(()=>[]),ee(()=>({title:"보안",icon:"ti ti-lock"})),(w,f)=>{const C=m("SearchText"),k=m("SearchLabel"),p=m("SearchMarker"),E=m("MkTime"),n=ie("panel");return o(),g(p,{path:"/settings/security",label:"보안",keywords:["security"],icon:"ti ti-lock",inlining:["2fa"],markerId:"5BjnxMfYV","data-in-app-search-marker-id":"5BjnxMfYV",children:["75QPEg57v","akN2Pdb9d","kTHaMxzD0"]},{default:e(()=>[u("div",ge,[a(de,{icon:"/client-assets/locked_with_key_3d.png",color:"#ffbf00"},{default:e(()=>[a(C,null,{default:e(()=>[r(s("비밀번호, 로그인 방법, OTP, 패스 키 등의 계정의 보안에 관련된 설정을 합니다."),1)]),_:1})]),_:1}),a(p,{keywords:["password"],markerId:"75QPEg57v","data-in-app-search-marker-id":"75QPEg57v",children:["CiHijRkGG"]},{default:e(()=>[a(S,{first:""},{label:e(()=>[a(k,null,{default:e(()=>[r(s("비밀번호"),1)]),_:1})]),default:e(()=>[a(p,{markerId:"CiHijRkGG","data-in-app-search-marker-id":"CiHijRkGG"},{default:e(()=>[a(h,{primary:"",onClick:f[0]||(f[0]=i=>I())},{default:e(()=>[a(k,null,{default:e(()=>[r(s("비밀번호 변경"),1)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),a(ye),a(p,{keywords:["signin","login","history","log"],markerId:"akN2Pdb9d","data-in-app-search-marker-id":"akN2Pdb9d"},{default:e(()=>[a(S,null,{label:e(()=>[a(k,null,{default:e(()=>[r(s("로그인 기록"),1)]),_:1})]),default:e(()=>[a(ce,{paginator:d(c),withControl:"",forceDisableInfiniteScroll:!0},{default:e(({items:i})=>[u("div",null,[(o(!0),_(F,null,V(i,l=>oe((o(),_("div",{key:l.id,class:"timnmucd"},[u("header",null,[l.success?(o(),_("i",he)):(o(),_("i",Te)),u("code",be,s(l.ip),1),a(E,{time:l.createdAt,class:"time"},null,8,["time"])])])),[[n]])),128))])]),_:1},8,["paginator"])]),_:1})]),_:1}),a(p,{keywords:["regenerate","refresh","reset","token"],markerId:"kTHaMxzD0","data-in-app-search-marker-id":"kTHaMxzD0"},{default:e(()=>[a(S,null,{default:e(()=>[a(le,null,{caption:e(()=>[r(s("로그인할 때 사용되는 내부 토큰을 재생성합니다. 일반적으로 이 작업을 실행할 필요는 없습니다. 이 기능을 사용하면 이 계정으로 로그인한 모든 기기에서 로그아웃됩니다."),1)]),default:e(()=>[a(h,{danger:"",onClick:L},{default:e(()=>[f[1]||(f[1]=u("i",{class:"ti ti-refresh"},null,-1)),f[2]||(f[2]=r()),a(k,null,{default:e(()=>[r(s("로그인 토큰을 재생성"),1)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})])]),_:1},8,["label"])}}}),Re=ae(Pe,[["__scopeId","data-v-42ef2882"]]);export{Re as default};

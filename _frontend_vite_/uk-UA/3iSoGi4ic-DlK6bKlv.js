const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["https://fastly.jsdelivr.net/gh/truimo-dev/misskey-built@latest/_frontend_vite_/scripts/3iSoGi4ic-Cg14mz44.js","https://fastly.jsdelivr.net/gh/truimo-dev/misskey-built@latest/_frontend_vite_/scripts/3iSoGi4ic-DV-GuiCp.js","https://fastly.jsdelivr.net/gh/truimo-dev/misskey-built@latest/_frontend_vite_/scripts/3iSoGi4ic-D0mTJ0Mu.js","https://fastly.jsdelivr.net/gh/truimo-dev/misskey-built@latest/_frontend_vite_/scripts/3iSoGi4ic-B1GPmOGN.js","https://fastly.jsdelivr.net/gh/truimo-dev/misskey-built@latest/_frontend_vite_/scripts/3iSoGi4ic-Dty8GuTz.js","https://fastly.jsdelivr.net/gh/truimo-dev/misskey-built@latest/_frontend_vite_/scripts/3iSoGi4ic-D98_HDRS.js","https://fastly.jsdelivr.net/gh/truimo-dev/misskey-built@latest/_frontend_vite_/assets/3iSoGi4ic-DZU1WGtr.css","https://fastly.jsdelivr.net/gh/truimo-dev/misskey-built@latest/_frontend_vite_/assets/3iSoGi4ic-9GwroBN9.css","https://fastly.jsdelivr.net/gh/truimo-dev/misskey-built@latest/_frontend_vite_/scripts/3iSoGi4ic-Fx-BY70c.js","https://fastly.jsdelivr.net/gh/truimo-dev/misskey-built@latest/_frontend_vite_/assets/3iSoGi4ic-Dkg-saem.css","https://fastly.jsdelivr.net/gh/truimo-dev/misskey-built@latest/_frontend_vite_/scripts/3iSoGi4ic-B70zSkp5.js","https://fastly.jsdelivr.net/gh/truimo-dev/misskey-built@latest/_frontend_vite_/assets/3iSoGi4ic--Qf9nOJR.css","https://fastly.jsdelivr.net/gh/truimo-dev/misskey-built@latest/_frontend_vite_/assets/3iSoGi4ic-jx5tLi4O.css"])))=>i.map(i=>d[i]);
import{P as B,az as ae,a7 as V,ab as se,M as f,bq as le,d as M,e as A,h as I,J as R,A as h,af as oe,k as x,L as v,C as ie,ar as ne,_ as de}from"./3iSoGi4ic-DV-GuiCp.js";import{M as S}from"./3iSoGi4ic-CdSqfJMx.js";import{M as re}from"./3iSoGi4ic-D1MdWo18.js";import{F as ue}from"./3iSoGi4ic-D8X1N6Gw.js";import{b as ce,a as _,m as j,c as E,z as me,f as pe,i as p,h as a,p as l,l as g,C as D,B as r,D as c,E as m,t as P,F as q,A as L,g as fe}from"./3iSoGi4ic-D0mTJ0Mu.js";import"./3iSoGi4ic-B1GPmOGN.js";import"./3iSoGi4ic-D98_HDRS.js";import"./3iSoGi4ic-Dv7rS4og.js";const ve={class:"_spacer",style:{"--MI_SPACER-w":"900px"}},ge={class:"ogwlenmc"},_e={key:0,class:"local"},ye={key:0,class:"_buttons"},ke={class:"ldhfsamy"},be=["onClick"],xe=["src","alt"],Ce={class:"body"},we={class:"name _monospace"},he={class:"info"},Ee={key:1,class:"remote"},Ve={class:"ldhfsamy"},Pe=["onClick"],Te=["src","alt"],Be={class:"body"},Me={class:"name _monospace"},Ae={class:"info"},Ie=ce({__name:"custom-emojis-manager",setup(Re){const C=_("local"),y=_(null),k=_(null),b=_(null),w=_(!1),d=_([]),u=j(new B("admin/emoji/list",{limit:30,computedParams:E(()=>({query:y.value&&y.value!==""?y.value:null}))})),z=j(new B("admin/emoji/list-remote",{limit:30,computedParams:E(()=>({query:k.value&&k.value!==""?k.value:null,host:b.value&&b.value!==""?b.value:null}))})),F=()=>{d.value.length>0?d.value=[]:d.value=u.items.value.map(t=>t.id)},U=t=>{d.value.includes(t.id)?d.value=d.value.filter(e=>e!==t.id):d.value.push(t.id)},N=async t=>{const{dispose:e}=await M(A(()=>import("./3iSoGi4ic-Cg14mz44.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12]),import.meta.url).then(o=>o.default),{},{done:o=>{o.created&&u.prepend(o.created)},closed:()=>e()})},W=async t=>{const{dispose:e}=await M(A(()=>import("./3iSoGi4ic-Cg14mz44.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12]),import.meta.url).then(o=>o.default),{emoji:t},{done:o=>{o.updated?u.updateItem(o.updated.id,i=>({...i,...o.updated})):o.deleted&&u.removeItem(t.id)},closed:()=>e()})},H=t=>{const{dispose:e}=ne(re,{emoji:t},{done:()=>{e()},closed:()=>{e()}})},O=t=>{v("admin/emoji/copy",{emojiId:t.id})},J=(t,e)=>{I([{type:"label",text:":"+t.name+":"},{text:"Детальніше",icon:"ti ti-info-circle",action:()=>{H(t)}},{text:"Імпорт",icon:"ti ti-plus",action:()=>{O(t)}}],e.currentTarget??e.target)},$=t=>{I([{icon:"ti ti-download",text:"Експорт",action:async()=>{R("export-custom-emojis",{}).then(()=>{h({type:"info",text:"Експортування розпочато. Це може зайняти деякий час. Після завершення експорту отриманий файл буде додано на диск."})}).catch(e=>{h({type:"error",text:e.message})})}},{icon:"ti ti-upload",text:"Імпорт",action:async()=>{const e=await oe({anchorElement:t.currentTarget??t.target,multiple:!1});R("admin/emoji/import-zip",{fileId:e.id}).then(()=>{h({type:"info",text:"Імпортування розпочато. Це може зайняти деякий час."})}).catch(o=>{h({type:"error",text:o.message})})}}],t.currentTarget??t.target)},G=async()=>{const{canceled:t,result:e}=await x({title:"Category"});t||(await v("admin/emoji/set-category-bulk",{ids:d.value,category:e}),u.reload())},K=async()=>{const{canceled:t,result:e}=await x({title:"License"});t||(await v("admin/emoji/set-license-bulk",{ids:d.value,license:e}),u.reload())},Q=async()=>{const{canceled:t,result:e}=await x({title:"Tag"});t||e==null||(await v("admin/emoji/add-aliases-bulk",{ids:d.value,aliases:e.split(" ")}),u.reload())},X=async()=>{const{canceled:t,result:e}=await x({title:"Tag"});t||e==null||(await v("admin/emoji/remove-aliases-bulk",{ids:d.value,aliases:e.split(" ")}),u.reload())},Y=async()=>{const{canceled:t,result:e}=await x({title:"Tag"});t||e==null||(await v("admin/emoji/set-aliases-bulk",{ids:d.value,aliases:e.split(" ")}),u.reload())},Z=async()=>{const{canceled:t}=await ie({type:"warning",text:"Ви дійсно бажаєте це видалити?"});t||(await v("admin/emoji/delete-bulk",{ids:d.value}),u.reload())},ee=E(()=>[{asFullButton:!0,icon:"ti ti-plus",text:"Додати емодзі",handler:N},{icon:"ti ti-dots",text:"Бiльше!",handler:$}]),te=E(()=>[{key:"local",title:"Локальні"},{key:"remote",title:"Віддалені"}]);return ae(()=>({title:"Кастомні емоджі",icon:"ti ti-icons"})),(t,e)=>{const o=me("PageWithHeader");return p(),pe(o,{tab:C.value,"onUpdate:tab":e[4]||(e[4]=i=>C.value=i),actions:ee.value,tabs:te.value},{default:a(()=>[l("div",ve,[l("div",ge,[C.value==="local"?(p(),g("div",_e,[r(V,{modelValue:y.value,"onUpdate:modelValue":e[0]||(e[0]=i=>y.value=i),debounce:!0,type:"search",autocapitalize:"off"},{prefix:a(()=>[...e[5]||(e[5]=[l("i",{class:"ti ti-search"},null,-1)])]),label:a(()=>[c(m("Пошук"),1)]),_:1},8,["modelValue"]),r(se,{modelValue:w.value,"onUpdate:modelValue":e[1]||(e[1]=i=>w.value=i),style:{margin:"8px 0"}},{label:a(()=>[...e[6]||(e[6]=[c("Select mode",-1)])]),_:1},8,["modelValue"]),w.value?(p(),g("div",ye,[r(f,{inline:"",onClick:F},{default:a(()=>[...e[7]||(e[7]=[c("Select all",-1)])]),_:1}),r(f,{inline:"",onClick:G},{default:a(()=>[...e[8]||(e[8]=[c("Set category",-1)])]),_:1}),r(f,{inline:"",onClick:Y},{default:a(()=>[...e[9]||(e[9]=[c("Set tag",-1)])]),_:1}),r(f,{inline:"",onClick:Q},{default:a(()=>[...e[10]||(e[10]=[c("Add tag",-1)])]),_:1}),r(f,{inline:"",onClick:X},{default:a(()=>[...e[11]||(e[11]=[c("Remove tag",-1)])]),_:1}),r(f,{inline:"",onClick:K},{default:a(()=>[...e[12]||(e[12]=[c("Set License",-1)])]),_:1}),r(f,{inline:"",danger:"",onClick:Z},{default:a(()=>[...e[13]||(e[13]=[c("Delete",-1)])]),_:1})])):D("",!0),r(S,{ref:"emojisPaginationComponent",paginator:P(u)},{empty:a(()=>[l("span",null,m("Немає нетипових емоджі"),1)]),default:a(({items:i})=>[l("div",ke,[(p(!0),g(q,null,L(i,n=>(p(),g("button",{key:n.id,class:fe(["emoji _panel _button",{selected:d.value.includes(n.id)}]),onClick:T=>w.value?U(n):W(n)},[l("img",{src:n.url,class:"img",alt:n.name},null,8,xe),l("div",Ce,[l("div",we,m(n.name),1),l("div",he,m(n.category),1)])],10,be))),128))])]),_:1},8,["paginator"])])):C.value==="remote"?(p(),g("div",Ee,[r(ue,null,{default:a(()=>[r(V,{modelValue:k.value,"onUpdate:modelValue":e[2]||(e[2]=i=>k.value=i),debounce:!0,type:"search",autocapitalize:"off"},{prefix:a(()=>[...e[14]||(e[14]=[l("i",{class:"ti ti-search"},null,-1)])]),label:a(()=>[c(m("Пошук"),1)]),_:1},8,["modelValue"]),r(V,{modelValue:b.value,"onUpdate:modelValue":e[3]||(e[3]=i=>b.value=i),debounce:!0},{label:a(()=>[c(m("Хост"),1)]),_:1},8,["modelValue"])]),_:1}),r(S,{paginator:P(z)},{empty:a(()=>[l("span",null,m("Немає нетипових емоджі"),1)]),default:a(({items:i})=>[l("div",Ve,[(p(!0),g(q,null,L(i,n=>(p(),g("div",{key:n.id,class:"emoji _panel _button",onClick:T=>J(n,T)},[l("img",{src:P(le)(n.url,"emoji"),class:"img",alt:n.name},null,8,Te),l("div",Be,[l("div",Me,m(n.name),1),l("div",Ae,m(n.host),1)])],8,Pe))),128))])]),_:1},8,["paginator"])])):D("",!0)])])]),_:1},8,["tab","actions","tabs"])}}}),We=de(Ie,[["__scopeId","data-v-d216baf8"]]);export{We as default};

import{b as w,a as u,m as P,c as R,w as T,z as y,l as a,i as o,B as c,h as k,D as f,E as l,t as d,R as F,p as t,F as N,A as L,q as E,C as x,s as G}from"./3iSoGi4ic-D0mTJ0Mu.js";import{P as U,aS as W,J as Y,az as $,ag as q,cg as H,bd as I,av as J,h as j,r as K}from"./3iSoGi4ic-DV-GuiCp.js";import{M as O}from"./3iSoGi4ic-CdSqfJMx.js";import{g as M}from"./3iSoGi4ic-DkSECkZ7.js";import"./3iSoGi4ic-B1GPmOGN.js";import"./3iSoGi4ic-D98_HDRS.js";import"./3iSoGi4ic-Dv7rS4og.js";const Q={class:"_gaps"},X={key:0},Z={class:"_gaps"},ee=["onClick","onContextmenu"],te={key:0,class:"sensitive-label"},se={style:{"margin-bottom":"4px"}},ae={style:{"margin-right":"1em"}},oe={key:0},ie={key:1},he=w({__name:"drive-cleaner",setup(ne){const m=u("+size"),b=P(new U("drive/files",{limit:10,computedParams:R(()=>({sort:m.value}))})),C=u(0),v=u(0),p=u(!0),{model:i,def:B}=W({items:[{label:"Descending Filesizes",value:"sizeDesc"},{label:"Ascending Dates",value:"createdAtAsc"}],initialValue:"sizeDesc"});_(),T(i,()=>{switch(i.value){case"sizeDesc":m.value="+size",_();break;case"createdAtAsc":m.value="-createdAt",_();break}});function _(){p.value=!0,Y("drive").then(e=>{C.value=e.capacity,v.value=e.usage,p.value=!1})}function z(e){return{width:`${e/v.value*100}%`,background:J({h:180-e/v.value*180,s:.7,l:.5}).toHslString()}}function D(e,n){j(M(n),e.currentTarget??e.target??void 0)}function A(e,n){K(M(n),e)}return $(()=>({title:"Drive Cleaner",icon:"ti ti-trash"})),(e,n)=>{const S=y("MkTime"),V=y("MkLoading");return o(),a("div",Q,[c(q,{modelValue:d(i),"onUpdate:modelValue":n[0]||(n[0]=g=>F(i)?i.value=g:null),items:d(B)},{label:k(()=>[f(l("Sorting order"),1)]),_:1},8,["modelValue","items"]),p.value?(o(),a("div",ie,[c(V)])):(o(),a("div",X,[c(O,{paginator:d(b)},{default:k(({items:g})=>[t("div",Z,[(o(!0),a(N,null,L(g,s=>(o(),a("div",{key:s.id,class:"_button",onClick:h=>D(h,s),onContextmenu:E(h=>A(h,s),["stop"])},[t("div",{class:"xBRgW"},[s.isSensitive?(o(),a("div",te,l("Sensitive"),1)):x("",!0),c(H,{class:"xmYtB",file:s,fit:"contain"},null,8,["class","file"]),t("div",{class:"xmyxp"},[t("div",se,l(s.name),1),t("div",null,[t("span",ae,l(s.type),1),t("span",null,l(d(I)(s.size)),1)]),t("div",null,[t("span",null,[f(l("Joined on")+": ",1),c(S,{time:s.createdAt,mode:"detail"},null,8,["time"])])]),d(i)==="sizeDesc"?(o(),a("div",oe,[t("div",{class:"x9Pa4"},[t("div",{class:"xd0RG",style:G(z(s.size))},null,6)],2)])):x("",!0)],2)],2)],40,ee))),128))])]),_:1},8,["paginator"])]))])}}});export{he as default};

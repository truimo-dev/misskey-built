import{b as C,a as d,Z as M,aA as k,l as x,i as u,p as r,f as h,C as _,B as $,h as i,q as B,t as N,E as n,D as b,m as R}from"./3iSoGi4ic-D0mTJ0Mu.js";import{M as U}from"./3iSoGi4ic-PqEuquuW.js";import{ak as j,a7 as q,i as w,M as A,C as g,J as P,b2 as D,P as E}from"./3iSoGi4ic-DV-GuiCp.js";import{_ as I}from"./3iSoGi4ic-Dz5OvLqt.js";import{M as S}from"./3iSoGi4ic-DtDbNQ4_.js";import"./3iSoGi4ic-Dn35_-KQ.js";import"./3iSoGi4ic-CsUWgtg6.js";import"./3iSoGi4ic-B1GPmOGN.js";import"./3iSoGi4ic-CdSqfJMx.js";import"./3iSoGi4ic-Dv7rS4og.js";import"./3iSoGi4ic-D98_HDRS.js";import"./3iSoGi4ic-CZYXc2mx.js";const T={class:"_gaps"},W={class:"_gaps"},O={value:"combined"},F={value:"local"},J={value:"remote"},se=C({__name:"search.user",props:{query:{default:""},origin:{default:"combined"}},setup(V){const v=V,l=j(),y=d(0),c=M(null),p=d(k(v,"query").value),m=d(k(v,"origin").value);async function f(){const e=p.value.toString().trim();if(!(e==null||e==="")){if(e.startsWith("https://")&&!e.includes(" ")&&!(await g({type:"info",text:"Do you want to look up?"})).canceled){const o=P("ap/show",{uri:e});D(o,null,null,"Načítám data z Fediversu...");const s=await o;s.type==="User"?l.push("/@:acct/:page?",{params:{acct:`${s.object.username}@${s.object.host}`}}):s.type==="Note"&&l.push("/notes/:noteId/:initialTab?",{params:{noteId:s.object.id}});return}if(e.length>1&&!e.includes(" ")){if(e.startsWith("@")&&!(await g({type:"info",text:"Do you want to look up?"})).canceled){l.pushByPath(`/${e}`);return}if(e.startsWith("#")&&!(await g({type:"info",text:"Do you want to open a hashtag page?"})).canceled){l.push("/user-tags/:tag",{params:{tag:e.substring(1)}});return}}c.value=R(new E("users/search",{limit:10,offsetMode:!0,params:{query:e,origin:w.federation==="none"?"local":m.value}})),y.value++}}return(e,t)=>(u(),x("div",T,[r("div",W,[$(q,{modelValue:p.value,"onUpdate:modelValue":t[0]||(t[0]=o=>p.value=o),large:!0,autofocus:!0,type:"search",onEnter:B(f,["prevent"])},{prefix:i(()=>[...t[3]||(t[3]=[r("i",{class:"ti ti-search"},null,-1)])]),_:1},8,["modelValue"]),N(w).federation!=="none"?(u(),h(I,{key:0,modelValue:m.value,"onUpdate:modelValue":[t[1]||(t[1]=o=>m.value=o),t[2]||(t[2]=o=>f())]},{default:i(()=>[r("option",O,n("Vše"),1),r("option",F,n("Lokální"),1),r("option",J,n("Vzdálené"),1)]),_:1},8,["modelValue"])):_("",!0),$(A,{large:"",primary:"",gradate:"",rounded:"",onClick:f},{default:i(()=>[b(n("Vyhledávání"),1)]),_:1})]),c.value?(u(),h(S,{key:0},{header:i(()=>[b(n("Výsledky hledání"),1)]),default:i(()=>[(u(),h(U,{key:`searchUsers:${y.value}`,paginator:c.value},null,8,["paginator"]))]),_:1})):_("",!0)]))}});export{se as default};

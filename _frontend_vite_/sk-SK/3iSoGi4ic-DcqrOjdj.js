import{aB as g,G as S,H as $,I as b,J as x,aC as V,h as W}from"./3iSoGi4ic-DV-GuiCp.js";import{u as j}from"./3iSoGi4ic-DCTAa4Sx.js";import{M as q}from"./3iSoGi4ic-CC5SbM-1.js";import{b as z,a as A,c as E,f as _,i,h as p,l as o,t,g as T,p as a,D as Z,E as h,C as G,s as J}from"./3iSoGi4ic-D0mTJ0Mu.js";import"./3iSoGi4ic-B1GPmOGN.js";import"./3iSoGi4ic-D98_HDRS.js";const O={key:1,class:"ti ti-list"},F={key:2,class:"ti ti-antenna"},K={key:1},k="timeline",se=z({__name:"WidgetTimeline",props:{widget:{}},emits:["updateProps"],setup(v,{expose:w,emit:C}){const B={showHeader:{type:"boolean",default:!0},height:{type:"number",default:300},src:{type:"string",default:"home",hidden:!0},antenna:{type:"object",default:null,hidden:!0},list:{type:"object",default:null,hidden:!0}},d=v,M=C,{widgetProps:e,configure:D,save:H}=j(k,B,d,M),m=A(!1),I=E(()=>e.src==="list"&&e.list!=null?e.list.name:e.src==="antenna"&&e.antenna!=null?e.antenna.name:{"home":"Domov","local":"Lokálne","social":"Sociálne","global":"Globálne"}[e.src]),u=l=>{e.src=l,H()},P=async l=>{m.value=!0;const[r,N]=await Promise.all([x("antennas/list"),x("users/lists/list")]),f=r.map(s=>({text:s.name,icon:"ti ti-antenna",action:()=>{e.antenna=s,u("antenna")}})),y=N.map(s=>({text:s.name,icon:"ti ti-list",action:()=>{e.list=s,u("list")}})),n=[];n.push(...V().map(s=>({text:{"home":"Domov","local":"Lokálne","social":"Sociálne","global":"Globálne"}[s],icon:b(s),action:()=>{u(s)}}))),f.length>0&&(n.push({type:"divider"}),n.push(...f)),y.length>0&&(n.push({type:"divider"}),n.push(...y)),W(n,l.currentTarget??l.target).then(()=>{m.value=!1})};return w({name:k,configure:D,id:d.widget?d.widget.id:null}),(l,r)=>(i(),_(q,{showHeader:t(e).showHeader,style:J(`height: ${t(e).height}px;`),scrollable:!0,"data-cy-mkw-timeline":"",class:"mkw-timeline"},{icon:p(()=>[t(g)(t(e).src)?(i(),o("i",{key:0,class:T(t(b)(t(e).src))},null,2)):t(e).src==="list"?(i(),o("i",O)):t(e).src==="antenna"?(i(),o("i",F)):G("",!0)]),header:p(()=>[a("button",{class:"_button",onClick:P},[a("span",null,h(I.value),1),a("i",{class:T(m.value?"ti ti-chevron-up":"ti ti-chevron-down"),style:{"margin-left":"8px"}},null,2)])]),default:p(()=>[t(g)(t(e).src)&&!t(S)(t(e).src)?(i(),o("div",{key:0,class:"xlh41"},[a("p",{class:"xd97q"},[r[0]||(r[0]=a("i",{class:"ti ti-minus"},null,-1)),Z(" "+h("Timeline disabled"),1)],2),a("p",{class:"xTeZ3"},h("You cannot use this timeline under your current roles."),3)],2)):(i(),o("div",K,[(i(),_($,{key:t(e).src==="list"?`list:${t(e).list?.id}`:t(e).src==="antenna"?`antenna:${t(e).antenna?.id}`:t(e).src,src:t(e).src,list:t(e).list?t(e).list.id:void 0,antenna:t(e).antenna?t(e).antenna.id:void 0},null,8,["src","list","antenna"]))]))]),_:1},8,["showHeader","style"]))}});export{se as default};

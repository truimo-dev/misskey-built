import{u as Q}from"./3iSoGi4ic-DCTAa4Sx.js";import{M as ee}from"./3iSoGi4ic-CC5SbM-1.js";import{b8 as $,av as G}from"./3iSoGi4ic-DV-GuiCp.js";import{d as E,t as H,M as te}from"./3iSoGi4ic-DU45E0ni.js";import{b as U,c as w,a as i,e as ae,H as oe,l as v,i as c,C as I,p as L,F as j,A as W,E as V,s as ne,g as J,f as q,h as se,t as l,B as le}from"./3iSoGi4ic-D0mTJ0Mu.js";import"./3iSoGi4ic-B1GPmOGN.js";import"./3iSoGi4ic-D98_HDRS.js";const ue=["cx","cy","fill","opacity"],ie=["x","y","font-size","font-weight","fill","opacity"],re=["x1","y1","x2","y2","stroke","stroke-width"],ce=["x1","y1","x2","y2","stroke","stroke-width"],de=["x1","y1","x2","y2","stroke","stroke-width"],Y=.5,Z=.6,y=1,g=.7,S=.75,T=1,_=1,K=.35,me=U({__name:"MkAnalogClock",props:{thickness:{default:.1},offset:{default:0-new Date().getTimezoneOffset()},twentyfour:{type:Boolean,default:!1},graduations:{default:"dots"},fadeGraduations:{type:Boolean,default:!0},sAnimation:{default:"elastic"},now:{type:Function,default:()=>new Date}},setup(r){const M=(n,u)=>{const a=Math.abs(n-u);return Math.abs((a+Math.PI)%(Math.PI*2)-Math.PI)},o=r,N=w(()=>{const n=[],u=o.twentyfour?24:12;for(let a=0;a<u;a++){const s=Math.PI*a/(u/2);n.push(s)}return n}),p=w(()=>{const n=[],u=o.twentyfour?24:12;for(let a=0;a<u;a++){const s=Math.PI*a/(u/2);n.push(s)}return n});let z=!0;const t=i(),C=i(),A=i(),d=i(),x=i(),e=i(0),h=i(0),m=i(0),f=i(0),b=i(0),P=i(0),D=i(!1);let R=!1;const O=i();function k(){const n=o.now();n.setMinutes(n.getMinutes()+n.getTimezoneOffset()+o.offset);const u=m.value,a=h.value,s=e.value;m.value=n.getSeconds(),h.value=n.getMinutes(),e.value=n.getHours(),!(u===m.value&&a===h.value&&s===e.value)&&(f.value=Math.PI*(e.value%(o.twentyfour?24:12)+(h.value+m.value/60)/60)/(o.twentyfour?12:6),b.value=Math.PI*(h.value+m.value/60)/30,R&&O.value?(P.value=Math.PI*60/30,E.delete(k),O.value.addEventListener("transitionend",()=>{D.value=!0,requestAnimationFrame(()=>{P.value=0,requestAnimationFrame(()=>{D.value=!1,z&&E.add(k)})})},{once:!0})):P.value=Math.PI*m.value/30,R=m.value===59)}k();function B(){const n=getComputedStyle(window.document.documentElement),u=G(n.getPropertyValue("--MI_THEME-bg")).isDark(),a=G(n.getPropertyValue("--MI_THEME-accent")).toHexString();t.value=u?"rgba(255, 255, 255, 0.3)":"rgba(0, 0, 0, 0.3)",C.value=u?"rgba(255, 255, 255, 0.5)":"rgba(0, 0, 0, 0.3)",A.value=G(n.getPropertyValue("--MI_THEME-fg")).toHexString(),d.value=a,x.value=a}return B(),ae(()=>{E.add(k),$.on("themeChanged",B)}),oe(()=>{z=!1,E.delete(k),$.off("themeChanged",B)}),(n,u)=>(c(),v("svg",{class:"xrjeD",viewBox:"0 0 10 10",preserveAspectRatio:"none"},[o.graduations==="dots"?(c(!0),v(j,{key:0},W(N.value,(a,s)=>(c(),v("circle",{cx:5+Math.sin(a)*(5-Y),cy:5-Math.cos(a)*(5-Y),r:.125,fill:(o.twentyfour?e.value:e.value%12)===s?x.value:t.value,opacity:!o.fadeGraduations||(o.twentyfour?e.value:e.value%12)===s?1:Math.max(0,1-M(f.value,a)/Math.PI-K)},null,8,ue))),256)):o.graduations==="numbers"?(c(!0),v(j,{key:1},W(p.value,(a,s)=>(c(),v("text",{x:5+Math.sin(a)*(5-Z),y:5-Math.cos(a)*(5-Z),"text-anchor":"middle","dominant-baseline":"middle","font-size":(o.twentyfour?e.value:e.value%12)===s?1:.7,"font-weight":(o.twentyfour?e.value:e.value%12)===s?"bold":"normal",fill:(o.twentyfour?e.value:e.value%12)===s?x.value:"currentColor",opacity:!o.fadeGraduations||(o.twentyfour?e.value:e.value%12)===s?1:Math.max(0,1-M(f.value,a)/Math.PI-K)},V(s===0?o.twentyfour?"24":"12":s),9,ie))),256)):I("",!0),L("line",{ref_key:"sLine",ref:O,class:J(["xzyu8",{xq32K:!D.value&&r.sAnimation!=="none",xznai:r.sAnimation==="elastic",xCu8a:r.sAnimation==="easeOut"}]),x1:5-0*(_*g),y1:5+1*(_*g),x2:5+0*(_*5-y),y2:5-1*(_*5-y),stroke:C.value,"stroke-width":r.thickness/2,style:ne(`transform: rotateZ(${P.value}rad)`),"stroke-linecap":"round"},null,14,re),L("line",{x1:5-Math.sin(b.value)*(T*g),y1:5+Math.cos(b.value)*(T*g),x2:5+Math.sin(b.value)*(T*5-y),y2:5-Math.cos(b.value)*(T*5-y),stroke:A.value,"stroke-width":r.thickness,"stroke-linecap":"round"},null,8,ce),L("line",{x1:5-Math.sin(f.value)*(S*g),y1:5+Math.cos(f.value)*(S*g),x2:5+Math.sin(f.value)*(S*5-y),y2:5-Math.cos(f.value)*(S*5-y),stroke:d.value,"stroke-width":r.thickness,"stroke-linecap":"round"},null,8,de)],2))}});const X="clock",we=U({__name:"WidgetClock",props:{widget:{}},emits:["updateProps"],setup(r,{expose:M,emit:o}){const N={transparent:{type:"boolean",default:!1},size:{type:"radio",default:"medium",options:[{value:"small",label:"Malé"},{value:"medium",label:"Stredné"},{value:"large",label:"Veľké"}]},thickness:{type:"radio",default:.2,options:[{value:.1,label:"thin"},{value:.2,label:"medium"},{value:.3,label:"thick"}]},graduations:{type:"radio",default:"numbers",options:[{value:"none",label:"None"},{value:"dots",label:"Dots"},{value:"numbers",label:"Numbers"}]},fadeGraduations:{type:"boolean",default:!0},sAnimation:{type:"radio",default:"elastic",options:[{value:"none",label:"None"},{value:"elastic",label:"Elastic"},{value:"easeOut",label:"Ease out"}]},twentyFour:{type:"boolean",default:!1},label:{type:"radio",default:"none",options:[{value:"none",label:"None"},{value:"time",label:"Time"},{value:"tz",label:"TZ"},{value:"timeAndTz",label:"Time + TZ"}]},timezone:{type:"enum",default:null,enum:[...H.map(e=>({label:e.name,value:e.name.toLowerCase()})),{label:"(auto)",value:null}]}},p=r,z=o,{widgetProps:t,configure:C}=Q(X,N,p,z),A=w(()=>(t.timezone===null?H.find(e=>e.name.toLowerCase()===Intl.DateTimeFormat().resolvedOptions().timeZone.toLowerCase())?.abbrev:H.find(e=>e.name.toLowerCase()===t.timezone)?.abbrev)??"?"),d=w(()=>t.timezone===null?0-new Date().getTimezoneOffset():H.find(e=>e.name.toLowerCase()===t.timezone)?.offset??0),x=w(()=>(d.value>=0?"+":"-")+Math.floor(d.value/60).toString().padStart(2,"0")+":"+(d.value%60).toString().padStart(2,"0"));return M({name:X,configure:C,id:p.widget?p.widget.id:null}),(e,h)=>(c(),q(ee,{naked:l(t).transparent,showHeader:!1,"data-cy-mkw-clock":""},{default:se(()=>[L("div",{class:J(["xtNeE",{xmABV:l(t).size==="small",x1Scx:l(t).size==="medium",xpPXc:l(t).size==="large"}])},[l(t).label==="tz"||l(t).label==="timeAndTz"?(c(),v("div",{key:0,class:"_monospace x4NYE xbGsr"},V(A.value),3)):I("",!0),le(me,{class:"xbwb7",thickness:l(t).thickness,offset:d.value,graduations:l(t).graduations,fadeGraduations:l(t).fadeGraduations,twentyfour:l(t).twentyFour,sAnimation:l(t).sAnimation},null,8,["class","thickness","offset","graduations","fadeGraduations","twentyfour","sAnimation"]),l(t).label==="time"||l(t).label==="timeAndTz"?(c(),q(te,{key:1,class:"x4NYE x3teH _monospace",showS:!1,offset:d.value},null,8,["class","offset"])):I("",!0),l(t).label==="tz"||l(t).label==="timeAndTz"?(c(),v("div",{key:2,class:"_monospace x4NYE xEzLW"},V(x.value),3)):I("",!0)],2)]),_:1},8,["naked"]))}});export{we as default};

const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["https://fastly.jsdelivr.net/gh/truimo-dev/misskey-built@latest/_frontend_vite_/scripts/3iSoGi4ic-ftwQNN7y.js","https://fastly.jsdelivr.net/gh/truimo-dev/misskey-built@latest/_frontend_vite_/scripts/3iSoGi4ic-DV-GuiCp.js","https://fastly.jsdelivr.net/gh/truimo-dev/misskey-built@latest/_frontend_vite_/scripts/3iSoGi4ic-D0mTJ0Mu.js","https://fastly.jsdelivr.net/gh/truimo-dev/misskey-built@latest/_frontend_vite_/scripts/3iSoGi4ic-B1GPmOGN.js","https://fastly.jsdelivr.net/gh/truimo-dev/misskey-built@latest/_frontend_vite_/scripts/3iSoGi4ic-Dty8GuTz.js","https://fastly.jsdelivr.net/gh/truimo-dev/misskey-built@latest/_frontend_vite_/scripts/3iSoGi4ic-D98_HDRS.js","https://fastly.jsdelivr.net/gh/truimo-dev/misskey-built@latest/_frontend_vite_/assets/3iSoGi4ic-DZU1WGtr.css","https://fastly.jsdelivr.net/gh/truimo-dev/misskey-built@latest/_frontend_vite_/assets/3iSoGi4ic-9GwroBN9.css","https://fastly.jsdelivr.net/gh/truimo-dev/misskey-built@latest/_frontend_vite_/scripts/3iSoGi4ic-CC5SbM-1.js","https://fastly.jsdelivr.net/gh/truimo-dev/misskey-built@latest/_frontend_vite_/assets/3iSoGi4ic-BgKfJtXH.css","https://fastly.jsdelivr.net/gh/truimo-dev/misskey-built@latest/_frontend_vite_/scripts/3iSoGi4ic-Dnu5vSVE.js","https://fastly.jsdelivr.net/gh/truimo-dev/misskey-built@latest/_frontend_vite_/assets/3iSoGi4ic-uCC8U3cW.css","https://fastly.jsdelivr.net/gh/truimo-dev/misskey-built@latest/_frontend_vite_/assets/3iSoGi4ic-BS-S31Zh.css","https://fastly.jsdelivr.net/gh/truimo-dev/misskey-built@latest/_frontend_vite_/scripts/3iSoGi4ic-ShiH8sE6.js","https://fastly.jsdelivr.net/gh/truimo-dev/misskey-built@latest/_frontend_vite_/scripts/3iSoGi4ic-BWBLHwGQ.js","https://fastly.jsdelivr.net/gh/truimo-dev/misskey-built@latest/_frontend_vite_/scripts/3iSoGi4ic-CqmhgU-Q.js","https://fastly.jsdelivr.net/gh/truimo-dev/misskey-built@latest/_frontend_vite_/assets/3iSoGi4ic-BjhW5f40.css","https://fastly.jsdelivr.net/gh/truimo-dev/misskey-built@latest/_frontend_vite_/scripts/3iSoGi4ic-BPp9MNgd.js","https://fastly.jsdelivr.net/gh/truimo-dev/misskey-built@latest/_frontend_vite_/scripts/3iSoGi4ic-y3_HjM0O.js","https://fastly.jsdelivr.net/gh/truimo-dev/misskey-built@latest/_frontend_vite_/scripts/3iSoGi4ic-C7_f0Ypu.js","https://fastly.jsdelivr.net/gh/truimo-dev/misskey-built@latest/_frontend_vite_/assets/3iSoGi4ic-B2qmb-TD.css","https://fastly.jsdelivr.net/gh/truimo-dev/misskey-built@latest/_frontend_vite_/assets/3iSoGi4ic-Bi2fFNSK.css","https://fastly.jsdelivr.net/gh/truimo-dev/misskey-built@latest/_frontend_vite_/scripts/3iSoGi4ic-iHxvUufR.js","https://fastly.jsdelivr.net/gh/truimo-dev/misskey-built@latest/_frontend_vite_/scripts/3iSoGi4ic-mUIS9yQt.js","https://fastly.jsdelivr.net/gh/truimo-dev/misskey-built@latest/_frontend_vite_/scripts/3iSoGi4ic-CdSqfJMx.js","https://fastly.jsdelivr.net/gh/truimo-dev/misskey-built@latest/_frontend_vite_/scripts/3iSoGi4ic-Dv7rS4og.js","https://fastly.jsdelivr.net/gh/truimo-dev/misskey-built@latest/_frontend_vite_/assets/3iSoGi4ic-BbG5vB-s.css","https://fastly.jsdelivr.net/gh/truimo-dev/misskey-built@latest/_frontend_vite_/assets/3iSoGi4ic-DnhnJG_2.css","https://fastly.jsdelivr.net/gh/truimo-dev/misskey-built@latest/_frontend_vite_/assets/3iSoGi4ic-26XO5D71.css","https://fastly.jsdelivr.net/gh/truimo-dev/misskey-built@latest/_frontend_vite_/scripts/3iSoGi4ic-UCD0eRzT.js","https://fastly.jsdelivr.net/gh/truimo-dev/misskey-built@latest/_frontend_vite_/assets/3iSoGi4ic-ByiXuA1e.css","https://fastly.jsdelivr.net/gh/truimo-dev/misskey-built@latest/_frontend_vite_/assets/3iSoGi4ic-DBTHI4aT.css"])))=>i.map(i=>d[i]);
import{J as K,dA as xe,_ as we,ak as Te,b as ae,b9 as Ce,R as ne,$ as S,a4 as Ae,c3 as De,M as Ee,aA as Y,aW as j,aL as Ne,aI as Ie,e as X,dl as Ve,h as Fe,aN as ue}from"./3iSoGi4ic-DV-GuiCp.js";import{b as G,a as g,l as o,C as a,i as l,p as t,D as p,B as d,E as n,t as i,g as q,K as Se,u as U,e as ve,o as me,x as $e,w as ie,c as re,n as de,L as Pe,M as Re,z as C,k as ce,f as v,h as m,s as W,F as B,A as Z,j as L,S as ze,d as J,U as Be}from"./3iSoGi4ic-D0mTJ0Mu.js";import{M as Le,i as Ue,a as Oe}from"./3iSoGi4ic-CsUWgtg6.js";import{h as He}from"./3iSoGi4ic-B1GPmOGN.js";import{M as Ye}from"./3iSoGi4ic-DID2kkuO.js";import{M as je}from"./3iSoGi4ic-Db5Eufi0.js";import{M as Xe}from"./3iSoGi4ic-BDF7xMl0.js";import{d as We}from"./3iSoGi4ic-y3_HjM0O.js";import{c as Ze}from"./3iSoGi4ic-DbFLP2ql.js";import"./3iSoGi4ic-D98_HDRS.js";const Je=G({__name:"MkAccountMoved",props:{movedTo:{}},setup(A){const y=g();return K("users/show",{userId:A.movedTo}).then(k=>y.value=k),(k,M)=>y.value?(l(),o("div",{key:0,class:"xrpyf"},[M[0]||(M[0]=t("i",{class:"ti ti-plane-departure",style:{"margin-right":"8px"}},null,-1)),p(" "+n("This user has moved to a new account:")+" ",1),d(xe,{class:"xkVjY",username:y.value.username,host:y.value.host??i(He)},null,8,["class","username","host"])],2)):a("",!0)}});const Ke=G({__name:"MkOmit",props:{maxHeight:{default:200}},setup(A){Se(D=>({v136cccae:y.maxHeight+"px"}));const y=A,w=U("content"),k=g(!1),M=g(!1),z=()=>{k.value||M.value||w.value==null||(k.value=w.value.offsetHeight>y.maxHeight)},c=new ResizeObserver((D,$)=>{z()});return ve(()=>{z(),c.observe(w.value)}),me(()=>{c.disconnect()}),(D,$)=>(l(),o("div",{ref_key:"content",ref:w,class:q(["xjzyI",{x4VVY:k.value}])},[$e(D.$slots,"default"),k.value?(l(),o("button",{key:0,class:"xwz1t _button",onClick:$[0]||($[0]=()=>{M.value=!0,k.value=!1})},[t("span",{class:"x21Z5"},n("Show more"),3)],2)):a("",!0)],2))}});const qe={class:"main _gaps"},Ge={class:"profile _gaps"},Qe={class:"title"},et={class:"bottom"},tt={class:"username"},st={key:0},lt={key:1},ot={key:0,class:"followed"},at={class:"actions"},nt={class:"title"},ut={class:"bottom"},it={class:"username"},rt={key:0},dt={key:1},ct={key:0,class:"followedMessage"},vt={class:"messageHeader"},mt={key:1,class:"roles"},pt=["src"],ft={key:2,class:"moderationNote"},_t={key:1},kt=["textContent"],yt={class:"description"},ht={key:1,class:"empty"},gt={class:"fields system"},Mt={key:0,class:"field"},bt={class:"name"},xt={class:"value"},wt={key:1,class:"field"},Tt={class:"name"},Ct={class:"value"},At={class:"field"},Dt={class:"name"},Et={class:"value"},Nt={key:4,class:"fields"},It={class:"name"},Vt={class:"value"},Ft={class:"status"},St={class:"contents _gaps"},$t={key:0,class:"_gaps"},Pt={key:3},Rt={key:0,class:"sub _gaps",style:{"container-type":"inline-size"}},zt=G({__name:"home",props:{user:{},disableNotes:{type:Boolean,default:!1}},emits:["showMoreFiles"],setup(A,{emit:y}){function w(f){const s=new Date(f),_=new Date;let h=_.getFullYear()-s.getFullYear();const V=_.getMonth()-s.getMonth(),x=_.getDate()<s.getDate();return(V<0||V===0&&x)&&h--,h}const k=J(()=>X(()=>import("./3iSoGi4ic-ftwQNN7y.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12]),import.meta.url)),M=J(()=>X(()=>import("./3iSoGi4ic-ShiH8sE6.js"),__vite__mapDeps([13,1,2,3,4,5,6,7,8,9,14,15,16,17,18,19,20,21]),import.meta.url)),z=J(()=>X(()=>import("./3iSoGi4ic-iHxvUufR.js"),__vite__mapDeps([22,1,2,3,4,5,6,7,23,24,25,26,27,28,29,30,31]),import.meta.url)),c=A,D=y,$=Te(),e=g(c.user),E=g(null),Q=U("rootEl"),b=U("bannerEl"),N=U("memoTextareaEl"),T=g(c.user.memo),P=g(!1),I=g(c.user.moderationNote??""),ee=g(!1);ie(I,async()=>{await K("admin/update-user-note",{userId:c.user.id,text:I.value})});const pe=re(()=>c.user.bannerUrl==null?{}:ae.s.disableShowingAnimatedImages?{backgroundImage:`url(${Ce(c.user.bannerUrl)})`}:{backgroundImage:`url(${c.user.bannerUrl})`}),fe=re(()=>c.user.birthday?w(c.user.birthday):NaN);function _e(f){const{menu:s,cleanup:_}=Ve(e.value,$);Fe(s,f.currentTarget??f.target).finally(_)}function ke(){P.value=!0,de(()=>{N.value?.focus()})}function te(){N.value&&(N.value.style.height="0px",N.value.style.height=`${N.value.scrollHeight}px`)}async function ye(){await K("users/update-memo",{memo:T.value,userId:c.user.id}),P.value=!1}ie([c.user],()=>{T.value=c.user.memo});async function he(){}let R=null;function O(){if(!b.value||!CSS.supports("view-timeline-inset","auto 100px"))return;const f=b.value.getBoundingClientRect(),s=ue(b.value),_=s?.scrollTop??window.scrollY,h=s?.clientHeight??window.innerHeight,V=s?.getBoundingClientRect().top??0,x=_+f.top-V,F=h-x;b.value.style.setProperty("--bannerParallaxInset",`auto ${F}px`)}function se(){const f=b.value?ue(b.value):null;f!=null&&CSS.supports("view-timeline-inset","auto 100px")&&(R=new ResizeObserver(()=>{O()}),R.observe(f))}function le(){R&&(R.disconnect(),R=null)}return ve(()=>{if(E.value=Q.value.clientWidth<1e3,c.user.birthday){const f=new Date().getMonth()+1,s=new Date().getDate(),_=parseInt(c.user.birthday.split("-")[1]),h=parseInt(c.user.birthday.split("-")[2]);f===_&&s===h&&Ze({duration:1e3*4})}de(()=>{O(),te()}),se()}),Pe(()=>{b.value&&(O(),se())}),me(le),Re(le),(f,s)=>{const _=C("MkUserName"),h=C("MkAcct"),V=C("MkAvatar"),x=C("Mfm"),F=C("MkA"),ge=C("MkTime"),H=C("MkLazy"),Me=ce("adaptive-bg"),oe=ce("tooltip");return l(),v(Be(i(ae).s.enablePullToRefresh?Ie:"div"),{refresher:()=>he()},{default:m(()=>[t("div",{class:"_spacer",style:W({"--MI_SPACER-w":E.value?"800px":"1100px"})},[t("div",{ref_key:"rootEl",ref:Q,class:q(["ftskorzw",{wide:!E.value}]),style:{"container-type":"inline-size"}},[t("div",qe,[t("div",Ge,[e.value.movedTo?(l(),v(Je,{key:0,movedTo:e.value.movedTo},null,8,["movedTo"])):a("",!0),e.value.host!=null?(l(),v(je,{key:1,href:e.value.url??e.value.uri},null,8,["href"])):a("",!0),e.value.host==null&&e.value.username.includes(".")?(l(),v(ne,{key:2},{default:m(()=>[p(n("An account created and automatically operated by the system."),1)]),_:1})):a("",!0),(l(),o("div",{key:e.value.id,class:"main _panel"},[t("div",{ref_key:"bannerEl",ref:b,class:"banner-container"},[t("div",{class:"banner",style:W(pe.value)},null,4),s[11]||(s[11]=t("div",{class:"fade"},null,-1)),t("div",Qe,[d(_,{class:"name",user:e.value,nowrap:!0},null,8,["user"]),t("div",et,[t("span",tt,[d(h,{user:e.value,detail:!0},null,8,["user"])]),e.value.isLocked?(l(),o("span",st,[...s[7]||(s[7]=[t("i",{class:"ti ti-lock"},null,-1)])])):a("",!0),e.value.isBot?(l(),o("span",lt,[...s[8]||(s[8]=[t("i",{class:"ti ti-robot"},null,-1)])])):a("",!0),i(S)&&!P.value&&!T.value?(l(),o("button",{key:2,class:"_button add-note-button",onClick:ke},[s[9]||(s[9]=t("i",{class:"ti ti-edit"},null,-1)),p(" "+n("Add memo"),1)])):a("",!0)])]),i(S)&&i(S).id!=e.value.id&&e.value.isFollowed?(l(),o("span",ot,n("Follows you"),1)):a("",!0),t("div",at,[t("button",{class:"menu _button",onClick:_e},[...s[10]||(s[10]=[t("i",{class:"ti ti-dots"},null,-1)])]),i(S)?.id!=e.value.id?(l(),v(Le,{key:0,user:e.value,"onUpdate:user":s[0]||(s[0]=u=>e.value=u),inline:!0,transparent:!1,full:!0,class:"koudoku"},null,8,["user"])):a("",!0)])],512),d(V,{class:"avatar",user:e.value,indicator:""},null,8,["user"]),t("div",nt,[d(_,{user:e.value,nowrap:!1,class:"name"},null,8,["user"]),t("div",ut,[t("span",it,[d(h,{user:e.value,detail:!0},null,8,["user"])]),e.value.isLocked?(l(),o("span",rt,[...s[12]||(s[12]=[t("i",{class:"ti ti-lock"},null,-1)])])):a("",!0),e.value.isBot?(l(),o("span",dt,[...s[13]||(s[13]=[t("i",{class:"ti ti-robot"},null,-1)])])):a("",!0)])]),e.value.followedMessage!=null?(l(),o("div",ct,[d(Ye,{class:"fukidashi",tail:E.value?"none":"left",negativeMargin:""},{default:m(()=>[t("div",vt,n("Message to followers"),1),t("div",null,[d(Ae,null,{default:m(()=>[d(x,{plain:!0,text:e.value.followedMessage,author:e.value,class:"_selectable"},null,8,["text","author"])]),_:1})])]),_:1},8,["tail"])])):a("",!0),e.value.roles.length>0?(l(),o("div",mt,[(l(!0),o(B,null,Z(e.value.roles,u=>L((l(),o("span",{key:u.id,class:"role",style:W({"--color":u.color??""})},[L((l(),v(F,{to:`/roles/${u.id}`},{default:m(()=>[u.iconUrl?(l(),o("img",{key:0,style:{height:"1.3em","vertical-align":"-22%"},src:u.iconUrl},null,8,pt)):a("",!0),p(" "+n(u.name),1)]),_:2},1032,["to"])),[[Me]])],4)),[[oe,u.description]])),128))])):a("",!0),i(De)?(l(),o("div",ft,[ee.value||I.value!=null&&I.value!==""?(l(),v(Xe,{key:0,modelValue:I.value,"onUpdate:modelValue":s[1]||(s[1]=u=>I.value=u),manualSave:""},{label:m(()=>[p(n("Moderation note"),1)]),caption:m(()=>[p(n("You can fill in notes that will be shared only among moderators."),1)]),_:1},8,["modelValue"])):(l(),o("div",_t,[d(Ee,{small:"",onClick:s[2]||(s[2]=u=>ee.value=!0)},{default:m(()=>[p(n("Add moderation note"),1)]),_:1})]))])):a("",!0),P.value||T.value?(l(),o("div",{key:3,class:q(["memo",{"no-memo":!T.value}])},[t("div",{class:"heading",textContent:n("Memo")},null,8,kt),L(t("textarea",{ref_key:"memoTextareaEl",ref:N,"onUpdate:modelValue":s[3]||(s[3]=u=>T.value=u),rows:"1",onFocus:s[4]||(s[4]=u=>P.value=!0),onBlur:ye,onInput:te},null,544),[[ze,T.value]])],2)):a("",!0),t("div",yt,[d(Ke,null,{default:m(()=>[e.value.description?(l(),v(x,{key:0,text:e.value.description,isNote:!1,author:e.value,class:"_selectable"},null,8,["text","author"])):(l(),o("p",ht,n("This user has not written their bio yet."),1))]),_:1})]),t("div",gt,[e.value.location?(l(),o("dl",Mt,[t("dt",bt,[s[14]||(s[14]=t("i",{class:"ti ti-map-pin ti-fw"},null,-1)),p(" "+n("Location"),1)]),t("dd",xt,n(e.value.location),1)])):a("",!0),e.value.birthday?(l(),o("dl",wt,[t("dt",Tt,[s[15]||(s[15]=t("i",{class:"ti ti-cake ti-fw"},null,-1)),p(" "+n("Birthday"),1)]),t("dd",Ct,n(e.value.birthday.replace("-","/").replace("-","/"))+" ("+n((({age})=>(age+" years old"))({age:fe.value}))+")",1)])):a("",!0),t("dl",At,[t("dt",Dt,[s[16]||(s[16]=t("i",{class:"ti ti-calendar ti-fw"},null,-1)),p(" "+n("Joined on"),1)]),t("dd",Et,[p(n(i(We)(e.value.createdAt))+" (",1),d(ge,{time:e.value.createdAt},null,8,["time"]),s[17]||(s[17]=p(")",-1))])])]),e.value.fields.length>0?(l(),o("div",Nt,[(l(!0),o(B,null,Z(e.value.fields,(u,be)=>(l(),o("dl",{key:be,class:"field"},[t("dt",It,[d(x,{text:u.name,author:e.value,plain:!0,colored:!1,class:"_selectable"},null,8,["text","author"])]),t("dd",Vt,[d(x,{text:u.value,author:e.value,colored:!1,class:"_selectable"},null,8,["text","author"]),e.value.verifiedLinks.includes(u.value)?L((l(),o("i",{key:0,class:"ti ti-circle-check xlE12"},null,2)),[[oe,"Link ownership has been verified","dialog"]]):a("",!0)])]))),128))])):a("",!0),t("div",Ft,[d(F,{to:i(Y)(e.value,"notes")},{default:m(()=>[t("b",null,n(i(j)(e.value.notesCount)),1),t("span",null,n("Notes"),1)]),_:1},8,["to"]),i(Ue)(e.value)?(l(),v(F,{key:0,to:i(Y)(e.value,"following")},{default:m(()=>[t("b",null,n(i(j)(e.value.followingCount)),1),t("span",null,n("Following"),1)]),_:1},8,["to"])):a("",!0),i(Oe)(e.value)?(l(),v(F,{key:1,to:i(Y)(e.value,"followers")},{default:m(()=>[t("b",null,n(i(j)(e.value.followersCount)),1),t("span",null,n("Followers"),1)]),_:1},8,["to"])):a("",!0)])]))]),t("div",St,[e.value.pinnedNotes.length>0?(l(),o("div",$t,[(l(!0),o(B,null,Z(e.value.pinnedNotes,u=>(l(),v(Ne,{key:u.id,class:"note _panel",note:u,pinned:!0},null,8,["note"]))),128))])):i(S)&&i(S).id===e.value.id?(l(),v(ne,{key:1},{default:m(()=>[p(n("You can display notes here by selecting \"Pin to profile\" from the menu of individual notes."),1)]),_:1})):a("",!0),E.value?(l(),o(B,{key:2},[d(H,null,{default:m(()=>[(l(),v(i(k),{key:e.value.id,user:e.value,onShowMore:s[5]||(s[5]=u=>D("showMoreFiles"))},null,8,["user"]))]),_:1}),d(H,null,{default:m(()=>[(l(),v(i(M),{key:e.value.id,user:e.value},null,8,["user"]))]),_:1})],64)):a("",!0),A.disableNotes?a("",!0):(l(),o("div",Pt,[d(H,null,{default:m(()=>[d(i(z),{user:e.value},null,8,["user"])]),_:1})]))])]),E.value?a("",!0):(l(),o("div",Rt,[(l(),v(i(k),{key:e.value.id,user:e.value,onShowMore:s[6]||(s[6]=u=>D("showMoreFiles"))},null,8,["user"])),(l(),v(i(M),{key:e.value.id,user:e.value},null,8,["user"]))]))],2)],4)]),_:1},8,["refresher"])}}});const Kt=we(zt,[["__scopeId","data-v-8948a4b6"]]);export{Kt as default};

const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["https://fastly.jsdelivr.net/gh/truimo-dev/misskey-built@latest/_frontend_vite_/scripts/3iSoGi4ic-DV-GuiCp.js","https://fastly.jsdelivr.net/gh/truimo-dev/misskey-built@latest/_frontend_vite_/scripts/3iSoGi4ic-D0mTJ0Mu.js","https://fastly.jsdelivr.net/gh/truimo-dev/misskey-built@latest/_frontend_vite_/scripts/3iSoGi4ic-B1GPmOGN.js","https://fastly.jsdelivr.net/gh/truimo-dev/misskey-built@latest/_frontend_vite_/scripts/3iSoGi4ic-Dty8GuTz.js","https://fastly.jsdelivr.net/gh/truimo-dev/misskey-built@latest/_frontend_vite_/scripts/3iSoGi4ic-D98_HDRS.js","https://fastly.jsdelivr.net/gh/truimo-dev/misskey-built@latest/_frontend_vite_/assets/3iSoGi4ic-DZU1WGtr.css","https://fastly.jsdelivr.net/gh/truimo-dev/misskey-built@latest/_frontend_vite_/assets/3iSoGi4ic-9GwroBN9.css","https://fastly.jsdelivr.net/gh/truimo-dev/misskey-built@latest/_frontend_vite_/scripts/3iSoGi4ic-TYZmGoTZ.js","https://fastly.jsdelivr.net/gh/truimo-dev/misskey-built@latest/_frontend_vite_/scripts/3iSoGi4ic-i0V9UGTl.js","https://fastly.jsdelivr.net/gh/truimo-dev/misskey-built@latest/_frontend_vite_/scripts/3iSoGi4ic-Cj3FgKaq.js","https://fastly.jsdelivr.net/gh/truimo-dev/misskey-built@latest/_frontend_vite_/scripts/3iSoGi4ic-CS6W3O_2.js","https://fastly.jsdelivr.net/gh/truimo-dev/misskey-built@latest/_frontend_vite_/assets/3iSoGi4ic-BoLiR7-4.css","https://fastly.jsdelivr.net/gh/truimo-dev/misskey-built@latest/_frontend_vite_/scripts/3iSoGi4ic-CdSqfJMx.js","https://fastly.jsdelivr.net/gh/truimo-dev/misskey-built@latest/_frontend_vite_/scripts/3iSoGi4ic-Dv7rS4og.js","https://fastly.jsdelivr.net/gh/truimo-dev/misskey-built@latest/_frontend_vite_/assets/3iSoGi4ic-BbG5vB-s.css","https://fastly.jsdelivr.net/gh/truimo-dev/misskey-built@latest/_frontend_vite_/assets/3iSoGi4ic-DnhnJG_2.css","https://fastly.jsdelivr.net/gh/truimo-dev/misskey-built@latest/_frontend_vite_/assets/3iSoGi4ic-BMRhXjvk.css","https://fastly.jsdelivr.net/gh/truimo-dev/misskey-built@latest/_frontend_vite_/scripts/3iSoGi4ic-CC5SbM-1.js","https://fastly.jsdelivr.net/gh/truimo-dev/misskey-built@latest/_frontend_vite_/assets/3iSoGi4ic-BgKfJtXH.css","https://fastly.jsdelivr.net/gh/truimo-dev/misskey-built@latest/_frontend_vite_/scripts/3iSoGi4ic-85Ds6Ccp.js","https://fastly.jsdelivr.net/gh/truimo-dev/misskey-built@latest/_frontend_vite_/assets/3iSoGi4ic-BiJekLPT.css","https://fastly.jsdelivr.net/gh/truimo-dev/misskey-built@latest/_frontend_vite_/scripts/3iSoGi4ic-qfX4D5dB.js","https://fastly.jsdelivr.net/gh/truimo-dev/misskey-built@latest/_frontend_vite_/scripts/3iSoGi4ic-BDF7xMl0.js","https://fastly.jsdelivr.net/gh/truimo-dev/misskey-built@latest/_frontend_vite_/assets/3iSoGi4ic-8Z3zIVAA.css","https://fastly.jsdelivr.net/gh/truimo-dev/misskey-built@latest/_frontend_vite_/assets/3iSoGi4ic-BMNL0SP4.css"])))=>i.map(i=>d[i]);
import{bs as ge,bt as me,bu as ve,e as N,bo as ke,J,aL as xe,ak as fe,P as be,az as he,b as C,bv as ye,i as w,b9 as _e,bw as Me,$ as f,M as W,bx as Ie,j as $e,by as Ae,h as z,bz as Be,c as Ce,L as P,C as H,d as we}from"./3iSoGi4ic-DV-GuiCp.js";import{b as y,z as v,l as o,i as a,B as r,C as k,t as u,F,A as U,f as c,d as Y,g as q,p as l,h as g,D as M,E as h,U as G,a as E,e as K,m as Pe,c as L,w as Le,k as O,T as Te,j as b}from"./3iSoGi4ic-D0mTJ0Mu.js";import{u as T}from"./3iSoGi4ic-B1GPmOGN.js";import{M as Ee}from"./3iSoGi4ic-i0V9UGTl.js";import{M as Fe}from"./3iSoGi4ic-CC5SbM-1.js";import{M as Ue}from"./3iSoGi4ic-CdSqfJMx.js";import{M as De}from"./3iSoGi4ic-85Ds6Ccp.js";const Ne={key:0,class:"_gaps_s"},Re=y({__name:"page.text",props:{block:{},page:{}},setup(s){const d=Y(()=>N(()=>import("./3iSoGi4ic-DV-GuiCp.js").then(m=>m.dF),__vite__mapDeps([0,1,2,3,4,5,6]),import.meta.url)),n=s,e=n.block.text?ge(me.parse(n.block.text)):[];return(m,R)=>{const D=v("Mfm");return a(),o("div",{class:"_gaps xi0Lp"},[r(D,{text:s.block.text??"",isNote:!1},null,8,["text"]),u(ve)?(a(),o("div",Ne,[(a(!0),o(F,null,U(u(e),I=>(a(),c(u(d),{key:I,url:I},null,8,["url"]))),128))])):k("",!0)],2)}}});const Ve={class:"_gaps"},Se=y({__name:"page.section",props:{block:{},h:{},page:{}},setup(s){const d=Y(()=>N(()=>import("./3iSoGi4ic-TYZmGoTZ.js"),__vite__mapDeps([7,0,1,2,3,4,5,6,8,9,10,11,12,13,14,15,16,17,18,19,20]),import.meta.url));return(n,e)=>(a(),o("section",null,[(a(),c(G("h"+s.h),{class:q({h2:s.h===2,h3:s.h===3,h4:s.h===4})},{default:g(()=>[M(h(s.block.title),1)]),_:1},8,["class"])),l("div",Ve,[(a(!0),o(F,null,U(s.block.children,m=>(a(),c(u(d),{key:m.id,page:s.page,block:m,h:s.h+1},null,8,["page","block","h"]))),128))])]))}});const Xe=y({__name:"page.image",props:{block:{},page:{}},setup(s){const d=s,n=E(null);return K(()=>{n.value=d.page.attachedFiles.find(e=>e.id===d.block.fileId)??null}),(e,m)=>(a(),o("div",{class:"xcGB2"},[n.value?(a(),c(ke,{key:0,mediaList:[n.value],class:"xyIhb"},null,8,["mediaList","class"])):k("",!0)],2))}});const je=y({__name:"page.note",props:{block:{},page:{}},setup(s){const d=s,n=E(null);return K(()=>{d.block.note!=null&&J("notes/show",{noteId:d.block.note}).then(e=>{n.value=e})}),(e,m)=>(a(),o("div",{class:"xpEOD"},[n.value&&!s.block.detailed?(a(),c(xe,{key:n.value.id+":normal",note:n.value},null,8,["note"])):k("",!0),n.value&&s.block.detailed?(a(),c(Ee,{key:n.value.id+":detail",note:n.value},null,8,["note"])):k("",!0)],2))}});const We=y({__name:"page.dynamic",props:{block:{},page:{}},setup(s){return(d,n)=>{const e=v("MkA"),m=v("I18n");return a(),o("div",{class:"xeF5K"},[l("div",{class:"xqOo5"},[n[0]||(n[0]=l("i",{class:"ti ti-dice-5"},null,-1)),M(" "+h("Dynamic Blocks"),1)],2),r(m,{src:"This block has been abolished. Please use {play} from now on.",tag:"div",class:"xn1qJ"},{play:g(()=>[r(e,{to:"/play",class:"_link"},{default:g(()=>[...n[1]||(n[1]=[M("Play",-1)])]),_:1})]),_:1},8,["src","class"])],2)}}});const ze=y({__name:"page.block",props:{block:{},h:{},page:{}},setup(s){function d(n){switch(n){case"text":return Re;case"section":return Se;case"image":return Xe;case"note":return je;case"button":case"if":case"textarea":case"post":case"canvas":case"numberInput":case"textInput":case"switch":case"radioButton":case"counter":return We;default:return null}}return(n,e)=>(a(),c(G(d(s.block.type)),{key:s.block.id,page:s.page,block:s.block,h:s.h},null,8,["page","block","h"]))}}),He=y({__name:"page",props:{page:{}},setup(s){return(d,n)=>(a(),o("div",{class:q([{x7FpR:s.page.alignCenter,x9ebR:s.page.font==="serif"},"_gaps"])},[(a(!0),o(F,null,U(s.page.content,e=>(a(),c(ze,{key:e.id,page:s.page,block:e,h:2},null,8,["page","block"]))),128))],2))}});const Oe={class:"_spacer",style:{"--MI_SPACER-w":"800px"}},Je=["src"],Ye={key:0,class:"count"},qe={key:0,class:"count"},Ge={key:0},Ke=y({__name:"page",props:{pageName:{},username:{}},setup(s){const d=fe(),n=s,e=E(null),m=E(null),R=Pe(new be("users/pages",{limit:6,computedParams:L(()=>e.value?{userId:e.value.user.id}:void 0)})),D=L(()=>n.username+"/"+n.pageName);function I(){e.value=null,J("pages/show",{name:n.pageName,username:n.username}).then(async p=>{e.value=p;const t=Ie("page_view_interruptor");if(t.length>0){let x=$e(p);for(const $ of t)x=await $.handler(x);e.value=x}}).catch(p=>{m.value=p})}function V(p){if(!e.value)return;const t=[];t.push({text:"Share with note",icon:"ti ti-pencil",action:Z}),Ae()&&t.push({text:"Share",icon:"ti ti-share",action:ee}),z(t,p.currentTarget??p.target)}function Q(){e.value&&Be(`${T}/@${e.value.user.username}/pages/${e.value.name}`)}function Z(){e.value&&Ce({initialText:`${e.value.title||e.value.name}
${T}/@${e.value.user.username}/pages/${e.value.name}`,instant:!0})}function ee(){e.value&&navigator.share({title:e.value.title??e.value.name,text:e.value.summary??void 0,url:`${T}/@${e.value.user.username}/pages/${e.value.name}`})}function te(){e.value&&P("pages/like",{pageId:e.value.id}).then(()=>{e.value.isLiked=!0,e.value.likedCount++})}async function ae(){!e.value||(await H({type:"warning",text:"Really remove your like?"})).canceled||P("pages/unlike",{pageId:e.value.id}).then(()=>{e.value.isLiked=!1,e.value.likedCount--})}function S(p){e.value&&P("i/update",{pinnedPageId:p?e.value.id:null})}async function se(){if(!e.value)return;const p=`${T}/@${n.username}/pages/${n.pageName}`,{dispose:t}=await we(N(()=>import("./3iSoGi4ic-qfX4D5dB.js"),__vite__mapDeps([21,0,1,2,3,4,5,6,22,23,24]),import.meta.url).then(x=>x.default),{user:e.value.user,initialComment:`Page: ${p}
-----
`},{closed:()=>t()})}function ne(p){if(!e.value)return;const t=[];f&&f.id===e.value.userId?(t.push({icon:"ti ti-pencil",text:"Edit",action:()=>d.push("/pages/edit/:initPageId",{params:{initPageId:e.value.id}})}),f.pinnedPageId===e.value.id?t.push({icon:"ti ti-pinned-off",text:"Unpin from profile",action:()=>S(!1)}):t.push({icon:"ti ti-pin",text:"Pin to profile",action:()=>S(!0)})):f&&f.id!==e.value.userId&&(t.push({icon:"ti ti-exclamation-circle",text:"Report",action:se}),(f.isModerator||f.isAdmin)&&t.push({type:"divider"},{icon:"ti ti-trash",text:"Delete",danger:!0,action:()=>H({type:"warning",text:"Really delete?"}).then(({canceled:x})=>{x||!e.value||P("pages/delete",{pageId:e.value.id})})})),z(t,p.currentTarget??p.target)}Le(()=>D.value,I,{immediate:!0});const le=L(()=>[]),oe=L(()=>[]);return he(()=>({title:e.value?e.value.title||e.value.name:"Pages",...e.value?{avatar:e.value.user,path:`/@${e.value.user.username}/pages/${e.value.name}`,share:{title:e.value.title||e.value.name,text:e.value.summary}}:{}})),(p,t)=>{const x=v("MkAvatar"),$=v("MkUserName"),A=v("MkA"),ie=v("MkAcct"),X=v("MkTime"),re=v("MkAd"),ue=v("MkError"),ce=v("MkLoading"),pe=v("PageWithHeader"),_=O("tooltip"),de=O("click-anime");return a(),c(pe,{actions:le.value,tabs:oe.value},{default:g(()=>[l("div",Oe,[r(Te,{enterActiveClass:u(C).s.animation?"xBekV":"",leaveActiveClass:u(C).s.animation?"xyx92":"",enterFromClass:u(C).s.animation?"xiDY0":"",leaveToClass:u(C).s.animation?"xF7PH":"",mode:"out-in"},{default:g(()=>[e.value?(a(),o("div",{key:e.value.id,class:"_gaps"},[l("div",{class:"xbY7W"},[l("div",{class:"x7eTH"},[l("div",{class:"xy295"},[e.value.eyeCatchingImageId?(a(),c(ye,{key:0,class:"xipUl",hash:e.value.eyeCatchingImage?.blurhash,cover:!0,forceBlurhash:!0},null,8,["class","hash"])):u(w).backgroundImageUrl||u(w).bannerUrl?(a(),o("img",{key:1,class:"xipUl xbSST",src:u(_e)(u(w).backgroundImageUrl??u(w).bannerUrl)},null,10,Je)):(a(),o("div",{key:2,class:"xipUl xbU0C"},null,2))],2),e.value.eyeCatchingImageId?(a(),o("div",{key:0,class:"x9pK1"},[r(Me,{image:e.value.eyeCatchingImage,cover:!0,disableImageLink:!0,class:"xBIL0"},null,8,["image","class"])],2)):k("",!0),l("div",{class:"xbYQJ _gaps_s"},[l("h1",null,h(e.value.title||e.value.name),1),l("div",{class:"xgywR"},[e.value.user?(a(),o("div",{key:0,class:"xiF1L"},[r(x,{user:e.value.user,class:"xdAkf",indicator:"",link:"",preview:""},null,8,["user","class"]),t[3]||(t[3]=M()),r(A,{to:`/@${s.username}`},{default:g(()=>[r($,{user:e.value.user,nowrap:!1},null,8,["user"])]),_:1},8,["to"])],2)):k("",!0),l("div",{class:"xAG1i"},[e.value.userId===u(f)?.id?b((a(),c(A,{key:0,to:`/pages/edit/${e.value.id}`,class:"_button xjwXV"},{default:g(()=>[...t[4]||(t[4]=[l("i",{class:"ti ti-pencil ti-fw"},null,-1)])]),_:1},8,["to","class"])),[[_,"Edit this Page"]]):k("",!0),b((a(),o("button",{class:"_button xjwXV",onClick:V},[...t[5]||(t[5]=[l("i",{class:"ti ti-share ti-fw"},null,-1)])],2)),[[_,"Share"]])],2)],2)],2)],2),l("div",{class:"xuIWz"},[r(He,{page:e.value},null,8,["page"])],2),l("div",{class:"x7A3a"},[l("div",null,[e.value.isLiked?b((a(),c(W,{key:0,class:"button",asLike:"",primary:"",onClick:t[0]||(t[0]=B=>ae())},{default:g(()=>[t[6]||(t[6]=l("i",{class:"ti ti-heart-off"},null,-1)),e.value.likedCount>0?(a(),o("span",Ye,h(e.value.likedCount),1)):k("",!0)]),_:1})),[[_,"Remove like"]]):b((a(),c(W,{key:1,class:"button",asLike:"",onClick:t[1]||(t[1]=B=>te())},{default:g(()=>[t[7]||(t[7]=l("i",{class:"ti ti-heart"},null,-1)),e.value.likedCount>0?(a(),o("span",qe,h(e.value.likedCount),1)):k("",!0)]),_:1})),[[_,"Like"]])]),l("div",{class:"x8Jkl"},[e.value.userId===u(f)?.id?b((a(),c(A,{key:0,to:`/pages/edit/${e.value.id}`,class:"_button xjwXV"},{default:g(()=>[...t[8]||(t[8]=[l("i",{class:"ti ti-pencil ti-fw"},null,-1)])]),_:1},8,["to","class"])),[[_,"Edit this Page"]]):k("",!0),b((a(),o("button",{class:"_button xjwXV",onClick:Q},[...t[9]||(t[9]=[l("i",{class:"ti ti-link ti-fw"},null,-1)])],2)),[[_,"Copy link"]]),b((a(),o("button",{class:"_button xjwXV",onClick:V},[...t[10]||(t[10]=[l("i",{class:"ti ti-share ti-fw"},null,-1)])],2)),[[_,"Share"]]),u(f)?b((a(),o("button",{key:1,class:"_button xjwXV",onMousedown:ne},[...t[11]||(t[11]=[l("i",{class:"ti ti-dots ti-fw"},null,-1)])],34)),[[de]]):k("",!0)],2)],2),l("div",{class:"xgzHP"},[r(x,{user:e.value.user,class:"xdAkf",link:"",preview:""},null,8,["user","class"]),r(A,{to:`/@${s.username}`},{default:g(()=>[r($,{user:e.value.user,class:"xEt4w"},null,8,["user","class"]),r(ie,{user:e.value.user,class:"xjDfN"},null,8,["user","class"])]),_:1},8,["to"])],2),l("div",{class:"xkCIM"},[l("div",null,[t[12]||(t[12]=l("i",{class:"ti ti-clock"},null,-1)),M(" "+h("Created at")+": ",1),r(X,{time:e.value.createdAt,mode:"detail"},null,8,["time"])]),e.value.createdAt!=e.value.updatedAt?(a(),o("div",Ge,[t[13]||(t[13]=l("i",{class:"ti ti-clock-edit"},null,-1)),M(" "+h("Updated at")+": ",1),r(X,{time:e.value.updatedAt,mode:"detail"},null,8,["time"])])):k("",!0)],2)],2),r(re,{preferForms:["horizontal","horizontal-big"]}),r(Fe,{"max-height":300,foldable:!0,class:"other"},{icon:g(()=>[...t[14]||(t[14]=[l("i",{class:"ti ti-clock"},null,-1)])]),header:g(()=>[M(h("Recent posts"),1)]),default:g(()=>[r(Ue,{paginator:u(R),class:"xa8uN _gaps"},{default:g(({items:B})=>[(a(!0),o(F,null,U(B,j=>(a(),c(De,{key:j.id,page:j,class:"xlcLB"},null,8,["page","class"]))),128))]),_:1},8,["paginator","class"])]),_:1})])):m.value?(a(),c(ue,{key:1,onRetry:t[2]||(t[2]=B=>I())})):(a(),c(ce,{key:2}))]),_:1},8,["enterActiveClass","leaveActiveClass","enterFromClass","leaveToClass"])])]),_:1},8,["actions","tabs"])}}});const it=Object.freeze(Object.defineProperty({__proto__:null,default:Ke},Symbol.toStringTag,{value:"Module"}));export{ze as _,it as p};

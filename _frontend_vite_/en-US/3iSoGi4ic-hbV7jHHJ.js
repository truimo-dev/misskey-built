function O(a,r){var e=Object.keys(a);if(Object.getOwnPropertySymbols){var g=Object.getOwnPropertySymbols(a);r&&(g=g.filter(function(c){return Object.getOwnPropertyDescriptor(a,c).enumerable})),e.push.apply(e,g)}return e}function u(a){for(var r=1;r<arguments.length;r++){var e=arguments[r]!=null?arguments[r]:{};r%2?O(Object(e),!0).forEach(function(g){L(a,g,e[g])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(e)):O(Object(e)).forEach(function(g){Object.defineProperty(a,g,Object.getOwnPropertyDescriptor(e,g))})}return a}function L(a,r,e){return r in a?Object.defineProperty(a,r,{value:e,enumerable:!0,configurable:!0,writable:!0}):a[r]=e,a}var N={},S="https://www.googletagmanager.com/gtag/js",D={debug_mode:!1,send_page_view:!1,anonymize_ip:!1,allow_google_signals:!0,allow_ad_personalization_signals:!0,cookie_flags:""},A={gtagName:"gtag",dataLayerName:"ga4DataLayer",measurementIds:[],gtagConfig:D};function I(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=0,e=b(a.measurementIds),g=u(u({},A),a);return{name:"google-analytics",config:g,initialize:function(t){var n=t.config,o=t.instance,i=n.dataLayerName,l=n.customScriptSrc,d=n.gtagName,s=n.gtagConfig,f=n.debug,m=n.nonce,w=i?"&l=".concat(i):"",v=l||"".concat(S,"?id=").concat(e[0]).concat(w);if(!j(v)){var p=document.createElement("script");p.async=!0,p.src=v,m&&p.setAttribute("nonce",m),document.body.appendChild(p)}window[i]||(window[i]=window[i]||[]),window[d]||(window[d]=function(){window[i].push(arguments)}),window[d]("js",new Date);var y=u(u({},D),s||{});f===!0?y.debug_mode=!0:delete y.debug_mode;var P=o.user()||{},_=P.traits||{};Object.keys(_).length&&window[d]("set","user_properties",_);for(var h=0;h<e.length;h++)N[e[h]]||(window[d]("config",e[h],y),N[e[h]]=!0)},identify:function(t){var n=t.payload,o=t.config,i=o.gtagName;!window[i]||!e.length||(n.userId&&window[i]("set",{user_id:n.userId}),Object.keys(n.traits).length&&window[i]("set","user_properties",n.traits))},page:function(t){var n=t.payload,o=t.config,i=t.instance,l=o.gtagName,d=o.gtagConfig;if(!(!window[l]||!e.length)){var s=n.properties,f=s.send_to,m=i.getState("context.campaign"),w={page_title:s.title,page_location:s.url,page_path:s.path||document.location.pathname,page_hash:s.hash,page_search:s.page_search,page_referrer:s.referrer},v=C(m),p=i.user("userId"),y=u(u(u(u({},f?{send_to:f}:{}),w),v),p?{user_id:p}:{});if(d&&d.send_page_view&&r===0){r++;return}window[l]("event","page_view",y),r++}},track:function(t){var n=t.payload,o=t.config,i=t.instance,l=n.properties,d=n.event,s=i.getState("context.campaign"),f=o.gtagName;if(!(!window[f]||!e.length)){var m=C(s),w=i.user("userId"),v=u(u(u({},l),m),w?{user_id:w}:{});window[f]("event",d,v)}},loaded:function(){var t=g.dataLayerName,n=g.customScriptSrc,o=t&&window[t]&&Array.prototype.push===window[t].push;return j(n||S)&&o},methods:{addTag:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};window[g.gtagName]&&(window[g.gtagName]("config",t,n),e&&!e.includes(t)&&(e=e.concat(t)))},disable:function(t){for(var n=t?b(t):e,o=0;o<e.length;o++){var i=e[o];n.includes(i)&&(window["ga-disable-".concat(i)]=!0)}},enable:function(t){for(var n=t?b(t):e,o=0;o<e.length;o++){var i=e[o];n.includes(i)&&(window["ga-disable-".concat(i)]=!1)}}}}}function b(a){if(!a)throw new Error("No GA Measurement ID defined");if(Array.isArray(a))return a;if(typeof a=="string")return[a];throw new Error("GA Measurement ID must be string or array of strings")}function C(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r={},e=a.id,g=a.name,c=a.source,t=a.medium,n=a.content,o=a.keyword;return e&&(r.campaignId=e),g&&(r.campaignName=g),c&&(r.campaignSource=c),t&&(r.campaignMedium=t),n&&(r.campaignContent=n),o&&(r.campaignKeyword=o),r}function j(a){var r=document.querySelectorAll("script[src]"),e=new RegExp("^".concat(a));return!!Object.values(r).filter(function(g){return e.test(g.src)}).length}var x=I;export{x as default};

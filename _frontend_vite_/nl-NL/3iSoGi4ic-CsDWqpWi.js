import{M as h}from"./3iSoGi4ic-geP5Alzl.js";import{J as C,aF as p,aW as f,ar as w,bj as D}from"./3iSoGi4ic-DV-GuiCp.js";import{a as v,c as x,b,e as G,o as N,z,k as B,l as i,i as c,p as n,j as E,E as _,t as y,D as O,B as S}from"./3iSoGi4ic-D0mTJ0Mu.js";const V="https://fastly.jsdelivr.net/gh/truimo-dev/misskey-built@latest/_frontend_vite_/assets/3iSoGi4ic-W2M747zO.png",a=v(),W=x(()=>a.value!=null);let g="";async function Z(){try{a.value=await C("i/registry/get",{scope:["clickerGame"],key:"saveData"})}catch(s){if(s.code==="NO_SUCH_KEY"){a.value={gameVersion:2,cookies:0,totalCookies:0,totalHandmadeCookies:0,clicked:0,achievements:[],facilities:[]},m();return}throw s}}async function m(){const s=JSON.stringify(a.value);s!==g&&(await C("i/registry/set",{scope:["clickerGame"],key:"saveData",value:a.value}),g=s)}const j={key:1},Y=b({__name:"MkClickerGame",setup(s){const e=a,d=x(()=>e.value?.cookies),k=v(0),l=v(0);function M(t){const o=t.clientX,r=t.clientY,{dispose:u}=w(h,{x:o,y:r},{end:()=>u()});e.value.cookies++,e.value.totalCookies++,e.value.totalHandmadeCookies++,e.value.clicked++,d.value===1&&D("cookieClicked")}return p(()=>{const t=e.value.cookies-l.value;k.value=t,l.value=e.value.cookies},1e3,{immediate:!1,afterMounted:!0}),p(m,1e3*5,{immediate:!1,afterMounted:!0}),G(async()=>{await Z(),l.value=e.value.cookies}),N(()=>{m()}),(t,o)=>{const r=z("MkLoading"),u=B("click-anime");return c(),i("div",null,[W?(c(),i("div",{key:0,class:"xZsw6"},[n("div",{class:"x4hW4"},_(y(f)(k.value))+"cps",3),n("div",{class:"xewoa","data-testid":"count"},[o[0]||(o[0]=n("i",{class:"ti ti-cookie",style:{"font-size":"70%"}},null,-1)),O(" "+_(y(f)(d.value)),1)],2),E((c(),i("button",{class:"_button",onClick:M},[n("img",{src:V,class:"x4C0Z"},null,2)])),[[u]])],2)):(c(),i("div",j,[S(r)]))])}}});export{Y as M};

import{b as ne,u as vt,a as oe,e as ae,o as re,z as ce,f as he,i as Ct,h as st,p as nt,B as Et,T as le,l as de,C as ue,t as fe,D as $e,E as pe}from"./3iSoGi4ic-D0mTJ0Mu.js";import{av as ge,ad as me,_ as be}from"./3iSoGi4ic-DV-GuiCp.js";import"./3iSoGi4ic-B1GPmOGN.js";import"./3iSoGi4ic-D98_HDRS.js";const it=typeof window<"u"&&typeof window.document<"u",_=it?window:{},ct=it?"ontouchstart"in _.document.documentElement:!1,ht=it?"PointerEvent"in _:!1,z="cropper",j=`${z}-canvas`,Ce=`${z}-crosshair`,Ee=`${z}-grid`,we=`${z}-handle`,H=`${z}-image`,x=`${z}-selection`,ye=`${z}-shade`,Se=`${z}-viewer`,Q="select",Vt="move",Y="scale",at="rotate",tt="transform",P="none",wt="n-resize",yt="e-resize",St="s-resize",Tt="w-resize",B="ne-resize",F="nw-resize",q="se-resize",K="sw-resize",Te="action",Ae=ct?"touchend touchcancel":"mouseup",ke=ct?"touchmove":"mousemove",Oe=ct?"touchstart":"mousedown",At=ht?"pointerdown":Oe,kt=ht?"pointermove":ke,Ot=ht?"pointerup pointercancel":Ae,Nt="error",Rt="keydown",W="load",_t="wheel",U="action",D="actionend",Ne="actionmove",L="actionstart",M="change",rt="transform";function V(l){return typeof l=="string"}const Jt=Number.isNaN||_.isNaN;function p(l){return typeof l=="number"&&!Jt(l)}function A(l){return p(l)&&l>0&&l<1/0}function Re(l){return typeof l>"u"}function Qt(l){return typeof l=="object"&&l!==null}const{hasOwnProperty:_e}=Object.prototype;function et(l){if(!Qt(l))return!1;try{const{constructor:t}=l,{prototype:e}=t;return t&&e&&_e.call(e,"isPrototypeOf")}catch{return!1}}function lt(l){return typeof l=="function"}function X(l){return typeof l=="object"&&l!==null&&l.nodeType===1}const xe=/([a-z\d])([A-Z])/g;function xt(l){return String(l).replace(xe,"$1-$2").toLowerCase()}const Ie=/-[A-z\d]/g;function It(l){return l.replace(Ie,t=>t.slice(1).toUpperCase())}const te=/\s\s*/;function w(l,t,e,i){t.trim().split(te).forEach(s=>{l.removeEventListener(s,e,i)})}function y(l,t,e,i){t.trim().split(te).forEach(s=>{l.addEventListener(s,e,i)})}function Pt(l,t,e,i){y(l,t,e,Object.assign(Object.assign({},i),{once:!0}))}const Pe={bubbles:!0,cancelable:!0,composed:!0};function Me(l,t,e,i){return l.dispatchEvent(new CustomEvent(t,Object.assign(Object.assign(Object.assign({},Pe),{detail:e}),i)))}function ze(l){return typeof l.composedPath=="function"&&l.composedPath().find(X)||l.target}const Mt=Promise.resolve();function De(l,t){return t?Mt.then(l?t.bind(l):t):Mt}function ee(l){const t=l.getRootNode();switch(t.nodeType){case 1:return t.ownerDocument;case 9:return t;case 11:return t}return null}function zt(l){const{documentElement:t}=l.ownerDocument,e=l.getBoundingClientRect();return{left:e.left+(_.pageXOffset-t.clientLeft),top:e.top+(_.pageYOffset-t.clientTop)}}const Le=/deg|g?rad|turn$/i;function ot(l){const t=parseFloat(l)||0;if(t!==0){const[e="rad"]=String(l).match(Le)||[];switch(e.toLowerCase()){case"deg":return t/360*(Math.PI*2);case"grad":return t/400*(Math.PI*2);case"turn":return t*(Math.PI*2)}}return t}const Dt="contain",We="cover";function J(l,t=Dt){const{aspectRatio:e}=l;let{width:i,height:s}=l;const n=A(i),c=A(s);if(n&&c){const o=s*e;t===Dt&&o>i||t===We&&o<i?s=i/e:i=s*e}else n?s=i/e:c&&(i=s*e);return{width:i,height:s}}function ie(l,...t){if(t.length===0)return l;const[e,i,s,n,c,o]=l,[h,r,a,u,$,d]=t[0];return l=[e*h+s*r,i*h+n*r,e*a+s*u,i*a+n*u,e*$+s*d+c,i*$+n*d+o],ie(l,...t.slice(1))}var Xe=":host([hidden]){display:none!important}";const He=/left|top|width|height/i,Lt="open",Z=new WeakMap,G=new WeakMap,Wt=new Map,Xt=_.document&&Array.isArray(_.document.adoptedStyleSheets)&&"replaceSync"in _.CSSStyleSheet.prototype;class I extends HTMLElement{get $sharedStyle(){return`${this.themeColor?`:host{--theme-color: ${this.themeColor};}`:""}${Xe}`}constructor(){var t,e;super(),this.shadowRootMode=Lt,this.slottable=!0;const i=(e=(t=Object.getPrototypeOf(this))===null||t===void 0?void 0:t.constructor)===null||e===void 0?void 0:e.$name;i&&Wt.set(i,this.tagName.toLowerCase())}static get observedAttributes(){return["shadow-root-mode","slottable","theme-color"]}attributeChangedCallback(t,e,i){if(Object.is(i,e))return;const s=It(t),n=this[s];let c=i;switch(typeof n){case"boolean":c=i!==null&&i!=="false";break;case"number":c=Number(i);break}switch(this[s]=c,t){case"theme-color":{const o=G.get(this),h=this.$sharedStyle;o&&h&&(Xt?o.replaceSync(h):o.textContent=h);break}}}$propertyChangedCallback(t,e,i){if(!Object.is(i,e))switch(t=xt(t),typeof i){case"boolean":i===!0?this.hasAttribute(t)||this.setAttribute(t,""):this.removeAttribute(t);break;case"number":Jt(i)?i="":i=String(i);default:i?this.getAttribute(t)!==i&&this.setAttribute(t,i):this.removeAttribute(t)}}connectedCallback(){Object.getPrototypeOf(this).constructor.observedAttributes.forEach(e=>{const i=It(e);let s=this[i];Re(s)||this.$propertyChangedCallback(i,void 0,s),Object.defineProperty(this,i,{enumerable:!0,configurable:!0,get(){return s},set(n){const c=s;s=n,this.$propertyChangedCallback(i,c,n)}})});const t=this.shadowRoot||this.attachShadow({mode:this.shadowRootMode||Lt});if(Z.set(this,t),G.set(this,this.$addStyles(this.$sharedStyle)),this.$style&&this.$addStyles(this.$style),this.$template){const e=document.createElement("template");e.innerHTML=this.$template,t.appendChild(e.content)}if(this.slottable){const e=document.createElement("slot");t.appendChild(e)}}disconnectedCallback(){G.has(this)&&G.delete(this),Z.has(this)&&Z.delete(this)}$getTagNameOf(t){var e;return(e=Wt.get(t))!==null&&e!==void 0?e:t}$setStyles(t){return Object.keys(t).forEach(e=>{let i=t[e];p(i)&&(i!==0&&He.test(e)?i=`${i}px`:i=String(i)),this.style[e]=i}),this}$getShadowRoot(){return this.shadowRoot||Z.get(this)}$addStyles(t){let e;const i=this.$getShadowRoot();return Xt?(e=new CSSStyleSheet,e.replaceSync(t),i.adoptedStyleSheets=i.adoptedStyleSheets.concat(e)):(e=document.createElement("style"),e.textContent=t,i.appendChild(e)),e}$emit(t,e,i){return Me(this,t,e,i)}$nextTick(t){return De(this,t)}static $define(t,e){Qt(t)&&(e=t,t=""),t||(t=this.$name||this.name),t=xt(t),it&&_.customElements&&!_.customElements.get(t)&&customElements.define(t,this,e)}}I.$version="2.1.0";var Ye=':host{display:block;min-height:100px;min-width:200px;overflow:hidden;position:relative;touch-action:none;-webkit-touch-callout:none;-webkit-user-select:none;-moz-user-select:none;user-select:none}:host([background]){background-color:#fff;background-image:repeating-linear-gradient(45deg,#ccc 25%,transparent 0,transparent 75%,#ccc 0,#ccc),repeating-linear-gradient(45deg,#ccc 25%,transparent 0,transparent 75%,#ccc 0,#ccc);background-image:repeating-conic-gradient(#ccc 0 25%,#fff 0 50%);background-position:0 0,.5rem .5rem;background-size:1rem 1rem}:host([disabled]){pointer-events:none}:host([disabled]):after{bottom:0;content:"";cursor:not-allowed;display:block;left:0;pointer-events:none;position:absolute;right:0;top:0}';class dt extends I{constructor(){super(...arguments),this.$onPointerDown=null,this.$onPointerMove=null,this.$onPointerUp=null,this.$onWheel=null,this.$wheeling=!1,this.$pointers=new Map,this.$style=Ye,this.$action=P,this.background=!1,this.disabled=!1,this.scaleStep=.1,this.themeColor="#39f"}static get observedAttributes(){return super.observedAttributes.concat(["background","disabled","scale-step"])}connectedCallback(){super.connectedCallback(),this.disabled||this.$bind()}disconnectedCallback(){this.disabled||this.$unbind(),super.disconnectedCallback()}$propertyChangedCallback(t,e,i){if(!Object.is(i,e))switch(super.$propertyChangedCallback(t,e,i),t){case"disabled":i?this.$unbind():this.$bind();break}}$bind(){this.$onPointerDown||(this.$onPointerDown=this.$handlePointerDown.bind(this),y(this,At,this.$onPointerDown)),this.$onPointerMove||(this.$onPointerMove=this.$handlePointerMove.bind(this),y(this.ownerDocument,kt,this.$onPointerMove)),this.$onPointerUp||(this.$onPointerUp=this.$handlePointerUp.bind(this),y(this.ownerDocument,Ot,this.$onPointerUp)),this.$onWheel||(this.$onWheel=this.$handleWheel.bind(this),y(this,_t,this.$onWheel,{passive:!1,capture:!0}))}$unbind(){this.$onPointerDown&&(w(this,At,this.$onPointerDown),this.$onPointerDown=null),this.$onPointerMove&&(w(this.ownerDocument,kt,this.$onPointerMove),this.$onPointerMove=null),this.$onPointerUp&&(w(this.ownerDocument,Ot,this.$onPointerUp),this.$onPointerUp=null),this.$onWheel&&(w(this,_t,this.$onWheel,{capture:!0}),this.$onWheel=null)}$handlePointerDown(t){const{buttons:e,button:i,type:s}=t;if(this.disabled||(s==="pointerdown"&&t.pointerType==="mouse"||s==="mousedown")&&(p(e)&&e!==1||p(i)&&i!==0||t.ctrlKey))return;const{$pointers:n}=this;let c="";if(t.changedTouches)Array.from(t.changedTouches).forEach(({identifier:o,pageX:h,pageY:r})=>{n.set(o,{startX:h,startY:r,endX:h,endY:r})});else{const{pointerId:o=0,pageX:h,pageY:r}=t;n.set(o,{startX:h,startY:r,endX:h,endY:r})}n.size>1?c=tt:X(t.target)&&(c=t.target.action||t.target.getAttribute(Te)||""),this.$emit(L,{action:c,relatedEvent:t})!==!1&&(t.preventDefault(),this.$action=c,this.style.willChange="transform")}$handlePointerMove(t){const{$action:e,$pointers:i}=this;if(this.disabled||e===P||i.size===0||this.$emit(Ne,{action:e,relatedEvent:t})===!1)return;if(t.preventDefault(),t.changedTouches)Array.from(t.changedTouches).forEach(({identifier:n,pageX:c,pageY:o})=>{const h=i.get(n);h&&Object.assign(h,{endX:c,endY:o})});else{const{pointerId:n=0,pageX:c,pageY:o}=t,h=i.get(n);h&&Object.assign(h,{endX:c,endY:o})}const s={action:e,relatedEvent:t};if(e===tt){const n=new Map(i);let c=0,o=0,h=0,r=0,a=t.pageX,u=t.pageY;i.forEach((f,C)=>{n.delete(C),n.forEach(E=>{let g=E.startX-f.startX,v=E.startY-f.startY,b=E.endX-f.endX,m=E.endY-f.endY,S=0,T=0,k=0,O=0;if(g===0?v<0?k=Math.PI*2:v>0&&(k=Math.PI):g>0?k=Math.PI/2+Math.atan(v/g):g<0&&(k=Math.PI*1.5+Math.atan(v/g)),b===0?m<0?O=Math.PI*2:m>0&&(O=Math.PI):b>0?O=Math.PI/2+Math.atan(m/b):b<0&&(O=Math.PI*1.5+Math.atan(m/b)),O>0||k>0){const N=O-k,R=Math.abs(N);R>c&&(c=R,h=N,a=(f.startX+E.startX)/2,u=(f.startY+E.startY)/2)}if(g=Math.abs(g),v=Math.abs(v),b=Math.abs(b),m=Math.abs(m),g>0&&v>0?S=Math.sqrt(g*g+v*v):g>0?S=g:v>0&&(S=v),b>0&&m>0?T=Math.sqrt(b*b+m*m):b>0?T=b:m>0&&(T=m),S>0&&T>0){const N=(T-S)/S,R=Math.abs(N);R>o&&(o=R,r=N,a=(f.startX+E.startX)/2,u=(f.startY+E.startY)/2)}})});const $=c>0,d=o>0;$&&d?(s.rotate=h,s.scale=r,s.centerX=a,s.centerY=u):$?(s.action=at,s.rotate=h,s.centerX=a,s.centerY=u):d?(s.action=Y,s.scale=r,s.centerX=a,s.centerY=u):s.action=P}else{const[n]=Array.from(i.values());Object.assign(s,n)}i.forEach(n=>{n.startX=n.endX,n.startY=n.endY}),s.action!==P&&this.$emit(U,s,{cancelable:!1})}$handlePointerUp(t){const{$action:e,$pointers:i}=this;if(!(this.disabled||e===P)&&this.$emit(D,{action:e,relatedEvent:t})!==!1){if(t.preventDefault(),t.changedTouches)Array.from(t.changedTouches).forEach(({identifier:s})=>{i.delete(s)});else{const{pointerId:s=0}=t;i.delete(s)}i.size===0&&(this.style.willChange="",this.$action=P)}}$handleWheel(t){if(this.disabled||(t.preventDefault(),this.$wheeling))return;this.$wheeling=!0,setTimeout(()=>{this.$wheeling=!1},50);const i=(t.deltaY>0?-1:1)*this.scaleStep;this.$emit(U,{action:Y,scale:i,relatedEvent:t},{cancelable:!1})}$setAction(t){return V(t)&&(this.$action=t),this}$toCanvas(t){return new Promise((e,i)=>{if(!this.isConnected){i(new Error("The current element is not connected to the DOM."));return}const s=document.createElement("canvas");let n=this.offsetWidth,c=this.offsetHeight,o=1;et(t)&&(A(t.width)||A(t.height))&&({width:n,height:c}=J({aspectRatio:n/c,width:t.width,height:t.height}),o=n/this.offsetWidth),s.width=n,s.height=c;const h=this.querySelector(this.$getTagNameOf(H));if(!h){e(s);return}h.$ready().then(r=>{const a=s.getContext("2d");if(a){const[u,$,d,f,C,E]=h.$getTransform();let g=C,v=E,b=r.naturalWidth,m=r.naturalHeight;o!==1&&(g*=o,v*=o,b*=o,m*=o);const S=b/2,T=m/2;a.fillStyle="transparent",a.fillRect(0,0,n,c),et(t)&&lt(t.beforeDraw)&&t.beforeDraw.call(this,a,s),a.save(),a.translate(S,T),a.transform(u,$,d,f,g,v),a.translate(-S,-T),a.drawImage(r,0,0,b,m),a.restore()}e(s)}).catch(i)})}}dt.$name=j;dt.$version="2.1.0";var Ue=":host{display:inline-block}img{display:block;height:100%;max-height:none!important;max-width:none!important;min-height:0!important;min-width:0!important;width:100%}";const Ht=new WeakMap,Yt=["alt","crossorigin","decoding","elementtiming","fetchpriority","loading","referrerpolicy","sizes","src","srcset"];class ut extends I{constructor(){super(...arguments),this.$matrix=[1,0,0,1,0,0],this.$onLoad=null,this.$onCanvasAction=null,this.$onCanvasActionEnd=null,this.$onCanvasActionStart=null,this.$actionStartTarget=null,this.$style=Ue,this.$image=new Image,this.initialCenterSize="contain",this.rotatable=!1,this.scalable=!1,this.skewable=!1,this.slottable=!1,this.translatable=!1,this.alt="",this.crossorigin="",this.decoding="",this.elementtiming="",this.fetchpriority="",this.loading="",this.referrerpolicy="",this.sizes="",this.src="",this.srcset=""}set $canvas(t){Ht.set(this,t)}get $canvas(){return Ht.get(this)}static get observedAttributes(){return super.observedAttributes.concat(Yt,["initial-center-size","rotatable","scalable","skewable","translatable"])}attributeChangedCallback(t,e,i){Object.is(i,e)||(super.attributeChangedCallback(t,e,i),Yt.includes(t)&&this.$image.setAttribute(t,i))}$propertyChangedCallback(t,e,i){if(!Object.is(i,e))switch(super.$propertyChangedCallback(t,e,i),t){case"initialCenterSize":this.$nextTick(()=>{this.$center(i)});break}}connectedCallback(){super.connectedCallback();const{$image:t}=this,e=this.closest(this.$getTagNameOf(j));e&&(this.$canvas=e,this.$setStyles({display:"block",position:"absolute"}),this.$onCanvasActionStart=i=>{var s,n;this.$actionStartTarget=(n=(s=i.detail)===null||s===void 0?void 0:s.relatedEvent)===null||n===void 0?void 0:n.target},this.$onCanvasActionEnd=()=>{this.$actionStartTarget=null},this.$onCanvasAction=this.$handleAction.bind(this),y(e,L,this.$onCanvasActionStart),y(e,D,this.$onCanvasActionEnd),y(e,U,this.$onCanvasAction)),this.$onLoad=this.$handleLoad.bind(this),y(t,W,this.$onLoad),this.$getShadowRoot().appendChild(t)}disconnectedCallback(){const{$image:t,$canvas:e}=this;e&&(this.$onCanvasActionStart&&(w(e,L,this.$onCanvasActionStart),this.$onCanvasActionStart=null),this.$onCanvasActionEnd&&(w(e,D,this.$onCanvasActionEnd),this.$onCanvasActionEnd=null),this.$onCanvasAction&&(w(e,U,this.$onCanvasAction),this.$onCanvasAction=null)),t&&this.$onLoad&&(w(t,W,this.$onLoad),this.$onLoad=null),this.$getShadowRoot().removeChild(t),super.disconnectedCallback()}$handleLoad(){const{$image:t}=this;this.$setStyles({width:t.naturalWidth,height:t.naturalHeight}),this.$canvas&&this.$center(this.initialCenterSize)}$handleAction(t){if(this.hidden||!(this.rotatable||this.scalable||this.translatable))return;const{$canvas:e}=this,{detail:i}=t;if(i){const{relatedEvent:s}=i;let{action:n}=i;switch(n===tt&&(!this.rotatable||!this.scalable)&&(this.rotatable?n=at:this.scalable?n=Y:n=P),n){case Vt:if(this.translatable){let c=null;s&&(c=s.target.closest(this.$getTagNameOf(x))),c||(c=e.querySelector(this.$getTagNameOf(x))),c&&c.multiple&&!c.active&&(c=e.querySelector(`${this.$getTagNameOf(x)}[active]`)),(!c||c.hidden||!c.movable||c.dynamic||!(this.$actionStartTarget&&c.contains(this.$actionStartTarget)))&&this.$move(i.endX-i.startX,i.endY-i.startY)}break;case at:if(this.rotatable)if(s){const{x:c,y:o}=this.getBoundingClientRect();this.$rotate(i.rotate,s.clientX-c,s.clientY-o)}else this.$rotate(i.rotate);break;case Y:if(this.scalable)if(s){const c=s.target.closest(this.$getTagNameOf(x));if(!c||!c.zoomable||c.zoomable&&c.dynamic){const{x:o,y:h}=this.getBoundingClientRect();this.$zoom(i.scale,s.clientX-o,s.clientY-h)}}else this.$zoom(i.scale);break;case tt:if(this.rotatable&&this.scalable){const{rotate:c}=i;let{scale:o}=i;o<0?o=1/(1-o):o+=1;const h=Math.cos(c),r=Math.sin(c),[a,u,$,d]=[h*o,r*o,-r*o,h*o];if(s){const f=this.getBoundingClientRect(),C=s.clientX-f.x,E=s.clientY-f.y,[g,v,b,m]=this.$matrix,S=f.width/2,T=f.height/2,k=C-S,O=E-T,N=(k*m-b*O)/(g*m-b*v),R=(O*g-v*k)/(g*m-b*v);this.$transform(a,u,$,d,N*(1-a)+R*$,R*(1-d)+N*u)}else this.$transform(a,u,$,d,0,0)}break}}}$ready(t){const{$image:e}=this,i=new Promise((s,n)=>{const c=new Error("Failed to load the image source");if(e.complete)e.naturalWidth>0&&e.naturalHeight>0?s(e):n(c);else{const o=()=>{w(e,Nt,h),setTimeout(()=>{s(e)})},h=()=>{w(e,W,o),n(c)};Pt(e,W,o),Pt(e,Nt,h)}});return lt(t)&&i.then(s=>(t(s),s)),i}$center(t){const{parentElement:e}=this;if(!e)return this;const i=e.getBoundingClientRect(),s=i.width,n=i.height,{x:c,y:o,width:h,height:r}=this.getBoundingClientRect(),a=c+h/2,u=o+r/2,$=i.x+s/2,d=i.y+n/2;if(this.$move($-a,d-u),t&&(h!==s||r!==n)){const f=s/h,C=n/r;switch(t){case"cover":this.$scale(Math.max(f,C));break;case"contain":this.$scale(Math.min(f,C));break}}return this}$move(t,e=t){if(this.translatable&&p(t)&&p(e)){const[i,s,n,c]=this.$matrix,o=(t*c-n*e)/(i*c-n*s),h=(e*i-s*t)/(i*c-n*s);this.$translate(o,h)}return this}$moveTo(t,e=t){if(this.translatable&&p(t)&&p(e)){const[i,s,n,c]=this.$matrix,o=(t*c-n*e)/(i*c-n*s),h=(e*i-s*t)/(i*c-n*s);this.$setTransform(i,s,n,c,o,h)}return this}$rotate(t,e,i){if(this.rotatable){const s=ot(t),n=Math.cos(s),c=Math.sin(s),[o,h,r,a]=[n,c,-c,n];if(p(e)&&p(i)){const[u,$,d,f]=this.$matrix,{width:C,height:E}=this.getBoundingClientRect(),g=C/2,v=E/2,b=e-g,m=i-v,S=(b*f-d*m)/(u*f-d*$),T=(m*u-$*b)/(u*f-d*$);this.$transform(o,h,r,a,S*(1-o)-T*r,T*(1-a)-S*h)}else this.$transform(o,h,r,a,0,0)}return this}$zoom(t,e,i){if(!this.scalable||t===0)return this;if(t<0?t=1/(1-t):t+=1,p(e)&&p(i)){const[s,n,c,o]=this.$matrix,{width:h,height:r}=this.getBoundingClientRect(),a=h/2,u=r/2,$=e-a,d=i-u,f=($*o-c*d)/(s*o-c*n),C=(d*s-n*$)/(s*o-c*n);this.$transform(t,0,0,t,f*(1-t),C*(1-t))}else this.$scale(t);return this}$scale(t,e=t){return this.scalable&&this.$transform(t,0,0,e,0,0),this}$skew(t,e=0){if(this.skewable){const i=ot(t),s=ot(e);this.$transform(1,Math.tan(s),Math.tan(i),1,0,0)}return this}$translate(t,e=t){return this.translatable&&p(t)&&p(e)&&this.$transform(1,0,0,1,t,e),this}$transform(t,e,i,s,n,c){return p(t)&&p(e)&&p(i)&&p(s)&&p(n)&&p(c)?this.$setTransform(ie(this.$matrix,[t,e,i,s,n,c])):this}$setTransform(t,e,i,s,n,c){if((this.rotatable||this.scalable||this.skewable||this.translatable)&&(Array.isArray(t)&&([t,e,i,s,n,c]=t),p(t)&&p(e)&&p(i)&&p(s)&&p(n)&&p(c))){const o=[...this.$matrix],h=[t,e,i,s,n,c];if(this.$emit(rt,{matrix:h,oldMatrix:o})===!1)return this;this.$matrix=h,this.style.transform=`matrix(${h.join(", ")})`}return this}$getTransform(){return this.$matrix.slice()}$resetTransform(){return this.$setTransform([1,0,0,1,0,0])}}ut.$name=H;ut.$version="2.1.0";var je=":host{display:block;height:0;left:0;outline:var(--theme-color) solid 1px;position:relative;top:0;width:0}:host([transparent]){outline-color:transparent}";const Ut=new WeakMap;class ft extends I{constructor(){super(...arguments),this.$onCanvasActionEnd=null,this.$onCanvasActionStart=null,this.$onSelectionChange=null,this.$style=je,this.x=0,this.y=0,this.width=0,this.height=0,this.slottable=!1,this.themeColor="rgba(0, 0, 0, 0.65)"}set $canvas(t){Ut.set(this,t)}get $canvas(){return Ut.get(this)}static get observedAttributes(){return super.observedAttributes.concat(["height","width","x","y"])}connectedCallback(){super.connectedCallback();const t=this.closest(this.$getTagNameOf(j));if(t){this.$canvas=t,this.style.position="absolute";const e=t.querySelector(this.$getTagNameOf(x));e&&(this.$onCanvasActionStart=i=>{e.hidden&&i.detail.action===Q&&(this.hidden=!1)},this.$onCanvasActionEnd=i=>{e.hidden&&i.detail.action===Q&&(this.hidden=!0)},this.$onSelectionChange=i=>{const{x:s,y:n,width:c,height:o}=i.defaultPrevented?e:i.detail;this.$change(s,n,c,o),(e.hidden||s===0&&n===0&&c===0&&o===0)&&(this.hidden=!0)},y(t,L,this.$onCanvasActionStart),y(t,D,this.$onCanvasActionEnd),y(t,M,this.$onSelectionChange))}this.$render()}disconnectedCallback(){const{$canvas:t}=this;t&&(this.$onCanvasActionStart&&(w(t,L,this.$onCanvasActionStart),this.$onCanvasActionStart=null),this.$onCanvasActionEnd&&(w(t,D,this.$onCanvasActionEnd),this.$onCanvasActionEnd=null),this.$onSelectionChange&&(w(t,M,this.$onSelectionChange),this.$onSelectionChange=null)),super.disconnectedCallback()}$change(t,e,i=this.width,s=this.height){return!p(t)||!p(e)||!p(i)||!p(s)||t===this.x&&e===this.y&&i===this.width&&s===this.height?this:(this.hidden&&(this.hidden=!1),this.x=t,this.y=e,this.width=i,this.height=s,this.$render())}$reset(){return this.$change(0,0,0,0)}$render(){return this.$setStyles({transform:`translate(${this.x}px, ${this.y}px)`,width:this.width,height:this.height,outlineWidth:_.innerWidth})}}ft.$name=ye;ft.$version="2.1.0";var Be=':host{background-color:var(--theme-color);display:block}:host([action=move]),:host([action=select]){height:100%;left:0;position:absolute;top:0;width:100%}:host([action=move]){cursor:move}:host([action=select]){cursor:crosshair}:host([action$=-resize]){background-color:transparent;height:15px;position:absolute;width:15px}:host([action$=-resize]):after{background-color:var(--theme-color);content:"";display:block;height:5px;left:50%;position:absolute;top:50%;transform:translate(-50%,-50%);width:5px}:host([action=n-resize]),:host([action=s-resize]){cursor:ns-resize;left:50%;transform:translateX(-50%);width:100%}:host([action=n-resize]){top:-8px}:host([action=s-resize]){bottom:-8px}:host([action=e-resize]),:host([action=w-resize]){cursor:ew-resize;height:100%;top:50%;transform:translateY(-50%)}:host([action=e-resize]){right:-8px}:host([action=w-resize]){left:-8px}:host([action=ne-resize]){cursor:nesw-resize;right:-8px;top:-8px}:host([action=nw-resize]){cursor:nwse-resize;left:-8px;top:-8px}:host([action=se-resize]){bottom:-8px;cursor:nwse-resize;right:-8px}:host([action=se-resize]):after{height:15px;width:15px}@media (pointer:coarse){:host([action=se-resize]):after{height:10px;width:10px}}@media (pointer:fine){:host([action=se-resize]):after{height:5px;width:5px}}:host([action=sw-resize]){bottom:-8px;cursor:nesw-resize;left:-8px}:host([plain]){background-color:transparent}';class $t extends I{constructor(){super(...arguments),this.$onCanvasCropEnd=null,this.$onCanvasCropStart=null,this.$style=Be,this.action=P,this.plain=!1,this.slottable=!1,this.themeColor="rgba(51, 153, 255, 0.5)"}static get observedAttributes(){return super.observedAttributes.concat(["action","plain"])}}$t.$name=we;$t.$version="2.1.0";var Fe=':host{display:block;left:0;position:relative;right:0}:host([outlined]){outline:1px solid var(--theme-color)}:host([multiple]){outline:1px dashed hsla(0,0%,100%,.5)}:host([multiple]):after{bottom:0;content:"";cursor:pointer;display:block;left:0;position:absolute;right:0;top:0}:host([multiple][active]){outline-color:var(--theme-color);z-index:1}:host([multiple])>*{visibility:hidden}:host([multiple][active])>*{visibility:visible}:host([multiple][active]):after{display:none}';const jt=new WeakMap;class pt extends I{constructor(){super(...arguments),this.$onCanvasAction=null,this.$onCanvasActionStart=null,this.$onCanvasActionEnd=null,this.$onDocumentKeyDown=null,this.$action="",this.$actionStartTarget=null,this.$changing=!1,this.$style=Fe,this.$initialSelection={x:0,y:0,width:0,height:0},this.x=0,this.y=0,this.width=0,this.height=0,this.aspectRatio=NaN,this.initialAspectRatio=NaN,this.initialCoverage=NaN,this.active=!1,this.linked=!1,this.dynamic=!1,this.movable=!1,this.resizable=!1,this.zoomable=!1,this.multiple=!1,this.keyboard=!1,this.outlined=!1,this.precise=!1}set $canvas(t){jt.set(this,t)}get $canvas(){return jt.get(this)}static get observedAttributes(){return super.observedAttributes.concat(["active","aspect-ratio","dynamic","height","initial-aspect-ratio","initial-coverage","keyboard","linked","movable","multiple","outlined","precise","resizable","width","x","y","zoomable"])}$propertyChangedCallback(t,e,i){if(!Object.is(i,e))switch(super.$propertyChangedCallback(t,e,i),t){case"x":case"y":case"width":case"height":this.$changing||this.$nextTick(()=>{this.$change(this.x,this.y,this.width,this.height,this.aspectRatio,!0)});break;case"aspectRatio":case"initialAspectRatio":this.$nextTick(()=>{this.$initSelection()});break;case"initialCoverage":this.$nextTick(()=>{A(i)&&i<=1&&this.$initSelection(!0,!0)});break;case"keyboard":this.$nextTick(()=>{this.$canvas&&(i?this.$onDocumentKeyDown||(this.$onDocumentKeyDown=this.$handleKeyDown.bind(this),y(this.ownerDocument,Rt,this.$onDocumentKeyDown)):this.$onDocumentKeyDown&&(w(this.ownerDocument,Rt,this.$onDocumentKeyDown),this.$onDocumentKeyDown=null))});break;case"multiple":this.$nextTick(()=>{if(this.$canvas){const s=this.$getSelections();i?(s.forEach(n=>{n.active=!1}),this.active=!0,this.$emit(M,{x:this.x,y:this.y,width:this.width,height:this.height})):(this.active=!1,s.slice(1).forEach(n=>{this.$removeSelection(n)}))}});break;case"precise":this.$nextTick(()=>{this.$change(this.x,this.y)});break;case"linked":i&&(this.dynamic=!0);break}}connectedCallback(){super.connectedCallback();const t=this.closest(this.$getTagNameOf(j));t?(this.$canvas=t,this.$setStyles({position:"absolute",transform:`translate(${this.x}px, ${this.y}px)`}),this.hidden||this.$render(),this.$initSelection(!0),this.$onCanvasActionStart=this.$handleActionStart.bind(this),this.$onCanvasActionEnd=this.$handleActionEnd.bind(this),this.$onCanvasAction=this.$handleAction.bind(this),y(t,L,this.$onCanvasActionStart),y(t,D,this.$onCanvasActionEnd),y(t,U,this.$onCanvasAction)):this.$render()}disconnectedCallback(){const{$canvas:t}=this;t&&(this.$onCanvasActionStart&&(w(t,L,this.$onCanvasActionStart),this.$onCanvasActionStart=null),this.$onCanvasActionEnd&&(w(t,D,this.$onCanvasActionEnd),this.$onCanvasActionEnd=null),this.$onCanvasAction&&(w(t,U,this.$onCanvasAction),this.$onCanvasAction=null)),super.disconnectedCallback()}$getSelections(){let t=[];return this.parentElement&&(t=Array.from(this.parentElement.querySelectorAll(this.$getTagNameOf(x)))),t}$initSelection(t=!1,e=!1){const{initialCoverage:i,parentElement:s}=this;if(A(i)&&s){const n=this.aspectRatio||this.initialAspectRatio;let c=(e?0:this.width)||s.offsetWidth*i,o=(e?0:this.height)||s.offsetHeight*i;A(n)&&({width:c,height:o}=J({aspectRatio:n,width:c,height:o})),this.$change(this.x,this.y,c,o),t&&this.$center(),this.$initialSelection={x:this.x,y:this.y,width:this.width,height:this.height}}}$createSelection(){const t=this.cloneNode(!0);return this.hasAttribute("id")&&t.removeAttribute("id"),t.initialCoverage=NaN,this.active=!1,this.parentElement&&this.parentElement.insertBefore(t,this.nextSibling),t}$removeSelection(t=this){if(this.parentElement){const e=this.$getSelections();if(e.length>1){const i=e.indexOf(t),s=e[i+1]||e[i-1];s&&(t.active=!1,this.parentElement.removeChild(t),s.active=!0,s.$emit(M,{x:s.x,y:s.y,width:s.width,height:s.height}))}else this.$clear()}}$handleActionStart(t){var e,i;const s=(i=(e=t.detail)===null||e===void 0?void 0:e.relatedEvent)===null||i===void 0?void 0:i.target;this.$action="",this.$actionStartTarget=s,!this.hidden&&this.multiple&&!this.active&&s===this&&this.parentElement&&(this.$getSelections().forEach(n=>{n.active=!1}),this.active=!0,this.$emit(M,{x:this.x,y:this.y,width:this.width,height:this.height}))}$handleAction(t){const{currentTarget:e,detail:i}=t;if(!e||!i)return;const{relatedEvent:s}=i;let{action:n}=i;const c=s?ze(s):null;if(!n&&this.multiple&&(n=this.$action||c?.action,this.$action=n),!n||this.hidden&&n!==Q||this.multiple&&!this.active&&n!==Y)return;const{width:o,height:h}=this;let r=i.endX-i.startX,a=i.endY-i.startY,{aspectRatio:u}=this;switch(!A(u)&&s.shiftKey&&(u=A(o)&&A(h)?o/h:1),n){case Q:if(r!==0||a!==0){r===0?r=a:a===0&&(a=r);const{$canvas:$}=this,d=zt(e);(this.multiple&&!this.hidden?this.$createSelection():this).$change(i.startX-d.left,i.startY-d.top,Math.abs(r),Math.abs(a),u),r<0?a<0?n=F:a>0&&(n=K):r>0&&(a<0?n=B:a>0&&(n=q)),$&&($.$action=n)}break;case Vt:this.movable&&(this.dynamic||this.$actionStartTarget&&this.contains(this.$actionStartTarget))&&this.$move(r,a);break;case Y:if(s&&this.zoomable&&(this.dynamic||this.contains(s.target))){const $=zt(e);this.$zoom(i.scale,s.pageX-$.left,s.pageY-$.top)}break;default:this.$resize(n,r,a,u)}}$handleActionEnd(){this.$action="",this.$actionStartTarget=null}$handleKeyDown(t){if(this.hidden||!this.keyboard||this.multiple&&!this.active||t.defaultPrevented)return;const{activeElement:e}=document;if(!(e&&(["INPUT","TEXTAREA"].includes(e.tagName)||["true","plaintext-only"].includes(e.contentEditable))))switch(t.key){case"Backspace":t.metaKey&&(t.preventDefault(),this.$removeSelection());break;case"Delete":t.preventDefault(),this.$removeSelection();break;case"ArrowLeft":t.preventDefault(),this.$move(-1,0);break;case"ArrowRight":t.preventDefault(),this.$move(1,0);break;case"ArrowUp":t.preventDefault(),this.$move(0,-1);break;case"ArrowDown":t.preventDefault(),this.$move(0,1);break;case"+":t.preventDefault(),this.$zoom(.1);break;case"-":t.preventDefault(),this.$zoom(-.1);break}}$center(){const{parentElement:t}=this;if(!t)return this;const e=(t.offsetWidth-this.width)/2,i=(t.offsetHeight-this.height)/2;return this.$change(e,i)}$move(t,e=t){return this.$moveTo(this.x+t,this.y+e)}$moveTo(t,e=t){return this.movable?this.$change(t,e):this}$resize(t,e=0,i=0,s=this.aspectRatio){if(!this.resizable)return this;const n=A(s),{$canvas:c}=this;let{x:o,y:h,width:r,height:a}=this;switch(t){case wt:h+=i,a-=i,a<0&&(t=St,a=-a,h-=a),n&&(e=i*s,o+=e/2,r-=e,r<0&&(r=-r,o-=r));break;case yt:r+=e,r<0&&(t=Tt,r=-r,o-=r),n&&(i=e/s,h-=i/2,a+=i,a<0&&(a=-a,h-=a));break;case St:a+=i,a<0&&(t=wt,a=-a,h-=a),n&&(e=i*s,o-=e/2,r+=e,r<0&&(r=-r,o-=r));break;case Tt:o+=e,r-=e,r<0&&(t=yt,r=-r,o-=r),n&&(i=e/s,h+=i/2,a-=i,a<0&&(a=-a,h-=a));break;case B:n&&(i=-e/s),h+=i,a-=i,r+=e,r<0&&a<0?(t=K,r=-r,a=-a,o-=r,h-=a):r<0?(t=F,r=-r,o-=r):a<0&&(t=q,a=-a,h-=a);break;case F:n&&(i=e/s),o+=e,h+=i,r-=e,a-=i,r<0&&a<0?(t=q,r=-r,a=-a,o-=r,h-=a):r<0?(t=B,r=-r,o-=r):a<0&&(t=K,a=-a,h-=a);break;case q:n&&(i=e/s),r+=e,a+=i,r<0&&a<0?(t=F,r=-r,a=-a,o-=r,h-=a):r<0?(t=K,r=-r,o-=r):a<0&&(t=B,a=-a,h-=a);break;case K:n&&(i=-e/s),o+=e,r-=e,a+=i,r<0&&a<0?(t=B,r=-r,a=-a,o-=r,h-=a):r<0?(t=q,r=-r,o-=r):a<0&&(t=F,a=-a,h-=a);break}return c&&c.$setAction(t),this.$change(o,h,r,a)}$zoom(t,e,i){if(!this.zoomable||t===0)return this;t<0?t=1/(1-t):t+=1;const{width:s,height:n}=this,c=s*t,o=n*t;let h=this.x,r=this.y;return p(e)&&p(i)?(h-=(c-s)*((e-this.x)/s),r-=(o-n)*((i-this.y)/n)):(h-=(c-s)/2,r-=(o-n)/2),this.$change(h,r,c,o)}$change(t,e,i=this.width,s=this.height,n=this.aspectRatio,c=!1){return this.$changing||!p(t)||!p(e)||!p(i)||!p(s)||i<0||s<0?this:(A(n)&&({width:i,height:s}=J({aspectRatio:n,width:i,height:s},"cover")),this.precise||(t=Math.round(t),e=Math.round(e),i=Math.round(i),s=Math.round(s)),t===this.x&&e===this.y&&i===this.width&&s===this.height&&Object.is(n,this.aspectRatio)&&!c?this:(this.hidden&&(this.hidden=!1),this.$emit(M,{x:t,y:e,width:i,height:s})===!1?this:(this.$changing=!0,this.x=t,this.y=e,this.width=i,this.height=s,this.$changing=!1,this.$render())))}$reset(){const{x:t,y:e,width:i,height:s}=this.$initialSelection;return this.$change(t,e,i,s)}$clear(){return this.$change(0,0,0,0,NaN,!0),this.hidden=!0,this}$render(){return this.$setStyles({transform:`translate(${this.x}px, ${this.y}px)`,width:this.width,height:this.height})}$toCanvas(t){return new Promise((e,i)=>{if(!this.isConnected){i(new Error("The current element is not connected to the DOM."));return}const s=document.createElement("canvas");let{width:n,height:c}=this,o=1;if(et(t)&&(A(t.width)||A(t.height))&&({width:n,height:c}=J({aspectRatio:n/c,width:t.width,height:t.height}),o=n/this.width),s.width=n,s.height=c,!this.$canvas){e(s);return}const h=this.$canvas.querySelector(this.$getTagNameOf(H));if(!h){e(s);return}h.$ready().then(r=>{const a=s.getContext("2d");if(a){const[u,$,d,f,C,E]=h.$getTransform(),g=-this.x,v=-this.y,b=(g*f-d*v)/(u*f-d*$),m=(v*u-$*g)/(u*f-d*$);let S=u*b+d*m+C,T=$*b+f*m+E,k=r.naturalWidth,O=r.naturalHeight;o!==1&&(S*=o,T*=o,k*=o,O*=o);const N=k/2,R=O/2;a.fillStyle="transparent",a.fillRect(0,0,n,c),et(t)&&lt(t.beforeDraw)&&t.beforeDraw.call(this,a,s),a.save(),a.translate(N,R),a.transform(u,$,d,f,S,T),a.translate(-N,-R),a.drawImage(r,0,0,k,O),a.restore()}e(s)}).catch(i)})}}pt.$name=x;pt.$version="2.1.0";var qe=":host{display:flex;flex-direction:column;position:relative;touch-action:none;-webkit-user-select:none;-moz-user-select:none;user-select:none}:host([bordered]){border:1px dashed var(--theme-color)}:host([covered]){bottom:0;left:0;position:absolute;right:0;top:0}:host>span{display:flex;flex:1}:host>span+span{border-top:1px dashed var(--theme-color)}:host>span>span{flex:1}:host>span>span+span{border-left:1px dashed var(--theme-color)}";class gt extends I{constructor(){super(...arguments),this.$style=qe,this.bordered=!1,this.columns=3,this.covered=!1,this.rows=3,this.slottable=!1,this.themeColor="rgba(238, 238, 238, 0.5)"}static get observedAttributes(){return super.observedAttributes.concat(["bordered","columns","covered","rows"])}$propertyChangedCallback(t,e,i){Object.is(i,e)||(super.$propertyChangedCallback(t,e,i),(t==="rows"||t==="columns")&&this.$nextTick(()=>{this.$render()}))}connectedCallback(){super.connectedCallback(),this.$render()}$render(){const t=this.$getShadowRoot(),e=document.createDocumentFragment();for(let i=0;i<this.rows;i+=1){const s=document.createElement("span");s.setAttribute("role","row");for(let n=0;n<this.columns;n+=1){const c=document.createElement("span");c.setAttribute("role","gridcell"),s.appendChild(c)}e.appendChild(s)}t&&(t.innerHTML="",t.appendChild(e))}}gt.$name=Ee;gt.$version="2.1.0";var Ke=':host{display:inline-block;height:1em;position:relative;touch-action:none;-webkit-user-select:none;-moz-user-select:none;user-select:none;vertical-align:middle;width:1em}:host:after,:host:before{background-color:var(--theme-color);content:"";display:block;position:absolute}:host:before{height:1px;left:0;top:50%;transform:translateY(-50%);width:100%}:host:after{height:100%;left:50%;top:0;transform:translateX(-50%);width:1px}:host([centered]){left:50%;position:absolute;top:50%;transform:translate(-50%,-50%)}';class mt extends I{constructor(){super(...arguments),this.$style=Ke,this.centered=!1,this.slottable=!1,this.themeColor="rgba(238, 238, 238, 0.5)"}static get observedAttributes(){return super.observedAttributes.concat(["centered"])}}mt.$name=Ce;mt.$version="2.1.0";var Ze=":host{display:block;height:100%;overflow:hidden;position:relative;width:100%}";const Bt=new WeakMap,Ft=new WeakMap,qt=new WeakMap,Kt=new WeakMap,Ge="both",Ve="horizontal",Zt="vertical",Je="none";class bt extends I{constructor(){super(...arguments),this.$onSelectionChange=null,this.$onSourceImageLoad=null,this.$onSourceImageTransform=null,this.$scale=1,this.$style=Ze,this.resize=Zt,this.selection="",this.slottable=!1}set $image(t){Ft.set(this,t)}get $image(){return Ft.get(this)}set $sourceImage(t){Kt.set(this,t)}get $sourceImage(){return Kt.get(this)}set $canvas(t){Bt.set(this,t)}get $canvas(){return Bt.get(this)}set $selection(t){qt.set(this,t)}get $selection(){return qt.get(this)}static get observedAttributes(){return super.observedAttributes.concat(["resize","selection"])}connectedCallback(){var t,e;super.connectedCallback();let i=null;if(this.selection?i=(e=(t=ee(this))===null||t===void 0?void 0:t.querySelector(this.selection))!==null&&e!==void 0?e:null:i=this.closest(this.$getTagNameOf(x)),X(i)){this.$selection=i,this.$onSelectionChange=this.$handleSelectionChange.bind(this),y(i,M,this.$onSelectionChange);const s=i.closest(this.$getTagNameOf(j));if(s){this.$canvas=s;const n=s.querySelector(this.$getTagNameOf(H));n&&(this.$sourceImage=n,this.$image=n.cloneNode(!0),this.$getShadowRoot().appendChild(this.$image),this.$onSourceImageLoad=this.$handleSourceImageLoad.bind(this),this.$onSourceImageTransform=this.$handleSourceImageTransform.bind(this),y(n.$image,W,this.$onSourceImageLoad),y(n,rt,this.$onSourceImageTransform))}this.$render()}}disconnectedCallback(){const{$selection:t,$sourceImage:e}=this;t&&this.$onSelectionChange&&(w(t,M,this.$onSelectionChange),this.$onSelectionChange=null),e&&this.$onSourceImageLoad&&(w(e.$image,W,this.$onSourceImageLoad),this.$onSourceImageLoad=null),e&&this.$onSourceImageTransform&&(w(e,rt,this.$onSourceImageTransform),this.$onSourceImageTransform=null),super.disconnectedCallback()}$handleSelectionChange(t){this.$render(t.defaultPrevented?this.$selection:t.detail)}$handleSourceImageLoad(){const{$image:t,$sourceImage:e}=this,i=t.getAttribute("src"),s=e.getAttribute("src");s&&s!==i&&(t.setAttribute("src",s),t.$ready(()=>{this.$render()}))}$handleSourceImageTransform(t){this.$render(void 0,t.detail.matrix)}$render(t,e){const{$canvas:i,$selection:s}=this;!t&&!s.hidden&&(t=s),(!t||t.x===0&&t.y===0&&t.width===0&&t.height===0)&&(t={x:0,y:0,width:i.offsetWidth,height:i.offsetHeight});const{x:n,y:c,width:o,height:h}=t,r={},{clientWidth:a,clientHeight:u}=this;let $=a,d=u,f=NaN;switch(this.resize){case Ge:f=1,$=o,d=h,r.width=o,r.height=h;break;case Ve:f=h>0?u/h:0,$=o*f,r.width=$;break;case Zt:f=o>0?a/o:0,d=h*f,r.height=d;break;case Je:default:a>0?f=o>0?a/o:0:u>0&&(f=h>0?u/h:0)}this.$scale=f,this.$setStyles(r),this.$sourceImage&&setTimeout(()=>{this.$transformImageByOffset(e??this.$sourceImage.$getTransform(),-n,-c)})}$transformImageByOffset(t,e,i){const{$image:s,$scale:n,$sourceImage:c}=this;if(c&&s&&n>=0){const[o,h,r,a,u,$]=t,d=(e*a-r*i)/(o*a-r*h),f=(i*o-h*e)/(o*a-r*h),C=o*d+r*f+u,E=h*d+a*f+$;s.$ready(g=>{this.$setStyles.call(s,{width:g.naturalWidth*n,height:g.naturalHeight*n})}),s.$setTransform(o,h,r,a,C*n,E*n)}}}bt.$name=Se;bt.$version="2.1.0";var Qe='<cropper-canvas background><cropper-image rotatable scalable skewable translatable></cropper-image><cropper-shade hidden></cropper-shade><cropper-handle action="select" plain></cropper-handle><cropper-selection initial-coverage="0.5" movable resizable><cropper-grid role="grid" bordered covered></cropper-grid><cropper-crosshair centered></cropper-crosshair><cropper-handle action="move" theme-color="rgba(255, 255, 255, 0.35)"></cropper-handle><cropper-handle action="n-resize"></cropper-handle><cropper-handle action="e-resize"></cropper-handle><cropper-handle action="s-resize"></cropper-handle><cropper-handle action="w-resize"></cropper-handle><cropper-handle action="ne-resize"></cropper-handle><cropper-handle action="nw-resize"></cropper-handle><cropper-handle action="se-resize"></cropper-handle><cropper-handle action="sw-resize"></cropper-handle></cropper-selection></cropper-canvas>';const ti=/^img|canvas$/,ei=/<(\/?(?:script|style)[^>]*)>/gi,Gt={template:Qe};dt.$define();mt.$define();gt.$define();$t.$define();ut.$define();pt.$define();ft.$define();bt.$define();class se{constructor(t,e){var i;if(this.options=Gt,V(t)&&(t=document.querySelector(t)),!X(t)||!ti.test(t.localName))throw new Error("The first argument is required and must be an <img> or <canvas> element.");this.element=t,e=Object.assign(Object.assign({},Gt),e),this.options=e;let{container:s}=e;if(s&&(V(s)&&(s=(i=ee(t))===null||i===void 0?void 0:i.querySelector(s)),!X(s)))throw new Error("The `container` option must be an element or a valid selector.");X(s)||(t.parentElement?s=t.parentElement:s=t.ownerDocument.body),this.container=s;const n=t.localName;let c="";n==="img"?{src:c}=t:n==="canvas"&&window.HTMLCanvasElement&&(c=t.toDataURL());const{template:o}=e;if(o&&V(o)){const h=document.createElement("template"),r=document.createDocumentFragment();h.innerHTML=o.replace(ei,"&lt;$1&gt;"),r.appendChild(h.content),Array.from(r.querySelectorAll(H)).forEach(a=>{a.setAttribute("src",c),a.setAttribute("alt",t.alt||"The image to crop"),n==="img"&&["crossorigin","decoding","elementtiming","fetchpriority","loading","referrerpolicy","sizes","srcset"].forEach(u=>{t.hasAttribute(u)&&a.setAttribute(u,t.getAttribute(u)||"")})}),t.parentElement?(t.style.display="none",s.insertBefore(r,t.nextSibling)):s.appendChild(r)}}getCropperCanvas(){return this.container.querySelector(j)}getCropperImage(){return this.container.querySelector(H)}getCropperSelection(){return this.container.querySelector(x)}getCropperSelections(){return this.container.querySelectorAll(x)}destroy(){var t;const e=this.getCropperCanvas();e&&((t=e.parentElement)===null||t===void 0||t.removeChild(e)),this.element&&(this.element.style.display="")}}se.version="2.1.0";const ii={class:"mk-cropper-dialog",style:"--vw: 100%; --vh: 100%;"},si={key:0,class:"loading"},ni={class:"container"},oi=["src"],ai=ne({__name:"MkCropperDialog",props:{imageFile:{},aspectRatio:{},uploadFolder:{}},emits:["ok","cancel","closed"],setup(l,{emit:t}){const e=l,i=t,s=URL.createObjectURL(e.imageFile),n=vt("dialogEl"),c=vt("imgEl");let o=null;const h=oe(!0);async function r(){const d=await new Promise(async f=>{if(o==null)throw new Error("Cropper is not initialized");const C=await o.getCropperImage(),E=await o.getCropperSelection(),g=C.getBoundingClientRect().width/C.clientWidth,v=E.getBoundingClientRect().width/g;(await E.$toCanvas({width:v})).toBlob(m=>{m&&f(m)})});i("ok",d),n.value!=null&&n.value.close()}function a(){i("cancel"),n.value!=null&&n.value.close()}function u(){h.value=!1,o&&(o.getCropperImage().$center("contain"),o.getCropperSelection().$center())}return ae(()=>{if(c.value==null)return;o=new se(c.value,{});const $=getComputedStyle(window.document.documentElement),d=o.getCropperSelection();d.themeColor=ge($.getPropertyValue("--MI_THEME-accent")).toHexString(),e.aspectRatio!=null&&(d.aspectRatio=e.aspectRatio),d.initialAspectRatio=e.aspectRatio??1,d.outlined=!0,window.setTimeout(()=>{o!=null&&(o.getCropperImage().$center("contain"),d.$center())},100),window.setTimeout(()=>{o!=null&&(o.getCropperImage().$center("contain"),d.$center())},500)}),re(()=>{URL.revokeObjectURL(s)}),($,d)=>{const f=ce("MkLoading");return Ct(),he(me,{ref_key:"dialogEl",ref:n,width:800,height:500,scroll:!1,withOkButton:!0,onClose:d[0]||(d[0]=C=>a()),onOk:d[1]||(d[1]=C=>r()),onClosed:d[2]||(d[2]=C=>i("closed"))},{header:st(()=>[$e(pe("画像のクロップ"),1)]),default:st(()=>[nt("div",ii,[Et(le,{name:"fade"},{default:st(()=>[h.value?(Ct(),de("div",si,[Et(f)])):ue("",!0)]),_:1}),nt("div",ni,[nt("img",{ref_key:"imgEl",ref:c,src:fe(s),style:{display:"none"},onLoad:u},null,40,oi)])])]),_:1},512)}}}),ui=be(ai,[["__scopeId","data-v-2b7b24ff"]]);export{ui as default};

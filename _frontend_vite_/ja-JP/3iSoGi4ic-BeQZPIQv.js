import{az as $,aA as E,M as m,L as v,k as R,J as g}from"./3iSoGi4ic-DV-GuiCp.js";import{M as z}from"./3iSoGi4ic-Cj3FgKaq.js";import{b as S,a as k,w as T,c as h,z as p,k as W,f,i as s,h as o,l as i,C as u,B as c,j as I,p as r,E as d,t as Z,F,A as G,D as H}from"./3iSoGi4ic-D0mTJ0Mu.js";import"./3iSoGi4ic-B1GPmOGN.js";import"./3iSoGi4ic-D98_HDRS.js";import"./3iSoGi4ic-CS6W3O_2.js";const j={key:0,class:"_spacer",style:{"--MI_SPACER-w":"1200px"}},J={key:1,class:"_spacer",style:{"--MI_SPACER-w":"700px"}},U={key:0,class:"members _margin"},q={class:"_gaps_s"},K={key:0,class:"count"},O={key:0,class:"count"},ne=S({__name:"list",props:{listId:{}},setup(b){const _=b,e=k(null),x=k(null),y=k([]);function M(){g("users/lists/show",{listId:_.listId,forPublic:!0}).then(l=>{e.value=l,!(l.userIds==null||l.userIds.length===0)&&g("users/show",{userIds:l.userIds}).then(t=>{y.value=t})}).catch(l=>{x.value=l})}function w(){e.value!=null&&v("users/lists/favorite",{listId:e.value.id}).then(()=>{e.value!=null&&(e.value.isLiked=!0,e.value.likedCount=e.value.likedCount!=null?e.value.likedCount+1:1)})}function B(){e.value!=null&&v("users/lists/unfavorite",{listId:e.value.id}).then(()=>{e.value!=null&&(e.value.isLiked=!1,e.value.likedCount=e.value.likedCount!=null?Math.max(0,e.value.likedCount-1):0)})}async function L(){if(e.value==null)return;const{canceled:l,result:t}=await R({title:"リスト名を入力"});l||t==null||await v("users/lists/create-from-public",{name:t,listId:e.value.id})}T(()=>_.listId,M,{immediate:!0});const A=h(()=>[]),P=h(()=>[]);return $(()=>({title:e.value?e.value.name:"リスト",icon:"ti ti-list"})),(l,t)=>{const N=p("MkResult"),D=p("MkA"),V=p("PageWithHeader"),C=W("tooltip");return s(),f(V,{actions:A.value,tabs:P.value},{default:o(()=>[x.value!=null?(s(),i("div",j,[c(N,{type:"error"})])):e.value?(s(),i("div",J,[e.value?(s(),i("div",U,[r("div",{class:"xBrGy"},d("メンバー"),3),r("div",q,[(s(!0),i(F,null,G(y.value,a=>(s(),i("div",{key:a.id,class:"xu7r6"},[c(D,{class:"xosyc",to:`${Z(E)(a)}`},{default:o(()=>[c(z,{user:a},null,8,["user"])]),_:2},1032,["class","to"])],2))),128))])])):u("",!0),e.value.isLiked?I((s(),f(m,{key:1,inline:"",class:"xsgm7",asLike:"",primary:"",onClick:t[0]||(t[0]=a=>B())},{default:o(()=>[t[3]||(t[3]=r("i",{class:"ti ti-heart-off"},null,-1)),e.value.likedCount!=null&&e.value.likedCount>0?(s(),i("span",K,d(e.value.likedCount),1)):u("",!0)]),_:1},8,["class"])),[[C,"いいねを解除"]]):u("",!0),e.value.isLiked?u("",!0):I((s(),f(m,{key:2,inline:"",class:"xsgm7",asLike:"",onClick:t[1]||(t[1]=a=>w())},{default:o(()=>[t[4]||(t[4]=r("i",{class:"ti ti-heart"},null,-1)),(s(),i("span",O,d(e.value.likedCount),1))]),_:1},8,["class"])),[[C,"いいね！"]]),c(m,{inline:"",onClick:t[2]||(t[2]=a=>L())},{default:o(()=>[r("i",{class:"ti ti-download x6Z8g"},null,2),H(d("インポート"),1)]),_:1})])):u("",!0)]),_:1},8,["actions","tabs"])}}});export{ne as default};

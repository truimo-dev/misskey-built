import{P as b,az as g,H as P,J as I}from"./3iSoGi4ic-DV-GuiCp.js";import{M as w}from"./3iSoGi4ic-PqEuquuW.js";import{b as C,a as u,w as M,m as R,c as v,z as y,f as i,i as e,h as E,l as c,C as p,B as S,p as B,E as H,t as N}from"./3iSoGi4ic-D0mTJ0Mu.js";import"./3iSoGi4ic-B1GPmOGN.js";import"./3iSoGi4ic-D98_HDRS.js";import"./3iSoGi4ic-Dn35_-KQ.js";import"./3iSoGi4ic-CsUWgtg6.js";import"./3iSoGi4ic-CdSqfJMx.js";import"./3iSoGi4ic-Dv7rS4og.js";const A={key:0,class:"_spacer",style:{"--MI_SPACER-w":"1200px"}},T={key:1,class:"_spacer",style:{"--MI_SPACER-w":"1200px"}},U={class:"_gaps_s"},V={key:0},z={key:2,class:"_spacer",style:{"--MI_SPACER-w":"700px"}},Q=C({__name:"role",props:{roleId:{},initialTab:{default:"users"}},setup(k){const o=k,n=u(o.initialTab),l=u(null),s=u(null),r=u(!1);M(()=>o.roleId,()=>{I("roles/show",{roleId:o.roleId}).then(a=>{l.value=a,s.value=null,r.value=a.isExplorable&&a.isPublic}).catch(a=>{a.code==="NO_SUCH_ROLE"?s.value="ロールはありません":s.value="問題が発生しました"})},{immediate:!0});const f=R(new b("roles/users",{limit:30,computedParams:v(()=>({roleId:o.roleId}))})),h=v(()=>[{key:"users",icon:"ti ti-users",title:"ユーザー"},{key:"timeline",icon:"ti ti-pencil",title:"タイムライン"}]);return g(()=>({title:l.value?l.value.name:s.value??"ロール",icon:"ti ti-badge"})),(a,_)=>{const m=y("MkResult"),x=y("PageWithHeader");return e(),i(x,{tab:n.value,"onUpdate:tab":_[0]||(_[0]=d=>n.value=d),tabs:h.value},{default:E(()=>[s.value!=null?(e(),c("div",A,[S(m,{type:"error",text:s.value},null,8,["text"])])):n.value==="users"?(e(),c("div",T,[B("div",U,[l.value?(e(),c("div",V,H(l.value.description),1)):p("",!0),r.value?(e(),i(w,{key:1,paginator:N(f),extractor:d=>d.user},null,8,["paginator","extractor"])):r.value?p("",!0):(e(),i(m,{key:2,type:"empty",text:"ありません"},null,8,["text"]))])])):n.value==="timeline"?(e(),c("div",z,[r.value?(e(),i(P,{key:0,ref:"timeline",src:"role",role:o.roleId},null,8,["role"])):r.value?p("",!0):(e(),i(m,{key:1,type:"empty",text:"ありません"},null,8,["text"]))])):p("",!0)]),_:1},8,["tab","tabs"])}}});export{Q as default};

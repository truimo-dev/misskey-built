import{ah as P,M as y,R as V,ad as J,J as K,E as L}from"./3iSoGi4ic-DV-GuiCp.js";import{M as U}from"./3iSoGi4ic-B70zSkp5.js";import{b as W,N as T,u as $,a as M,c as F,f as C,i as s,h as a,p as n,l as d,C as H,B as v,D as c,E as i,t as R,F as Y,A as Z}from"./3iSoGi4ic-D0mTJ0Mu.js";import"./3iSoGi4ic-B1GPmOGN.js";import"./3iSoGi4ic-D98_HDRS.js";const z={class:"_spacer",style:{"--MI_SPACER-min":"20px","--MI_SPACER-max":"28px"}},Q=["onClick"],oe=W({__name:"MkRoleSelectDialog",props:{initialRoleIds:{default:void 0},infoMessage:{default:void 0},title:{default:void 0},publicOnly:{type:Boolean,default:!0}},emits:["done","close","closed"],setup(_,{emit:w}){const u=w,I=_,{initialRoleIds:h,infoMessage:g,title:B,publicOnly:D}=T(I),f=$("windowEl"),m=M([]),r=M(h.value??[]),k=M(!1),x=F(()=>{const l=m.value.filter(e=>r.value.includes(e.id));return l.sort((e,t)=>e.displayOrder!==t.displayOrder?t.displayOrder-e.displayOrder:e.id.localeCompare(t.id)),l});async function b(){k.value=!0;const l=await K("admin/roles/list",{});m.value=l.filter(e=>D.value?e.isPublic:!0),k.value=!1}async function A(){const l=m.value.filter(o=>o.isPublic).filter(o=>!r.value.includes(o.id)).map(o=>({label:o.name,value:o.id})),{canceled:e,result:t}=await L({items:l});e||t==null||r.value.push(t)}async function E(l){r.value=r.value.filter(e=>e!==l)}function O(){u("done",x.value),f.value?.close()}function S(){u("close"),f.value?.close()}function N(){u("close"),f.value?.close()}return b(),(l,e)=>(s(),C(J,{ref_key:"windowEl",ref:f,withOkButton:!1,okButtonDisabled:!1,width:400,height:500,onClose:N,onClosed:e[0]||(e[0]=t=>u("closed"))},{header:a(()=>[c(i(R(B)),1)]),default:a(()=>[n("div",z,[k.value?(s(),C(P,{key:0})):(s(),d("div",{key:1,class:"_gaps xrW3s"},[n("div",{class:"xkR3K"},[v(y,{rounded:"",onClick:A},{default:a(()=>[e[1]||(e[1]=n("i",{class:"ti ti-plus"},null,-1)),c(" "+i("Ekle"),1)]),_:1})],2),x.value.length>0?(s(),d("div",{key:0,class:"_gaps x5DtM"},[(s(!0),d(Y,null,Z(x.value,t=>(s(),d("div",{key:t.id,class:"xxLUK"},[v(U,{class:"x2JIY",role:t,forModeration:!0,detailed:!1,style:{"pointer-events":"none"}},null,8,["class","role"]),n("button",{class:"_button xp3cH",onClick:o=>E(t.id)},[...e[2]||(e[2]=[n("i",{class:"ti ti-x"},null,-1)])],10,Q)],2))),128))],2)):(s(),d("div",{key:1,class:"x5DtM",style:{"text-align":"center"}},i("Seçilmedi"),3)),R(g)?(s(),C(V,{key:2},{default:a(()=>[c(i(R(g)),1)]),_:1})):H("",!0),n("div",{class:"xvnDZ"},[v(y,{primary:"",onClick:O},{default:a(()=>[c(i("Tamam"),1)]),_:1}),v(y,{onClick:S},{default:a(()=>[c(i("Vazgeç"),1)]),_:1})],2)],2))])]),_:1},512))}});export{oe as default};

import{aS as q,J as y,az as N,ag as E,a7 as V,ab as L,M as _,C as H,L as J,A as k}from"./3iSoGi4ic-DV-GuiCp.js";import{M as R}from"./3iSoGi4ic-BDF7xMl0.js";import{_ as Y}from"./3iSoGi4ic-Dz5OvLqt.js";import{M as j}from"./3iSoGi4ic-Fx-BY70c.js";import{F as G}from"./3iSoGi4ic-D8X1N6Gw.js";import{b as K,a as Q,c as S,z as M,f as w,i as v,h as i,p as u,B as n,t as U,R as X,D as r,E as m,l as b,F as h,A as D,C as Z}from"./3iSoGi4ic-D0mTJ0Mu.js";import"./3iSoGi4ic-B1GPmOGN.js";import"./3iSoGi4ic-D98_HDRS.js";import"./3iSoGi4ic-CZYXc2mx.js";const ee={class:"_spacer",style:{"--MI_SPACER-w":"900px"}},te=["id","checked","onChange"],le=["for"],se={class:"_buttons"},xe=K({__name:"ads",setup(ae){const p=Q([]),c=new Date().getTimezoneOffset()*60*1e3,C=["Pazar","Pazartesi","Salı","Çarşamba","Perşembe","Cuma","Cumartesi"],{model:A,def:T}=q({items:[{label:"Tümü",value:"all"},{label:"Paylaşım",value:"publishing"},{label:"Süresi dolmuş",value:"expired"}],initialValue:"all"});let f=null;y("admin/ad/list",{publishing:f}).then(t=>{t!=null&&(p.value=t.map(e=>{const o=new Date(e.expiresAt),d=new Date(e.startsAt);return o.setMilliseconds(o.getMilliseconds()-c),d.setMilliseconds(d.getMilliseconds()-c),{...e,expiresAt:o.toISOString().slice(0,16),startsAt:d.toISOString().slice(0,16)}}))});const O=t=>{t==="publishing"?f=!0:t==="expired"?f=!1:f=null,x()};function I(t,e){t.dayOfWeek^=1<<e}function z(){p.value.unshift({id:"",memo:"",place:"square",priority:"middle",ratio:1,url:"",imageUrl:"",expiresAt:new Date().toISOString(),startsAt:new Date().toISOString(),dayOfWeek:0,isSensitive:!1})}function $(t){H({type:"warning",text:(({x})=>("“"+x+"” öğesini kaldırmak istediğinizden emin misin?"))({x:t.url})}).then(({canceled:e})=>{e||(p.value=p.value.filter(o=>o!==t),t.id!==""&&J("admin/ad/delete",{id:t.id}).then(()=>{x()}))})}function W(t){t.id===""?y("admin/ad/create",{...t,expiresAt:new Date(t.expiresAt).getTime(),startsAt:new Date(t.startsAt).getTime()}).then(()=>{k({type:"success",text:"Kaydedildi"}),x()}).catch(e=>{k({type:"error",text:e})}):y("admin/ad/update",{...t,expiresAt:new Date(t.expiresAt).getTime(),startsAt:new Date(t.startsAt).getTime()}).then(()=>{k({type:"success",text:"Kaydedildi"})}).catch(e=>{k({type:"error",text:e})})}function B(){y("admin/ad/list",{untilId:p.value.reduce((t,e)=>e.id!==""?e:t).id,publishing:f}).then(t=>{t!=null&&(p.value=p.value.concat(t.map(e=>{const o=new Date(e.expiresAt),d=new Date(e.startsAt);return o.setMilliseconds(o.getMilliseconds()-c),d.setMilliseconds(d.getMilliseconds()-c),{...e,expiresAt:o.toISOString().slice(0,16),startsAt:d.toISOString().slice(0,16)}})))})}function x(){y("admin/ad/list",{publishing:f}).then(t=>{t!=null&&(p.value=t.map(e=>{const o=new Date(e.expiresAt),d=new Date(e.startsAt);return o.setMilliseconds(o.getMilliseconds()-c),d.setMilliseconds(d.getMilliseconds()-c),{...e,expiresAt:o.toISOString().slice(0,16),startsAt:d.toISOString().slice(0,16)}}))})}x();const F=S(()=>[{asFullButton:!0,icon:"ti ti-plus",text:"Ekle",handler:z}]),P=S(()=>[]);return N(()=>({title:"Reklamlar",icon:"ti ti-ad"})),(t,e)=>{const o=M("MkAd"),d=M("PageWithHeader");return v(),w(d,{actions:F.value,tabs:P.value},{default:i(()=>[u("div",ee,[n(E,{modelValue:U(A),"onUpdate:modelValue":[e[0]||(e[0]=l=>X(A)?A.value=l:null),O],items:U(T),class:"xCqz1"},{label:i(()=>[r(m("Durum"),1)]),_:1},8,["modelValue","items","class"]),u("div",null,[(v(!0),b(h,null,D(p.value,l=>(v(),b("div",{class:"_panel _gaps_m x4PVT"},[l.url?(v(),w(o,{key:l.id,specify:l},null,8,["specify"])):Z("",!0),n(V,{modelValue:l.url,"onUpdate:modelValue":a=>l.url=a,type:"url"},{label:i(()=>[...e[2]||(e[2]=[r("URL",-1)])]),_:1},8,["modelValue","onUpdate:modelValue"]),n(V,{modelValue:l.imageUrl,"onUpdate:modelValue":a=>l.imageUrl=a,type:"url"},{label:i(()=>[r(m("Görsel URL"),1)]),_:1},8,["modelValue","onUpdate:modelValue"]),n(Y,{modelValue:l.place,"onUpdate:modelValue":a=>l.place=a},{label:i(()=>[...e[3]||(e[3]=[r("Form",-1)])]),default:i(()=>[e[4]||(e[4]=u("option",{value:"square"},"square",-1)),e[5]||(e[5]=u("option",{value:"horizontal"},"horizontal",-1)),e[6]||(e[6]=u("option",{value:"horizontal-big"},"horizontal-big",-1))]),_:1},8,["modelValue","onUpdate:modelValue"]),n(G,null,{default:i(()=>[n(V,{modelValue:l.ratio,"onUpdate:modelValue":a=>l.ratio=a,type:"number"},{label:i(()=>[r(m("Oran"),1)]),_:1},8,["modelValue","onUpdate:modelValue"]),n(V,{modelValue:l.startsAt,"onUpdate:modelValue":a=>l.startsAt=a,type:"datetime-local"},{label:i(()=>[r(m("Başla"),1)]),_:1},8,["modelValue","onUpdate:modelValue"]),n(V,{modelValue:l.expiresAt,"onUpdate:modelValue":a=>l.expiresAt=a,type:"datetime-local"},{label:i(()=>[r(m("Son tarih"),1)]),_:1},8,["modelValue","onUpdate:modelValue"])]),_:2},1024),n(L,{modelValue:l.isSensitive,"onUpdate:modelValue":a=>l.isSensitive=a},{label:i(()=>[r(m("Hassas"),1)]),_:1},8,["modelValue","onUpdate:modelValue"]),n(j,null,{label:i(()=>[r(m("Gelişmiş ayarlar"),1)]),default:i(()=>[u("span",null,[r(m("Haftanın günü, sunucunun saat diliminden belirlenir.")+" ",1),(v(),b(h,null,D(C,(a,g)=>u("div",{key:g},[u("input",{id:`ad${l.id}-${g}`,type:"checkbox",checked:(l.dayOfWeek&1<<g)!==0,onChange:oe=>I(l,g)},null,40,te),u("label",{for:`ad${l.id}-${g}`},m(a),9,le)])),64))])]),_:2},1024),n(R,{modelValue:l.memo,"onUpdate:modelValue":a=>l.memo=a},{label:i(()=>[r(m("Hatırlatıcı"),1)]),_:1},8,["modelValue","onUpdate:modelValue"]),u("div",se,[n(_,{inline:"",primary:"",style:{"margin-right":"12px"},onClick:a=>W(l)},{default:i(()=>[e[7]||(e[7]=u("i",{class:"ti ti-device-floppy"},null,-1)),r(" "+m("Kaydet"),1)]),_:1},8,["onClick"]),n(_,{inline:"",danger:"",onClick:a=>$(l)},{default:i(()=>[e[8]||(e[8]=u("i",{class:"ti ti-trash"},null,-1)),r(" "+m("Sil"),1)]),_:1},8,["onClick"])])],2))),256)),n(_,{onClick:e[1]||(e[1]=l=>B())},{default:i(()=>[e[9]||(e[9]=u("i",{class:"ti ti-reload"},null,-1)),r(m("Daha fazlası!"),1)]),_:1})])])]),_:1},8,["actions","tabs"])}}});export{xe as default};

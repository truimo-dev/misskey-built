import{b,a as A,f as C,i as o,h as n,p as r,j as B,t as p,S as D,l,F as E,A as H,g as I,E as d,D as M}from"./3iSoGi4ic-D0mTJ0Mu.js";import{I as N,r as m}from"./3iSoGi4ic-nJzNoieu.js";import{P as T}from"./3iSoGi4ic-KYydmxIu.js";import{u as V}from"./3iSoGi4ic-DCTAa4Sx.js";import{$ as W,l as u,A as g,_ as F}from"./3iSoGi4ic-DV-GuiCp.js";import{M as R}from"./3iSoGi4ic-CC5SbM-1.js";import{c as U,a as $}from"./3iSoGi4ic-CCt4ZT5M.js";import"./3iSoGi4ic-C0O4p9AH.js";import"./3iSoGi4ic-Ddz4upM5.js";import"./3iSoGi4ic-ke9ZaMpT.js";import"./3iSoGi4ic-B1GPmOGN.js";import"./3iSoGi4ic-D98_HDRS.js";const z={class:"uylguesu _monospace"},K={class:"logs"},f="aiscript",L=b({__name:"WidgetAiscript",props:{widget:{}},emits:["updateProps"],setup(w,{expose:x,emit:y}){const _={showHeader:{type:"boolean",default:!0},script:{type:"string",multiline:!0,default:"(1 + 1)",hidden:!0}},i=w,h=y,{widgetProps:s,configure:v}=V(f,_,i,h),k=new T,a=A([]),P=async()=>{a.value=[];const c=new N(U({storageKey:"widget",token:W?.token}),{in:$,out:t=>{a.value.push({id:u(),text:t.type==="str"?t.value:m(t),print:!0})},log:(t,S)=>{switch(t){case"end":a.value.push({id:u(),text:m(S.val,!0),print:!1});break}}});let e;try{e=k.parse(s.script)}catch{g({type:"error",text:"Syntax error :("});return}try{await c.exec(e)}catch(t){g({type:"error",text:t instanceof Error?t.message:String(t)})}};return x({name:f,configure:v,id:i.widget?i.widget.id:null}),(c,e)=>(o(),C(R,{showHeader:p(s).showHeader,"data-cy-mkw-aiscript":"",class:"mkw-aiscript"},{icon:n(()=>[...e[1]||(e[1]=[r("i",{class:"ti ti-terminal-2"},null,-1)])]),header:n(()=>[M(d("AiScript-Konsole"),1)]),default:n(()=>[r("div",z,[B(r("textarea",{"onUpdate:modelValue":e[0]||(e[0]=t=>p(s).script=t),placeholder:"(1 + 1)"},null,512),[[D,p(s).script]]),r("button",{class:"_buttonPrimary",onClick:P},"RUN"),r("div",K,[(o(!0),l(E,null,H(a.value,t=>(o(),l("div",{key:t.id,class:I(["log",{print:t.print}])},d(t.text),3))),128))])])]),_:1},8,["showHeader"]))}}),it=F(L,[["__scopeId","data-v-34c283f1"]]);export{it as default};

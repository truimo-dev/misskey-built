const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["https://fastly.jsdelivr.net/gh/truimo-dev/misskey-built@latest/_frontend_vite_/scripts/3iSoGi4ic-D4c9btWc.js","https://fastly.jsdelivr.net/gh/truimo-dev/misskey-built@latest/_frontend_vite_/scripts/3iSoGi4ic-DV-GuiCp.js","https://fastly.jsdelivr.net/gh/truimo-dev/misskey-built@latest/_frontend_vite_/scripts/3iSoGi4ic-D0mTJ0Mu.js","https://fastly.jsdelivr.net/gh/truimo-dev/misskey-built@latest/_frontend_vite_/scripts/3iSoGi4ic-B1GPmOGN.js","https://fastly.jsdelivr.net/gh/truimo-dev/misskey-built@latest/_frontend_vite_/scripts/3iSoGi4ic-Dty8GuTz.js","https://fastly.jsdelivr.net/gh/truimo-dev/misskey-built@latest/_frontend_vite_/scripts/3iSoGi4ic-D98_HDRS.js","https://fastly.jsdelivr.net/gh/truimo-dev/misskey-built@latest/_frontend_vite_/assets/3iSoGi4ic-DZU1WGtr.css","https://fastly.jsdelivr.net/gh/truimo-dev/misskey-built@latest/_frontend_vite_/assets/3iSoGi4ic-9GwroBN9.css","https://fastly.jsdelivr.net/gh/truimo-dev/misskey-built@latest/_frontend_vite_/scripts/3iSoGi4ic-BDF7xMl0.js","https://fastly.jsdelivr.net/gh/truimo-dev/misskey-built@latest/_frontend_vite_/assets/3iSoGi4ic-8Z3zIVAA.css"])))=>i.map(i=>d[i]);
import{ak as V,R as $,bo as L,c4 as f,bd as T,J as w,c as W,bc as J,L as y,A as H,k as O,d as P,e as j,C as z,b8 as q}from"./3iSoGi4ic-DV-GuiCp.js";import{b as Z,a as g,c as A,e as K,z as _,k as U,l as c,i as r,B as d,f as E,h as n,D as o,E as u,t as G,p as l,j as x}from"./3iSoGi4ic-D0mTJ0Mu.js";import"./3iSoGi4ic-B1GPmOGN.js";import"./3iSoGi4ic-D98_HDRS.js";const X={class:"_gaps"},Y={key:1,class:"_gaps"},ee=["href","download"],te={class:"_gaps_s"},re=Z({__name:"drive.file.info",props:{fileId:{}},setup(h){const I=V(),C=h,k=g(!0),e=g(),B=A(()=>{if(!e.value)return["Drive"];const s=["Drive"];function t(a){a.parent&&t(a.parent),s.push(a.name)}return e.value.folder&&t(e.value.folder),s});A(()=>e.value?.type.startsWith("image/"));async function p(){k.value=!0,e.value=await w("drive/files/show",{fileId:C.fileId}).catch(s=>{console.error(s)}),k.value=!1}function D(){e.value!=null&&W({initialFiles:[e.value]})}function M(){if(e.value==null)return;const s=e.value;J(null).then(t=>{w("drive/files/update",{fileId:s.id,folderId:t[0]?t[0].id:null}).then(async()=>{await p()})})}function b(){e.value!=null&&y("drive/files/update",{fileId:e.value.id,isSensitive:!e.value.isSensitive}).then(async()=>{await p()}).catch(s=>{H({type:"error",title:"Fehler",text:s.message})})}function R(){if(e.value==null)return;const s=e.value;O({title:"Datei umbenennen",placeholder:"Gib einen neuen Dateinamen ein",default:e.value.name}).then(({canceled:t,result:a})=>{t||y("drive/files/update",{fileId:s.id,name:a}).then(async()=>{await p()})})}async function N(){if(e.value==null)return;const s=e.value,{dispose:t}=await P(j(()=>import("./3iSoGi4ic-D4c9btWc.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9]),import.meta.url).then(a=>a.default),{default:e.value.comment??"",file:e.value},{done:a=>{y("drive/files/update",{fileId:s.id,comment:a.length===0?null:a}).then(async()=>{await p()})},closed:()=>t()})}async function F(){if(e.value==null)return;const{canceled:s}=await z({type:"warning",text:(({name})=>("Möchtest du die Datei „"+name+"“ wirklich löschen? Einige Inhalte, die diese Datei verwenden, werden auch verschwinden."))({name:e.value.name})});s||(await y("drive/files/delete",{fileId:e.value.id}),q.emit("driveFilesDeleted",[e.value]),I.push("/my/drive"))}return K(async()=>{await p()}),(s,t)=>{const a=_("MkLoading"),Q=_("MkTime"),S=_("MkResult"),m=U("tooltip");return r(),c("div",X,[d($,null,{default:n(()=>[o(u("Nur der Benutzer, der diese Datei hochgeladen hat, kann diese Seite sehen."),1)]),_:1}),k.value?(r(),E(a,{key:0})):e.value?(r(),c("div",Y,[l("div",{class:"xb7Eq"},[d(L,{mediaList:[e.value]},null,8,["mediaList"])],2),l("div",{class:"xBjQI"},[l("button",{class:"_button x2dn7",onClick:t[0]||(t[0]=v=>R())},[l("h2",{class:"_nowrap xe2RH"},u(e.value.name),3),l("i",{class:"ti ti-pencil x8HRQ"},null,2)],2),l("div",{class:"x16FZ"},[x((r(),c("button",{class:"_button xuplr",onClick:t[1]||(t[1]=v=>D())},[...t[7]||(t[7]=[l("i",{class:"ti ti-pencil"},null,-1)])],2)),[[m,"Notiz für diese Datei schreiben"]]),e.value.isSensitive?x((r(),c("button",{key:0,class:"_button xuplr",onClick:t[2]||(t[2]=v=>b())},[...t[8]||(t[8]=[l("i",{class:"ti ti-eye"},null,-1)])],2)),[[m,"Als nicht sensibel markieren"]]):x((r(),c("button",{key:1,class:"_button xuplr",onClick:t[3]||(t[3]=v=>b())},[...t[9]||(t[9]=[l("i",{class:"ti ti-eye-exclamation"},null,-1)])],2)),[[m,"Als sensibel markieren"]]),x((r(),c("a",{href:e.value.url,download:e.value.name,class:"_button xuplr"},[...t[10]||(t[10]=[l("i",{class:"ti ti-download"},null,-1)])],10,ee)),[[m,"Herunterladen"]]),x((r(),c("button",{class:"_button xuplr xfSDW",onClick:t[4]||(t[4]=v=>F())},[...t[11]||(t[11]=[l("i",{class:"ti ti-trash"},null,-1)])],2)),[[m,"Löschen"]])],2)],2),l("div",te,[l("button",{class:"_button xdyEW",onClick:t[5]||(t[5]=v=>M())},[d(f,null,{key:n(()=>[o(u("Ordner"),1)]),value:n(()=>[o(u(B.value.join(" > ")),1),l("i",{class:"ti ti-pencil xmpg5"},null,2)]),_:1})],2),l("button",{class:"_button xdyEW",onClick:t[6]||(t[6]=v=>N())},[d(f,{class:"x5bQx"},{key:n(()=>[o(u("Beschreibung"),1)]),value:n(()=>[o(u(e.value.comment?e.value.comment:`(${"Nichts"})`),1),l("i",{class:"ti ti-pencil xmpg5"},null,2)]),_:1},8,["class"])],2),d(f,{class:"xxJyA"},{key:n(()=>[o(u("Hochgeladen am"),1)]),value:n(()=>[d(Q,{time:e.value.createdAt,mode:"detail"},null,8,["time"])]),_:1},8,["class"]),d(f,{class:"xxJyA"},{key:n(()=>[o(u("Dateityp"),1)]),value:n(()=>[o(u(e.value.type),1)]),_:1},8,["class"]),d(f,{class:"xxJyA"},{key:n(()=>[o(u("Dateigröße"),1)]),value:n(()=>[o(u(G(T)(e.value.size)),1)]),_:1},8,["class"]),d(f,{class:"xxJyA",copy:e.value.url},{key:n(()=>[...t[12]||(t[12]=[o("URL",-1)])]),value:n(()=>[o(u(e.value.url),1)]),_:1},8,["class","copy"])])])):(r(),E(S,{key:2,type:"empty"}))])}}});export{re as default};

import{az as z,ab as x,a7 as p,R as L,M as C,k as w,i as A,L as P,br as F,J as Q}from"./3iSoGi4ic-DV-GuiCp.js";import{F as U}from"./3iSoGi4ic-D8X1N6Gw.js";import{F as R}from"./3iSoGi4ic-BBsRrkiB.js";import{b as G,ab as H,a as u,c as J,z as _,f as O,i as E,h as e,p as r,B as a,l as Z,C as q,D as s,E as m,F as X}from"./3iSoGi4ic-D0mTJ0Mu.js";import"./3iSoGi4ic-B1GPmOGN.js";import"./3iSoGi4ic-D98_HDRS.js";const j={class:"_spacer",style:{"--MI_SPACER-w":"700px","--MI_SPACER-min":"16px","--MI_SPACER-max":"32px"}},D={class:"_gaps_m"},N={class:"_gaps_m"},Y={class:"_spacer",style:{"--MI_SPACER-w":"700px","--MI_SPACER-min":"16px","--MI_SPACER-max":"16px"}},K={class:"_buttons"},de=G({__name:"email-settings",async setup($){let c,h;const d=([c,h]=H(()=>Q("admin/meta")),c=await c,h(),c),f=u(d.enableEmail),k=u(d.email),v=u(d.smtpSecure),b=u(d.smtpHost),S=u(d.smtpPort),V=u(d.smtpUser),I=u(d.smtpPass);async function B(){const{canceled:y,result:t}=await w({title:"To",type:"email",default:A.maintainerEmail??"",placeholder:"test@example.com",minLength:1});y||P("admin/send-email",{to:t,subject:"Test email",text:"Yo"})}function M(){P("admin/update-meta",{enableEmail:f.value,email:k.value,smtpSecure:v.value,smtpHost:b.value,smtpPort:S.value,smtpUser:V.value,smtpPass:I.value}).then(()=>{F(!0)})}const T=J(()=>[]);return z(()=>({title:"Email-Server",icon:"ti ti-mail"})),(y,t)=>{const i=_("SearchLabel"),g=_("SearchText"),n=_("SearchMarker"),W=_("PageWithHeader");return E(),O(W,{tabs:T.value},{footer:e(()=>[r("div",{class:"xwKbX"},[r("div",Y,[r("div",K,[a(C,{primary:"",rounded:"",onClick:M},{default:e(()=>[t[7]||(t[7]=r("i",{class:"ti ti-check"},null,-1)),s(" "+m("Speichern"),1)]),_:1}),a(C,{rounded:"",onClick:B},{default:e(()=>[t[8]||(t[8]=r("i",{class:"ti ti-send"},null,-1)),s(" "+m("Emailversand testen"),1)]),_:1})])])],2)]),default:e(()=>[r("div",j,[a(n,{path:"/admin/email-settings",label:"Email-Server",keywords:["email"],icon:"ti ti-mail",markerId:"qi13mLBJp","data-in-app-search-marker-id":"qi13mLBJp",children:["g2ZWqLozu","9CGTnWTfQ","zlFzdWOXl"]},{default:e(()=>[r("div",D,[a(n,{markerId:"g2ZWqLozu","data-in-app-search-marker-id":"g2ZWqLozu"},{default:e(()=>[a(x,{modelValue:f.value,"onUpdate:modelValue":t[0]||(t[0]=o=>f.value=o)},{label:e(()=>[a(i,null,{default:e(()=>[s(m("Email-Versand aktivieren"),1)]),_:1}),s(" ("+m("Empfehlung")+")",1)]),caption:e(()=>[a(g,null,{default:e(()=>[s(m("Zur Email-Bestätigung bei Registrierung oder zum Zurücksetzen des Passworts verwendet"),1)]),_:1})]),_:1},8,["modelValue"])]),_:1}),f.value?(E(),Z(X,{key:0},[a(n,{markerId:"9CGTnWTfQ","data-in-app-search-marker-id":"9CGTnWTfQ"},{default:e(()=>[a(p,{modelValue:k.value,"onUpdate:modelValue":t[1]||(t[1]=o=>k.value=o),type:"email"},{label:e(()=>[a(i,null,{default:e(()=>[s(m("Email-Adresse"),1)]),_:1})]),_:1},8,["modelValue"])]),_:1}),a(n,{markerId:"zlFzdWOXl","data-in-app-search-marker-id":"zlFzdWOXl",children:["6119fYUUf","4bOSj88yG","IpBJhgmi","yk0ImZr3s","BtmVLQQ0i"]},{default:e(()=>[a(R,null,{label:e(()=>[a(i,null,{default:e(()=>[s(m("SMTP-Server Konfiguration"),1)]),_:1})]),default:e(()=>[r("div",N,[a(U,{minWidth:280},{default:e(()=>[a(n,{markerId:"6119fYUUf","data-in-app-search-marker-id":"6119fYUUf"},{default:e(()=>[a(p,{modelValue:b.value,"onUpdate:modelValue":t[2]||(t[2]=o=>b.value=o)},{label:e(()=>[a(i,null,{default:e(()=>[s(m("Host"),1)]),_:1})]),_:1},8,["modelValue"])]),_:1}),a(n,{markerId:"4bOSj88yG","data-in-app-search-marker-id":"4bOSj88yG"},{default:e(()=>[a(p,{modelValue:S.value,"onUpdate:modelValue":t[3]||(t[3]=o=>S.value=o),type:"number"},{label:e(()=>[a(i,null,{default:e(()=>[s(m("Port"),1)]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1}),a(U,{minWidth:280},{default:e(()=>[a(n,{markerId:"IpBJhgmi","data-in-app-search-marker-id":"IpBJhgmi"},{default:e(()=>[a(p,{modelValue:V.value,"onUpdate:modelValue":t[4]||(t[4]=o=>V.value=o)},{label:e(()=>[a(i,null,{default:e(()=>[s(m("Benutzername"),1)]),_:1})]),_:1},8,["modelValue"])]),_:1}),a(n,{markerId:"yk0ImZr3s","data-in-app-search-marker-id":"yk0ImZr3s"},{default:e(()=>[a(p,{modelValue:I.value,"onUpdate:modelValue":t[5]||(t[5]=o=>I.value=o),type:"password"},{label:e(()=>[a(i,null,{default:e(()=>[s(m("Passwort"),1)]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1}),a(L,null,{default:e(()=>[s(m("Benutzername und Passwort leer lassen, um SMTP-Verifizierung zu deaktivieren"),1)]),_:1}),a(n,{markerId:"BtmVLQQ0i","data-in-app-search-marker-id":"BtmVLQQ0i"},{default:e(()=>[a(x,{modelValue:v.value,"onUpdate:modelValue":t[6]||(t[6]=o=>v.value=o)},{label:e(()=>[a(i,null,{default:e(()=>[s(m("Für SMTP-Verbindungen implizit SSL/TLS verwenden"),1)]),_:1})]),caption:e(()=>[a(g,null,{default:e(()=>[s(m("Schalte dies aus, falls du STARTTLS verwendest."),1)]),_:1})]),_:1},8,["modelValue"])]),_:1})])]),_:1})]),_:1})],64)):q("",!0)])]),_:1},8,["label"])])]),_:1},8,["tabs"])}}});export{de as default};

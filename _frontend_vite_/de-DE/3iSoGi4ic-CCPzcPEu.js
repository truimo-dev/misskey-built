import{ak as M,l as h,az as g,M as E,dc as P,L as m,J as b}from"./3iSoGi4ic-DV-GuiCp.js";import{X as w}from"./3iSoGi4ic-DWKPLXFg.js";import{b as A,a as u,ab as I,c as R,z as k,f as c,i as _,h as i,p as o,C as B,B as N,D as S,E as V}from"./3iSoGi4ic-D0mTJ0Mu.js";import"./3iSoGi4ic-B1GPmOGN.js";import"./3iSoGi4ic-D98_HDRS.js";import"./3iSoGi4ic-DUrJvqB4.js";import"./3iSoGi4ic-DqZTax7V.js";import"./3iSoGi4ic-BDF7xMl0.js";import"./3iSoGi4ic-Fx-BY70c.js";import"./3iSoGi4ic-CSc4cSLM.js";import"./3iSoGi4ic-D8UyQ0ea.js";const H={class:"_spacer",style:{"--MI_SPACER-w":"600px","--MI_SPACER-min":"16px","--MI_SPACER-max":"32px"}},z={class:"_spacer",style:{"--MI_SPACER-w":"600px","--MI_SPACER-min":"16px","--MI_SPACER-max":"16px"}},Q=A({__name:"roles.edit",props:{id:{}},async setup(f){let s,r;const n=M(),d=f,e=u(null),a=u(null);d.id?(e.value=([s,r]=I(()=>b("admin/roles/show",{roleId:d.id})),s=await s,r(),s),a.value=e.value):a.value={name:"New Role",description:"",isAdministrator:!1,isModerator:!1,color:null,iconUrl:null,target:"manual",condFormula:{id:h(),type:"isRemote"},isPublic:!1,isExplorable:!1,asBadge:!1,canEditMembersByModerator:!1,displayOrder:0,policies:{}};async function v(){if(P.delete(),e.value)m("admin/roles/update",{roleId:e.value.id,...a.value}),n.push("/admin/roles/:id",{params:{id:e.value.id}});else{const p=await m("admin/roles/create",{...a.value});n.push("/admin/roles/:id",{params:{id:p.id}})}}const x=R(()=>[]);return g(()=>({title:e.value?`${"Rolle bearbeiten"}: ${e.value.name}`:"Rolle erstellen",icon:"ti ti-badge"})),(p,t)=>{const C=k("PageWithHeader");return _(),c(C,{tabs:x.value},{footer:i(()=>[o("div",{class:"xFNHY"},[o("div",z,[N(E,{primary:"",rounded:"",onClick:v},{default:i(()=>[t[1]||(t[1]=o("i",{class:"ti ti-check"},null,-1)),S(" "+V("Speichern"),1)]),_:1})])],2)]),default:i(()=>[o("div",H,[a.value?(_(),c(w,{key:0,modelValue:a.value,"onUpdate:modelValue":t[0]||(t[0]=y=>a.value=y)},null,8,["modelValue"])):B("",!0)])]),_:1},8,["tabs"])}}});export{Q as default};

import{az as w,ab as S,a7 as m,M as R,L as h,br as z,J as K}from"./3iSoGi4ic-DV-GuiCp.js";import{F as L}from"./3iSoGi4ic-D8X1N6Gw.js";import{b as O,ab as N,a as n,c as H,z as j,f as Y,i as E,h as e,p,B as a,l as T,C as W,D as l,E as s,F as Q}from"./3iSoGi4ic-D0mTJ0Mu.js";import"./3iSoGi4ic-B1GPmOGN.js";import"./3iSoGi4ic-D98_HDRS.js";const Z={class:"_spacer",style:{"--MI_SPACER-w":"700px","--MI_SPACER-min":"16px","--MI_SPACER-max":"32px"}},J={class:"_gaps_m"},$={class:"_spacer",style:{"--MI_SPACER-w":"700px","--MI_SPACER-min":"16px","--MI_SPACER-max":"16px"}},ue=O({__name:"object-storage",async setup(q){let b,B;const d=([b,B]=N(()=>K("admin/meta")),b=await b,B(),b),g=n(d.useObjectStorage),f=n(d.objectStorageBaseUrl),k=n(d.objectStorageBucket),V=n(d.objectStoragePrefix),_=n(d.objectStorageEndpoint),v=n(d.objectStorageRegion),F=n(d.objectStoragePort),x=n(d.objectStorageAccessKey),y=n(d.objectStorageSecretKey),P=n(d.objectStorageUseSSL),U=n(d.objectStorageUseProxy),I=n(d.objectStorageSetPublicRead),C=n(d.objectStorageS3ForcePathStyle);function A(){h("admin/update-meta",{useObjectStorage:g.value,objectStorageBaseUrl:f.value,objectStorageBucket:k.value,objectStoragePrefix:V.value,objectStorageEndpoint:_.value,objectStorageRegion:v.value,objectStoragePort:F.value,objectStorageAccessKey:x.value,objectStorageSecretKey:y.value,objectStorageUseSSL:P.value,objectStorageUseProxy:U.value,objectStorageSetPublicRead:I.value,objectStorageS3ForcePathStyle:C.value}).then(()=>{z(!0)})}const D=H(()=>[]);return w(()=>({title:"Хранилище",icon:"ti ti-cloud"})),(G,t)=>{const i=j("SearchLabel"),u=j("SearchMarker"),c=j("SearchText"),M=j("PageWithHeader");return E(),Y(M,{tabs:D.value},{footer:e(()=>[p("div",{class:"xpN9M"},[p("div",$,[a(R,{primary:"",rounded:"",onClick:A},{default:e(()=>[t[18]||(t[18]=p("i",{class:"ti ti-check"},null,-1)),l(" "+s("Сохранить"),1)]),_:1})])],2)]),default:e(()=>[p("div",Z,[a(u,{path:"/admin/object-storage",label:"Хранилище",keywords:["objectStorage"],icon:"ti ti-cloud",markerId:"3yCAUaSDP","data-in-app-search-marker-id":"3yCAUaSDP",children:["BswelAaid","851KDFs2Y","Clex0N9lb","5HhbolE6a","tZeuVham","ejMeyF6EI","zkxsVgzd1","e9FPKCdEx","dksOmFLV2","wzCDrwBYI","A20g8Os1g","8His22VdQ"]},{default:e(()=>[p("div",J,[a(u,{markerId:"BswelAaid","data-in-app-search-marker-id":"BswelAaid"},{default:e(()=>[a(S,{modelValue:g.value,"onUpdate:modelValue":t[0]||(t[0]=o=>g.value=o)},{default:e(()=>[a(i,null,{default:e(()=>[l(s("Занято в хранилище"),1)]),_:1})]),_:1},8,["modelValue"])]),_:1}),g.value?(E(),T(Q,{key:0},[a(u,{markerId:"851KDFs2Y","data-in-app-search-marker-id":"851KDFs2Y"},{default:e(()=>[a(m,{modelValue:f.value,"onUpdate:modelValue":t[1]||(t[1]=o=>f.value=o),placeholder:"https://example.com",type:"url"},{label:e(()=>[a(i,null,{default:e(()=>[l(s("Базовый адрес"),1)]),_:1})]),caption:e(()=>[a(c,null,{default:e(()=>[l(s("Это начальная часть адреса, используемого CDN или прокси, например для S3: https://<bucket>.s3.amazonaws.com, или дя GCS: 'https://storage.googleapis.com/<bucket>'"),1)]),_:1})]),_:1},8,["modelValue"])]),_:1}),a(u,{markerId:"Clex0N9lb","data-in-app-search-marker-id":"Clex0N9lb"},{default:e(()=>[a(m,{modelValue:k.value,"onUpdate:modelValue":t[2]||(t[2]=o=>k.value=o)},{label:e(()=>[a(i,null,{default:e(()=>[l(s("Bucket"),1)]),_:1})]),caption:e(()=>[a(c,null,{default:e(()=>[l(s("Укажите название контейнера (Bucket) который используется на выбранном сервисе."),1)]),_:1})]),_:1},8,["modelValue"])]),_:1}),a(u,{markerId:"5HhbolE6a","data-in-app-search-marker-id":"5HhbolE6a"},{default:e(()=>[a(m,{modelValue:V.value,"onUpdate:modelValue":t[3]||(t[3]=o=>V.value=o)},{label:e(()=>[a(i,null,{default:e(()=>[l(s("Префикс"),1)]),_:1})]),caption:e(()=>[a(c,null,{default:e(()=>[l(s("Файлы будут храниться в директории, соответствующей указанному здесь префиксу пути"),1)]),_:1})]),_:1},8,["modelValue"])]),_:1}),a(u,{markerId:"tZeuVham","data-in-app-search-marker-id":"tZeuVham"},{default:e(()=>[a(m,{modelValue:_.value,"onUpdate:modelValue":t[4]||(t[4]=o=>_.value=o),placeholder:"example.com"},{label:e(()=>[a(i,null,{default:e(()=>[l(s("Конечная точка"),1)]),_:1})]),prefix:e(()=>[...t[12]||(t[12]=[l("https://",-1)])]),caption:e(()=>[a(c,null,{default:e(()=>[l(s("Если используете AWS S3, оставьте пустым. В остальных случаях укажите конечную точку (endpoint) в форме «<host>» или «<host>:<port>», так, как это описано в руководстве той службы, которую собираетесь использовать."),1)]),_:1})]),_:1},8,["modelValue"])]),_:1}),a(u,{markerId:"ejMeyF6EI","data-in-app-search-marker-id":"ejMeyF6EI"},{default:e(()=>[a(m,{modelValue:v.value,"onUpdate:modelValue":t[5]||(t[5]=o=>v.value=o)},{label:e(()=>[a(i,null,{default:e(()=>[l(s("Регион"),1)]),_:1})]),caption:e(()=>[a(c,null,{default:e(()=>[l(s("Укажите регион, например xx-east-1. Если ваша служба не различает регионы, оставьте поле пустым, или впишите us-east-1."),1)]),_:1})]),_:1},8,["modelValue"])]),_:1}),a(L,{minWidth:280},{default:e(()=>[a(u,{markerId:"zkxsVgzd1","data-in-app-search-marker-id":"zkxsVgzd1"},{default:e(()=>[a(m,{modelValue:x.value,"onUpdate:modelValue":t[6]||(t[6]=o=>x.value=o)},{prefix:e(()=>[...t[13]||(t[13]=[p("i",{class:"ti ti-key"},null,-1)])]),label:e(()=>[a(i,null,{default:e(()=>[...t[14]||(t[14]=[l("Access key",-1)])]),_:1})]),_:1},8,["modelValue"])]),_:1}),a(u,{markerId:"e9FPKCdEx","data-in-app-search-marker-id":"e9FPKCdEx"},{default:e(()=>[a(m,{modelValue:y.value,"onUpdate:modelValue":t[7]||(t[7]=o=>y.value=o),type:"password"},{prefix:e(()=>[...t[15]||(t[15]=[p("i",{class:"ti ti-key"},null,-1)])]),label:e(()=>[a(i,null,{default:e(()=>[...t[16]||(t[16]=[l("Secret key",-1)])]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1}),a(u,{markerId:"dksOmFLV2","data-in-app-search-marker-id":"dksOmFLV2"},{default:e(()=>[a(S,{modelValue:P.value,"onUpdate:modelValue":t[8]||(t[8]=o=>P.value=o)},{label:e(()=>[a(i,null,{default:e(()=>[l(s("Использовать SSL"),1)]),_:1})]),caption:e(()=>[a(c,null,{default:e(()=>[l(s("Отключите, если не собираетесь использовать протокол HTTPS для обмена по API."),1)]),_:1})]),_:1},8,["modelValue"])]),_:1}),a(u,{markerId:"wzCDrwBYI","data-in-app-search-marker-id":"wzCDrwBYI"},{default:e(()=>[a(S,{modelValue:U.value,"onUpdate:modelValue":t[9]||(t[9]=o=>U.value=o)},{label:e(()=>[a(i,null,{default:e(()=>[l(s("Использовать прокси"),1)]),_:1})]),caption:e(()=>[a(c,null,{default:e(()=>[l(s("Отключите, если не будете испоьзовать прокси для соединений по протоколу ObjectStorage."),1)]),_:1})]),_:1},8,["modelValue"])]),_:1}),a(u,{markerId:"A20g8Os1g","data-in-app-search-marker-id":"A20g8Os1g"},{default:e(()=>[a(S,{modelValue:I.value,"onUpdate:modelValue":t[10]||(t[10]=o=>I.value=o)},{label:e(()=>[a(i,null,{default:e(()=>[l(s("Устанавливать public-read при загрузке на сервер"),1)]),_:1})]),_:1},8,["modelValue"])]),_:1}),a(u,{markerId:"8His22VdQ","data-in-app-search-marker-id":"8His22VdQ"},{default:e(()=>[a(S,{modelValue:C.value,"onUpdate:modelValue":t[11]||(t[11]=o=>C.value=o)},{label:e(()=>[a(i,null,{default:e(()=>[...t[17]||(t[17]=[l("s3ForcePathStyle",-1)])]),_:1})]),caption:e(()=>[a(c,null,{default:e(()=>[l(s("Включение s3ForcePathStyle приводит к тому, что имя корзины указывается как часть пути в URL, а не в имени хоста. Может потребоваться включить при использовании локального Minio или чего-то подобного."),1)]),_:1})]),_:1},8,["modelValue"])]),_:1})],64)):W("",!0)])]),_:1},8,["label"])])]),_:1},8,["tabs"])}}});export{ue as default};

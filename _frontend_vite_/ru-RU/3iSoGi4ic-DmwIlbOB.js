import{aF as C,J as P,bc as S,_ as D}from"./3iSoGi4ic-DV-GuiCp.js";import{u as W}from"./3iSoGi4ic-DCTAa4Sx.js";import{b as E,a as g,u as v,e as F,l as d,i as r,p as u,C as h,t as c,E as _,s as L}from"./3iSoGi4ic-D0mTJ0Mu.js";import"./3iSoGi4ic-B1GPmOGN.js";import"./3iSoGi4ic-D98_HDRS.js";const N={key:0},T={key:1},y="slideshow",V=E({__name:"WidgetSlideshow",props:{widget:{}},emits:["updateProps"],setup(k,{expose:w,emit:I}){const b={height:{type:"number",default:300},folderId:{type:"string",default:null,hidden:!0}},o=k,x=I,{widgetProps:l,configure:B,save:M}=W(y,b,o,x),a=g([]),n=g(!0),s=v("slideA"),e=v("slideB"),m=()=>{if(a.value.length===0||s.value==null||e.value==null)return;const t=Math.floor(Math.random()*a.value.length),i=`url(${a.value[t].url})`;e.value.style.backgroundImage=i,e.value.classList.add("anime"),window.setTimeout(()=>{s.value!=null&&(s.value.style.backgroundImage=i,e.value.classList.remove("anime"))},1e3)},f=()=>{s.value==null||e.value==null||(n.value=!0,P("drive/files",{folderId:l.folderId,type:"image/*",limit:100}).then(t=>{a.value=t,n.value=!1,s.value.style.backgroundImage="",e.value.style.backgroundImage="",m()}))},A=()=>{S(null).then(t=>{t[0]!=null&&(l.folderId=t[0].id,M(),f())})};return C(m,1e4,{immediate:!1,afterMounted:!0}),F(()=>{l.folderId!=null&&f()}),w({name:y,configure:B,id:o.widget?o.widget.id:null}),(t,i)=>(r(),d("div",{"data-cy-mkw-slideshow":"",class:"kvausudm _panel mkw-slideshow",style:L({height:c(l).height+"px"})},[u("div",{onClick:A},[c(l).folderId==null?(r(),d("p",N,_("Папка"),1)):h("",!0),c(l).folderId!=null&&a.value.length===0&&!n.value?(r(),d("p",T,_("Ничего нет"),1)):h("",!0),u("div",{ref_key:"slideA",ref:s,class:"slide a"},null,512),u("div",{ref_key:"slideB",ref:e,class:"slide b"},null,512)])],4))}}),G=D(V,[["__scopeId","data-v-81a0db61"]]);export{G as default};

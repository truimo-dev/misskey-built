import{$,az as U,aA as W,bW as E,M as _,L as w,C as y,P as x,_ as L}from"./3iSoGi4ic-DV-GuiCp.js";import{M as V}from"./3iSoGi4ic-CdSqfJMx.js";import{b as z,a as H,w as S,c as C,z as d,k as T,f as M,i as n,h as i,l as m,B as l,t as k,p as c,F as G,A as J,j as K,E as p,D as v,m as h}from"./3iSoGi4ic-D0mTJ0Mu.js";import"./3iSoGi4ic-B1GPmOGN.js";import"./3iSoGi4ic-D98_HDRS.js";import"./3iSoGi4ic-Dv7rS4og.js";const O={class:"mk-follow-requests _gaps"},Q={class:"body"},X={class:"name"},Y={class:"acct"},Z={key:0,class:"commands"},ee={key:1,class:"commands"},te=z({__name:"follow-requests",setup(se){const r=H($?.isLocked?"list":"sent");let u;S(r,e=>{e==="list"?u=h(new x("following/requests/list",{limit:10})):u=h(new x("following/requests/sent",{limit:10}))},{immediate:!0});function b(e){w("following/requests/accept",{userId:e.id}).then(()=>{u.reload()})}async function R(e){const{canceled:t}=await y({type:"question",text:(({name})=>("Are you sure that you want to reject the follow request from "+name+"?"))({name:e.name||e.username})});t||await w("following/requests/reject",{userId:e.id}).then(()=>{u.reload()})}async function A(e){const{canceled:t}=await y({type:"question",text:(({name})=>("Are you sure that you want to cancel your follow request to "+name+"?"))({name:e.name||e.username})});t||await w("following/requests/cancel",{userId:e.id}).then(()=>{u.reload()})}function o(e){return r.value==="list"?e.follower:e.followee}const P=C(()=>[]),q=C(()=>[{key:"list",title:"Received request",icon:"ti ti-download"},{key:"sent",title:"Sent request",icon:"ti ti-upload"}]);return U(()=>({title:"Yêu cầu theo dõi",icon:"ti ti-user-plus"})),(e,t)=>{const B=d("MkResult"),j=d("MkAvatar"),D=d("MkUserName"),F=d("MkA"),I=d("PageWithHeader"),N=T("user-preview");return n(),M(I,{tab:r.value,"onUpdate:tab":t[0]||(t[0]=f=>r.value=f),actions:P.value,tabs:q.value,swipable:!0},{default:i(()=>[(n(),m("div",{key:r.value,class:"_spacer",style:{"--MI_SPACER-w":"800px"}},[l(V,{paginator:k(u)},{empty:i(()=>[l(B,{type:"empty",text:"Bạn không có yêu cầu theo dõi nào"},null,8,["text"])]),default:i(({items:f})=>[c("div",O,[(n(!0),m(G,null,J(f,s=>(n(),m("div",{key:s.id,class:"user _panel"},[l(j,{class:"avatar",user:o(s),indicator:"",link:"",preview:""},null,8,["user"]),c("div",Q,[c("div",X,[K((n(),M(F,{class:"name",to:k(W)(o(s))},{default:i(()=>[l(D,{user:o(s)},null,8,["user"])]),_:2},1032,["to"])),[[N,o(s).id]]),c("p",Y,"@"+p(k(E)(o(s))),1)]),r.value==="list"?(n(),m("div",Z,[l(_,{class:"command",rounded:"",primary:"",onClick:g=>b(o(s))},{default:i(()=>[t[1]||(t[1]=c("i",{class:"ti ti-check"},null,-1)),v(" "+p("Đồng ý"),1)]),_:1},8,["onClick"]),l(_,{class:"command",rounded:"",danger:"",onClick:g=>R(o(s))},{default:i(()=>[t[2]||(t[2]=c("i",{class:"ti ti-x"},null,-1)),v(" "+p("Từ chối"),1)]),_:1},8,["onClick"])])):(n(),m("div",ee,[l(_,{class:"command",rounded:"",danger:"",onClick:g=>A(o(s))},{default:i(()=>[t[3]||(t[3]=c("i",{class:"ti ti-x"},null,-1)),v(" "+p("Hủy"),1)]),_:1},8,["onClick"])]))])]))),128))])]),_:1},8,["paginator"])]))]),_:1},8,["tab","actions","tabs"])}}}),ue=L(te,[["__scopeId","data-v-f94c0f81"]]);export{ue as default};

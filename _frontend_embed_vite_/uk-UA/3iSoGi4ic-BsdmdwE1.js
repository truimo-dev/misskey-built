import{t as ln,D as X,c as rn,m as ve,d as st,e as Re,a as an}from"./3iSoGi4ic-D04gTiyu.js";import{a as U,u as cn,b as F,e as A,o as f,h as S,f as g,n as c,g as p,F as G,i as K,t as L,j as E,s as he,r as B,w as ue,k as Se,l as Pe,m as se,v as de,p as ke,q as T,x as N,y as oe,z as Ut,A as ae,B as pe,C as dt,D as fn,E as H,G as jt,H as Ht,I as V,J as ot,K as He,L as mn,M as yn,N as vn,O as hn,P as Ue,S as pn}from"./3iSoGi4ic-BxeXxkJv.js";import{u as Z,l as gn,h as Ne,i as lt}from"./3iSoGi4ic-CPesB5eK.js";function bn(e){return e.host==null?e.username:`${e.username}@${e.host}`}function kt(e){return e.renoteId!=null&&e.replyId==null&&e.text==null&&e.cw==null&&(e.fileIds==null||e.fileIds.length===0)&&e.poll==null}const $n=new RegExp("(?<=n)a","gi"),wn=new RegExp("(?<=morn)ing","gi"),kn=new RegExp("(?<=every)one","gi"),En=/[나-낳]/g,In=/(다$)|(다(?=\.))|(다(?= ))|(다(?=!))|(다(?=\?))/gm,Tn=/(야(?=\?))|(야$)|(야(?= ))/gm;function qe(e){return e.replaceAll("な","にゃ").replaceAll("ナ","ニャ").replaceAll("ﾅ","ﾆｬ").replace($n,n=>n==="A"?"YA":"ya").replace(wn,n=>n==="ING"?"YAN":"yan").replace(kn,n=>n==="ONE"?"NYAN":"nyan").replace(En,n=>isNaN(n.charCodeAt(0))?n:String.fromCharCode(n.charCodeAt(0)+45264-45208)).replace(In,"다냥").replace(Tn,"냥")}var De={},J={},fe={},Y={},_e={},Et;function xn(){return Et||(Et=1,Object.defineProperty(_e,"__esModule",{value:!0}),_e.default=/(?:\ud83d\udc68\ud83c\udffb\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc68\ud83c\udffc\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc68\ud83c\udffd\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc68\ud83c\udffe\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc68\ud83c\udfff\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udffb\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udffb\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc69\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udffc\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udffc\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc69\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udffd\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udffd\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc69\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udffe\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udffe\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc69\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udfff\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udfff\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc69\ud83c[\udffb-\udfff]|\ud83e\uddd1\ud83c\udffb\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83e\uddd1\ud83c[\udffc-\udfff]|\ud83e\uddd1\ud83c\udffc\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83e\uddd1\ud83c[\udffb\udffd-\udfff]|\ud83e\uddd1\ud83c\udffd\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83e\uddd1\ud83c[\udffb\udffc\udffe\udfff]|\ud83e\uddd1\ud83c\udffe\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83e\uddd1\ud83c[\udffb-\udffd\udfff]|\ud83e\uddd1\ud83c\udfff\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83e\uddd1\ud83c[\udffb-\udffe]|\ud83d\udc68\ud83c\udffb\u200d\u2764\ufe0f\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc68\ud83c\udffb\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffc-\udfff]|\ud83d\udc68\ud83c\udffc\u200d\u2764\ufe0f\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc68\ud83c\udffc\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb\udffd-\udfff]|\ud83d\udc68\ud83c\udffd\u200d\u2764\ufe0f\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc68\ud83c\udffd\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb\udffc\udffe\udfff]|\ud83d\udc68\ud83c\udffe\u200d\u2764\ufe0f\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc68\ud83c\udffe\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb-\udffd\udfff]|\ud83d\udc68\ud83c\udfff\u200d\u2764\ufe0f\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc68\ud83c\udfff\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb-\udffe]|\ud83d\udc69\ud83c\udffb\u200d\u2764\ufe0f\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udffb\u200d\u2764\ufe0f\u200d\ud83d\udc69\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udffb\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffc-\udfff]|\ud83d\udc69\ud83c\udffb\u200d\ud83e\udd1d\u200d\ud83d\udc69\ud83c[\udffc-\udfff]|\ud83d\udc69\ud83c\udffc\u200d\u2764\ufe0f\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udffc\u200d\u2764\ufe0f\u200d\ud83d\udc69\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udffc\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb\udffd-\udfff]|\ud83d\udc69\ud83c\udffc\u200d\ud83e\udd1d\u200d\ud83d\udc69\ud83c[\udffb\udffd-\udfff]|\ud83d\udc69\ud83c\udffd\u200d\u2764\ufe0f\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udffd\u200d\u2764\ufe0f\u200d\ud83d\udc69\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udffd\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb\udffc\udffe\udfff]|\ud83d\udc69\ud83c\udffd\u200d\ud83e\udd1d\u200d\ud83d\udc69\ud83c[\udffb\udffc\udffe\udfff]|\ud83d\udc69\ud83c\udffe\u200d\u2764\ufe0f\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udffe\u200d\u2764\ufe0f\u200d\ud83d\udc69\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udffe\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb-\udffd\udfff]|\ud83d\udc69\ud83c\udffe\u200d\ud83e\udd1d\u200d\ud83d\udc69\ud83c[\udffb-\udffd\udfff]|\ud83d\udc69\ud83c\udfff\u200d\u2764\ufe0f\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udfff\u200d\u2764\ufe0f\u200d\ud83d\udc69\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udfff\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb-\udffe]|\ud83d\udc69\ud83c\udfff\u200d\ud83e\udd1d\u200d\ud83d\udc69\ud83c[\udffb-\udffe]|\ud83e\uddd1\ud83c\udffb\u200d\u2764\ufe0f\u200d\ud83e\uddd1\ud83c[\udffc-\udfff]|\ud83e\uddd1\ud83c\udffb\u200d\ud83e\udd1d\u200d\ud83e\uddd1\ud83c[\udffb-\udfff]|\ud83e\uddd1\ud83c\udffc\u200d\u2764\ufe0f\u200d\ud83e\uddd1\ud83c[\udffb\udffd-\udfff]|\ud83e\uddd1\ud83c\udffc\u200d\ud83e\udd1d\u200d\ud83e\uddd1\ud83c[\udffb-\udfff]|\ud83e\uddd1\ud83c\udffd\u200d\u2764\ufe0f\u200d\ud83e\uddd1\ud83c[\udffb\udffc\udffe\udfff]|\ud83e\uddd1\ud83c\udffd\u200d\ud83e\udd1d\u200d\ud83e\uddd1\ud83c[\udffb-\udfff]|\ud83e\uddd1\ud83c\udffe\u200d\u2764\ufe0f\u200d\ud83e\uddd1\ud83c[\udffb-\udffd\udfff]|\ud83e\uddd1\ud83c\udffe\u200d\ud83e\udd1d\u200d\ud83e\uddd1\ud83c[\udffb-\udfff]|\ud83e\uddd1\ud83c\udfff\u200d\u2764\ufe0f\u200d\ud83e\uddd1\ud83c[\udffb-\udffe]|\ud83e\uddd1\ud83c\udfff\u200d\ud83e\udd1d\u200d\ud83e\uddd1\ud83c[\udffb-\udfff]|\ud83d\udc68\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc68|\ud83d\udc69\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d[\udc68\udc69]|\ud83e\udef1\ud83c\udffb\u200d\ud83e\udef2\ud83c[\udffc-\udfff]|\ud83e\udef1\ud83c\udffc\u200d\ud83e\udef2\ud83c[\udffb\udffd-\udfff]|\ud83e\udef1\ud83c\udffd\u200d\ud83e\udef2\ud83c[\udffb\udffc\udffe\udfff]|\ud83e\udef1\ud83c\udffe\u200d\ud83e\udef2\ud83c[\udffb-\udffd\udfff]|\ud83e\udef1\ud83c\udfff\u200d\ud83e\udef2\ud83c[\udffb-\udffe]|\ud83d\udc68\u200d\u2764\ufe0f\u200d\ud83d\udc68|\ud83d\udc69\u200d\u2764\ufe0f\u200d\ud83d[\udc68\udc69]|\ud83e\uddd1\u200d\ud83e\udd1d\u200d\ud83e\uddd1|\ud83d\udc6b\ud83c[\udffb-\udfff]|\ud83d\udc6c\ud83c[\udffb-\udfff]|\ud83d\udc6d\ud83c[\udffb-\udfff]|\ud83d\udc8f\ud83c[\udffb-\udfff]|\ud83d\udc91\ud83c[\udffb-\udfff]|\ud83e\udd1d\ud83c[\udffb-\udfff]|\ud83d[\udc6b-\udc6d\udc8f\udc91]|\ud83e\udd1d)|(?:\ud83d[\udc68\udc69]|\ud83e\uddd1)(?:\ud83c[\udffb-\udfff])?\u200d(?:\u2695\ufe0f|\u2696\ufe0f|\u2708\ufe0f|\ud83c[\udf3e\udf73\udf7c\udf84\udf93\udfa4\udfa8\udfeb\udfed]|\ud83d[\udcbb\udcbc\udd27\udd2c\ude80\ude92]|\ud83e[\uddaf-\uddb3\uddbc\uddbd])(?:\u200d\u27a1\ufe0f)?|(?:\ud83c[\udfcb\udfcc]|\ud83d[\udd74\udd75]|\u26f9)((?:\ud83c[\udffb-\udfff]|\ufe0f)\u200d[\u2640\u2642]\ufe0f(?:\u200d\u27a1\ufe0f)?)|(?:\ud83c[\udfc3\udfc4\udfca]|\ud83d[\udc6e\udc70\udc71\udc73\udc77\udc81\udc82\udc86\udc87\ude45-\ude47\ude4b\ude4d\ude4e\udea3\udeb4-\udeb6]|\ud83e[\udd26\udd35\udd37-\udd39\udd3d\udd3e\uddb8\uddb9\uddcd-\uddcf\uddd4\uddd6-\udddd])(?:\ud83c[\udffb-\udfff])?\u200d[\u2640\u2642]\ufe0f(?:\u200d\u27a1\ufe0f)?|(?:\ud83d\udc68\u200d\ud83d\udc68\u200d\ud83d\udc66\u200d\ud83d\udc66|\ud83d\udc68\u200d\ud83d\udc68\u200d\ud83d\udc67\u200d\ud83d[\udc66\udc67]|\ud83d\udc68\u200d\ud83d\udc69\u200d\ud83d\udc66\u200d\ud83d\udc66|\ud83d\udc68\u200d\ud83d\udc69\u200d\ud83d\udc67\u200d\ud83d[\udc66\udc67]|\ud83d\udc69\u200d\ud83d\udc69\u200d\ud83d\udc66\u200d\ud83d\udc66|\ud83d\udc69\u200d\ud83d\udc69\u200d\ud83d\udc67\u200d\ud83d[\udc66\udc67]|\ud83e\uddd1\u200d\ud83e\uddd1\u200d\ud83e\uddd2\u200d\ud83e\uddd2|\ud83d\udc68\u200d\ud83d\udc66\u200d\ud83d\udc66|\ud83d\udc68\u200d\ud83d\udc67\u200d\ud83d[\udc66\udc67]|\ud83d\udc68\u200d\ud83d\udc68\u200d\ud83d[\udc66\udc67]|\ud83d\udc68\u200d\ud83d\udc69\u200d\ud83d[\udc66\udc67]|\ud83d\udc69\u200d\ud83d\udc66\u200d\ud83d\udc66|\ud83d\udc69\u200d\ud83d\udc67\u200d\ud83d[\udc66\udc67]|\ud83d\udc69\u200d\ud83d\udc69\u200d\ud83d[\udc66\udc67]|\ud83e\uddd1\u200d\ud83e\uddd1\u200d\ud83e\uddd2|\ud83e\uddd1\u200d\ud83e\uddd2\u200d\ud83e\uddd2|\ud83c\udff3\ufe0f\u200d\u26a7\ufe0f|\ud83c\udff3\ufe0f\u200d\ud83c\udf08|\ud83d\ude36\u200d\ud83c\udf2b\ufe0f|\u26d3\ufe0f\u200d\ud83d\udca5|\u2764\ufe0f\u200d\ud83d\udd25|\u2764\ufe0f\u200d\ud83e\ude79|\ud83c\udf44\u200d\ud83d\udfeb|\ud83c\udf4b\u200d\ud83d\udfe9|\ud83c\udff4\u200d\u2620\ufe0f|\ud83d\udc15\u200d\ud83e\uddba|\ud83d\udc26\u200d\ud83d\udd25|\ud83d\udc3b\u200d\u2744\ufe0f|\ud83d\udc41\u200d\ud83d\udde8|\ud83d\udc68\u200d\ud83d[\udc66\udc67]|\ud83d\udc69\u200d\ud83d[\udc66\udc67]|\ud83d\udc6f\u200d\u2640\ufe0f|\ud83d\udc6f\u200d\u2642\ufe0f|\ud83d\ude2e\u200d\ud83d\udca8|\ud83d\ude35\u200d\ud83d\udcab|\ud83d\ude42\u200d\u2194\ufe0f|\ud83d\ude42\u200d\u2195\ufe0f|\ud83e\udd3c\u200d\u2640\ufe0f|\ud83e\udd3c\u200d\u2642\ufe0f|\ud83e\uddd1\u200d\ud83e\uddd2|\ud83e\uddde\u200d\u2640\ufe0f|\ud83e\uddde\u200d\u2642\ufe0f|\ud83e\udddf\u200d\u2640\ufe0f|\ud83e\udddf\u200d\u2642\ufe0f|\ud83d\udc08\u200d\u2b1b|\ud83d\udc26\u200d\u2b1b)|[#*0-9]\ufe0f?\u20e3|(?:[©®\u2122\u265f]\ufe0f)|(?:\ud83c[\udc04\udd70\udd71\udd7e\udd7f\ude02\ude1a\ude2f\ude37\udf21\udf24-\udf2c\udf36\udf7d\udf96\udf97\udf99-\udf9b\udf9e\udf9f\udfcd\udfce\udfd4-\udfdf\udff3\udff5\udff7]|\ud83d[\udc3f\udc41\udcfd\udd49\udd4a\udd6f\udd70\udd73\udd76-\udd79\udd87\udd8a-\udd8d\udda5\udda8\uddb1\uddb2\uddbc\uddc2-\uddc4\uddd1-\uddd3\udddc-\uddde\udde1\udde3\udde8\uddef\uddf3\uddfa\udecb\udecd-\udecf\udee0-\udee5\udee9\udef0\udef3]|[\u203c\u2049\u2139\u2194-\u2199\u21a9\u21aa\u231a\u231b\u2328\u23cf\u23ed-\u23ef\u23f1\u23f2\u23f8-\u23fa\u24c2\u25aa\u25ab\u25b6\u25c0\u25fb-\u25fe\u2600-\u2604\u260e\u2611\u2614\u2615\u2618\u2620\u2622\u2623\u2626\u262a\u262e\u262f\u2638-\u263a\u2640\u2642\u2648-\u2653\u2660\u2663\u2665\u2666\u2668\u267b\u267f\u2692-\u2697\u2699\u269b\u269c\u26a0\u26a1\u26a7\u26aa\u26ab\u26b0\u26b1\u26bd\u26be\u26c4\u26c5\u26c8\u26cf\u26d1\u26d3\u26d4\u26e9\u26ea\u26f0-\u26f5\u26f8\u26fa\u26fd\u2702\u2708\u2709\u270f\u2712\u2714\u2716\u271d\u2721\u2733\u2734\u2744\u2747\u2757\u2763\u2764\u27a1\u2934\u2935\u2b05-\u2b07\u2b1b\u2b1c\u2b50\u2b55\u3030\u303d\u3297\u3299])(?:\ufe0f|(?!\ufe0e))|(?:(?:\ud83c[\udfcb\udfcc]|\ud83d[\udd74\udd75\udd90]|\ud83e\udef0|[\u261d\u26f7\u26f9\u270c\u270d])(?:\ufe0f|(?!\ufe0e))|(?:\ud83c\udfc3|\ud83d\udeb6|\ud83e\uddce)(?:\ud83c[\udffb-\udfff])?(?:\u200d\u27a1\ufe0f)?|(?:\ud83c[\udf85\udfc2\udfc4\udfc7\udfca]|\ud83d[\udc42\udc43\udc46-\udc50\udc66-\udc69\udc6e\udc70-\udc78\udc7c\udc81-\udc83\udc85-\udc87\udcaa\udd7a\udd95\udd96\ude45-\ude47\ude4b-\ude4f\udea3\udeb4\udeb5\udec0\udecc]|\ud83e[\udd0c\udd0f\udd18-\udd1c\udd1e\udd1f\udd26\udd30-\udd39\udd3d\udd3e\udd77\uddb5\uddb6\uddb8\uddb9\uddbb\uddcd\uddcf\uddd1-\udddd\udec3-\udec5\udef1-\udef8]|[\u270a\u270b]))(?:\ud83c[\udffb-\udfff])?|(?:\ud83c\udff4\udb40\udc67\udb40\udc62\udb40\udc65\udb40\udc6e\udb40\udc67\udb40\udc7f|\ud83c\udff4\udb40\udc67\udb40\udc62\udb40\udc73\udb40\udc63\udb40\udc74\udb40\udc7f|\ud83c\udff4\udb40\udc67\udb40\udc62\udb40\udc77\udb40\udc6c\udb40\udc73\udb40\udc7f|\ud83c\udde6\ud83c[\udde8-\uddec\uddee\uddf1\uddf2\uddf4\uddf6-\uddfa\uddfc\uddfd\uddff]|\ud83c\udde7\ud83c[\udde6\udde7\udde9-\uddef\uddf1-\uddf4\uddf6-\uddf9\uddfb\uddfc\uddfe\uddff]|\ud83c\udde8\ud83c[\udde6\udde8\udde9\uddeb-\uddee\uddf0-\uddf7\uddfa-\uddff]|\ud83c\udde9\ud83c[\uddea\uddec\uddef\uddf0\uddf2\uddf4\uddff]|\ud83c\uddea\ud83c[\udde6\udde8\uddea\uddec\udded\uddf7-\uddfa]|\ud83c\uddeb\ud83c[\uddee-\uddf0\uddf2\uddf4\uddf7]|\ud83c\uddec\ud83c[\udde6\udde7\udde9-\uddee\uddf1-\uddf3\uddf5-\uddfa\uddfc\uddfe]|\ud83c\udded\ud83c[\uddf0\uddf2\uddf3\uddf7\uddf9\uddfa]|\ud83c\uddee\ud83c[\udde8-\uddea\uddf1-\uddf4\uddf6-\uddf9]|\ud83c\uddef\ud83c[\uddea\uddf2\uddf4\uddf5]|\ud83c\uddf0\ud83c[\uddea\uddec-\uddee\uddf2\uddf3\uddf5\uddf7\uddfc\uddfe\uddff]|\ud83c\uddf1\ud83c[\udde6-\udde8\uddee\uddf0\uddf7-\uddfb\uddfe]|\ud83c\uddf2\ud83c[\udde6\udde8-\udded\uddf0-\uddff]|\ud83c\uddf3\ud83c[\udde6\udde8\uddea-\uddec\uddee\uddf1\uddf4\uddf5\uddf7\uddfa\uddff]|\ud83c\uddf4\ud83c\uddf2|\ud83c\uddf5\ud83c[\udde6\uddea-\udded\uddf0-\uddf3\uddf7-\uddf9\uddfc\uddfe]|\ud83c\uddf6\ud83c\udde6|\ud83c\uddf7\ud83c[\uddea\uddf4\uddf8\uddfa\uddfc]|\ud83c\uddf8\ud83c[\udde6-\uddea\uddec-\uddf4\uddf7-\uddf9\uddfb\uddfd-\uddff]|\ud83c\uddf9\ud83c[\udde6\udde8\udde9\uddeb-\udded\uddef-\uddf4\uddf7\uddf9\uddfb\uddfc\uddff]|\ud83c\uddfa\ud83c[\udde6\uddec\uddf2\uddf3\uddf8\uddfe\uddff]|\ud83c\uddfb\ud83c[\udde6\udde8\uddea\uddec\uddee\uddf3\uddfa]|\ud83c\uddfc\ud83c[\uddeb\uddf8]|\ud83c\uddfd\ud83c\uddf0|\ud83c\uddfe\ud83c[\uddea\uddf9]|\ud83c\uddff\ud83c[\udde6\uddf2\uddfc]|\ud83c[\udccf\udd8e\udd91-\udd9a\udde6-\uddff\ude01\ude32-\ude36\ude38-\ude3a\ude50\ude51\udf00-\udf20\udf2d-\udf35\udf37-\udf7c\udf7e-\udf84\udf86-\udf93\udfa0-\udfc1\udfc5\udfc6\udfc8\udfc9\udfcf-\udfd3\udfe0-\udff0\udff4\udff8-\udfff]|\ud83d[\udc00-\udc3e\udc40\udc44\udc45\udc51-\udc65\udc6a\udc6f\udc79-\udc7b\udc7d-\udc80\udc84\udc88-\udc8e\udc90\udc92-\udca9\udcab-\udcfc\udcff-\udd3d\udd4b-\udd4e\udd50-\udd67\udda4\uddfb-\ude44\ude48-\ude4a\ude80-\udea2\udea4-\udeb3\udeb7-\udebf\udec1-\udec5\uded0-\uded2\uded5-\uded7\udedc-\udedf\udeeb\udeec\udef4-\udefc\udfe0-\udfeb\udff0]|\ud83e[\udd0d\udd0e\udd10-\udd17\udd20-\udd25\udd27-\udd2f\udd3a\udd3c\udd3f-\udd45\udd47-\udd76\udd78-\uddb4\uddb7\uddba\uddbc-\uddcc\uddd0\uddde-\uddff\ude70-\ude7c\ude80-\ude89\ude8f-\udec2\udec6\udece-\udedc\udedf-\udee9]|[\u23e9-\u23ec\u23f0\u23f3\u267e\u26ce\u2705\u2728\u274c\u274e\u2753-\u2755\u2795-\u2797\u27b0\u27bf\ue50a])|\ufe0f/g),_e}var Fe={},It;function Mn(){return It||(It=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.createLanguage=e.lazy=e.lineEnd=e.lineBegin=e.char=e.newline=e.crlf=e.lf=e.cr=e.notMatch=e.alt=e.seq=e.regexp=e.str=e.Parser=e.failure=e.success=void 0;function n(m,y){return{success:!0,value:y,index:m}}e.success=n;function u(){return{success:!1}}e.failure=u;class o{constructor(y,b){this.handler=(s,v,$)=>{if($.trace&&this.name!=null){const k=`${v}`;console.log(`${k.padEnd(6," ")}enter ${this.name}`);const I=y(s,v,$);if(I.success){const C=`${v}:${I.index}`;console.log(`${C.padEnd(6," ")}match ${this.name}`)}else{const C=`${v}`;console.log(`${C.padEnd(6," ")}fail ${this.name}`)}return I}return y(s,v,$)},this.name=b}map(y){return new o((b,s,v)=>{const $=this.handler(b,s,v);return $.success?n($.index,y($.value)):$})}text(){return new o((y,b,s)=>{const v=this.handler(y,b,s);if(!v.success)return v;const $=y.slice(b,v.index);return n(v.index,$)})}many(y){return new o((b,s,v)=>{let $,k=s;const I=[];for(;k<b.length&&($=this.handler(b,k,v),!!$.success);)k=$.index,I.push($.value);return I.length<y?u():n(k,I)})}sep(y,b){if(b<1)throw new Error('"min" must be a value greater than or equal to 1.');return t(this,t(y,this).select(1).many(b-1)).map(s=>[s[0],...s[1]])}select(y){return this.map(b=>b[y])}option(){return a([this,h(null)])}}e.Parser=o;function l(m){return new o((y,b,s)=>y.length-b<m.length||y.substr(b,m.length)!==m?u():n(b+m.length,m))}e.str=l;function r(m){const y=RegExp(`^(?:${m.source})`,m.flags);return new o((b,s,v)=>{const $=b.slice(s),k=y.exec($);return k==null?u():n(s+k[0].length,k[0])})}e.regexp=r;function t(...m){return new o((y,b,s)=>{let v,$=b;const k=[];for(let I=0;I<m.length;I++){if(v=m[I].handler(y,$,s),!v.success)return v;$=v.index,k.push(v.value)}return n($,k)})}e.seq=t;function a(m){return new o((y,b,s)=>{for(let v=0;v<m.length;v++){const k=m[v].handler(y,b,s);if(k.success)return k}return u()})}e.alt=a;function h(m){return new o((y,b,s)=>n(b,m))}function d(m){return new o((y,b,s)=>m.handler(y,b,s).success?u():n(b,null))}e.notMatch=d,e.cr=l("\r"),e.lf=l(`
`),e.crlf=l(`\r
`),e.newline=a([e.crlf,e.cr,e.lf]),e.char=new o((m,y,b)=>{if(m.length-y<1)return u();const s=m.charAt(y);return n(y+1,s)}),e.lineBegin=new o((m,y,b)=>y===0||e.cr.handler(m,y-1,b).success||e.lf.handler(m,y-1,b).success?n(y,null):u()),e.lineEnd=new o((m,y,b)=>y===m.length||e.cr.handler(m,y,b).success||e.lf.handler(m,y,b).success?n(y,null):u());function w(m){const y=new o((b,s,v)=>(y.handler=m().handler,y.handler(b,s,v)));return y}e.lazy=w;function i(m){const y={};for(const b of Object.keys(m))y[b]=w(()=>{const s=m[b](y);if(s==null)throw new Error("syntax must return a parser.");return s.name=b,s});return y}e.createLanguage=i})(Fe)),Fe}var ne={},ze={},Tt;function qt(){return Tt||(Tt=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.TEXT=e.PLAIN=e.FN=e.LINK=e.N_URL=e.HASHTAG=e.MENTION=e.MATH_INLINE=e.INLINE_CODE=e.STRIKE=e.ITALIC=e.SMALL=e.BOLD=e.EMOJI_CODE=e.UNI_EMOJI=e.CENTER=e.MATH_BLOCK=e.CODE_BLOCK=e.SEARCH=e.QUOTE=e.isMfmBlock=void 0;const n=["quote","search","blockCode","mathBlock","center"];function u(x){return n.includes(x.type)}e.isMfmBlock=u;const o=x=>({type:"quote",children:x});e.QUOTE=o;const l=(x,D)=>({type:"search",props:{query:x,content:D}});e.SEARCH=l;const r=(x,D)=>({type:"blockCode",props:{code:x,lang:D}});e.CODE_BLOCK=r;const t=x=>({type:"mathBlock",props:{formula:x}});e.MATH_BLOCK=t;const a=x=>({type:"center",children:x});e.CENTER=a;const h=x=>({type:"unicodeEmoji",props:{emoji:x}});e.UNI_EMOJI=h;const d=x=>({type:"emojiCode",props:{name:x}});e.EMOJI_CODE=d;const w=x=>({type:"bold",children:x});e.BOLD=w;const i=x=>({type:"small",children:x});e.SMALL=i;const m=x=>({type:"italic",children:x});e.ITALIC=m;const y=x=>({type:"strike",children:x});e.STRIKE=y;const b=x=>({type:"inlineCode",props:{code:x}});e.INLINE_CODE=b;const s=x=>({type:"mathInline",props:{formula:x}});e.MATH_INLINE=s;const v=(x,D,P)=>({type:"mention",props:{username:x,host:D,acct:P}});e.MENTION=v;const $=x=>({type:"hashtag",props:{hashtag:x}});e.HASHTAG=$;const k=(x,D)=>{const P={type:"url",props:{url:x}};return D&&(P.props.brackets=D),P};e.N_URL=k;const I=(x,D,P)=>({type:"link",props:{silent:x,url:D},children:P});e.LINK=I;const C=(x,D,P)=>({type:"fn",props:{name:x,args:D},children:P});e.FN=C;const _=x=>({type:"plain",children:[(0,e.TEXT)(x)]});e.PLAIN=_;const R=x=>({type:"text",props:{text:x}});e.TEXT=R})(ze)),ze}var xt;function rt(){if(xt)return ne;xt=1,Object.defineProperty(ne,"__esModule",{value:!0}),ne.inspectOne=ne.stringifyTree=ne.stringifyNode=ne.mergeText=void 0;const e=qt();function n(t){const a=[],h=[];function d(){h.length>0&&(a.push((0,e.TEXT)(h.join(""))),h.length=0)}const w=t.flat(1);for(const i of w)typeof i=="string"?h.push(i):!Array.isArray(i)&&i.type==="text"?h.push(i.props.text):(d(),a.push(i));return d(),a}ne.mergeText=n;function u(t){var a;switch(t.type){case"quote":return l(t.children).split(`
`).map(h=>`> ${h}`).join(`
`);case"search":return t.props.content;case"blockCode":return`\`\`\`${(a=t.props.lang)!==null&&a!==void 0?a:""}
${t.props.code}
\`\`\``;case"mathBlock":return`\\[
${t.props.formula}
\\]`;case"center":return`<center>
${l(t.children)}
</center>`;case"emojiCode":return`:${t.props.name}:`;case"unicodeEmoji":return t.props.emoji;case"bold":return`**${l(t.children)}**`;case"small":return`<small>${l(t.children)}</small>`;case"italic":return`<i>${l(t.children)}</i>`;case"strike":return`~~${l(t.children)}~~`;case"inlineCode":return`\`${t.props.code}\``;case"mathInline":return`\\(${t.props.formula}\\)`;case"mention":return t.props.acct;case"hashtag":return`#${t.props.hashtag}`;case"url":return t.props.brackets?`<${t.props.url}>`:t.props.url;case"link":return`${t.props.silent?"?":""}[${l(t.children)}](${t.props.url})`;case"fn":{const h=Object.keys(t.props.args).map(w=>{const i=t.props.args[w];return i===!0?w:`${w}=${i}`}),d=h.length>0?"."+h.join(","):"";return`$[${t.props.name}${d} ${l(t.children)}]`}case"plain":return`<plain>
${l(t.children)}
</plain>`;case"text":return t.props.text}throw new Error("unknown mfm node")}ne.stringifyNode=u;var o;(function(t){t[t.none=0]="none",t[t.inline=1]="inline",t[t.block=2]="block"})(o||(o={}));function l(t){const a=[];let h=o.none;for(const d of t){let w=!0;(0,e.isMfmBlock)(d)?(h===o.none&&(w=!1),h=o.block):((h===o.none||h===o.inline)&&(w=!1),h=o.inline),w&&a.push((0,e.TEXT)(`
`)),a.push(d)}return a.map(d=>u(d)).join("")}ne.stringifyTree=l;function r(t,a){if(a(t),t.children!=null)for(const h of t.children)r(h,a)}return ne.inspectOne=r,ne}var Mt;function _n(){if(Mt)return Y;Mt=1;var e=Y&&Y.__createBinding||(Object.create?(function(s,v,$,k){k===void 0&&(k=$);var I=Object.getOwnPropertyDescriptor(v,$);(!I||("get"in I?!v.__esModule:I.writable||I.configurable))&&(I={enumerable:!0,get:function(){return v[$]}}),Object.defineProperty(s,k,I)}):(function(s,v,$,k){k===void 0&&(k=$),s[k]=v[$]})),n=Y&&Y.__setModuleDefault||(Object.create?(function(s,v){Object.defineProperty(s,"default",{enumerable:!0,value:v})}):function(s,v){s.default=v}),u=Y&&Y.__importStar||function(s){if(s&&s.__esModule)return s;var v={};if(s!=null)for(var $ in s)$!=="default"&&Object.prototype.hasOwnProperty.call(s,$)&&e(v,s,$);return n(v,s),v},o=Y&&Y.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(Y,"__esModule",{value:!0}),Y.language=void 0;const l=o(xn()),r=u(Dt()),t=u(Mn()),a=rt(),h=t.regexp(/[\u0020\u3000\t]/),d=t.regexp(/[a-z0-9]/i),w=t.alt([t.crlf,t.cr,t.lf]);function i(...s){return new t.Parser((v,$,k)=>{const I=[];let C=$;for(let _=0;_<s.length;_++){const R=s[_].handler(v,C,k);if(!R.success)return C===$?t.failure():t.success(C,v.slice($,C));I.push(R.value),C=R.index}return t.success(C,I)})}const m=new t.Parser((s,v,$)=>$.linkLabel?t.failure():t.success(v,null)),y=new t.Parser((s,v,$)=>$.depth<$.nestLimit?t.success(v,null):t.failure());function b(s,v){const $=t.alt([t.seq(y,s).select(1),v??t.char]);return new t.Parser((k,I,C)=>{C.depth++;const _=$.handler(k,I,C);return C.depth--,_})}return Y.language=t.createLanguage({fullParser:s=>s.full.many(0),simpleParser:s=>s.simple.many(0),full:s=>t.alt([s.unicodeEmoji,s.centerTag,s.smallTag,s.plainTag,s.boldTag,s.italicTag,s.strikeTag,s.urlAlt,s.big,s.boldAsta,s.italicAsta,s.boldUnder,s.italicUnder,s.codeBlock,s.inlineCode,s.quote,s.mathBlock,s.mathInline,s.strikeWave,s.fn,s.mention,s.hashtag,s.emojiCode,s.link,s.url,s.search,s.text]),simple:s=>t.alt([s.unicodeEmoji,s.emojiCode,s.plainTag,s.text]),inline:s=>t.alt([s.unicodeEmoji,s.smallTag,s.plainTag,s.boldTag,s.italicTag,s.strikeTag,s.urlAlt,s.big,s.boldAsta,s.italicAsta,s.boldUnder,s.italicUnder,s.inlineCode,s.mathInline,s.strikeWave,s.fn,s.mention,s.hashtag,s.emojiCode,s.link,s.url,s.text]),quote:s=>{const v=t.seq(t.str(">"),h.option(),t.seq(t.notMatch(w),t.char).select(1).many(0).text()).select(2).sep(w,1),$=t.seq(w.option(),w.option(),t.lineBegin,v,w.option(),w.option()).select(3);return new t.Parser((k,I,C)=>{let _;if(_=$.handler(k,I,C),!_.success)return _;const R=_.value,x=_.index;return R.length===1&&R[0].length===0?t.failure():(_=b(s.fullParser).many(0).handler(R.join(`
`),0,C),_.success?t.success(x,r.QUOTE((0,a.mergeText)(_.value))):_)})},codeBlock:()=>{const s=t.str("```");return t.seq(w.option(),t.lineBegin,s,t.seq(t.notMatch(w),t.char).select(1).many(0),w,t.seq(t.notMatch(t.seq(w,s,t.lineEnd)),t.char).select(1).many(1),w,s,t.lineEnd,w.option()).map(v=>{const $=v[3].join("").trim(),k=v[5].join("");return r.CODE_BLOCK(k,$.length>0?$:null)})},mathBlock:()=>{const s=t.str("\\["),v=t.str("\\]");return t.seq(w.option(),t.lineBegin,s,w.option(),t.seq(t.notMatch(t.seq(w.option(),v)),t.char).select(1).many(1),w.option(),v,t.lineEnd,w.option()).map($=>{const k=$[4].join("");return r.MATH_BLOCK(k)})},centerTag:s=>{const v=t.str("<center>"),$=t.str("</center>");return t.seq(w.option(),t.lineBegin,v,w.option(),t.seq(t.notMatch(t.seq(w.option(),$)),b(s.inline)).select(1).many(1),w.option(),$,t.lineEnd,w.option()).map(k=>r.CENTER((0,a.mergeText)(k[4])))},big:s=>{const v=t.str("***");return i(v,t.seq(t.notMatch(v),b(s.inline)).select(1).many(1),v).map($=>typeof $=="string"?$:r.FN("tada",{},(0,a.mergeText)($[1])))},boldAsta:s=>{const v=t.str("**");return i(v,t.seq(t.notMatch(v),b(s.inline)).select(1).many(1),v).map($=>typeof $=="string"?$:r.BOLD((0,a.mergeText)($[1])))},boldTag:s=>{const v=t.str("<b>"),$=t.str("</b>");return i(v,t.seq(t.notMatch($),b(s.inline)).select(1).many(1),$).map(k=>typeof k=="string"?k:r.BOLD((0,a.mergeText)(k[1])))},boldUnder:()=>{const s=t.str("__");return t.seq(s,t.alt([d,h]).many(1),s).map(v=>r.BOLD((0,a.mergeText)(v[1])))},smallTag:s=>{const v=t.str("<small>"),$=t.str("</small>");return i(v,t.seq(t.notMatch($),b(s.inline)).select(1).many(1),$).map(k=>typeof k=="string"?k:r.SMALL((0,a.mergeText)(k[1])))},italicTag:s=>{const v=t.str("<i>"),$=t.str("</i>");return i(v,t.seq(t.notMatch($),b(s.inline)).select(1).many(1),$).map(k=>typeof k=="string"?k:r.ITALIC((0,a.mergeText)(k[1])))},italicAsta:()=>{const s=t.str("*"),v=t.seq(s,t.alt([d,h]).many(1),s);return new t.Parser(($,k,I)=>{const C=v.handler($,k,I);if(!C.success)return t.failure();const _=$.slice(0,k);return/[a-z0-9]$/i.test(_)?t.failure():t.success(C.index,r.ITALIC((0,a.mergeText)(C.value[1])))})},italicUnder:()=>{const s=t.str("_"),v=t.seq(s,t.alt([d,h]).many(1),s);return new t.Parser(($,k,I)=>{const C=v.handler($,k,I);if(!C.success)return t.failure();const _=$.slice(0,k);return/[a-z0-9]$/i.test(_)?t.failure():t.success(C.index,r.ITALIC((0,a.mergeText)(C.value[1])))})},strikeTag:s=>{const v=t.str("<s>"),$=t.str("</s>");return i(v,t.seq(t.notMatch($),b(s.inline)).select(1).many(1),$).map(k=>typeof k=="string"?k:r.STRIKE((0,a.mergeText)(k[1])))},strikeWave:s=>{const v=t.str("~~");return i(v,t.seq(t.notMatch(t.alt([v,w])),b(s.inline)).select(1).many(1),v).map($=>typeof $=="string"?$:r.STRIKE((0,a.mergeText)($[1])))},unicodeEmoji:()=>{const s=RegExp(l.default.source);return t.regexp(s).map(v=>v==="️"?v:r.UNI_EMOJI(v))},plainTag:()=>{const s=t.str("<plain>"),v=t.str("</plain>");return t.seq(s,w.option(),t.seq(t.notMatch(t.seq(w.option(),v)),t.char).select(1).many(1).text(),w.option(),v).select(2).map($=>r.PLAIN($))},fn:s=>{const v=new t.Parser((C,_,R)=>{const x=t.regexp(/[a-z0-9_]+/i).handler(C,_,R);return x.success?t.success(x.index,x.value):x}),$=t.seq(t.regexp(/[a-z0-9_]+/i),t.seq(t.str("="),t.regexp(/[a-z0-9_.-]+/i)).select(1).option()).map(C=>({k:C[0],v:C[1]!=null?C[1]:!0})),k=t.seq(t.str("."),$.sep(t.str(","),1)).select(1).map(C=>{const _={};for(const R of C)_[R.k]=R.v;return _}),I=t.str("]");return i(t.str("$["),v,k.option(),t.str(" "),t.seq(t.notMatch(I),b(s.inline)).select(1).many(1),I).map(C=>{if(typeof C=="string")return C;const _=C[1],R=C[2]||{},x=C[4];return r.FN(_,R,(0,a.mergeText)(x))})},inlineCode:()=>{const s=t.str("`");return t.seq(s,t.seq(t.notMatch(t.alt([s,t.str("´"),w])),t.char).select(1).many(1),s).map(v=>r.INLINE_CODE(v[1].join("")))},mathInline:()=>{const s=t.str("\\("),v=t.str("\\)");return t.seq(s,t.seq(t.notMatch(t.alt([v,w])),t.char).select(1).many(1),v).map($=>r.MATH_INLINE($[1].join("")))},mention:()=>{const s=t.seq(m,t.str("@"),t.regexp(/[a-z0-9_.-]+/i),t.seq(t.str("@"),t.regexp(/[a-z0-9_.-]+/i)).select(1).option());return new t.Parser((v,$,k)=>{let I;if(I=s.handler(v,$,k),!I.success)return t.failure();const C=v.slice(0,$);if(/[a-z0-9]$/i.test(C))return t.failure();let _=!1;const R=I.index,x=I.value[2],D=I.value[3];let P=D;D!=null&&(I=/[.-]+$/.exec(D),I!=null&&(P=D.slice(0,-1*I[0].length),P.length===0&&(_=!0,P=null)));let Q=x;if(I=/[.-]+$/.exec(x),I!=null&&(P==null?Q=x.slice(0,-1*I[0].length):_=!0),(Q.length===0||/^[.-]/.test(Q))&&(_=!0),P!=null&&/^[.-]/.test(P)&&(_=!0),_)return t.success(R,v.slice($,R));const be=P!=null?`@${Q}@${P}`:`@${Q}`;return t.success($+be.length,r.MENTION(Q,P,be))})},hashtag:()=>{const s=t.str("#"),v=t.seq(t.notMatch(t.alt([t.regexp(/[ \u3000\t.,!?'"#:/[\]【】()「」（）<>]/),h,w])),t.char).select(1),$=t.lazy(()=>t.alt([t.seq(t.str("("),b($,v).many(0),t.str(")")),t.seq(t.str("["),b($,v).many(0),t.str("]")),t.seq(t.str("「"),b($,v).many(0),t.str("」")),t.seq(t.str("（"),b($,v).many(0),t.str("）")),v])),k=t.seq(m,s,$.many(1).text()).select(2);return new t.Parser((I,C,_)=>{const R=k.handler(I,C,_);if(!R.success)return t.failure();const x=I.slice(0,C);if(/[a-z0-9]$/i.test(x))return t.failure();const D=R.index,P=R.value;return/^[0-9]+$/.test(P)?t.failure():t.success(D,r.HASHTAG(P))})},emojiCode:()=>{const s=t.notMatch(t.regexp(/[a-z0-9]/i)),v=t.str(":");return t.seq(t.alt([t.lineBegin,s]),v,t.regexp(/[a-z0-9_+-]+/i),v,t.alt([t.lineEnd,s])).select(2).map($=>r.EMOJI_CODE($))},link:s=>{const v=new t.Parser((I,C,_)=>{_.linkLabel=!0;const R=s.inline.handler(I,C,_);return _.linkLabel=!1,R}),$=t.str("]"),k=t.seq(m,t.alt([t.str("?["),t.str("[")]),t.seq(t.notMatch(t.alt([$,w])),b(v)).select(1).many(1),$,t.str("("),t.alt([s.urlAlt,s.url]),t.str(")"));return new t.Parser((I,C,_)=>{const R=k.handler(I,C,_);if(!R.success)return t.failure();const[,x,D,,,P]=R.value,Q=x==="?[";return typeof P=="string"?t.failure():t.success(R.index,r.LINK(Q,P.props.url,(0,a.mergeText)(D)))})},url:()=>{const s=t.regexp(/[.,a-z0-9_/:%#@$&?!~=+-]/i),v=t.lazy(()=>t.alt([t.seq(t.str("("),b(v,s).many(0),t.str(")")),t.seq(t.str("["),b(v,s).many(0),t.str("]")),s])),$=t.seq(m,t.regexp(/https?:\/\//),v.many(1).text());return new t.Parser((k,I,C)=>{let _;if(_=$.handler(k,I,C),!_.success)return t.failure();const R=_.index;let x=R;const D=_.value[1];let P=_.value[2];return _=/[.,]+$/.exec(P),_!=null&&(x-=_[0].length,P=P.slice(0,-1*_[0].length),P.length===0)?t.success(R,k.slice(I,R)):t.success(x,r.N_URL(D+P,!1))})},urlAlt:()=>{const s=t.str("<"),v=t.str(">"),$=t.seq(m,s,t.regexp(/https?:\/\//),t.seq(t.notMatch(t.alt([v,h])),t.char).select(1).many(1),v).text();return new t.Parser((k,I,C)=>{const _=$.handler(k,I,C);if(!_.success)return t.failure();const R=_.value.slice(1,_.value.length-1);return t.success(_.index,r.N_URL(R,!0))})},search:()=>{const s=t.alt([t.regexp(/\[(検索|search)\]/i),t.regexp(/(検索|search)/i)]);return t.seq(w.option(),t.lineBegin,t.seq(t.notMatch(t.alt([w,t.seq(h,s,t.lineEnd)])),t.char).select(1).many(1),h,s,t.lineEnd,w.option()).map(v=>{const $=v[2].join("");return r.SEARCH($,`${$}${v[3]}${v[4]}`)})},text:()=>t.char}),Y}var _t;function Ln(){if(_t)return fe;_t=1,Object.defineProperty(fe,"__esModule",{value:!0}),fe.simpleParser=fe.fullParser=void 0;const e=_n(),n=rt();function u(l,r){const t=e.language.fullParser.handler(l,0,{nestLimit:r.nestLimit!=null?r.nestLimit:20,depth:0,linkLabel:!1,trace:!1});if(!t.success)throw new Error("Unexpected parse error");return(0,n.mergeText)(t.value)}fe.fullParser=u;function o(l){const r=e.language.simpleParser.handler(l,0,{depth:0,nestLimit:1/0});if(!r.success)throw new Error("Unexpected parse error");return(0,n.mergeText)(r.value)}return fe.simpleParser=o,fe}var Lt;function Cn(){if(Lt)return J;Lt=1,Object.defineProperty(J,"__esModule",{value:!0}),J.extract=J.inspect=J.toString=J.parseSimple=J.parse=void 0;const e=Ln(),n=rt();function u(a,h={}){return(0,e.fullParser)(a,{nestLimit:h.nestLimit})}J.parse=u;function o(a){return(0,e.simpleParser)(a)}J.parseSimple=o;function l(a){return Array.isArray(a)?(0,n.stringifyTree)(a):(0,n.stringifyNode)(a)}J.toString=l;function r(a,h){if(Array.isArray(a))for(const d of a)(0,n.inspectOne)(d,h);else(0,n.inspectOne)(a,h)}J.inspect=r;function t(a,h){const d=[];return r(a,w=>{h(w)&&d.push(w)}),d}return J.extract=t,J}var Ct;function Dt(){return Ct||(Ct=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.TEXT=e.PLAIN=e.FN=e.LINK=e.N_URL=e.HASHTAG=e.MENTION=e.MATH_INLINE=e.INLINE_CODE=e.STRIKE=e.ITALIC=e.SMALL=e.BOLD=e.EMOJI_CODE=e.UNI_EMOJI=e.CENTER=e.MATH_BLOCK=e.CODE_BLOCK=e.SEARCH=e.QUOTE=e.extract=e.inspect=e.toString=e.parseSimple=e.parse=void 0;var n=Cn();Object.defineProperty(e,"parse",{enumerable:!0,get:function(){return n.parse}}),Object.defineProperty(e,"parseSimple",{enumerable:!0,get:function(){return n.parseSimple}}),Object.defineProperty(e,"toString",{enumerable:!0,get:function(){return n.toString}}),Object.defineProperty(e,"inspect",{enumerable:!0,get:function(){return n.inspect}}),Object.defineProperty(e,"extract",{enumerable:!0,get:function(){return n.extract}});var u=qt();Object.defineProperty(e,"QUOTE",{enumerable:!0,get:function(){return u.QUOTE}}),Object.defineProperty(e,"SEARCH",{enumerable:!0,get:function(){return u.SEARCH}}),Object.defineProperty(e,"CODE_BLOCK",{enumerable:!0,get:function(){return u.CODE_BLOCK}}),Object.defineProperty(e,"MATH_BLOCK",{enumerable:!0,get:function(){return u.MATH_BLOCK}}),Object.defineProperty(e,"CENTER",{enumerable:!0,get:function(){return u.CENTER}}),Object.defineProperty(e,"UNI_EMOJI",{enumerable:!0,get:function(){return u.UNI_EMOJI}}),Object.defineProperty(e,"EMOJI_CODE",{enumerable:!0,get:function(){return u.EMOJI_CODE}}),Object.defineProperty(e,"BOLD",{enumerable:!0,get:function(){return u.BOLD}}),Object.defineProperty(e,"SMALL",{enumerable:!0,get:function(){return u.SMALL}}),Object.defineProperty(e,"ITALIC",{enumerable:!0,get:function(){return u.ITALIC}}),Object.defineProperty(e,"STRIKE",{enumerable:!0,get:function(){return u.STRIKE}}),Object.defineProperty(e,"INLINE_CODE",{enumerable:!0,get:function(){return u.INLINE_CODE}}),Object.defineProperty(e,"MATH_INLINE",{enumerable:!0,get:function(){return u.MATH_INLINE}}),Object.defineProperty(e,"MENTION",{enumerable:!0,get:function(){return u.MENTION}}),Object.defineProperty(e,"HASHTAG",{enumerable:!0,get:function(){return u.HASHTAG}}),Object.defineProperty(e,"N_URL",{enumerable:!0,get:function(){return u.N_URL}}),Object.defineProperty(e,"LINK",{enumerable:!0,get:function(){return u.LINK}}),Object.defineProperty(e,"FN",{enumerable:!0,get:function(){return u.FN}}),Object.defineProperty(e,"PLAIN",{enumerable:!0,get:function(){return u.PLAIN}}),Object.defineProperty(e,"TEXT",{enumerable:!0,get:function(){return u.TEXT}})})(De)),De}var Be=Dt();const at=U({__name:"I18n",props:{src:{},tag:{default:"span"},textTag:{}},setup(e){const n=e,u=cn(),o=F(()=>{let r=n.src;const t=[];for(;;){const a=r.indexOf("{"),h=r.indexOf("}");if(a===-1){t.push(r);break}else a>0&&t.push(r.substring(0,a)),t.push({arg:r.substring(a+1,h)});r=r.substring(h+1)}return t}),l=()=>S(n.tag,o.value.map(r=>typeof r=="string"?n.textTag?S(n.textTag,r):r:u[r.arg]()));return(r,t)=>(f(),A(l))}}),An=["href"],Nn=U({__name:"EmMediaBanner",props:{media:{},href:{}},setup(e){return(n,u)=>(f(),g("a",{href:e.href,target:"_blank",class:c(n.$style.root)},[p("div",{class:c(n.$style.label)},[e.media.type.startsWith("audio")?(f(),g(G,{key:0},[u[0]||(u[0]=p("i",{class:"ti ti-music"},null,-1)),K(" "+L("Audio"),1)],64)):(f(),g(G,{key:1},[u[1]||(u[1]=p("i",{class:"ti ti-file"},null,-1)),K(" "+L("Файли"),1)],64))],2),p("div",{class:c(n.$style.go)},[...u[2]||(u[2]=[p("i",{class:"ti ti-chevron-right"},null,-1)])],2)],10,An))}}),Bn="xn4B3",On="xAFko",Rn="xrlwT",Sn={root:Bn,label:On,go:Rn},q=(e,n)=>{const u=e.__vccOpts||e;for(const[o,l]of n)u[o]=l;return u},Pn={$style:Sn},Un=q(Nn,[["__cssModules",Pn]]),W=[];for(let e=0;e<256;++e)W.push((e+256).toString(16).slice(1));function jn(e,n=0){return(W[e[n+0]]+W[e[n+1]]+W[e[n+2]]+W[e[n+3]]+"-"+W[e[n+4]]+W[e[n+5]]+"-"+W[e[n+6]]+W[e[n+7]]+"-"+W[e[n+8]]+W[e[n+9]]+"-"+W[e[n+10]]+W[e[n+11]]+W[e[n+12]]+W[e[n+13]]+W[e[n+14]]+W[e[n+15]]).toLowerCase()}let We;const Hn=new Uint8Array(16);function qn(){if(!We){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");We=crypto.getRandomValues.bind(crypto)}return We(Hn)}const Dn=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),At={randomUUID:Dn};function Fn(e,n,u){e=e||{};const o=e.random??e.rng?.()??qn();if(o.length<16)throw new Error("Random bytes length must be >= 16");return o[6]=o[6]&15|64,o[8]=o[8]&63|128,jn(o)}function zn(e,n,u){return At.randomUUID&&!e?At.randomUUID():Fn(e)}function Le(e){let n=0;for(let u=0;u<e.length;u++)n=n*83+"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz#$%*+,-.:;=?@[]^_{|}~".indexOf(e[u]);return n}function Nt(e,n){return Math.cos(Math.PI*e/n)}function Wn(e,n){n[0]=Ve(e>>16),n[1]=Ve(e>>8&255),n[2]=Ve(e&255)}function Ve(e){const n=e/255;return n<=.04045?n/12.92:((n+.055)/1.055)**2.4}function Vn(e,n,u){n[0]=Ke(Math.floor(e/361))*u,n[1]=Ke(Math.floor(e/19)%19)*u,n[2]=Ke(e%19)*u}function Ke(e){const n=(e-9)/9;return Math.sign(n)*Math.abs(n)**2}function Kn(e,n,u=1){const o=Le(e[0]),l=o%9+1,r=(o-l+1)/9+1,t=(Le(e[1])+1)/166*u,a=new Float32Array(3*l*r);for(let I=0;I<l*r;I++)I?Vn(Le(e.slice(I*2+4,I*2+6)),a.subarray(I*3,(I+1)*3),t):Wn(Le(e.slice(2,6)),a.subarray(0,3));const h=new Float32Array(l*r*3);for(let I=0;I<l*r;I++){const C=I%l,_=r-1-(I-C)/l,R=h.subarray(I*3,(I+1)*3);for(let x=0;x<r;x++){const D=Nt(x*_,r);for(let P=0;P<l;P++){const Q=D*Nt(P*C,l),be=a.subarray(x*l*3+P*3,x*l*3+(P+1)*3);for(let ce=0;ce<3;ce++)R[ce]+=be[ce]*Q}}}const d=n.getContext("webgl2"),w=d.createShader(d.VERTEX_SHADER);d.shaderSource(w,`#version 300 es
in vec2 a;in vec2 b;out vec2 c;void main(){gl_Position=vec4(a,0.,1.);c=b;}`),d.compileShader(w);const i=d.createShader(d.FRAGMENT_SHADER);d.shaderSource(i,`#version 300 es
precision mediump float;in vec2 c;uniform sampler2D d;out vec4 e;vec3 f(vec3 a,vec3 b,vec3 c,vec3 d,float e){float f=e*e,g=f*e;return(d/2.-c*3./2.+b*3./2.-a/2.)*g+(a-b*5./2.+c*2.-d/2.)*f+(c/2.-a/2.)*e+b;}void main(){vec2 g=vec2(${l},${r}),h=c*g+vec2(1.,0.),i=fract(h);h=(floor(h)-.5)/g;vec3 k=f(f(texture(d,h+vec2(-1.)/g).rgb,texture(d,h+vec2(0.,-1.)/g).rgb,texture(d,h+vec2(1.,-1.)/g).rgb,texture(d,h+vec2(2.,-1.)/g).rgb,i.x),f(texture(d,h+vec2(-1.,0.)/g).rgb,texture(d,h).rgb,texture(d,h+vec2(1.,0.)/g).rgb,texture(d,h+vec2(2.,0.)/g).rgb,i.x),f(texture(d,h+vec2(-1.,1.)/g).rgb,texture(d,h+vec2(0.,1.)/g).rgb,texture(d,h+vec2(1.)/g).rgb,texture(d,h+vec2(2.,1.)/g).rgb,i.x),f(texture(d,h+vec2(-1.,2.)/g).rgb,texture(d,h+vec2(0.,2.)/g).rgb,texture(d,h+vec2(1.,2.)/g).rgb,texture(d,h+vec2(2.)/g).rgb,i.x),i.y),l=pow(abs(k),vec3(1./2.4))*1.055-vec3(.055);l=mix(k*12.92,l,step(.0031308,k));e=vec4(l,1.);}`),d.compileShader(i);const m=d.createProgram();d.attachShader(m,w),d.attachShader(m,i),d.linkProgram(m),d.useProgram(m);const y=d.createBuffer();d.bindBuffer(d.ARRAY_BUFFER,y),d.bufferData(d.ARRAY_BUFFER,new Float32Array([-1,-1,1,-1,-1,1,1,1]),d.STATIC_DRAW);const b=d.createBuffer();d.bindBuffer(d.ARRAY_BUFFER,b),d.bufferData(d.ARRAY_BUFFER,new Float32Array([0,0,1,0,0,1,1,1]),d.STATIC_DRAW);const s=d.getAttribLocation(m,"a");d.enableVertexAttribArray(s),d.bindBuffer(d.ARRAY_BUFFER,y),d.vertexAttribPointer(s,2,d.FLOAT,!1,0,0);const v=d.getAttribLocation(m,"b");d.enableVertexAttribArray(v),d.bindBuffer(d.ARRAY_BUFFER,b),d.vertexAttribPointer(v,2,d.FLOAT,!1,0,0);const $=d.createTexture();d.bindTexture(d.TEXTURE_2D,$),d.pixelStorei(d.UNPACK_ALIGNMENT,1),d.texImage2D(d.TEXTURE_2D,0,d.RGB16F,l,r,0,d.RGB,d.FLOAT,h),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_WRAP_S,d.CLAMP_TO_EDGE),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_WRAP_T,d.CLAMP_TO_EDGE),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_MIN_FILTER,d.LINEAR),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_MAG_FILTER,d.LINEAR);const k=d.getUniformLocation(m,"d");d.uniform1i(k,0),d.drawArrays(d.TRIANGLE_STRIP,0,4)}function Gn(e){return new Worker("/embed_vite/draw-blurhash-CkyvlvUa.js",{type:"module",name:e?.name})}function Xn(e){return new Worker("/embed_vite/test-webgl2-Bpyoe01b.js",{type:"module",name:e?.name})}function Jn(e){return e+1}class Ce{symbol=Symbol("WorkerMultiDispatch");workers=[];terminated=!1;prevWorkerNumber=0;getUseWorkerNumber;finalizationRegistry;constructor(n,u,o=Jn){this.getUseWorkerNumber=o;for(let l=0;l<u;l++)this.workers.push(n());this.finalizationRegistry=new FinalizationRegistry(()=>{this.terminate()}),this.finalizationRegistry.register(this,this.symbol)}postMessage(n,u,o=this.getUseWorkerNumber){let l=o(this.prevWorkerNumber,this.workers.length);return l=Math.abs(Math.round(l))%this.workers.length,this.prevWorkerNumber=l,Array.isArray(u)?this.workers[l].postMessage(n,u):this.workers[l].postMessage(n,u),l}addListener(n,u){this.workers.forEach(o=>{o.addEventListener("message",n,u)})}removeListener(n,u){this.workers.forEach(o=>{o.removeEventListener("message",n,u)})}terminate(){this.terminated=!0,this.workers.forEach(n=>{n.terminate()}),this.workers=[],this.finalizationRegistry.unregister(this)}isTerminated(){return this.terminated}getWorkers(){return this.workers}getSymbol(){return this.symbol}}function Yn(e){return typeof e=="string"?"#"+[...e.slice(2,6)].map(n=>"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz#$%*+,-.:;=?@[]^_{|}~".indexOf(n)).reduce((n,u)=>n*83+u,0).toString(16).padStart(6,"0"):void 0}const Qn=["title"],Zn=["width","height","title"],eu=["height","width","src","title","alt"],Ge=new Promise(e=>{const n=new Xn;n.addEventListener("message",u=>{if(u.data.result){const o=new Ce(()=>new Gn,Math.min(navigator.hardwareConcurrency-1,4));e(o)}else{const o=window.document.createElement("canvas");o.width=64,o.height=64,e(o)}n.terminate()})}),tu=U({__name:"EmImgWithBlurhash",props:{src:{default:null},hash:{},alt:{default:""},title:{default:null},height:{default:64},width:{default:64},cover:{type:Boolean,default:!0},forceBlurhash:{type:Boolean,default:!1},onlyAvgColor:{type:Boolean,default:!1}},setup(e){const n=e,u=zn(),o=he(),l=he(),r=he(),t=B(!1),a=B(64),h=B(64),d=B(n.width),w=B(n.height),i=B(),m=F(()=>!t.value||n.forceBlurhash);function y(){n.src!=null&&n.src!==""?ke().then(()=>r.value?.decode()).then(()=>{t.value=!0},k=>{console.log("Error occurred during decoding image",r.value,k)}):t.value=!1}ue([()=>n.width,()=>n.height,l],()=>{const k=n.width/n.height;k>1?(a.value=Math.round(64*k),h.value=64):(a.value=64,h.value=Math.round(64/k));const I=l.value?.clientWidth??300;d.value=I,w.value=Math.round(I/k)},{immediate:!0});function b(k){if(!o.value){i.value=k;return}i.value=void 0;const I=o.value.getContext("2d");I&&I.drawImage(k,0,0,a.value,h.value)}function s(){if(!o.value)return;const k=n.hash!=null&&Yn(n.hash)||"#888",I=o.value.getContext("2d");I&&(I.beginPath(),I.fillStyle=k,I.fillRect(0,0,a.value,h.value))}async function v(){if(s(),n.hash==null||n.onlyAvgColor)return;const k=await Ge;if(k instanceof Ce)k.postMessage({id:u,hash:n.hash},void 0);else try{Kn(n.hash,k),b(k)}catch(I){console.error("Error occurred during drawing blurhash",I)}}function $(k){k.data.id===u&&b(k.data.bitmap)}return Ge.then(k=>{k instanceof Ce&&k.addListener($),v()}),ue(()=>n.src,()=>{y()}),ue(()=>n.hash,()=>{v()}),Se(()=>{i.value&&b(i.value),y()}),Pe(()=>{Ge.then(k=>{k instanceof Ce&&k.removeListener($)})}),(k,I)=>(f(),g("div",{ref_key:"root",ref:l,class:c(["chromatic-ignore",k.$style.root,{[k.$style.cover]:e.cover}]),title:e.title??""},[se(p("canvas",{key:"canvas",ref_key:"canvas",ref:o,class:c(k.$style.canvas),width:a.value,height:h.value,title:e.title??void 0,tabindex:"-1"},null,10,Zn),[[de,m.value]]),se(p("img",{key:"img",ref_key:"img",ref:r,height:w.value??void 0,width:d.value??void 0,class:c(k.$style.img),src:e.src??void 0,title:e.title??void 0,alt:e.alt??void 0,loading:"eager",decoding:"async",tabindex:"-1"},null,10,eu),[[de,!m.value]])],10,Qn))}}),nu="xBslT",uu="x8kkS",su="x4TPn",du="xaVnr",ou={root:nu,cover:uu,canvas:su,img:du},lu={$style:ou},Ft=q(tu,[["__cssModules",lu]]),ru=["title","href"],au={key:0,style:{display:"block"}},iu={key:1,style:{display:"block"}},cu={style:{display:"block"}},fu=["title"],mu=U({__name:"EmMediaImage",props:{image:{},href:{},raw:{type:Boolean},cover:{type:Boolean,default:!1}},setup(e){const n=e,u=B(n.image.isSensitive),o=F(()=>n.raw?n.image.url:n.image.thumbnailUrl);async function l(r){u.value&&(r.stopPropagation(),u.value=!1)}return(r,t)=>(f(),g("div",{class:c([u.value?r.$style.hidden:r.$style.visible]),onClick:l},[p("a",{title:e.image.name,class:c(r.$style.imageContainer),href:e.href??e.image.url,target:"_blank",rel:"noopener"},[N(Ft,{hash:e.image.blurhash,src:u.value?null:o.value,forceBlurhash:u.value,cover:u.value||e.cover,alt:e.image.comment||e.image.name,title:e.image.comment||e.image.name,width:e.image.properties.width,height:e.image.properties.height,style:oe(u.value?"filter: brightness(0.7);":null)},null,8,["hash","src","forceBlurhash","cover","alt","title","width","height","style"])],10,ru),u.value?(f(),g("div",{key:0,class:c(r.$style.hiddenText)},[p("div",{class:c(r.$style.hiddenTextWrapper)},[e.image.isSensitive?(f(),g("b",au,[t[1]||(t[1]=p("i",{class:"ti ti-eye-exclamation"},null,-1)),K(" "+L("NSFW"),1)])):(f(),g("b",iu,[t[2]||(t[2]=p("i",{class:"ti ti-photo"},null,-1)),K(" "+L("Зображення"),1)])),p("span",cu,L("Натисніть для перегляду"),1)],2)],2)):T("",!0),p("div",{class:c(r.$style.indicators)},[["image/gif","image/apng"].includes(e.image.type)?(f(),g("div",{key:0,class:c(r.$style.indicator)},"GIF",2)):T("",!0),e.image.comment?(f(),g("div",{key:1,class:c(r.$style.indicator)},"ALT",2)):T("",!0),e.image.isSensitive?(f(),g("div",{key:2,class:c(r.$style.indicator),style:{color:"var(--MI_THEME-warn)"},title:"NSFW"},[...t[3]||(t[3]=[p("i",{class:"ti ti-eye-exclamation"},null,-1)])],10,fu)):T("",!0)],2),u.value?T("",!0):(f(),g("i",{key:1,class:c(["ti ti-eye-off",r.$style.hide]),onClick:t[0]||(t[0]=Ut(a=>u.value=!0,["stop"]))},null,2))],2))}}),yu="xDC3d",vu="xnjvH",hu="xwP2L",pu="xyJoi",gu="xBvWH",bu="xjVon",$u="xwJLx",wu="x4Hsa",ku={hidden:yu,hiddenText:vu,hide:hu,hiddenTextWrapper:pu,visible:gu,imageContainer:bu,indicators:$u,indicator:wu},Eu={$style:ku},Iu=q(mu,[["__cssModules",Eu]]),Tu=["href"],xu=["src"],Mu=U({__name:"EmMediaVideo",props:{video:{},href:{}},setup(e){return(n,u)=>(f(),g("a",{href:e.href,target:"_blank",class:c(n.$style.root)},[!e.video.isSensitive&&e.video.thumbnailUrl?(f(),g("img",{key:0,class:c(n.$style.thumbnail),src:e.video.thumbnailUrl},null,10,xu)):T("",!0),p("div",{class:c(n.$style.videoOverlayPlayButton)},[...u[0]||(u[0]=[p("i",{class:"ti ti-player-play-filled"},null,-1)])],2)],10,Tu))}}),_u="x76MR",Lu="xCJUq",Cu="xAgiG",Au={root:_u,thumbnail:Lu,videoOverlayPlayButton:Cu},Nu={$style:Au},Bu=q(Mu,[["__cssModules",Nu]]),Ou=["image/png","image/gif","image/jpeg","image/webp","image/avif","image/apng","image/bmp","image/tiff","image/x-icon","audio/opus","video/ogg","audio/ogg","application/ogg","video/quicktime","video/mp4","audio/mp4","video/x-m4v","audio/x-m4a","video/3gpp","video/3gpp2","video/mpeg","audio/mpeg","video/webm","audio/webm","audio/aac","audio/flac","audio/wav","audio/x-flac","audio/vnd.wave"],Ru=U({__name:"EmMediaList",props:{mediaList:{},raw:{type:Boolean},originalEntityUrl:{}},setup(e){const n=e,u=F(()=>n.mediaList.filter(l=>o(l)).length),o=l=>l.type==="image/svg+xml"?!0:(l.type.startsWith("video")||l.type.startsWith("image"))&&Ou.includes(l.type);return(l,r)=>(f(),g("div",null,[(f(!0),g(G,null,ae(e.mediaList.filter(t=>!o(t)),t=>(f(),g("div",{key:t.id,class:c(l.$style.banner)},[N(Un,{media:t,href:e.originalEntityUrl},null,8,["media","href"])],2))),128)),e.mediaList.filter(t=>o(t)).length>0?(f(),g("div",{key:0,class:c(l.$style.container)},[p("div",{class:c([l.$style.medias,u.value===1?[l.$style.n1]:u.value===2?l.$style.n2:u.value===3?l.$style.n3:u.value===4?l.$style.n4:l.$style.nMany])},[(f(!0),g(G,null,ae(e.mediaList.filter(t=>o(t)),t=>(f(),g("div",{class:c(l.$style.media)},[t.type.startsWith("video")?(f(),A(Bu,{key:`video:${t.id}`,class:c(l.$style.mediaInner),video:t,href:e.originalEntityUrl},null,8,["class","video","href"])):t.type.startsWith("image")?(f(),A(Iu,{key:`image:${t.id}`,class:c([l.$style.mediaInner,"image"]),image:t,raw:e.raw,href:e.originalEntityUrl},null,8,["class","image","raw","href"])):T("",!0)],2))),256))],2)],2)):T("",!0)]))}}),Su="xrVTY",Pu="xERnF",Uu="x8rSl",ju="x3nvK",Hu="x9tCj",qu="xDktD",Du="x8il9",Fu="xsJUI",zu="xmOlS",Wu="xnVI3",Vu="xeiCo",Ku="x6q42",Gu="xfxbq",Xu={container:Su,medias:Pu,n1:Uu,n116_9:ju,n11_1:Hu,n12_3:qu,n2:Du,n3:Fu,media:zu,n4:Wu,nMany:Vu,mediaInner:Ku,banner:Gu},Ju={$style:Xu},it=q(Ru,[["__cssModules",Ju]]),Yu=["href"],z=U({__name:"EmA",props:{to:{},activeClass:{default:null}},setup(e){return(n,u)=>(f(),g("a",{href:e.to,target:"_blank",rel:"noopener"},[pe(n.$slots,"default")],8,Yu))}}),Qu=e=>bn(e),Ee=(e,n,u=!1)=>`${u?Z:""}/@${Qu(e)}${n?`/${n}`:""}`,ct=e=>`/notes/${e.id}`,Zu=["src"],es=U({__name:"EmAvatar",props:{user:{},link:{type:Boolean,default:!1},preview:{type:Boolean,default:!1},indicator:{type:Boolean,default:!1}},emits:["click"],setup(e,{emit:n}){const u=e,o=F(()=>u.link?{to:Ee(u.user)}:{}),l=F(()=>u.user.avatarUrl==null?null:u.user.avatarUrl);function r(d){return d.url}function t(d){const w=d.angle??0;return w===0?void 0:`${w*360}deg`}function a(d){const w=d.flipH?-1:1;return w===1?void 0:`${w} 1`}function h(d){const w=d.offsetX??0,i=d.offsetY??0;return w===0&&i===0?void 0:`${w*100}% ${i*100}%`}return(d,w)=>(f(),A(dt(e.link?z:"span"),fn(o.value,{class:["_noSelect",[d.$style.root,{[d.$style.cat]:e.user.isCat}]]}),{default:H(()=>[N(Ft,{class:c(d.$style.inner),src:l.value,hash:e.user.avatarBlurhash,cover:!0,onlyAvgColor:!0},null,8,["class","src","hash"]),e.user.isCat?(f(),g("div",{key:0,class:c([d.$style.ears])},[p("div",{class:c(d.$style.earLeft)},[T("",!0)],2),p("div",{class:c(d.$style.earRight)},[T("",!0)],2)],2)):T("",!0),(f(!0),g(G,null,ae(e.user.avatarDecorations,i=>(f(),g("img",{class:c([d.$style.decoration]),src:r(i),style:oe({rotate:t(i),scale:a(i),translate:h(i)}),alt:""},null,14,Zu))),256))]),_:1},16,["class"]))}}),ts="xdDSY",ns="xCAU7",us="xBGLe",ss="xEgeD",ds="xi3o3",os="xtwRW",ls="x8rom",rs="xcnit",as="x72Fl",is="xCy0o",cs={root:ts,inner:ns,indicator:us,cat:ss,ears:ds,earLeft:os,earRight:ls,layer:rs,plot:as,decoration:is},fs={$style:cs},ge=q(es,[["__cssModules",fs]]),Xe=2147483647,ye=36,zt=1,Ye=26,ms=38,ys=700,vs=72,hs=128,ps="-",gs=/^xn--/,bs=/[\x2E\u3002\uFF0E\uFF61]/g,$s={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},Je=ye-zt,re=Math.floor;function $e(e){throw new RangeError($s[e])}function ws(e,n){const u=[];let o=e.length;for(;o--;)u[o]=n(e[o]);return u}function ks(e,n){const u=e.split("@");let o="";u.length>1&&(o=u[0]+"@",e=u[1]),e=e.replace(bs,".");const l=e.split("."),r=ws(l,n).join(".");return o+r}const Es=function(e){return e>=48&&e<58?26+(e-48):e>=65&&e<91?e-65:e>=97&&e<123?e-97:ye},Is=function(e,n,u){let o=0;for(e=u?re(e/ys):e>>1,e+=re(e/n);e>Je*Ye>>1;o+=ye)e=re(e/Je);return re(o+(Je+1)*e/(e+ms))},Ts=function(e){const n=[],u=e.length;let o=0,l=hs,r=vs,t=e.lastIndexOf(ps);t<0&&(t=0);for(let a=0;a<t;++a)e.charCodeAt(a)>=128&&$e("not-basic"),n.push(e.charCodeAt(a));for(let a=t>0?t+1:0;a<u;){const h=o;for(let w=1,i=ye;;i+=ye){a>=u&&$e("invalid-input");const m=Es(e.charCodeAt(a++));m>=ye&&$e("invalid-input"),m>re((Xe-o)/w)&&$e("overflow"),o+=m*w;const y=i<=r?zt:i>=r+Ye?Ye:i-r;if(m<y)break;const b=ye-y;w>re(Xe/b)&&$e("overflow"),w*=b}const d=n.length+1;r=Is(o-h,d,h==0),re(o/d)>Xe-l&&$e("overflow"),l+=re(o/d),o%=d,n.splice(o++,0,l)}return String.fromCodePoint(...n)},Oe=function(e){return ks(e,function(n){return gs.test(n)?Ts(n.slice(4).toLowerCase()):n})},xs={key:0},Ms=U({__name:"EmUrl",props:{url:{},rel:{},showUrlPreview:{type:Boolean,default:!0}},setup(e){function n(b){try{return decodeURIComponent(b)}catch{return b}}const u=e,o=u.url.startsWith(Z),l=new URL(u.url);if(!["http:","https:"].includes(l.protocol))throw new Error("invalid url");const r=B(),t=l.protocol,a=Oe(l.hostname),h=l.port,d=n(l.pathname),w=n(l.search),i=n(l.hash),m=o?"to":"href",y=o?null:"_blank";return(b,s)=>(f(),A(dt(E(o)?z:"a"),jt({ref_key:"el",ref:r,class:[b.$style.root,"_link"],[E(m)||""]:E(o)?u.url.substring(E(Z).length):u.url,rel:e.rel??"nofollow noopener",target:E(y),onContextmenu:Ut(()=>{},["stop"])}),{default:H(()=>[E(o)?T("",!0):(f(),g(G,{key:0},[p("span",{class:c(b.$style.schema)},L(E(t))+"//",3),p("span",{class:c(b.$style.hostname)},L(E(a)),3),E(h)!=""?(f(),g("span",xs,":"+L(E(h)),1)):T("",!0)],64)),E(d)==="/"&&E(o)?(f(),g("span",{key:1,class:c(b.$style.self)},L(E(a)),3)):T("",!0),E(d)!=""?(f(),g("span",{key:2,class:c(b.$style.pathname)},L(E(o)?E(d).substring(1):E(d)),3)):T("",!0),p("span",{class:c(b.$style.query)},L(E(w)),3),p("span",{class:c(b.$style.hash)},L(E(i)),3),E(y)==="_blank"?(f(),g("i",{key:3,class:c([b.$style.icon,"ti ti-external-link"])},null,2)):T("",!0)]),_:1},16,["class","rel","target"]))}}),_s="x8pUM",Ls="xVie0",Cs="xm682",As="xr5sp",Ns="xxGq5",Bs="xoMZf",Os="xMdzx",Rs="x2pJG",Ss={root:_s,icon:Ls,self:Cs,schema:As,hostname:Ns,pathname:Bs,query:Os,hash:Rs},Ps={$style:Ss},Us=q(Ms,[["__cssModules",Ps]]),Wt=(gn??"ja-JP").replace("ja-KS","ja-JP");let Qe;try{Qe=new Intl.DateTimeFormat(Wt,{year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"})}catch(e){console.warn(e),Qe=new Intl.DateTimeFormat("en-US",{year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"})}const Vt=Qe;Vt.resolvedOptions().timeZone;let Bt;try{Bt=new Intl.NumberFormat(Wt)}catch(e){console.warn(e),Bt=new Intl.NumberFormat("en-US")}const js=["title"],Hs=U({__name:"EmTime",props:{time:{},origin:{default:null},mode:{default:"relative"},colored:{type:Boolean}},setup(e){const n=e;function u(m){try{return m instanceof Date?m:new Date(m)}catch{return{getTime:()=>NaN}}}const o=n.time==null?NaN:u(n.time).getTime(),l=Number.isNaN(o),r=l?"Тут нічого немає":Vt.format(o),t=B(n.origin?.getTime()??Date.now()),a=F(()=>(t.value-o)/1e3),h=F(()=>n.mode==="absolute"?"":l?"Тут нічого немає":a.value>=31536e3?(({n})=>(n+" р. тому"))({n:Math.round(a.value/31536e3).toString()}):a.value>=2592e3?(({n})=>(n+" міс. тому"))({n:Math.round(a.value/2592e3).toString()}):a.value>=604800?(({n})=>(n+" тиж. тому"))({n:Math.round(a.value/604800).toString()}):a.value>=86400?(({n})=>(n+"д тому"))({n:Math.round(a.value/86400).toString()}):a.value>=3600?(({n})=>(n+"г тому"))({n:Math.round(a.value/3600).toString()}):a.value>=60?(({n})=>(n+"х тому"))({n:(~~(a.value/60)).toString()}):a.value>=10?(({n})=>(n+"с тому"))({n:(~~(a.value%60)).toString()}):a.value>=-3?"Щойно":a.value<-31536e3?(({n})=>("In "+n+"y"))({n:Math.round(-a.value/31536e3).toString()}):a.value<-2592e3?(({n})=>("In "+n+"mo"))({n:Math.round(-a.value/2592e3).toString()}):a.value<-604800?(({n})=>("In "+n+"w"))({n:Math.round(-a.value/604800).toString()}):a.value<-86400?(({n})=>("In "+n+"d"))({n:Math.round(-a.value/86400).toString()}):a.value<-3600?(({n})=>("In "+n+"h"))({n:Math.round(-a.value/3600).toString()}):a.value<-60?(({n})=>("In "+n+"m"))({n:(~~(-a.value/60)).toString()}):(({n})=>("In "+n+"s"))({n:(~~(-a.value%60)).toString()}));let d,w;function i(){t.value=Date.now();const m=a.value<60?1e4:a.value<3600?6e4:18e4;w!==m&&(d&&window.clearInterval(d),w=m,d=window.setInterval(i,m))}return!l&&n.origin===null&&(n.mode==="relative"||n.mode==="detail")&&(Se(()=>{i()}),Pe(()=>{d&&window.clearInterval(d)})),(m,y)=>(f(),g("time",{title:E(r),class:c({[m.$style.old1]:e.colored&&a.value>3600*24*90,[m.$style.old2]:e.colored&&a.value>3600*24*180})},[E(l)?(f(),g(G,{key:0},[K(L("Тут нічого немає"),1)],64)):e.mode==="relative"?(f(),g(G,{key:1},[K(L(h.value),1)],64)):e.mode==="absolute"?(f(),g(G,{key:2},[K(L(E(r)),1)],64)):e.mode==="detail"?(f(),g(G,{key:3},[K(L(E(r))+" ("+L(h.value)+")",1)],64)):T("",!0)],10,js))}}),qs="xERnh",Ds="xscyH",Fs={old1:qs,old2:Ds},zs={$style:Fs},Ie=q(Hs,[["__cssModules",zs]]),Ws=U({__name:"EmLink",props:{url:{},rel:{}},setup(e){const u=e.url.startsWith(Z),o=u?"to":"href",l=u?null:"_blank",r=B();return(t,a)=>(f(),A(dt(E(u)?z:"a"),jt({ref_key:"el",ref:r,style:{"word-break":"break-all"},class:"_link",[E(o)||""]:E(u)?e.url.substring(E(Z).length):e.url,rel:e.rel??"nofollow noopener",target:E(l),title:e.url}),{default:H(()=>[pe(t.$slots,"default"),E(l)==="_blank"?(f(),g("i",{key:0,class:c(["ti ti-external-link",t.$style.icon])},null,2)):T("",!0)]),_:3},16,["rel","target","title"]))}}),Vs="xEai4",Ks={icon:Vs},Gs={$style:Ks},Xs=q(Ws,[["__cssModules",Gs]]),Js=U({__name:"EmMention",props:{username:{},host:{}},setup(e){const n=e,o=`/${n.host===Ne?`@${n.username}`:`@${n.username}@${Oe(n.host)}`}`,l=ln(getComputedStyle(window.document.documentElement).getPropertyValue("--MI_THEME-mention"));l.setAlpha(.1);const r=l.toRgbString();return(t,a)=>{const h=Ht("MkA");return f(),A(h,{class:c([t.$style.root]),to:o,style:oe({background:E(r)})},{default:H(()=>[p("span",null,[p("span",null,"@"+L(e.username),1),e.host!=E(Ne)?(f(),g("span",{key:0,class:c(t.$style.host)},"@"+L(E(Oe)(e.host)),3)):T("",!0)])]),_:1},8,["class","style"])}}}),Ys="xdWNE",Qs="xBifd",Zs={root:Ys,host:Qs},ed={$style:Zs},td=q(Js,[["__cssModules",ed]]),nd="/twemoji";function ud(e){let n=Array.from(e,o=>o.codePointAt(0)?.toString(16));n.includes("200d")||(n=n.filter(o=>o!=="fe0f")),n=n.filter(o=>o&&o.length);const u=n.join("-");return`${nd}/${u}.svg`}const sd=["src","alt"],dd=U({__name:"EmEmoji",props:{emoji:{}},setup(e){const n=e,u=F(()=>ud(n.emoji));return(o,l)=>(f(),g("img",{class:c(o.$style.root),src:u.value,alt:n.emoji,decoding:"async"},null,10,sd))}}),od="xu8qU",ld={root:od},rd={$style:ld},Kt=q(dd,[["__cssModules",rd]]),ad="/embed_vite/assets/3iSoGi4ic-Cqq1W_WT.png",id=["title"],cd={key:1},fd=["src","alt","title"],md=U({__name:"EmCustomEmoji",props:{name:{},normal:{type:Boolean},noStyle:{type:Boolean},host:{},url:{},useOriginalSize:{type:Boolean},fallbackToImage:{type:Boolean}},setup(e){const n=V(X.mediaProxy),u=e,o=F(()=>(u.name[0]===":"?u.name.substring(1,u.name.length-1):u.name).replace("@.","")),l=F(()=>!u.host&&(o.value.endsWith("@.")||!o.value.includes("@"))),r=F(()=>u.url?u.url:l.value?rn.get(o.value)?.url??null:u.host?`/emoji/${o.value}@${u.host}.webp`:`/emoji/${o.value}.webp`),t=F(()=>r.value==null?void 0:r.value.startsWith("/emoji/")||u.useOriginalSize&&l.value?r.value:n.getProxiedImageUrl(r.value,u.useOriginalSize?void 0:"emoji",!1,!0)),a=F(()=>`:${o.value}:`),h=B(t.value==null);return(d,w)=>h.value&&e.fallbackToImage?(f(),g("img",{key:0,class:c([d.$style.root,{[d.$style.normal]:e.normal,[d.$style.noStyle]:e.noStyle}]),src:ad,title:a.value},null,10,id)):h.value?(f(),g("span",cd,":"+L(o.value)+":",1)):(f(),g("img",{key:2,class:c([d.$style.root,{[d.$style.normal]:e.normal,[d.$style.noStyle]:e.noStyle}]),src:t.value,alt:a.value,title:a.value,decoding:"async",onError:w[0]||(w[0]=i=>h.value=!0),onLoad:w[1]||(w[1]=i=>h.value=!1)},null,42,fd))}}),yd="xs1Qp",vd="xmHQc",hd="x2OLo",pd={root:yd,normal:vd,noStyle:hd},gd={$style:pd},Ze=q(md,[["__cssModules",gd]]);function me(e){if(typeof e!="string"||e==="")return null;const n=parseFloat(e);return isNaN(n)?null:n}const Ot=`
display: block;
margin: 8px;
padding: 6px 0 6px 12px;
color: var(--MI_THEME-fg);
border-left: solid 3px var(--MI_THEME-fg);
opacity: 0.7;
`.split(`
`).join(" ");function le(e,{emit:n}){const u=e.isNote??!0,o=e.nyaize&&e.nyaize==="respect"?e.author?.isCat:!1;if(e.text==null||e.text==="")return;const l=e.parsedNodes??(e.plain?Be.parseSimple:Be.parse)(e.text),r=h=>h==null||typeof h=="boolean"?null:h.match(/^\-?[0-9.]+s$/)?h:null,t=h=>typeof h!="string"?null:h.match(/^[0-9a-f]{3,6}$/i)?h:null,a=(h,d,w=!1)=>h.map(i=>{switch(i.type){case"text":{let m=i.props.text.replace(/(\r\n|\n|\r)/g,`
`);if(!w&&o&&(m=qe(m)),e.plain)return[m.replace(/\n/g," ")];{const y=[];for(const b of m.split(`
`))y.push(S("br")),y.push(b);return y.shift(),y}}case"bold":return[S("b",a(i.children,d))];case"strike":return[S("del",a(i.children,d))];case"italic":return S("i",{style:"font-style: oblique;"},a(i.children,d));case"fn":{let m;switch(i.props.name){case"tada":{const y=r(i.props.args.speed)??"1s",b=r(i.props.args.delay)??"0s";m=`font-size: 150%;animation: global-tada ${y} linear infinite both; animation-delay: ${b};`;break}case"jelly":{const y=r(i.props.args.speed)??"1s",b=r(i.props.args.delay)??"0s";m=`animation: mfm-rubberBand ${y} linear infinite both; animation-delay: ${b};`;break}case"twitch":{const y=r(i.props.args.speed)??"0.5s",b=r(i.props.args.delay)??"0s";m=`animation: mfm-twitch ${y} ease infinite; animation-delay: ${b};`;break}case"shake":{const y=r(i.props.args.speed)??"0.5s",b=r(i.props.args.delay)??"0s";m=`animation: mfm-shake ${y} ease infinite; animation-delay: ${b};`;break}case"spin":{const y=i.props.args.left?"reverse":i.props.args.alternate?"alternate":"normal",b=i.props.args.x?"mfm-spinX":i.props.args.y?"mfm-spinY":"mfm-spin",s=r(i.props.args.speed)??"1.5s",v=r(i.props.args.delay)??"0s";m=`animation: ${b} ${s} linear infinite; animation-direction: ${y}; animation-delay: ${v};`;break}case"jump":{const y=r(i.props.args.speed)??"0.75s",b=r(i.props.args.delay)??"0s";m=`animation: mfm-jump ${y} linear infinite; animation-delay: ${b};`;break}case"bounce":{const y=r(i.props.args.speed)??"0.75s",b=r(i.props.args.delay)??"0s";m=`animation: mfm-bounce ${y} linear infinite; transform-origin: center bottom; animation-delay: ${b};`;break}case"flip":{m=`transform: ${i.props.args.h&&i.props.args.v?"scale(-1, -1)":i.props.args.v?"scaleY(-1)":"scaleX(-1)"};`;break}case"x2":return S("span",{class:"mfm-x2"},a(i.children,d*2));case"x3":return S("span",{class:"mfm-x3"},a(i.children,d*3));case"x4":return S("span",{class:"mfm-x4"},a(i.children,d*4));case"font":{const y=i.props.args.serif?"serif":i.props.args.monospace?"monospace":i.props.args.cursive?"cursive":i.props.args.fantasy?"fantasy":i.props.args.emoji?"emoji":i.props.args.math?"math":null;y&&(m=`font-family: ${y};`);break}case"blur":return S("span",{class:"_mfm_blur_"},a(i.children,d));case"rainbow":{const y=r(i.props.args.speed)??"1s",b=r(i.props.args.delay)??"0s";m=`animation: mfm-rainbow ${y} linear infinite; animation-delay: ${b};`;break}case"sparkle":return a(i.children,d);case"rotate":{m=`transform: rotate(${me(i.props.args.deg)??90}deg); transform-origin: center center;`;break}case"position":{const y=me(i.props.args.x)??0,b=me(i.props.args.y)??0;m=`transform: translateX(${y}em) translateY(${b}em);`;break}case"scale":{const y=Math.min(me(i.props.args.x)??1,5),b=Math.min(me(i.props.args.y)??1,5);m=`transform: scale(${y}, ${b});`,d=d*Math.max(y,b);break}case"fg":{let y=t(i.props.args.color);y=y??"f00",m=`color: #${y}; overflow-wrap: anywhere;`;break}case"bg":{let y=t(i.props.args.color);y=y??"f00",m=`background-color: #${y}; overflow-wrap: anywhere;`;break}case"border":{let y=t(i.props.args.color);y=y?`#${y}`:"var(--MI_THEME-accent)";let b=i.props.args.style;(typeof b!="string"||!["hidden","dotted","dashed","solid","double","groove","ridge","inset","outset"].includes(b))&&(b="solid");const s=me(i.props.args.width)??1,v=me(i.props.args.radius)??0;m=`border: ${s}px ${b} ${y}; border-radius: ${v}px;${i.props.args.noclip?"":" overflow: clip;"}`;break}case"ruby":if(i.children.length===1){const y=i.children[0];let b=y.type==="text"?y.props.text:"";return!w&&o&&(b=qe(b)),S("ruby",{},[b.split(" ")[0],S("rt",b.split(" ")[1])])}else{const y=i.children.at(-1);let b=y.type==="text"?y.props.text:"";return!w&&o&&(b=qe(b)),S("ruby",{},[...a(i.children.slice(0,i.children.length-1),d),S("rt",b.trim())])}case"unixtime":{const y=i.children[0],b=parseInt(y.type==="text"?y.props.text:"");return S("span",{style:"display: inline-block; font-size: 90%; border: solid 1px var(--MI_THEME-divider); border-radius: 999px; padding: 4px 10px 4px 6px;"},[S("i",{class:"ti ti-clock",style:"margin-right: 0.25em;"}),S(Ie,{key:Math.random(),time:b*1e3,mode:"detail"})])}case"clickable":return S("span",{onClick(y){y.stopPropagation(),y.preventDefault();const b=typeof i.props.args.ev=="string"?i.props.args.ev:"";n("clickEv",b)}},a(i.children,d))}return m===void 0?S("span",{},["$[",i.props.name," ",...a(i.children,d),"]"]):S("span",{style:"display: inline-block; "+m},a(i.children,d))}case"small":return[S("small",{style:"opacity: 0.7;"},a(i.children,d))];case"center":return[S("div",{style:"text-align:center;"},a(i.children,d))];case"url":return[S(Us,{key:Math.random(),url:i.props.url,rel:"nofollow noopener"})];case"link":return[S(Xs,{key:Math.random(),url:i.props.url,rel:"nofollow noopener"},a(i.children,d,!0))];case"mention":return[S(td,{key:Math.random(),host:(i.props.host==null&&e.author&&e.author.host!=null?e.author.host:i.props.host)??Ne,username:i.props.username})];case"hashtag":return[S(z,{key:Math.random(),to:u?`/tags/${encodeURIComponent(i.props.hashtag)}`:`/user-tags/${encodeURIComponent(i.props.hashtag)}`,style:"color:var(--MI_THEME-hashtag);"},`#${i.props.hashtag}`)];case"blockCode":return[S("code",{key:Math.random(),lang:i.props.lang??void 0},i.props.code)];case"inlineCode":return[S("code",{key:Math.random()},i.props.code)];case"quote":return e.nowrap?[S("span",{style:Ot},a(i.children,d,!0))]:[S("div",{style:Ot},a(i.children,d,!0))];case"emojiCode":return e.author?.host==null?[S(Ze,{key:Math.random(),name:i.props.name,normal:e.plain,host:null,useOriginalSize:d>=2.5,fallbackToImage:!1})]:e.emojiUrls&&e.emojiUrls[i.props.name]==null?[S("span",`:${i.props.name}:`)]:[S(Ze,{key:Math.random(),name:i.props.name,url:e.emojiUrls&&e.emojiUrls[i.props.name],normal:e.plain,host:e.author.host,useOriginalSize:d>=2.5})];case"unicodeEmoji":return[S(Kt,{key:Math.random(),emoji:i.props.emoji})];case"mathInline":return[S("code",i.props.formula)];case"mathBlock":return[S("code",i.props.formula)];case"search":return[S("div",{key:Math.random()},i.props.query)];case"plain":return[S("span",a(i.children,d,!0))];default:return console.error("unrecognized ast type:",i.type),[]}}).flat(1/0);return S("span",{style:e.nowrap?"white-space: pre; word-wrap: normal; overflow: hidden; text-overflow: ellipsis;":"white-space: pre-wrap;"},a(l,e.rootScale??1))}const Te=U({__name:"EmUserName",props:{user:{},nowrap:{type:Boolean,default:!0}},setup(e){return(n,u)=>(f(),A(E(le),{text:e.user.name??e.user.username,author:e.user,plain:!0,nowrap:e.nowrap,emojiUrls:e.user.emojis},null,8,["text","author","nowrap","emojiUrls"]))}}),bd={key:0,style:{opacity:"0.5"}},Gt=U({__name:"EmAcct",props:{user:{},detail:{type:Boolean}},setup(e){const n=Oe(Ne);return(u,o)=>(f(),g("span",null,[p("span",null,"@"+L(e.user.username),1),e.user.host||e.detail?(f(),g("span",bd,"@"+L(e.user.host||E(n)),1)):T("",!0)]))}}),$d=["src"],wd={key:0,style:{"margin-left":"0.5em"}},kd={key:0,class:"ti ti-home"},Ed={key:1,class:"ti ti-lock"},Id={key:2,ref:"specified",class:"ti ti-mail"},Td={key:1,style:{"margin-left":"0.5em"}},xd=["title"],Md=U({__name:"EmNoteHeader",props:{note:{}},setup(e){return(n,u)=>(f(),g("header",{class:c(n.$style.root)},[N(z,{class:c(n.$style.name),to:E(Ee)(e.note.user)},{default:H(()=>[N(Te,{user:e.note.user},null,8,["user"])]),_:1},8,["class","to"]),e.note.user.isBot?(f(),g("div",{key:0,class:c(n.$style.isBot)},"bot",2)):T("",!0),p("div",{class:c(n.$style.username)},[N(Gt,{user:e.note.user},null,8,["user"])],2),e.note.user.badgeRoles?(f(),g("div",{key:1,class:c(n.$style.badgeRoles)},[(f(!0),g(G,null,ae(e.note.user.badgeRoles,(o,l)=>(f(),g("img",{key:l,class:c(n.$style.badgeRole),src:o.iconUrl},null,10,$d))),128))],2)):T("",!0),p("div",{class:c(n.$style.info)},[N(z,{to:E(ct)(e.note)},{default:H(()=>[N(Ie,{time:e.note.createdAt,colored:""},null,8,["time"])]),_:1},8,["to"]),e.note.visibility!=="public"?(f(),g("span",wd,[e.note.visibility==="home"?(f(),g("i",kd)):e.note.visibility==="followers"?(f(),g("i",Ed)):e.note.visibility==="specified"?(f(),g("i",Id,null,512)):T("",!0)])):T("",!0),e.note.localOnly?(f(),g("span",Td,[...u[0]||(u[0]=[p("i",{class:"ti ti-rocket-off"},null,-1)])])):T("",!0),e.note.channel?(f(),g("span",{key:2,style:{"margin-left":"0.5em"},title:e.note.channel.name},[...u[1]||(u[1]=[p("i",{class:"ti ti-device-tv"},null,-1)])],8,xd)):T("",!0)],2)],2))}}),_d="xArZk",Ld="xySsL",Cd="xdcGe",Ad="x5YwU",Nd="xprwK",Bd="x1Kdg",Od="x3NPm",Rd={root:_d,name:Ld,isBot:Cd,username:Ad,info:Nd,badgeRoles:Bd,badgeRole:Od},Sd={$style:Rd},ft=q(Md,[["__cssModules",Sd]]),Pd={key:0,class:"ti ti-check",style:{"margin-right":"4px",color:"var(--MI_THEME-accent)"}},Ud={style:{"margin-left":"4px",opacity:"0.7"}},jd=U({__name:"EmPoll",props:{noteId:{},poll:{}},setup(e){function n(l){return l.reduce((r,t)=>r+t,0)}const u=e,o=F(()=>n(u.poll.choices.map(l=>l.votes)));return(l,r)=>(f(),g("div",null,[p("ul",{class:c(l.$style.choices)},[(f(!0),g(G,null,ae(e.poll.choices,(t,a)=>(f(),g("li",{key:a,class:c(l.$style.choice)},[p("div",{class:c(l.$style.bg),style:oe({width:`${t.votes/o.value*100}%`})},null,6),p("span",{class:c(l.$style.fg)},[t.isVoted?(f(),g("i",Pd)):T("",!0),N(E(le),{text:t.text,plain:!0},null,8,["text"]),p("span",Ud,"("+L((({n})=>(n+" голосів"))({n:t.votes}))+")",1)],2)],2))),128))],2),p("p",{class:c(l.$style.info)},[p("span",null,L((({n})=>("Всього "+n+" голосів"))({n:o.value})),1)],2)]))}}),Hd="x7gg8",qd="xsNry",Dd="xrX7Y",Fd="xniGU",zd="xEWpj",Wd={choices:Hd,choice:qd,bg:Dd,fg:Fd,info:zd},Vd={$style:Wd},mt=q(jd,[["__cssModules",Vd]]);function yt(e,n){return e.cw!=null?!1:!!(e.text!=null&&(e.text.includes("$[x2")||e.text.includes("$[x3")||e.text.includes("$[x4")||e.text.includes("$[scale")||e.text.split(`
`).length>9||e.text.length>500)||n.length>=4||e.files!=null&&e.files.length>=5)}const Kd={key:0,style:{opacity:"0.5"}},Gd={key:1,style:{opacity:"0.5"}},Xd={key:0},Jd={key:1},Yd=U({__name:"EmSubNoteContent",props:{note:{}},setup(e){const u=yt(e.note,[]),o=B(u);return(l,r)=>(f(),g("div",{class:c([l.$style.root,{[l.$style.collapsed]:o.value}])},[p("div",null,[e.note.isHidden?(f(),g("span",Kd,"("+L("Приватне")+")",1)):T("",!0),e.note.deletedAt?(f(),g("span",Gd,"("+L("Видалена нотатка")+")",1)):T("",!0),e.note.replyId?(f(),A(z,{key:2,class:c(l.$style.reply),to:`/notes/${e.note.replyId}`},{default:H(()=>[...r[2]||(r[2]=[p("i",{class:"ti ti-arrow-back-up"},null,-1)])]),_:1},8,["class","to"])):T("",!0),e.note.text?(f(),A(E(le),{key:3,text:e.note.text,author:e.note.user,nyaize:"respect",emojiUrls:e.note.emojis},null,8,["text","author","emojiUrls"])):T("",!0),e.note.renoteId?(f(),A(z,{key:4,class:c(l.$style.rp),to:`/notes/${e.note.renoteId}`},{default:H(()=>[...r[3]||(r[3]=[K("RN: ...",-1)])]),_:1},8,["class","to"])):T("",!0)]),e.note.files&&e.note.files.length>0?(f(),g("details",Xd,[p("summary",null,"("+L((({n})=>("файли: "+n))({n:e.note.files.length}))+")",1),N(it,{mediaList:e.note.files,originalEntityUrl:`${E(Z)}/notes/${e.note.id}`},null,8,["mediaList","originalEntityUrl"])])):T("",!0),e.note.poll?(f(),g("details",Jd,[p("summary",null,L("Опитування"),1),N(mt,{noteId:e.note.id,poll:e.note.poll},null,8,["noteId","poll"])])):T("",!0),E(u)&&o.value?(f(),g("button",{key:2,class:c([l.$style.fade,"_button"]),onClick:r[0]||(r[0]=t=>o.value=!1)},[p("span",{class:c(l.$style.fadeLabel)},L("Показати більше"),3)],2)):E(u)&&!o.value?(f(),g("button",{key:3,class:c([l.$style.showLess,"_button"]),onClick:r[1]||(r[1]=t=>o.value=!0)},[p("span",{class:c(l.$style.showLessLabel)},L("Закрити"),3)],2)):T("",!0)],2))}}),Qd="xrNJ0",Zd="x5b7k",eo="xqXll",to="xuYOQ",no="xfYBs",uo="x8zH0",so="xtPdb",oo="xqtJ1",lo={root:Qd,collapsed:Zd,fade:eo,fadeLabel:to,reply:no,rp:uo,showLess:so,showLessLabel:oo},ro={$style:lo},Xt=q(Yd,[["__cssModules",ro]]),ao=U({__name:"EmNoteSub",props:{note:{},detail:{type:Boolean},depth:{default:1}},setup(e){const n=e,u=B(!1),o=B([]);return n.detail&&ve("notes/children",{noteId:n.note.id,limit:5}).then(l=>{o.value=l}),(l,r)=>{const t=Ht("EmNoteSub",!0);return f(),g("div",{class:c([l.$style.root,{[l.$style.children]:e.depth>1}])},[p("div",{class:c(l.$style.main)},[e.note.channel?(f(),g("div",{key:0,class:c(l.$style.colorBar),style:oe({background:e.note.channel.color})},null,6)):T("",!0),N(ge,{class:c(l.$style.avatar),user:e.note.user,link:"",preview:""},null,8,["class","user"]),p("div",{class:c(l.$style.body)},[N(ft,{class:c(l.$style.header),note:e.note,mini:!0},null,8,["class","note"]),p("div",null,[e.note.cw!=null?(f(),g("p",{key:0,class:c(l.$style.cw)},[e.note.cw!=""?(f(),A(E(le),{key:0,style:{"margin-right":"8px"},text:e.note.cw,author:e.note.user,nyaize:"respect"},null,8,["text","author"])):T("",!0),p("button",{style:{display:"block",width:"100%"},class:"_buttonGray _buttonRounded",onClick:r[0]||(r[0]=a=>u.value=!u.value)},L(u.value?"Сховати":"Показати більше"),1)],2)):T("",!0),se(p("div",null,[N(Xt,{class:c(l.$style.text),note:e.note},null,8,["class","note"])],512),[[de,e.note.cw==null||u.value]])])],2)],2),e.depth<5?(f(!0),g(G,{key:0},ae(o.value,a=>(f(),A(t,{key:a.id,note:a,class:c(l.$style.reply),detail:!0,depth:e.depth+1},null,8,["note","class","depth"]))),128)):(f(),g("div",{key:1,class:c(l.$style.more)},[N(z,{class:"_link",to:E(ct)(e.note)},{default:H(()=>[K(L("Показати продовження треду")+" ",1),r[1]||(r[1]=p("i",{class:"ti ti-chevron-double-right"},null,-1))]),_:1},8,["to"])],2))],2)}}}),io="x4XPq",co="x16Og",fo="xodbH",mo="xpsNE",yo="xc9g2",vo="xhLVY",ho="xr7GD",po="xCrK2",go="xup1G",bo="x8ePa",$o="xyhdT",wo="xaxLE",ko={root:io,children:co,main:fo,colorBar:mo,avatar:yo,body:vo,header:ho,cw:po,text:go,reply:bo,more:$o,muted:wo},Eo={$style:ko},Jt=q(ao,[["__cssModules",Eo]]),Io=U({__name:"EmNoteSimple",props:{note:{}},setup(e){const n=B(!1);return(u,o)=>(f(),g("div",{class:c(u.$style.root)},[N(ge,{class:c(u.$style.avatar),user:e.note.user,link:"",preview:""},null,8,["class","user"]),p("div",{class:c(u.$style.main)},[N(ft,{class:c(u.$style.header),note:e.note,mini:!0},null,8,["class","note"]),p("div",null,[e.note.cw!=null?(f(),g("p",{key:0,class:c(u.$style.cw)},[e.note.cw!=""?(f(),A(E(le),{key:0,style:{"margin-right":"8px"},text:e.note.cw,author:e.note.user,nyaize:"respect",emojiUrls:e.note.emojis},null,8,["text","author","emojiUrls"])):T("",!0),p("button",{style:{display:"block",width:"100%"},class:"_buttonGray _buttonRounded",onClick:o[0]||(o[0]=l=>n.value=!n.value)},L(n.value?"Сховати":"Показати більше"),1)],2)):T("",!0),se(p("div",null,[N(Xt,{class:c(u.$style.text),note:e.note},null,8,["class","note"])],512),[[de,e.note.cw==null||n.value]])])],2)],2))}}),To="xaixc",xo="x1JJt",Mo="xDsB6",_o="xxpQr",Lo="x3CeP",Co="xt9c0",Ao={root:To,avatar:xo,main:Mo,header:_o,cw:Lo,text:Co},No={$style:Ao},Yt=q(Io,[["__cssModules",No]]),Bo=["src"],Oo=U({__name:"EmInstanceTicker",props:{instance:{}},setup(e){const n=V(X.serverMetadata),u=V(X.mediaProxy),o=e,l=o.instance??{name:n.name,themeColor:window.document.querySelector('meta[name="theme-color-orig"]')?.content},r=F(()=>o.instance?u.getProxiedImageUrlNullable(o.instance.faviconUrl,"preview"):u.getProxiedImageUrlNullable(n.iconUrl,"preview")??"/favicon.ico"),t=o.instance?.themeColor??n.themeColor??"#777777",a={background:`linear-gradient(90deg, ${t}, ${t}00)`};return(h,d)=>(f(),g("div",{class:c(h.$style.root),style:a},[r.value?(f(),g("img",{key:0,class:c(h.$style.icon),src:r.value},null,10,Bo)):T("",!0),p("div",{class:c(h.$style.name)},L(E(l).name),3)],2))}}),Ro="x47k0",So="xrngy",Po="xqUmr",Uo={root:Ro,icon:So,name:Po},jo={$style:Uo},Qt=q(Oo,[["__cssModules",jo]]),Ho=U({__name:"EmReactionIcon",props:{reaction:{},noStyle:{type:Boolean},emojiUrl:{},withTooltip:{type:Boolean}},setup(e){return(n,u)=>e.reaction[0]===":"?(f(),A(Ze,{key:0,ref:"elRef",name:e.reaction,normal:!0,noStyle:e.noStyle,url:e.emojiUrl,fallbackToImage:!0},null,8,["name","noStyle","url"])):(f(),A(Kt,{key:1,ref:"elRef",emoji:e.reaction,normal:!0,noStyle:e.noStyle},null,8,["emoji","noStyle"]))}}),qo=U({__name:"EmReactionsViewer.reaction",props:{reaction:{},count:{},isInitial:{type:Boolean},note:{}},setup(e){return(n,u)=>(f(),g("button",{class:c(["_button",[n.$style.root,{[n.$style.reacted]:e.note.myReaction==e.reaction}]])},[N(Ho,{class:c(n.$style.limitWidth),reaction:e.reaction,emojiUrl:e.note.reactionEmojis[e.reaction.substring(1,e.reaction.length-1)]},null,8,["class","reaction","emojiUrl"]),p("span",{class:c(n.$style.count)},L(e.count),3)],2))}}),Do="x9gxe",Fo="xlmHv",zo="x4yih",Wo="xwydC",Vo="x9mrn",Ko="xoQN7",Go="xj25U",Xo="xbj57",Jo={root:Do,canToggle:Fo,small:zo,count:Wo,large:Vo,reacted:Ko,icon:Go,limitWidth:Xo},Yo={$style:Jo},Qo=q(qo,[["__cssModules",Yo]]),Zo=U({__name:"EmReactionsViewer",props:{note:{},maxNumber:{default:1/0}},setup(e){const n=e,u=new Set(Object.keys(n.note.reactions)),o=B([]),l=B(!1);n.note.myReaction&&!Object.keys(o.value).includes(n.note.myReaction)&&(o.value[n.note.myReaction]=n.note.reactions[n.note.myReaction]);function r(t,a){o.value.findIndex(d=>d[0]===t)<0}return ue([()=>n.note.reactions,()=>n.maxNumber],([t,a])=>{let h=[];l.value=Object.keys(t).length>a;for(let w=0;w<o.value.length;w++){const i=o.value[w][0];i in t&&t[i]!==0&&(o.value[w][1]=t[i],h.push(o.value[w]))}const d=h.map(([w])=>w);h=[...h,...Object.entries(t).sort(([,w],[,i])=>i-w).filter(([w],i)=>i<a&&!d.includes(w))],h=h.slice(0,n.maxNumber),n.note.myReaction&&!h.map(([w])=>w).includes(n.note.myReaction)&&h.push([n.note.myReaction,t[n.note.myReaction]]),o.value=h},{immediate:!0,deep:!0}),(t,a)=>(f(),g("div",{class:c(t.$style.root)},[(f(!0),g(G,null,ae(o.value,([h,d])=>(f(),A(Qo,{key:h,reaction:h,count:d,isInitial:E(u).has(h),note:e.note,onReactionToggled:r},null,8,["reaction","count","isInitial","note"]))),128)),l.value?pe(t.$slots,"more",{key:0}):T("",!0)],2))}}),el="x2IST",tl="xeKdP",nl="xd5o9",ul="xiAVJ",sl="xjc84",dl="xsD8M",ol={transition_x_move:el,transition_x_enterActive:tl,transition_x_leaveActive:nl,transition_x_enterFrom:ul,transition_x_leaveTo:sl,root:dl},ll={$style:ol},Zt=q(Zo,[["__cssModules",ll]]),rl={class:"$style.renoteTime"},al=["title"],il={key:0,class:"ti ti-home"},cl={key:1,class:"ti ti-lock"},fl={key:2,ref:"specified",class:"ti ti-mail"},ml=["title"],yl={style:{"min-width":"0"}},vl={class:"_nowrap"},hl=["href"],pl=["src"],gl={key:0,style:{opacity:"0.5"}},bl={key:4},$l=["title"],wl={key:0,class:"ti ti-home"},kl={key:1,class:"ti ti-lock"},El={key:2,ref:"specified",class:"ti ti-mail"},Il=["title"],Tl=["href"],xl=["href"],Ml=["href"],_l={key:0,class:"ti ti-heart"},Ll={key:1,class:"ti ti-plus"},Cl=["href"],Al=U({__name:"EmNoteDetailed",props:{note:{}},setup(e){const n=e,u=V(X.serverMetadata),o=V("inChannel",null),l=B(n.note),r=l.value.renote!=null&&l.value.reply==null&&l.value.text==null&&l.value.cw==null&&l.value.fileIds&&l.value.fileIds.length===0&&l.value.poll==null,t=F(()=>r?l.value.renote:l.value),a=B(!1),h=B(!1),d=t.value.text?Be.parse(t.value.text):null,w=yt(t.value,[]),i=B(t.value.cw==null&&w);return(m,y)=>se((f(),g("div",{ref:"rootEl",class:c(m.$style.root)},[t.value.reply?(f(),A(Jt,{key:0,note:t.value.reply,class:c(m.$style.replyTo)},null,8,["note","class"])):T("",!0),E(r)?(f(),g("div",{key:1,class:c(m.$style.renote)},[N(ge,{class:c(m.$style.renoteAvatar),user:l.value.user,link:""},null,8,["class","user"]),y[4]||(y[4]=p("i",{class:"ti ti-repeat",style:{"margin-right":"4px"}},null,-1)),p("span",{class:c(m.$style.renoteText)},[N(at,{src:"Поширено {user}",tag:"span"},{user:H(()=>[N(z,{class:c(m.$style.renoteName),to:E(Ee)(l.value.user)},{default:H(()=>[N(Te,{user:l.value.user},null,8,["user"])]),_:1},8,["class","to"])]),_:1},8,["src"])],2),p("div",{class:c(m.$style.renoteInfo)},[p("div",rl,[N(Ie,{time:l.value.createdAt},null,8,["time"])]),l.value.visibility!=="public"?(f(),g("span",{key:0,style:{"margin-left":"0.5em"},title:{"public":"Публічний","publicDescription":"Для всіх користувачів","home":"Домівка","homeDescription":"Лише на домашній стрічці","followers":"Підписники","followersDescription":"Тільки для підписників","specified":"Особисто","specifiedDescription":"Лише для певних користувачів","disableFederation":"Defederate","disableFederationDescription":"Don't transmit to other instances"}[l.value.visibility]},[l.value.visibility==="home"?(f(),g("i",il)):l.value.visibility==="followers"?(f(),g("i",cl)):l.value.visibility==="specified"?(f(),g("i",fl,null,512)):T("",!0)],8,al)):T("",!0),l.value.localOnly?(f(),g("span",{key:1,style:{"margin-left":"0.5em"},title:"Defederate"},[...y[3]||(y[3]=[p("i",{class:"ti ti-rocket-off"},null,-1)])],8,ml)):T("",!0)],2)],2)):T("",!0),p("article",{class:c(m.$style.note)},[p("header",{class:c(m.$style.noteHeader)},[N(ge,{class:c(m.$style.noteHeaderAvatar),user:t.value.user,indicator:"",link:""},null,8,["class","user"]),p("div",{class:c(m.$style.noteHeaderBody)},[p("div",{class:c(m.$style.noteHeaderBodyUpper)},[p("div",yl,[p("div",vl,[N(z,{class:c(m.$style.noteHeaderName),to:E(Ee)(t.value.user)},{default:H(()=>[N(Te,{nowrap:!0,user:t.value.user},null,8,["user"])]),_:1},8,["class","to"]),t.value.user.isBot?(f(),g("span",{key:0,class:c(m.$style.isBot)},"bot",2)):T("",!0)]),p("div",{class:c(m.$style.noteHeaderUsername)},[N(Gt,{user:t.value.user},null,8,["user"])],2)]),p("div",{class:c(m.$style.noteHeaderInfo)},[p("a",{href:E(Z),class:c(m.$style.noteHeaderInstanceIconLink),target:"_blank",rel:"noopener noreferrer"},[p("img",{src:E(u).iconUrl||"/favicon.ico",alt:"",class:c(m.$style.noteHeaderInstanceIcon)},null,10,pl)],10,hl)],2)],2),t.value.user.instance!=null?(f(),A(Qt,{key:0,instance:t.value.user.instance},null,8,["instance"])):T("",!0)],2)],2),p("div",{class:c([m.$style.noteContent,{[m.$style.contentCollapsed]:i.value}])},[t.value.cw!=null?(f(),g("p",{key:0,class:c(m.$style.cw)},[t.value.cw!=""?(f(),A(E(le),{key:0,style:{"margin-right":"8px"},text:t.value.cw,author:t.value.user,nyaize:"respect"},null,8,["text","author"])):T("",!0),p("button",{style:{display:"block",width:"100%",margin:"4px 0"},class:"_buttonGray _buttonRounded",onClick:y[0]||(y[0]=b=>a.value=!a.value)},L(a.value?"Сховати":"Показати більше"),1)],2)):T("",!0),se(p("div",null,[t.value.isHidden?(f(),g("span",gl,"("+L("Приватне")+")",1)):T("",!0),t.value.replyId?(f(),A(z,{key:1,class:c(m.$style.noteReplyTarget),to:`/notes/${t.value.replyId}`},{default:H(()=>[...y[5]||(y[5]=[p("i",{class:"ti ti-arrow-back-up"},null,-1)])]),_:1},8,["class","to"])):T("",!0),t.value.text?(f(),A(E(le),{key:2,parsedNodes:E(d),text:t.value.text,author:t.value.user,nyaize:"respect",emojiUrls:t.value.emojis},null,8,["parsedNodes","text","author","emojiUrls"])):T("",!0),t.value.renote!=null?(f(),g("a",{key:3,class:c(m.$style.rn)},"RN:",2)):T("",!0),t.value.files&&t.value.files.length>0?(f(),g("div",bl,[N(it,{mediaList:t.value.files,originalEntityUrl:`${E(Z)}/notes/${t.value.id}`},null,8,["mediaList","originalEntityUrl"])])):T("",!0),t.value.poll?(f(),A(mt,{key:5,ref:"pollViewer",noteId:t.value.id,poll:t.value.poll,readOnly:!0,class:c(m.$style.poll)},null,8,["noteId","poll","class"])):T("",!0),t.value.renote?(f(),g("div",{key:6,class:c(m.$style.quote)},[N(Yt,{note:t.value.renote,class:c(m.$style.quoteNote)},null,8,["note","class"])],2)):T("",!0),E(w)&&i.value?(f(),g("button",{key:7,class:c([m.$style.collapsed,"_button"]),onClick:y[1]||(y[1]=b=>i.value=!1)},[p("span",{class:c(m.$style.collapsedLabel)},L("Показати більше"),3)],2)):E(w)&&!i.value?(f(),g("button",{key:8,class:c([m.$style.showLess,"_button"]),onClick:y[2]||(y[2]=b=>i.value=!0)},[p("span",{class:c(m.$style.showLessLabel)},L("Закрити"),3)],2)):T("",!0)],512),[[de,t.value.cw==null||a.value]]),t.value.channel&&!E(o)?(f(),A(z,{key:1,class:c(m.$style.channel),to:`/channels/${t.value.channel.id}`},{default:H(()=>[y[6]||(y[6]=p("i",{class:"ti ti-device-tv"},null,-1)),K(" "+L(t.value.channel.name),1)]),_:1},8,["class","to"])):T("",!0)],2),p("footer",null,[p("div",{class:c(m.$style.noteFooterInfo)},[t.value.visibility!=="public"?(f(),g("span",{key:0,style:{display:"inline-block","margin-right":"0.5em"},title:{"public":"Публічний","publicDescription":"Для всіх користувачів","home":"Домівка","homeDescription":"Лише на домашній стрічці","followers":"Підписники","followersDescription":"Тільки для підписників","specified":"Особисто","specifiedDescription":"Лише для певних користувачів","disableFederation":"Defederate","disableFederationDescription":"Don't transmit to other instances"}[t.value.visibility]},[t.value.visibility==="home"?(f(),g("i",wl)):t.value.visibility==="followers"?(f(),g("i",kl)):t.value.visibility==="specified"?(f(),g("i",El,null,512)):T("",!0)],8,$l)):T("",!0),t.value.localOnly?(f(),g("span",{key:1,style:{display:"inline-block","margin-right":"0.5em"},title:"Defederate"},[...y[7]||(y[7]=[p("i",{class:"ti ti-rocket-off"},null,-1)])],8,Il)):T("",!0),N(z,{to:E(ct)(t.value)},{default:H(()=>[N(Ie,{time:t.value.createdAt,mode:"detail",colored:""},null,8,["time"])]),_:1},8,["to"])],2),t.value.reactionAcceptance!=="likeOnly"?(f(),A(Zt,{key:0,ref:"reactionsViewer",maxNumber:16,note:t.value},{more:H(()=>[N(z,{to:`/notes/${t.value.id}`,class:c([m.$style.reactionOmitted])},{default:H(()=>[K(L("Бiльше!"),1)]),_:1},8,["to","class"])]),_:1},8,["note"])):T("",!0),p("a",{href:`/notes/${t.value.id}`,target:"_blank",rel:"noopener",class:c([[m.$style.noteFooterButton,m.$style.footerButtonLink],"_button"])},[...y[8]||(y[8]=[p("i",{class:"ti ti-arrow-back-up"},null,-1)])],10,Tl),p("a",{href:`/notes/${t.value.id}`,target:"_blank",rel:"noopener",class:c([[m.$style.noteFooterButton,m.$style.footerButtonLink],"_button"])},[y[9]||(y[9]=p("i",{class:"ti ti-repeat"},null,-1)),t.value.renoteCount>0?(f(),g("p",{key:0,class:c(m.$style.noteFooterButtonCount)},L(t.value.renoteCount),3)):T("",!0)],10,xl),p("a",{href:`/notes/${t.value.id}`,target:"_blank",rel:"noopener",class:c([[m.$style.noteFooterButton,m.$style.footerButtonLink],"_button"])},[t.value.reactionAcceptance==="likeOnly"?(f(),g("i",_l)):(f(),g("i",Ll)),t.value.reactionAcceptance==="likeOnly"&&t.value.reactionCount>0?(f(),g("p",{key:2,class:c(m.$style.noteFooterButtonCount)},L(t.value.reactionCount),3)):T("",!0)],10,Ml),p("a",{href:`/notes/${t.value.id}`,target:"_blank",rel:"noopener",class:c([[m.$style.noteFooterButton,m.$style.footerButtonLink],"_button"])},[...y[10]||(y[10]=[p("i",{class:"ti ti-dots"},null,-1)])],10,Cl)])],2)],2)),[[de,!h.value]])}}),Nl="xiPJf",Bl="xhwQ7",Ol="xhJvI",Rl="xdQeT",Sl="xkOVR",Pl="xu2ww",Ul="xkLbj",jl="xoInN",Hl="xiJEG",ql="xw0Ex",Dl="x7xMU",Fl="x8UZN",zl="xgZyl",Wl="xsupH",Vl="xi04A",Kl="xfKbf",Gl="xxEhs",Xl="xN845",Jl="xalUK",Yl="xxjyP",Ql="xh22m",Zl="xhMKA",er="xa1PH",tr="x7efp",nr="xuAkC",ur="xC2Yu",sr="xC7Kt",dr="x36Ii",or="xrXY3",lr="x1288",rr="x8HH0",ar="x7i0Z",ir="xe63v",cr="xrmq6",fr="xDidD",mr="xruEc",yr="xqGbx",vr="x2oUZ",hr="xB8qP",pr="xw4fF",gr="xgUNd",br={root:Nl,replyTo:Bl,renote:Ol,renoteAvatar:Rl,renoteText:Sl,renoteName:Pl,renoteInfo:Ul,renoteTime:jl,note:Hl,main:ql,footer:Dl,button:Fl,noteHeader:zl,noteHeaderAvatar:Wl,noteHeaderBody:Vl,noteHeaderBodyUpper:Kl,noteHeaderName:Gl,isBot:Xl,noteHeaderInfo:Jl,noteHeaderInstanceIconLink:Yl,noteHeaderInstanceIcon:Ql,noteHeaderUsername:Zl,noteContent:er,cw:tr,noteReplyTarget:nr,rn:ur,reactionOmitted:sr,poll:dr,quote:or,quoteNote:lr,channel:rr,showLess:ar,showLessLabel:ir,contentCollapsed:cr,collapsed:fr,collapsedLabel:mr,noteFooterInfo:yr,noteFooterButton:vr,footerButtonLink:hr,noteFooterButtonCount:pr,reacted:gr},$r={$style:br},wr=q(Al,[["__cssModules",$r]]),kr={class:"_fullinfo"},xe=U({__name:"not-found",setup(e){return V(X.serverMetadata),(n,u)=>(f(),g("div",null,[p("div",kr,[p("div",null,L("Сторінка за вказаною адресою не знайдена."),1)])]))}}),Er=U({__name:"note",props:{noteId:{}},async setup(e){let n,u;const o=e,l=V(X.serverContext),r=B(null),t=B(!1);return st(l,"note")?r.value=l.note:r.value=([n,u]=ot(()=>ve("notes/show",{noteId:o.noteId}).catch(()=>null)),n=await n,u(),n),(r.value?.url!=null||r.value?.uri!=null)&&(t.value=!0),(a,h)=>(f(),g("div",{class:c(a.$style.noteEmbedRoot)},[r.value&&!t.value?(f(),A(wr,{key:0,note:r.value},null,8,["note"])):(f(),A(xe,{key:1}))],2))}}),Ir="xzCkl",Tr={noteEmbedRoot:Ir},xr={$style:Tr},Mr=q(Er,[["__cssModules",xr]]),_r=["tabindex"],Lr=["title"],Cr={key:0,class:"ti ti-home"},Ar={key:1,class:"ti ti-lock"},Nr={key:2,ref:"specified",class:"ti ti-mail"},Br=["title"],Or=["title"],Rr={style:{"container-type":"inline-size"}},Sr={key:0,style:{opacity:"0.5"}},Pr={key:0},Ur=["href"],jr=["href"],Hr=["href"],qr={key:0,class:"ti ti-heart"},Dr={key:1,class:"ti ti-plus"},Fr=["href"],zr=U({__name:"EmNote",props:{note:{},pinned:{type:Boolean}},emits:["reaction","removeReaction"],setup(e,{emit:n}){function u(s){return kt(s)?s.renote:s}const o=e,l=V("inChannel",null),r=B(o.note),t=kt(r.value),a=he(),h=he(),d=F(()=>u(r.value)),w=B(!1),i=F(()=>d.value.text?Be.parse(d.value.text):null),m=yt(d.value,[]),y=B(d.value.cw==null&&m),b=B(!1);return(s,v)=>se((f(),g("div",{ref_key:"rootEl",ref:a,class:c([s.$style.root]),tabindex:b.value?"-1":"0"},[d.value.reply?(f(),A(Jt,{key:0,note:d.value.reply,class:c(s.$style.replyTo)},null,8,["note","class"])):T("",!0),e.pinned?(f(),g("div",{key:1,class:c(s.$style.tip)},[v[3]||(v[3]=p("i",{class:"ti ti-pin"},null,-1)),K(" "+L("Закріплений запис"),1)],2)):T("",!0),E(t)?(f(),g("div",{key:2,class:c(s.$style.renote)},[r.value.channel?(f(),g("div",{key:0,class:c(s.$style.colorBar),style:oe({background:r.value.channel.color})},null,6)):T("",!0),N(ge,{class:c(s.$style.renoteAvatar),user:r.value.user,link:""},null,8,["class","user"]),v[6]||(v[6]=p("i",{class:"ti ti-repeat",style:{"margin-right":"4px"}},null,-1)),N(at,{src:"Поширено {user}",tag:"span",class:c(s.$style.renoteText)},{user:H(()=>[N(z,{class:c(s.$style.renoteUserName),to:E(Ee)(r.value.user)},{default:H(()=>[N(Te,{user:r.value.user},null,8,["user"])]),_:1},8,["class","to"])]),_:1},8,["src","class"]),p("div",{class:c(s.$style.renoteInfo)},[p("button",{ref_key:"renoteTime",ref:h,class:c([s.$style.renoteTime,"_button"])},[p("i",{class:c(["ti ti-dots",s.$style.renoteMenu])},null,2),N(Ie,{time:r.value.createdAt},null,8,["time"])],2),r.value.visibility!=="public"?(f(),g("span",{key:0,style:{"margin-left":"0.5em"},title:{"public":"Публічний","publicDescription":"Для всіх користувачів","home":"Домівка","homeDescription":"Лише на домашній стрічці","followers":"Підписники","followersDescription":"Тільки для підписників","specified":"Особисто","specifiedDescription":"Лише для певних користувачів","disableFederation":"Defederate","disableFederationDescription":"Don't transmit to other instances"}[r.value.visibility]},[r.value.visibility==="home"?(f(),g("i",Cr)):r.value.visibility==="followers"?(f(),g("i",Ar)):r.value.visibility==="specified"?(f(),g("i",Nr,null,512)):T("",!0)],8,Lr)):T("",!0),r.value.localOnly?(f(),g("span",{key:1,style:{"margin-left":"0.5em"},title:"Defederate"},[...v[4]||(v[4]=[p("i",{class:"ti ti-rocket-off"},null,-1)])],8,Br)):T("",!0),r.value.channel?(f(),g("span",{key:2,style:{"margin-left":"0.5em"},title:r.value.channel.name},[...v[5]||(v[5]=[p("i",{class:"ti ti-device-tv"},null,-1)])],8,Or)):T("",!0)],2)],2)):T("",!0),p("article",{class:c(s.$style.article)},[d.value.channel?(f(),g("div",{key:0,class:c(s.$style.colorBar),style:oe({background:d.value.channel.color})},null,6)):T("",!0),N(ge,{class:c(s.$style.avatar),user:d.value.user,link:""},null,8,["class","user"]),p("div",{class:c(s.$style.main)},[N(ft,{note:d.value,mini:!0},null,8,["note"]),d.value.user.instance!=null?(f(),A(Qt,{key:0,instance:d.value.user.instance},null,8,["instance"])):T("",!0),p("div",Rr,[d.value.cw!=null?(f(),g("p",{key:0,class:c(s.$style.cw)},[d.value.cw!=""?(f(),A(E(le),{key:0,style:{"margin-right":"8px"},text:d.value.cw,author:d.value.user,nyaize:"respect"},null,8,["text","author"])):T("",!0),p("button",{style:{display:"block",width:"100%",margin:"4px 0"},class:"_buttonGray _buttonRounded",onClick:v[0]||(v[0]=$=>w.value=!w.value)},L(w.value?"Сховати":"Показати більше"),1)],2)):T("",!0),se(p("div",{class:c([{[s.$style.contentCollapsed]:y.value}])},[p("div",{class:c(s.$style.text)},[d.value.isHidden?(f(),g("span",Sr,"("+L("Приватне")+")",1)):T("",!0),d.value.replyId?(f(),A(z,{key:1,class:c(s.$style.replyIcon),to:`/notes/${d.value.replyId}`},{default:H(()=>[...v[7]||(v[7]=[p("i",{class:"ti ti-arrow-back-up"},null,-1)])]),_:1},8,["class","to"])):T("",!0),d.value.text?(f(),A(E(le),{key:2,parsedNodes:i.value,text:d.value.text,author:d.value.user,nyaize:"respect",emojiUrls:d.value.emojis,enableEmojiMenu:!1,enableEmojiMenuReaction:!0},null,8,["parsedNodes","text","author","emojiUrls"])):T("",!0)],2),d.value.files&&d.value.files.length>0?(f(),g("div",Pr,[N(it,{mediaList:d.value.files,originalEntityUrl:`${E(Z)}/notes/${d.value.id}`},null,8,["mediaList","originalEntityUrl"])])):T("",!0),d.value.poll?(f(),A(mt,{key:1,noteId:d.value.id,poll:d.value.poll,readOnly:!0,class:c(s.$style.poll)},null,8,["noteId","poll","class"])):T("",!0),d.value.renote?(f(),g("div",{key:2,class:c(s.$style.quote)},[N(Yt,{note:d.value.renote,class:c(s.$style.quoteNote)},null,8,["note","class"])],2)):T("",!0),E(m)&&y.value?(f(),g("button",{key:3,class:c([s.$style.collapsed,"_button"]),onClick:v[1]||(v[1]=$=>y.value=!1)},[p("span",{class:c(s.$style.collapsedLabel)},L("Показати більше"),3)],2)):E(m)&&!y.value?(f(),g("button",{key:4,class:c([s.$style.showLess,"_button"]),onClick:v[2]||(v[2]=$=>y.value=!0)},[p("span",{class:c(s.$style.showLessLabel)},L("Закрити"),3)],2)):T("",!0)],2),[[de,d.value.cw==null||w.value]]),d.value.channel&&!E(l)?(f(),A(z,{key:1,class:c(s.$style.channel),to:`/channels/${d.value.channel.id}`},{default:H(()=>[v[8]||(v[8]=p("i",{class:"ti ti-device-tv"},null,-1)),K(" "+L(d.value.channel.name),1)]),_:1},8,["class","to"])):T("",!0)]),d.value.reactionAcceptance!=="likeOnly"?(f(),A(Zt,{key:1,note:d.value,maxNumber:16},{more:H(()=>[N(z,{to:`/notes/${d.value.id}/reactions`,class:c([s.$style.reactionOmitted])},{default:H(()=>[K(L("Бiльше!"),1)]),_:1},8,["to","class"])]),_:1},8,["note"])):T("",!0),p("footer",{class:c(s.$style.footer)},[p("a",{href:`/notes/${d.value.id}`,target:"_blank",rel:"noopener",class:c([[s.$style.footerButton,s.$style.footerButtonLink],"_button"])},[...v[9]||(v[9]=[p("i",{class:"ti ti-arrow-back-up"},null,-1)])],10,Ur),p("a",{href:`/notes/${d.value.id}`,target:"_blank",rel:"noopener",class:c([[s.$style.footerButton,s.$style.footerButtonLink],"_button"])},[...v[10]||(v[10]=[p("i",{class:"ti ti-repeat"},null,-1)])],10,jr),p("a",{href:`/notes/${d.value.id}`,target:"_blank",rel:"noopener",class:c([[s.$style.footerButton,s.$style.footerButtonLink],"_button"])},[d.value.reactionAcceptance==="likeOnly"?(f(),g("i",qr)):(f(),g("i",Dr))],10,Hr),p("a",{href:`/notes/${d.value.id}`,target:"_blank",rel:"noopener",class:c([[s.$style.footerButton,s.$style.footerButtonLink],"_button"])},[...v[11]||(v[11]=[p("i",{class:"ti ti-dots"},null,-1)])],10,Fr)],2)],2)],2)],10,_r)),[[de,!b.value]])}}),Wr="xmS1Y",Vr="xfjqr",Kr="xYjn1",Gr="xuGa8",Xr="xErFP",Jr="xBY5R",Yr="xmfCI",Qr="xlnc1",Zr="xvnpM",ea="xCFOY",ta="xDJeT",na="xk1F0",ua="x4n2X",sa="xxcqT",da="xtaG8",oa="xaSnq",la="x3KC7",ra="xlBKY",aa="x4grp",ia="x56is",ca="xtVde",fa="xlHVl",ma="xBYpb",ya="xDpk2",va="xrUBt",ha="x8uo7",pa="xnvUa",ga="xsuGc",ba="x62CS",$a="xrI9D",wa="xC5KX",ka="xt48Q",Ea="xaajD",Ia="xFcVe",Ta="xEM7A",xa="x4S2m",Ma="xvEHu",_a={root:Wr,footer:Vr,article:Kr,main:Gr,footerButton:Xr,showActionsOnlyHover:Jr,tip:Yr,replyTo:Qr,renote:Zr,colorBar:ea,renoteAvatar:ta,renoteText:na,renoteUserName:ua,renoteInfo:sa,renoteTime:da,renoteMenu:oa,collapsedRenoteTarget:la,collapsedRenoteTargetAvatar:ra,collapsedRenoteTargetText:aa,avatar:ia,cw:ca,showLess:fa,showLessLabel:ma,contentCollapsed:ya,collapsed:va,collapsedLabel:ha,text:pa,replyIcon:ga,translation:ba,urlPreview:$a,poll:wa,quote:ka,quoteNote:Ea,channel:Ia,footerButtonLink:Ta,footerButtonCount:xa,reactionOmitted:Ma},La={$style:_a},Ca=q(zr,[["__cssModules",La]]),Aa=U({__name:"EmError",emits:["retry"],setup(e,{emit:n}){const u=n;return(o,l)=>(f(),g("div",{class:c(o.$style.root)},[p("p",{class:c(o.$style.text)},[l[1]||(l[1]=p("i",{class:"ti ti-alert-triangle"},null,-1)),K(" "+L("Щось пішло не так"),1)],2),p("button",{class:c(["_buttonGray _buttonRounded",o.$style.button]),onClick:l[0]||(l[0]=()=>u("retry"))},L("Спробувати знову"),3)],2))}}),Na="xBst8",Ba="xaWdq",Oa="xBUdW",Ra="xcSBx",Sa={root:Na,text:Ba,button:Oa,img:Ra},Pa={$style:Sa},Ua=q(Aa,[["__cssModules",Pa]]),ja=U({__name:"EmLoading",props:{static:{type:Boolean,default:!1},inline:{type:Boolean,default:!1},colored:{type:Boolean,default:!0},mini:{type:Boolean,default:!1},em:{type:Boolean,default:!1}},setup(e){return(n,u)=>(f(),g("div",{class:c([n.$style.root,{[n.$style.inline]:e.inline,[n.$style.colored]:e.colored,[n.$style.mini]:e.mini,[n.$style.em]:e.em}])},[p("div",{class:c(n.$style.container)},[(f(),g("svg",{class:c([n.$style.spinner,n.$style.bg]),viewBox:"0 0 168 168",xmlns:"http://www.w3.org/2000/svg"},[...u[0]||(u[0]=[p("g",{transform:"matrix(1.125,0,0,1.125,12,12)"},[p("circle",{cx:"64",cy:"64",r:"64",style:{fill:"none",stroke:"currentColor","stroke-width":"21.33px"}})],-1)])],2)),(f(),g("svg",{class:c([n.$style.spinner,n.$style.fg,{[n.$style.static]:e.static}]),viewBox:"0 0 168 168",xmlns:"http://www.w3.org/2000/svg"},[...u[1]||(u[1]=[p("g",{transform:"matrix(1.125,0,0,1.125,12,12)"},[p("path",{d:"M128,64C128,28.654 99.346,0 64,0C99.346,0 128,28.654 128,64Z",style:{fill:"none",stroke:"currentColor","stroke-width":"21.33px"}})],-1)])],2))],2)],2))}}),Ha="x7X0J",qa="xlmRi",Da="x49HL",Fa="xrANx",za="xkYPp",Wa="xdSos",Va="xwLjq",Ka="xAKXZ",Ga="xxosK",Xa={root:Ha,colored:qa,inline:Da,mini:Fa,em:za,container:Wa,spinner:Va,bg:Ka,fg:Ga,static:"x3int"},Ja={$style:Xa},Ae=q(ja,[["__cssModules",Ja]]);function Ya(){const e=B(window.document.visibilityState),n=()=>{e.value=window.document.visibilityState};return Se(()=>{window.document.addEventListener("visibilitychange",n)}),Pe(()=>{window.document.removeEventListener("visibilitychange",n)}),e}function ie(e){if(e==null||e.tagName==="HTML")return null;const n=window.getComputedStyle(e).getPropertyValue("overflow-y");return n==="scroll"||n==="auto"?e:ie(e.parentElement)}function et(e,n=null,u=0){if(!e.parentElement)return u;const o=e.dataset.stickyContainerHeaderHeight,l=o?Number(o)+u:u;return e===n?l:et(e.parentElement,n,l)}function Qa(e){const n=ie(e);return n==null?window.scrollY:n.scrollTop}function Za(e,n,u=1,o=!1){const l=tt(e);if(e.isConnected&&l&&(n(l),o))return null;const r=ie(e)??window;let t=l;const a=()=>{if(!window.document.body.contains(e))return;const d=tt(e,u);d!==t&&(t=d,n(d),o&&h())};function h(){r.removeEventListener("scroll",a)}return r.addEventListener("scroll",a,{passive:!0}),h}function ei(e,n,u=1,o=!1){const l=ie(e);if(e.isConnected&&nt(e,u,l)&&(n(),o))return null;const r=l??window,t=()=>{window.document.body.contains(e)&&nt(e,1,l)&&(n(),o&&a())};function a(){r.removeEventListener("scroll",t)}return r.addEventListener("scroll",t,{passive:!0}),a}function en(e,n){const u=ie(e);u==null?window.scroll(n):u.scroll(n)}function vt(e,n={}){en(e,{top:0,...n})}function ti(e,n={},u=ie(e)){u?u.scroll({top:e.scrollHeight-u.clientHeight+et(e,u)||0,...n}):window.scroll({top:e.scrollHeight-window.innerHeight+et(e,u)+(window.innerWidth<=500?96:0)||0,...n})}function tt(e,n=1){return Qa(e)<=n}function nt(e,n=1,u=ie(e)){return u?e.scrollHeight<=u.clientHeight+Math.abs(u.scrollTop)+n:e.scrollHeight<=window.innerHeight+window.scrollY+n}function Rt(){return Math.max(window.document.body.scrollHeight,window.document.documentElement.scrollHeight,window.document.body.offsetHeight,window.document.documentElement.offsetHeight,window.document.body.clientHeight,window.document.documentElement.clientHeight)}const ni={key:"_empty_",class:"empty"},ui={class:"_fullinfo"},si={key:"_more_",class:"_margin"},di=["disabled"],oi={key:"_more_",class:"_margin"},li=["disabled"],St=30,Pt=16;function ut(e){return e.map(n=>[n.id,n])}function we(e,n){return new Map([...e,...ut(n)])}const ri=U({__name:"EmPagination",props:{pagination:{},disableAutoLoad:{type:Boolean},displayLimit:{default:20}},emits:["queue","status"],setup(e,{expose:n,emit:u}){const o=e,l=u,r=he(),t=B(!1),a=B(null),h=B(new Map),d=B(new Map),w=B(0),i=B(!0),m=B(!1),y=B(!1);B(!1);const b=B(null),s=B(!1),v=F(()=>h.value.size===0),$=B(!1),k=F(()=>r.value?ie(r.value):window.document.body),I=Ya();let C=!1,_=null;const R=10,x=B();ue([()=>o.pagination.reversed,k],()=>{x.value&&x.value.disconnect(),x.value=new IntersectionObserver(O=>{t.value=O[0].isIntersecting},{root:k.value,rootMargin:o.pagination.reversed?"-100% 0px 100% 0px":"100% 0px -100% 0px",threshold:.01})},{immediate:!0}),ue(r,()=>{x.value?.disconnect(),ke(()=>{r.value&&x.value?.observe(r.value)})}),ue([t,r],()=>{if(t.value)a.value&&a.value(),a.value=null;else{if(!r.value)return;a.value=(o.pagination.reversed?ei:Za)(r.value,$t,Pt)}}),ue(()=>[o.pagination.endpoint,o.pagination.params],D,{deep:!0}),ue(d,(O,j)=>{O.size===0&&j.size===0||l("queue",d.value.size)},{deep:!0}),ue($,(O,j)=>{O!==j&&l("status",O)});async function D(){h.value=new Map,d.value=new Map,i.value=!0;const O=o.pagination.params?He(o.pagination.params)?o.pagination.params.value:o.pagination.params:{};await ve(o.pagination.endpoint,{...O,limit:o.pagination.limit??10,allowPartial:!0}).then(j=>{for(let ee=0;ee<j.length;ee++){const te=j[ee];ee===3&&(te._shouldInsertAd_=!0)}j.length===0||o.pagination.noPaging?(bt(j),y.value=!1):(o.pagination.reversed&&(m.value=!0),bt(j),y.value=!0),w.value=j.length,$.value=!1,i.value=!1},j=>{$.value=!0,i.value=!1})}const P=()=>D(),Q=async()=>{if(!y.value||i.value||m.value||h.value.size===0)return;m.value=!0;const O=o.pagination.params?He(o.pagination.params)?o.pagination.params.value:o.pagination.params:{};await ve(o.pagination.endpoint,{...O,limit:St,...o.pagination.offsetMode?{offset:w.value}:{untilId:Array.from(h.value.keys()).at(-1)}}).then(j=>{for(let te=0;te<j.length;te++){const Me=j[te];te===10&&(Me._shouldInsertAd_=!0)}const ee=te=>{const Me=k.value?k.value.scrollHeight:Rt(),wt=k.value?k.value.scrollTop:window.scrollY;return h.value=we(h.value,te),ke(()=>(k.value?en(k.value,{top:wt+(k.value.scrollHeight-Me),behavior:"instant"}):window.scroll({top:wt+(Rt()-Me),behavior:"instant"}),ke()))};j.length===0?o.pagination.reversed?ee(j).then(()=>{y.value=!1,m.value=!1}):(h.value=we(h.value,j),y.value=!1,m.value=!1):o.pagination.reversed?ee(j).then(()=>{y.value=!0,m.value=!1}):(h.value=we(h.value,j),y.value=!0,m.value=!1),w.value+=j.length},j=>{m.value=!1})},be=async()=>{if(!y.value||i.value||m.value||h.value.size===0)return;m.value=!0;const O=o.pagination.params?He(o.pagination.params)?o.pagination.params.value:o.pagination.params:{};await ve(o.pagination.endpoint,{...O,limit:St,...o.pagination.offsetMode?{offset:w.value}:{sinceId:Array.from(h.value.keys()).at(-1)}}).then(j=>{j.length===0?(h.value=we(h.value,j),y.value=!1):(h.value=we(h.value,j),y.value=!0),w.value+=j.length,m.value=!1},j=>{m.value=!1})},ce=()=>s.value||(o.pagination.reversed?nt:tt)(r.value,Pt);ue(I,()=>{I.value==="hidden"?_=window.setTimeout(()=>{C=!0,_=null},R*1e3):_?(window.clearTimeout(_),_=null):(C=!1,ce()&&$t())});const tn=O=>{if(h.value.size===0){h.value.set(O.id,O),i.value=!1;return}ce()&&!C?gt([O]):nn(O)};function gt(O){const j=O.length+h.value.size;h.value=new Map([...ut(O),...h.value].slice(0,o.displayLimit)),j>=o.displayLimit&&(y.value=!0)}function bt(O){const j=O.length+h.value.size;h.value=new Map([...h.value,...ut(O)].slice(0,o.displayLimit)),j>=o.displayLimit&&(y.value=!0)}function $t(){gt(Array.from(d.value.values())),d.value=new Map}function nn(O){d.value=new Map([[O.id,O],...d.value].slice(0,o.displayLimit))}const un=O=>{h.value.set(O.id,O)},sn=O=>{h.value.delete(O),d.value.delete(O)},dn=(O,j)=>{const ee=h.value.get(O);ee&&h.value.set(O,j(ee));const te=d.value.get(O);te&&d.value.set(O,j(te))};mn(()=>{s.value=!1}),yn(()=>{s.value=o.pagination.reversed?window.scrollY>=(r.value?r.value.scrollHeight-window.innerHeight:0):window.scrollY===0});function on(){ti(r.value)}return vn(()=>{D().then(()=>{o.pagination.reversed&&ke(()=>{window.setTimeout(on,800),window.setTimeout(()=>{m.value=!1},2e3)})})}),hn(()=>{_&&(window.clearTimeout(_),_=null),b.value&&(window.clearTimeout(b.value),b.value=null),x.value?.disconnect()}),n({items:h,queue:d,backed:t.value,more:y,reload:P,prepend:tn,append:un,removeItem:sn,updateItem:dn}),(O,j)=>i.value?(f(),A(Ae,{key:0})):$.value?(f(),A(Ua,{key:1,onRetry:j[0]||(j[0]=ee=>D())})):v.value?(f(),g("div",ni,[pe(O.$slots,"empty",{},()=>[p("div",ui,[p("div",null,L("Тут нічого немає"),1)])])])):(f(),g("div",{key:3,ref_key:"rootEl",ref:r},[se(p("div",si,[m.value?(f(),A(Ae,{key:1,class:"loading"})):(f(),g("button",{key:0,class:c(["_buttonPrimary",O.$style.more]),disabled:m.value,style:oe({cursor:m.value?"wait":"pointer"}),onClick:be},L("Показати більше"),15,di))],512),[[de,e.pagination.reversed&&y.value]]),pe(O.$slots,"default",{items:Array.from(h.value.values()),fetching:i.value||m.value}),se(p("div",oi,[m.value?(f(),A(Ae,{key:1,class:"loading"})):(f(),g("button",{key:0,class:c(["_buttonRounded _buttonPrimary",O.$style.more]),disabled:m.value,style:oe({cursor:m.value?"wait":"pointer"}),onClick:Q},L("Показати більше"),15,li))],512),[[de,!e.pagination.reversed&&y.value]])],512))}}),ai="xBKyp",ii="xEUXw",ci="xa7tp",fi="xwFlH",mi="x3Z43",yi={transition_fade_enterActive:ai,transition_fade_leaveActive:ii,transition_fade_enterFrom:ci,transition_fade_leaveTo:fi,more:mi},vi={$style:yi},hi=q(ri,[["__cssModules",vi]]),pi={class:"_fullinfo"},gi=U({__name:"EmNotes",props:{pagination:{},noGap:{type:Boolean},disableAutoLoad:{type:Boolean},ad:{type:Boolean,default:!0}},setup(e,{expose:n}){const u=Ue("pagingComponent");return n({pagingComponent:u}),(o,l)=>(f(),A(hi,{ref_key:"pagingComponent",ref:u,pagination:e.pagination,disableAutoLoad:e.disableAutoLoad},{empty:H(()=>[p("div",pi,[p("div",null,L("Немає нотаток"),1)])]),default:H(({items:r})=>[p("div",{class:c([o.$style.root])},[(f(!0),g(G,null,ae(r,t=>(f(),A(Ca,{key:t._featuredId_||t._prId_||t.id,class:c(o.$style.note),note:t},null,8,["class","note"]))),128))],2)]),_:1},8,["pagination","disableAutoLoad"]))}}),bi="xrLCZ",$i="xtQ6L",wi={root:bi,note:$i},ki={$style:wi},ht=q(gi,[["__cssModules",ki]]),Ei=U({__name:"EmTimelineContainer",props:{showHeader:{type:Boolean,default:!0}},setup(e){return(n,u)=>(f(),g("div",{class:c(n.$style.timelineRoot)},[e.showHeader?(f(),g("div",{key:0,class:c(n.$style.header)},[pe(n.$slots,"header")],2)):T("",!0),p("div",{class:c(n.$style.body)},[pe(n.$slots,"body")],2)],2))}}),Ii="xuqad",Ti="x4PHS",xi="xnKGi",Mi={timelineRoot:Ii,header:Ti,body:xi},_i={$style:Mi},pt=q(Ei,[["__cssModules",_i]]);function je(e){return e.tagName==="A"?!0:e.parentElement?je(e.parentElement):!1}const Li=["href"],Ci=["href"],Ai={key:1},Ni=["href"],Bi=["src"],Oi=U({__name:"user-timeline",props:{userId:{}},async setup(e){let n,u;const o=e,l=V(X.embedParams,Re),r=V(X.serverMetadata),t=V(X.serverContext),a=B(),h=B(!1);st(t,"user")?a.value=t.user:a.value=([n,u]=ot(()=>ve("users/show",{userId:o.userId}).catch(()=>null)),n=await n,u(),n),a.value?.host!=null&&(h.value=!0);const d=F(()=>({endpoint:"users/notes",params:{userId:a.value?.id}})),w=Ue("notesEl");function i(m){const y=m.target;y&&je(y)||w.value&&vt(w.value.$el,{behavior:"smooth"})}return(m,y)=>(f(),g("div",null,[a.value&&!h.value?(f(),A(pt,{key:0,showHeader:E(l).header},{header:H(()=>[p("div",{class:c(m.$style.userHeader)},[p("a",{href:`/@${a.value.username}`,target:"_blank",rel:"noopener noreferrer",class:c(m.$style.avatarLink)},[N(ge,{class:c(m.$style.avatar),user:a.value},null,8,["class","user"])],10,Li),p("div",{class:c(m.$style.headerTitle),onClick:i},[N(at,{src:"Нотатка {user}",tag:"div",class:"_nowrap"},{user:H(()=>[a.value!=null?(f(),g("a",{key:0,href:`/@${a.value.username}`,target:"_blank",rel:"noopener noreferrer"},[N(Te,{user:a.value},null,8,["user"])],8,Ci)):(f(),g("span",Ai,L("Користувачі"),1))]),_:1},8,["src"]),p("div",{class:c(m.$style.sub)},L((({x})=>("From "+x))({x:E(lt)})),3)],2),p("a",{href:E(Z),class:c(m.$style.instanceIconLink),target:"_blank",rel:"noopener noreferrer"},[p("img",{class:c(m.$style.instanceIcon),src:E(r).iconUrl||"/favicon.ico"},null,10,Bi)],10,Ni)],2)]),body:H(()=>[N(ht,{ref_key:"notesEl",ref:w,pagination:d.value,disableAutoLoad:!E(l).autoload,noGap:!0,ad:!1},null,8,["pagination","disableAutoLoad"])]),_:1},8,["showHeader"])):(f(),A(xe,{key:1}))]))}}),Ri="xj5wO",Si="xEK3V",Pi="xj5mb",Ui="xilez",ji="x78sj",Hi="x9V8S",qi="x4wPi",Di={userHeader:Ri,avatarLink:Si,avatar:Pi,headerTitle:Ui,sub:ji,instanceIconLink:Hi,instanceIcon:qi},Fi={$style:Di},zi=q(Oi,[["__cssModules",Fi]]),Wi={class:"_nowrap"},Vi=["href"],Ki=["href"],Gi=["src"],Xi=U({__name:"clip",props:{clipId:{}},async setup(e){let n,u;const o=e,l=V(X.embedParams,Re),r=V(X.serverMetadata),t=V(X.serverContext),a=B();st(t,"clip")?a.value=t.clip:a.value=([n,u]=ot(()=>ve("clips/show",{clipId:o.clipId}).catch(()=>null)),n=await n,u(),n);const h=F(()=>({endpoint:"clips/notes",params:{clipId:o.clipId}})),d=Ue("notesEl");function w(i){const m=i.target;m&&je(m)||d.value&&vt(d.value.$el,{behavior:"smooth"})}return(i,m)=>(f(),g("div",null,[a.value?(f(),A(pt,{key:0,showHeader:E(l).header},{header:H(()=>[p("div",{class:c(i.$style.clipHeader)},[p("div",{class:c(i.$style.headerClipIconRoot)},[...m[0]||(m[0]=[p("i",{class:"ti ti-paperclip"},null,-1)])],2),p("div",{class:c(i.$style.headerTitle),onClick:w},[p("div",Wi,[p("a",{href:`/clips/${a.value.id}`,target:"_blank",rel:"noopener"},L(a.value.name),9,Vi)]),p("div",{class:c(i.$style.sub)},L((({x})=>("From "+x))({x:E(lt)})),3)],2),p("a",{href:E(Z),class:c(i.$style.instanceIconLink),target:"_blank",rel:"noopener noreferrer"},[p("img",{class:c(i.$style.instanceIcon),src:E(r).iconUrl||"/favicon.ico"},null,10,Gi)],10,Ki)],2)]),body:H(()=>[N(ht,{ref_key:"notesEl",ref:d,pagination:h.value,disableAutoLoad:!E(l).autoload,noGap:!0,ad:!1},null,8,["pagination","disableAutoLoad"])]),_:1},8,["showHeader"])):(f(),A(xe,{key:1}))]))}}),Ji="xfTfS",Yi="xm7yg",Qi="xhUPl",Zi="xEScX",ec="xfmae",tc="xdTUU",nc={clipHeader:Ji,headerClipIconRoot:Yi,headerTitle:Qi,sub:Zi,instanceIconLink:ec,instanceIcon:tc},uc={$style:nc},sc=q(Xi,[["__cssModules",uc]]),dc={class:"_nowrap"},oc=["href"],lc=["href"],rc=["src"],ac=U({__name:"tag",props:{tag:{}},setup(e){const n=e,u=V(X.serverMetadata),o=V(X.embedParams,Re),l=F(()=>({endpoint:"notes/search-by-tag",params:{tag:n.tag}})),r=Ue("notesEl");function t(a){const h=a.target;h&&je(h)||r.value&&vt(r.value.$el,{behavior:"smooth"})}return(a,h)=>(f(),g("div",null,[e.tag?(f(),A(pt,{key:0,showHeader:E(o).header},{header:H(()=>[p("div",{class:c(a.$style.clipHeader)},[p("div",{class:c(a.$style.headerClipIconRoot)},[...h[0]||(h[0]=[p("i",{class:"ti ti-hash"},null,-1)])],2),p("div",{class:c(a.$style.headerTitle),onClick:t},[p("div",dc,[p("a",{href:`/tags/${e.tag}`,target:"_blank",rel:"noopener"},"#"+L(e.tag),9,oc)]),p("div",{class:c(a.$style.sub)},L((({x})=>("From "+x))({x:E(lt)})),3)],2),p("a",{href:E(Z),class:c(a.$style.instanceIconLink),target:"_blank",rel:"noopener noreferrer"},[p("img",{class:c(a.$style.instanceIcon),src:E(u).iconUrl||"/favicon.ico"},null,10,rc)],10,lc)],2)]),body:H(()=>[N(ht,{ref_key:"notesEl",ref:r,pagination:l.value,disableAutoLoad:!E(o).autoload,noGap:!0,ad:!1},null,8,["pagination","disableAutoLoad"])]),_:1},8,["showHeader"])):(f(),A(xe,{key:1}))]))}}),ic="xqhbe",cc="x6CAy",fc="xx6zy",mc="xdezB",yc="xcHAG",vc="xkow3",hc={clipHeader:ic,headerClipIconRoot:cc,headerTitle:fc,sub:mc,instanceIconLink:yc,instanceIcon:vc},pc={$style:hc},gc=q(ac,[["__cssModules",pc]]),bc=U({__name:"ui",setup(e){function n(i){try{return decodeURIComponent(i)}catch{return i}}const u=window.location.pathname.split("/")[2],o=n(window.location.pathname.split("/")[3]),l=V(X.embedParams,Re),r=B(l.rounded),t=B(!l.border),a=B(l.maxHeight??0),h=he(null);let d=0;const w=new ResizeObserver(async()=>{const i=h.value.scrollHeight+(t.value?0:2);Math.abs(d-i)<1||(an("misskey:embed:changeHeight",{height:a.value>0&&i>a.value?a.value:i}),d=i)});return Se(()=>{w.observe(h.value)}),Pe(()=>{w.disconnect()}),(i,m)=>(f(),g("div",{ref_key:"rootEl",ref:h,class:c([i.$style.rootForEmbedPage,{[i.$style.rounded]:r.value,[i.$style.noBorder]:t.value}]),style:oe(a.value>0?{maxHeight:`${a.value}px`,"--embedMaxHeight":`${a.value}px`}:{})},[p("div",{class:c(i.$style.routerViewContainer)},[(f(),A(pn,{timeout:0},{fallback:H(()=>[N(Ae)]),default:H(()=>[E(u)==="notes"?(f(),A(Mr,{key:0,noteId:E(o)},null,8,["noteId"])):E(u)==="user-timeline"?(f(),A(zi,{key:1,userId:E(o)},null,8,["userId"])):E(u)==="clips"?(f(),A(sc,{key:2,clipId:E(o)},null,8,["clipId"])):E(u)==="tags"?(f(),A(gc,{key:3,tag:E(o)},null,8,["tag"])):(f(),A(xe,{key:4}))]),_:1}))],2)],6))}}),$c="xv5SU",wc="xvDUk",kc="x2eLe",Ec="x6Jm6",Ic={rootForEmbedPage:$c,rounded:wc,noBorder:kc,routerViewContainer:Ec},Tc={$style:Ic},Cc=q(bc,[["__cssModules",Tc]]);export{Cc as default};

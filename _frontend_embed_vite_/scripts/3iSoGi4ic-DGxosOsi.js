import{l as d,v as x}from"./3iSoGi4ic-CPesB5eK.js";import{Q as p}from"./3iSoGi4ic-BxeXxkJv.js";class w{constructor(n,r=!1){this.locale=n,this.devMode=r,this.t=this.t.bind(this)}tsxCache;devMode;get ts(){if(this.devMode){class n{get(o,s){const e=o[s];if(typeof e=="object")return new Proxy(e,new n);if(typeof e=="string"){const t=Array.from(e.matchAll(/\{(\w+)\}/g),([,a])=>a);return t.length&&console.error(`Missing locale parameters: ${t.join(", ")} at ${String(s)}`),e}return console.error(`Unexpected locale key: ${String(s)}`),new Proxy({},new n)}}return new Proxy(this.locale,new n)}return this.locale}get tsx(){if(this.devMode){if(this.tsxCache)return this.tsxCache;class r{get(s,e){const t=s[e];if(typeof t=="object")return new Proxy(t,new r);if(typeof t=="string"){const a=[],c=[];let l=0;for(;~l;){const i=t.indexOf("{",l);if(!~i){a.push(t.slice(l));break}a.push(t.slice(l,i));const f=t.indexOf("}",i);c.push(t.slice(i+1,f)),l=f+1}return c.length?i=>{let f=a[0];for(let h=0;h<c.length;h++)Object.hasOwn(i,c[h])||console.error(`Missing locale parameters: ${c[h]} at ${String(e)}`),f+=i[c[h]]+a[h+1];return f}:(console.error(`Unexpected locale key: ${String(e)}`),()=>t)}return console.error(`Unexpected locale key: ${String(e)}`),new Proxy((()=>e),new r)}}return this.tsxCache=new Proxy(this.locale,new r)}if(this.tsxCache)return this.tsxCache;function n(r){const o={};for(const s in r){if(!Object.hasOwn(r,s))continue;const e=r[s];if(typeof e=="object")o[s]=n(e);else if(typeof e=="string"){const t=[],a=[];let c=0;for(;~c;){const l=e.indexOf("{",c);if(!~l){t.push(e.slice(c));break}t.push(e.slice(c,l));const i=e.indexOf("}",l);a.push(e.slice(l+1,i)),c=i+1}if(!a.length)continue;o[s]=l=>{let i=t[0];for(let f=0;f<a.length;f++)i+=l[a[f]]+t[f+1];return i}}}return o}return this.tsxCache=n(this.locale)}t(n,r){let o=this.locale;for(const s of n.split("."))if(o=o[s],this.devMode&&typeof o>"u")return console.error(`Unexpected locale key: ${n}`),n;if(r){if(this.devMode){const s=Array.from(o.matchAll(/\{(\w+)\}/g),([,e])=>e).filter(e=>!Object.hasOwn(r,e));s.length&&console.error(`Missing locale parameters: ${s.join(", ")} at ${n}`)}for(const[s,e]of Object.entries(r)){const t=`{${s}}`;this.devMode&&(o.includes(t)||console.error(`Unexpected locale parameter: ${s} at ${n}`)),o=o.replace(t,e.toString())}}return o}}let g=await window.fetch(`/assets/locales/${d}.${x}.json`).then(u=>u.json(),()=>null);const m=p(new w(g,!1));function v(u){m.locale=u}export{m as i18n,v as updateI18n};
